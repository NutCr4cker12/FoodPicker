{"version":3,"sources":["theme.js","App/AppActions.js","App/Header.js","App/Message.js","core/NavItem.js","App/Nav.js","api.js","App/profile.js","App/App.js","signin/SignIn.js","home/home.js","foods/FilterDialog.js","core/BoldSearch.js","foods/foodAction.js","foods/Search.js","core/combineDates.js","core/Table.js","core/BackDialog.js","foods/foodEdit.js","foods/SelectedFood.js","foods/Foods.js","payments/paymentAction.js","payments/MailDialog.js","payments/TableRowCheckBox.js","payments/payments.js","pending-payments/MarkPendingPayment.js","minermonitor/BinanceMonitor.js","core/SwibeTabs.js","minermonitor/NHMonitor.js","minermonitor/ProfitabilityMonitor.js","minermonitor/MonitorDashboard.js","App/drawerReducer.js","App/profileReducer.js","foods/foodReducers.js","payments/paymentReducer.js","reducers.js","App/AppReducer.js","App/userReducer.js","index.js"],"names":["defaultTheme","createMuiTheme","muiTheme","palette","primary","main","green","secondary","error","red","overrides","MuiPaper","root","flexBasis","MuiTabs","vertical","maxWidth","MuiGrid","justifyContent","MuiDialogTitle","flexDirection","alignItems","separate","flexGrow","marginTop","centerDivColumn","display","spreadDivColumn","monitor","paper","width","spacing","margin","padding","backgroundColor","color","floatRight","float","background","lightBackground","AppTheme","props","ThemeProvider","theme","children","setError","message","type","setMessage","authUser","user","useStyles","makeStyles","navBar","zIndex","drawer","top","left","connect","state","drawerOpen","open","profileOpen","profile","dispatch","onOpenDrawer","onCloseDrawer","onNavigate","pathname","browserHistory","push","onOpenProfile","event","target","currentTarget","onCloseProfile","appbar","mobileNavIcon","profileButton","location","classes","_id","IconButton","onClick","style","fontSize","edge","AppBar","position","className","Toolbar","text","app","err","onClose","Snackbar","Boolean","autoHideDuration","elevation","variant","severity","path","icon","ListItem","button","key","ListItemIcon","ListItemText","capitalCase","menuItems","Divider","role","Drawer","List","users","email","password","authenticate","strategy","logout","getSorting","sort","s","Object","keys","forEach","value","name","convertName","convertFilters","filters","f","d","assign","nins","length","map","x","parseInt","split","$nin","foodService","service","foods","page","search","limit","sorting","query","$skip","$limit","$sort","$search","find","food","create","id","patch","remove","Promise","resolve","reject","then","result","mainTypes","sideTypes","dayTypes","Array","data","maintype","sidetype","Set","side","day","lasteaten","$lasteaten","res","paymentsService","payments","payment","paid","pendingPaymentsService","pendingPayments","get","pending","hwinfoApi","nhApi","binanceApi","anchorEl","anchor","onSignOut","timeout","setTimeout","clearTimeout","catch","keepMounted","disableAutoFocus","MenuItem","disabled","opacity","isQuest","App","profileMenu","this","CssBaseline","React","Component","TextField","paddingRight","onSignIn","indexOf","onSignInGoogle","onResetPassword","useState","setEmail","setPassword","submitHanlder","preventDefault","Paper","subheader","ListSubheader","onSubmit","label","fullWidth","onChange","e","helperText","Button","startIcon","marginLeft","marginRight","padded","FilterDialog","title","filterType","setFilters","sorted","toLowerCase","isAsc","isDesc","BasicContent","FormControlLabel","toUpperCase","control","Checkbox","checked","CookTimeContent","speed","$lt","isCookingTime","Dialog","DialogTitle","DialogContent","FormControl","component","FormGroup","endIcon","DialogActions","boldSearch","bolded","i","selectFood","setEditFood","setErrors","errors","setOptions","options","center","searchDiv","btnDiv","div","searchOptions","onSetOptions","$regex","console","log","onSelectFood","searchState","setSearchState","Box","Autocomplete","getOptionLabel","option","renderOption","renderInput","params","InputProps","rest","startAdornment","InputAdornment","placeholder","setSearch","dayMs","getShortTime","date","short","getDate","m","getMonth","year","getFullYear","toString","substr","getDateText","start","end","ago","numDays","Math","floor","days","today","Date","diff","round","w","getDateTimeDifferenceString","timestamp","diffSeconds","toFixed","slice","combineDates","dates","maxLength","a","b","arr","firstDate","latestDate","paddingLeft","highlight","lighten","light","dark","toolBar","toolBarTitle","visuallyHidden","border","clip","height","overflow","minWidth","MyTable","setAnchorEl","columns","setSort","setLimit","onAddFood","setPage","setFilterOpen","clearFilters","count","total","pager","ClearFiltersMenu","getSortDirection","SortableHeader","headerName","TableSortLabel","active","direction","handleChange","FilterableHeader","tableHeaders","TableHead","TableRow","TableCell","align","sortDirection","columnNameToFilter","tableBody","TableBody","hover","join","timeseaten","time","foodamount","Typography","Tooltip","Fab","size","TableContainer","Table","TablePagination","rowsPerPage","onChangeRowsPerPage","rowsPerPageOptions","onChangePage","newPage","container","onCancel","onOk","cancelText","okText","oncancel","selectFieldContainer","selectField","addButton","common","white","sideType","dialogContainer","distDayTypes","distincts","foodEditOpen","distMainTypes","distSideTypes","onSetEditFood","onDeleteFood","onSaveFood","foodEdit","onUpdate","mainType","setMainType","foodAmount","setFoodAmount","setSideTypes","setName","link","recipe","setRecipe","eaten","setEaten","cookTime","setCookTime","deleteOpen","setDeleteOpen","SelectField","types","select","sideTypeElement","includes","InputLabel","Select","multiple","multiline","input","OutlinedInput","renderValue","FormHelperText","nameElement","speedElement","RegExp","test","recipeElement","eatenElement","editContent","Fragment","deleteFood","noValidate","autoFocus","BackDialog","spread","centerColumns","datePickerTextfield","moment","locale","updateLocale","week","dow","doy","selectedFood","latestFood","onFoodSelection","latestFoodInfo","lastDate","startDate","valueOf","endDate","getLatestFoodInfo","setStartDate","setEndDate","historyContent","selectContent","Link","href","utils","MomentUtils","DatePicker","format","views","minDate","showTodayButton","_d","animateYearScrolling","TextFieldComponent","toDateString","currDay","newDay","concat","defaultFood","onRefresh","setOpenFilter","initFilters","filterOpen","useEffect","p","filter","n","setDeleteId","createDefaultContent","markPaidId","paymentText","notes","amount","oDate","month","formatDate","imageName","url","process","TableRowCheckBox","toolTipText","rowData","toMailList","mailedAndPaid","mailed","mailedAndPending","notMailedNoPDF","imageData","checkedIcon","spacings","datePickerTextfieldWide","datePickerTextfieldSmall","tableIcon","sendMailButton","yearStart","getUTCFullYear","yearEnd","deleteId","distinctNotes","getData","$gt","createdAt","onGetData","onAddPayment","onSetDeleteId","onDeletePayment","onGetDistinctNotes","allNotes","onSendMail","paymentList","index","perMonth","setDate","setAmount","note","setNote","autoCompleteKey","setAutoCompleteKey","image","setImage","inputRef","setInputRef","setToMailList","reduce","downloadImage","document","createElement","download","click","datePicker","setValue","maxDate","endAdornment","addPayment","replace","freeSolo","window","confirm","parseFloat","handleAddPayment","table","isMarked","ids","pendingEntity","content","encodeURIComponent","openOnMail","formatNotes","handleMailList","accept","ref","elem","FileReader","getElementById","files","selectedFile","fileReader","onload","readAsDataURL","alert","loadFile","MarkPendingPayments","dialogOpen","seconds","setState","timer","closeAndRedirect","newSeconds","close","alreadyMarked","horizontal","up","down","parseBinanceData","symbols","parsed","usdeur","usdeurSymbol","symbol","price","lastPrice","changePrice","priceChange","changePercent","priceChangePercent","SYMBOLS","BinanceMonitor","refresh","setData","fetchData","useCallback","hiddenTabRoot","visibility","minHeight","TabPanel","other","hidden","aria-labelledby","SwibeTabs","panels","hideTabs","tabProps","tabValue","setTabValue","tabClasses","Tabs","_","Tab","onChangeIndex","panelContent","labelContainer","textAlign","statusContainer","right","labelStyle","lineHeight","arcplotStyle","timeLabelsContainer","timelabel","gpuContainer","gpuInnerContainer","gpuLabelDiv","PI","parseData","devices","miningRigs","deviceType","enumName","powerUsage","status","description","speeds","totalSpeed","c","Number","devicesStatuses","DISABLED","profitabilityBTC","totalProfitability","statusTime","GenerateData","radiusStart","idealMin","idealMax","absMin","absMax","angle","absMAx","getColor","angle0","radius0","radius","NHMonitor","combData","setCombData","hwinfoData","setRefresh","labels","generatedData","setGeneratedData","hwinfo","nh","updateTime","timeLabels","setTimeLabels","cancelled","useCustomCompareEffect","hwinfoDataTimestamp","nhTimestamp","prev","next","CustomTimeLabelCompare","combinedData","nhData","device","totalGPUPower","Power","totalPower","CPUPower","combineDatas","MemJunctTemp","prevDeps","nextDeps","isEqual","CustomCompare","GPULabel","PanelBase","overViewPanel","xDomain","yDomain","colorType","animation","damping","stiffness","radiusDomain","getLabel","JSON","stringify","gpuPanels","gpu","Temp","HotSpotTemp","Fan","reverse","marginBottom","profitabilityContainer","profitabilityProjectorContainer","profitLabelStyle","centered","tabRoot","whiteLabel","tryGetBinancePrice","binanceData","ProfitabilityMonitor","negatePowerCost","setNegatePowerCost","powerCost","setPowerCost","profits","setProfits","profitPerDay","powerConsumptionWH","negatePower","powerCostDaily","dailyProfit","profitabilityEUR","profitabilityWeek","profitabilityMonth","profitabilityYear","powerCostPercentage","calculateProfitability","isNaN","isArray","nextPrice","prevPrice","P","P2","profitPercentage","profitabilityPanel","isFinite","dispaly","changePowerCostPanel","powerCostLabel","InputLabelProps","refreshButtonContainer","MinerMonitor","setHWinfoData","setBinanceData","setNHData","drawerState","profileMenuState","foodState","filtersOpen","paymentState","combineReducers","action","isOpen","newState","store","createStore","reducers","feathers","configure","superagent","authentication","storage","localStorage","enterHandler","getState","handlePath","initRender","ReactDOM","render","history","onEnter","Home","SignIn","Foods","Payments","MarkPendingPayment","reAuthenticate","r"],"mappings":"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","file":"static/js/main.f973e71f.chunk.js","sourcesContent":["import React from 'react'\r\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { green, red } from '@material-ui/core/colors'\r\n\r\nconst defaultTheme = createMuiTheme({})\r\n\r\nconst muiTheme = createMuiTheme({\r\n\tpalette: {\r\n\t\t// primary: green,\r\n\t\tprimary: {\r\n\t\t\tmain: green[800]\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#fffffF\"\r\n\t\t},\r\n\t\terror: red\r\n\t},\r\n\toverrides: {\r\n\t\tMuiPaper: {\r\n\t\t\troot: {\r\n\t\t\t\t// flex: 1,\r\n\t\t\t\tflexBasis: \"auto\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiTabs: {\r\n\t\t\tvertical: {\r\n\t\t\t\tmaxWidth: \"80px\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiGrid: {\r\n\t\t\troot: {\r\n\t\t\t\tjustifyContent: \"space-evenly\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiDialogTitle: {\r\n\t\t\troot: {\r\n\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\talignItems: \"center\",\r\n\t\t\t\tjustifyContent: \"space-between\"\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tseparate: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\troot: {\r\n\t\tmarginTop: \"0rem\"\r\n\t},\r\n\tcenterDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspreadDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t},\r\n    monitor: {\r\n        paper: {\r\n            width: `calc(100% - ${defaultTheme.spacing(3)})`,\r\n            margin: defaultTheme.spacing(2),\r\n            padding: defaultTheme.spacing(1),\r\n            backgroundColor: \"#333\",\r\n            color: \"#fff\",\r\n        },\r\n        floatRight: {\r\n            float: \"right\"\r\n        },\r\n        background: {\r\n            background: \"#121212\",\r\n            color: \"#fff\",\r\n        },\r\n        lightBackground: {\r\n            backgroundColor: \"#333\",\r\n            color: \"#fff\",\r\n        }\r\n    }\r\n})\r\n\r\n\r\nexport const AppTheme = (props) => {\r\n\r\n\treturn (\r\n\t\t<ThemeProvider theme={muiTheme}>\r\n\t\t\t<div>\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t</ThemeProvider>\r\n\t)\r\n}\r\n","export const setError = message => {\r\n\treturn { type: 'SET_ERROR', message }\r\n  }\r\n\r\n  export const setMessage = message => {\r\n\treturn { type: 'SET_MESSAGE', message }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  \r\n  export const openDrawer = () => {\r\n\treturn { type: 'OPEN_DRAWER' }\r\n  }\r\n  \r\n  export const closeDrawer = () => {\r\n\treturn { type: 'CLOSE_DRAWER' }\r\n  }\r\n  \r\n  export const openProfile = (target) => {\r\n\treturn { type: \"OPEN_PROFILE_MENU\", target }\r\n  }\r\n  \r\n  export const closeProfile = () => {\r\n\treturn { type: \"CLOSE_PROFILE_MENU\" }\r\n  }\r\n  \r\n  export const authUser = user => {\r\n\treturn { type: 'AUTH', user }\r\n  }\r\n  \r\n  export const deauthUser = () => {\r\n\treturn { type: 'DEAUTH' }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  ","import React from 'react';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { connect } from 'react-redux';\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { closeDrawer, openDrawer, openProfile, closeProfile } from './AppActions'\r\n\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tnavBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\tmargin: 0,\r\n\t},\r\n\tseparate: theme.separate\r\n}))\r\n\r\nconst Header = ({ location, user, drawerOpen, onOpenDrawer, onCloseDrawer, profileOpen, onOpenProfile, onCloseProfile }) => {\r\n\tconst classes = useStyles();\r\n\tlet appbar, mobileNavIcon, profileButton\r\n\r\n\tprofileButton = (\r\n\t\tuser._id != null &&\r\n\t\t<div>\r\n\t\t\t<IconButton onClick={profileOpen ? onCloseProfile : onOpenProfile} style={{ color: 'white' }}>\r\n\t\t\t\t<AccountCircleIcon fontSize=\"large\" />\r\n\t\t\t</IconButton>\r\n\t\t</div>\r\n\t)\r\n\r\n\tif (location.pathname === '/signin') {\r\n\t\t//do nothing\r\n\t}\r\n\telse\r\n\t\tmobileNavIcon =\r\n\t\t\t<IconButton edge=\"start\" style={{ color: 'white' }} onClick={() => {drawerOpen ? onCloseDrawer() : onOpenDrawer()}} >\r\n\t\t\t\t<MenuIcon />\r\n\t\t\t</IconButton>\r\n\r\n\tappbar = (\r\n\t\t<AppBar position=\"static\" className={classes.navBar}>\r\n\t\t\t<Toolbar>\r\n\t\t\t\t{mobileNavIcon}\r\n\t\t\t\t<div className={classes.separate} />\r\n\t\t\t\t{profileButton}\r\n\t\t\t</Toolbar>\r\n\t\t</AppBar>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t{appbar}\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open,\r\n\t\tprofileOpen: state.profile.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonOpenDrawer: () => {\r\n\t\t\tdispatch(openDrawer())\r\n\t\t},\r\n\t\tonCloseDrawer: () => {\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonOpenProfile: (event) => {\r\n\t\t\tdispatch(openProfile(event.currentTarget))\r\n\t\t},\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)","import React from 'react'\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setMessage } from './AppActions'\r\n\r\nconst Message = ({ text, err, onClose }) => (\r\n\t<Snackbar\r\n\t\topen={Boolean(err || text)}\r\n\t\tautoHideDuration={3000}\r\n\t\tonClose={onClose}\r\n\t\t// anchorOrigin={{horizontal: \"center\", vertical: \"top\"}}\r\n\t>\r\n\t\t<MuiAlert\r\n\t\t\televation={6}\r\n\t\t\tvariant=\"filled\"\r\n\t\t\tonClose={onClose}\r\n\t\t\tseverity={err ? \"error\" : text ? \"success\" : \"info\"}\r\n\t\t>\r\n\t\t\t{err ? err : text ? text : \"\"}\r\n\t\t</MuiAlert>\r\n\t</Snackbar>\r\n)\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\ttext: state.app.message,\r\n\t\terr: state.app.err\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonClose: () => {\r\n\t\t\tdispatch(setMessage(\"\"))\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Message)\r\n","import React from 'react'\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { capitalCase } from \"capital-case\";\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeDrawer } from '../App/AppActions'\r\n\r\nconst NavItem = (props) => {\r\n\tconst { path, icon, onNavigate } = props;\r\n\r\n\treturn (\r\n\t\t<ListItem button key={path} onClick={() => onNavigate(`/${path}`)}>\r\n\t\t\t<ListItemIcon>{icon}</ListItemIcon>\r\n\t\t\t<ListItemText primary={capitalCase(path)} />\r\n\t\t</ListItem>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NavItem)","import React from 'react';\r\n\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\n\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { closeDrawer, openDrawer } from './AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst Nav = ({user, drawerOpen, onOpenDrawer, onCloseDrawer, onNavigate}) => {\r\n\tlet menuItems = []\r\n\r\n\r\n\tif (user._id) {\r\n\t\tmenuItems.push(<Divider key=\"div1\" />)\r\n\t\tmenuItems.push(<NavItem key={1} path={\"home\"} icon={<HomeIcon/>} />)\r\n\t\tmenuItems.push(<NavItem key={2} path=\"foods\" icon={<FastfoodIcon />} />)\r\n\t\tif (user.role === \"admin\") {\r\n            menuItems.push(<NavItem key={4} path=\"payments\" icon={<PaymentIcon />} />)\r\n            menuItems.push(<NavItem key={5} path=\"minermonitor\" icon={<TimelineIcon />} />)\r\n\t\t}\r\n\t\tmenuItems.push(<Divider key=\"div2\" />)\r\n\r\n\t\treturn (\r\n\t\t\t<Drawer \r\n\t\t\t\topen={drawerOpen}\r\n\t\t\t\tonClose={open => open? onCloseDrawer() : onOpenDrawer()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{menuItems}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Drawer>\r\n\t\t)\r\n\t}\r\n\treturn (<div/>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t  onOpenDrawer: () => {\r\n\t\tdispatch(openDrawer())\r\n\t  },\r\n\t  onCloseDrawer: () => {\r\n\t\tdispatch(closeDrawer())\r\n\t  },\r\n\t  onNavigate: pathname => {\r\n\t\tbrowserHistory.push(pathname)\r\n\t\tdispatch(closeDrawer())\r\n\t  }    \r\n\t}\r\n  }\r\n  \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav)","import app from '.'\r\n\r\nconst userService = () => app.service('v1/users')\r\nexport const users = {\r\n\tlist: query => {\r\n\t\treturn userService().find({ query: query });\r\n\t},\r\n\tget: id => {\r\n\t\tif (!id) {\r\n\t\t\treturn app.get('authentication');\r\n\t\t}\r\n\t\treturn userService().get(id)\r\n\t},\r\n\tcreate: user => userService().create(user),\r\n\tpatch: (id, user) => userService().patch(id, user),\r\n\tremove: id => userService().remove(id),\r\n\tauthenticate: () => app.authentication.reAuthenticate(true),\r\n\tsignIn: (email, password) => app.authenticate({ strategy: 'local', email, password }),\r\n\tsignOut: () => app.logout()\r\n}\r\n\r\nconst getSorting = (sort) => { // desc = -1, asc = 1\r\n\tconst s = {}\r\n\tconst convertName = (name) => {\r\n\t\tswitch (name) {\r\n\t\t\tcase \"main\":\r\n\t\t\t\treturn \"maintype\"\r\n\t\t\tcase \"side\":\r\n\t\t\t\treturn \"sidetype\"\r\n\t\t\tcase \"food\":\r\n\t\t\t\treturn \"name\"\r\n\t\t\tcase \"food amount\":\r\n\t\t\t\treturn \"foodamount\"\r\n\t\t\tcase \"cooking time\":\r\n\t\t\t\treturn \"time\"\r\n\t\t\tcase \"Last Eaten\":\r\n\t\t\t\treturn \"lasteaten\"\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"timeseaten\"\r\n\t\t}\r\n\t}\r\n\tObject.keys(sort).forEach(key => {\r\n\t\tconst value = sort[key];\r\n\t\tif (value === \"asc\") {\r\n\t\t\tsort[key] = 1\r\n\t\t} else if (value === \"desc\") {\r\n\t\t\tsort[key] = -1\r\n\t\t}\r\n\t\ts[convertName(key)] = sort[key]\r\n\t})\r\n\treturn s\r\n}\r\n\r\nconst convertFilters = (filters) => {\r\n\tvar f = {}\r\n\tObject.keys(filters).forEach(type => {\r\n\t\tvar d = {}\r\n\t\tif (type === \"speed\") {\r\n\t\t\td[\"time\"] = filters[type]\r\n\t\t\tf = Object.assign(f, d)\r\n\t\t} else {\r\n\t\t\tvar nins = []\r\n\t\t\tObject.keys(filters[type]).forEach(name => {\r\n\t\t\t\tif (filters[type][name] === \"$nin\") nins.push(name)\r\n\t\t\t})\r\n\t\t\tif (nins.length) {\r\n\t\t\t\tif (type === \"day\") {\r\n\t\t\t\t\tnins = nins.map(x => parseInt(x.split(\" \")[0]))\r\n\t\t\t\t\td[\"foodamount\"] = { $nin: nins }\r\n\t\t\t\t} else {\r\n\t\t\t\t\td[`${type}type`] = { $nin: nins }\r\n\t\t\t\t}\r\n\t\t\t\tf = Object.assign(f, d)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\treturn f\r\n}\r\n\r\nconst foodService = () => app.service('v1/foods')\r\nexport const foods = {\r\n\tlist: (filters, page, sort, search = \"\", limit) => {\r\n\t\tconst f = convertFilters(filters)\r\n\t\tconst sorting = getSorting(sort)\r\n\t\tvar query = Object.assign(f, {\r\n\t\t\t$skip: ((page - 1) < 0 ? 0 : page) * 10,\r\n\t\t\t$limit: limit,\r\n\t\t\t$sort: sorting,\r\n\t\t})\r\n\t\tif (search) query = Object.assign(query, { $search: search })\r\n\t\treturn foodService().find({ query: query })\r\n\t},\r\n\tget: id => foodService().get(id),\r\n\tcreate: food => foodService().create(food),\r\n\tpatch: (id, food) => foodService().patch(id, food),\r\n\tremove: id => foodService().remove(id),\r\n\tfind: query => foodService().find({ query: query }),\r\n\tdistincts: () => {\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t\tfoodService().find({ query: { $limit: 10000 } })\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tlet mainTypes = []\r\n\t\t\t\t\tlet sideTypes = []\r\n\t\t\t\t\tconst dayTypes = [...Array(4).keys()].map(d => `${d + 1} day`)\r\n\t\t\t\t\tresult.data.forEach(f => {\r\n\t\t\t\t\t\tmainTypes.push(f.maintype)\r\n\t\t\t\t\t\tf.sidetype.forEach(s => sideTypes.push(s))\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tmain: [...new Set(mainTypes)],\r\n\t\t\t\t\t\tside: [...new Set(sideTypes)],\r\n\t\t\t\t\t\tday: dayTypes\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t)\r\n\t},\r\n\tlastEaten: () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tfoodService().find({ query: {\r\n\t\t\t\t$sort: {\r\n\t\t\t\t\tlasteaten: -1\r\n\t\t\t\t},\r\n\t\t\t\t$lasteaten: true\r\n\t\t\t}}).then(res => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\n\r\nconst paymentsService = () => app.service('v1/payments')\r\nexport const payments = {\r\n\tlist: query => paymentsService().find({ query: query }),\r\n\tget: id => paymentsService().get(id),\r\n\tcreate: payment => paymentsService().create({ ...payment, paid: false }),\r\n\tpatch: (id, payment) => paymentsService().patch(id, payment),\r\n\tremove: id => paymentsService().remove(id)\r\n}\r\n\r\nconst pendingPaymentsService = () => app.service('v1/pending-payments')\r\nexport const pendingPayments = {\r\n\tlist: query => pendingPaymentsService().find({ query: query }),\r\n\tget: id => pendingPaymentsService().get(id),\r\n\tcreate: pending => pendingPaymentsService().create(pending)\r\n}\r\n\r\nconst hwinfoService = () => app.service('v1/hwinfo')\r\nexport const hwinfoApi = {\r\n    list: query => hwinfoService().find({ query: query })\r\n}\r\n\r\nconst nhService = () => app.service('v1/nh')\r\nexport const nhApi = {\r\n    get: () => nhService().get({})\r\n}\r\n\r\nconst binanceService = () => app.service('v1/binance')\r\nexport const binanceApi = {\r\n    find: (query) => binanceService().find({ query: query })\r\n}","import React from 'react'\r\n\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider'\r\n\r\nimport ActionExitToApp from '@material-ui/icons/ExitToApp';\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { closeProfile, setMessage, deauthUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst profile = ({ user, profileOpen, onCloseProfile, anchorEl, onSignOut }) => {\r\n\r\n\treturn (\r\n\t\t<Menu\r\n\t\t\tanchorEl={anchorEl}\r\n\t\t\tkeepMounted\r\n\t\t\topen={profileOpen}\r\n\t\t\tonClose={onCloseProfile}\r\n\t\t\tdisableAutoFocus={true}\r\n\t\t>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={`Signed in as: ${user.isQuest ? \" Quest\" : \"\"}`} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={user.name} secondary={user.email} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<Divider />\r\n\t\t\t<MenuItem onClick={() => {\r\n\t\t\t\tonCloseProfile()\r\n\t\t\t\tonSignOut()\r\n\t\t\t}}>\r\n\t\t\t\t<ListItemIcon><ActionExitToApp /></ListItemIcon>\r\n\t\t\t\t<ListItemText primary='Sign Out' />\r\n\t\t\t</MenuItem>\r\n\t\t</Menu>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tprofileOpen: state.profile.open,\r\n\t\tanchorEl: state.profile.anchor\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t},\r\n\t\tonSignOut: () => {\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign out.'))\r\n\t\t\t}, 5000)\r\n\t\t\tusers.signOut()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed out.'))\r\n\t\t\t\t\tdispatch(deauthUser())\r\n\t\t\t\t\t// eslint-disable-next-line no-restricted-globals\r\n\t\t\t\t\tbrowserHistory.push('/signin');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage(err.message))\r\n\t\t\t\t})\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(profile)\r\n","import React from 'react'\r\nimport { AppTheme } from '../theme'\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Header from './Header'\r\nimport Message from './Message'\r\n\r\nimport Nav from './Nav'\r\nimport Profile from './profile'\r\n\r\nexport default class App extends React.Component {\r\n\r\n    render() {\r\n        let navBar, profileMenu;\r\n        if (this.props.location.pathname !== \"/signin\") {\r\n            navBar = <Nav />\r\n            profileMenu = <Profile />\r\n        }\r\n        return (\r\n            <AppTheme>\r\n                <div>\r\n                    <CssBaseline />\r\n                    <Header location={this.props.location} />\r\n                    {navBar}\r\n                    {profileMenu}\r\n                    {this.props.main}\r\n                    {this.props.children}\r\n                    <Message />\r\n                </div>\r\n            </AppTheme>\r\n        )\r\n    }\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport List from '@material-ui/core/List'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ActionLock from '@material-ui/icons/Lock'\r\n\r\n// import { CookieDisclaimer } from '../home/CookieDisclaimer'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { setMessage, setError, authUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tmarginTop: \"8rem\",\r\n\t\tdisplay: 'flex',\r\n\t\tmargin: theme.spacing(2),\r\n\t},\r\n\tTextField: {\r\n\t\tdisplay: \"flex\",\r\n\t\tmargin: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(4)\r\n\t}\r\n}))\r\n\r\nfunction SignIn(props) {\r\n\tconst classes = useStyles();\r\n\tconst [error] = useState();\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\r\n\tconst { onSignIn } = props;\r\n\r\n\tconst submitHanlder = event => {\r\n\t\tevent.preventDefault()\r\n\t\tonSignIn(email, password)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper elevation={3} style={{ width: \"100%\"}}>\r\n\t\t\t\t<List subheader={<ListSubheader>Sign In</ListSubheader>}>\r\n\t\t\t\t\t<form onSubmit={submitHanlder} style={{ marginTop: '24px' }}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Email\"\r\n                                value={email}\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 1 || error === 3 ? \"E-mail is required\" : error === 4 ? 'E-mail does not contain \"@\" symbol' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Password\"\r\n                                value={password}\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 2 || error === 3 ? 'Password is required' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tstartIcon={<ActionLock />}\r\n\t\t\t\t\t\t\t\tonClick={submitHanlder}\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t>Sign In</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"submit\" style={{ display: \"none\" }} />\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</List>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSignIn: (email, password) => {\r\n\t\t\tif (email.length === 0 && password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail and password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(3) }\r\n\t\t\t}\r\n\t\t\tif (email.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(1) }\r\n\t\t\t}\r\n\t\t\tif (email.indexOf('@') === -1) {\r\n\t\t\t\tdispatch(setMessage('E-mail does not contain \"@\" symbol'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(4) }\r\n\t\t\t}\r\n\t\t\tif (password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('Password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(2) }\r\n\t\t\t}\r\n\t\t\tdispatch(setMessage('Signing in...'))\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign in.'))\r\n\t\t\t}, 5000)\r\n\t\t\treturn users.signIn(email, password)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed in.'));\r\n\t\t\t\t\tdispatch(authUser(result.user));\r\n\t\t\t\t\tbrowserHistory.push('/home')\r\n\t\t\t\t\treturn { user: result.user, error: null }\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tif (err.name === 'MongoError') {\r\n\t\t\t\t\t\tdispatch(setMessage('Server error. Try again later.'))\r\n\t\t\t\t\t} else if (err.name === 'NotAuthenticated') {\r\n\t\t\t\t\t\tdispatch(setMessage('Unable to sign in. Invalid e-mail or password.'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatch(setError('Error: ' + err.name + err.message))\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbrowserHistory.push('/')\r\n\t\t\t\t\tsetTimeout(() => browserHistory.push('/signin'), 10)\r\n\t\t\t\t\treturn { user: null, error: err };\r\n\t\t\t\t})\r\n\t\t},\r\n\t\tonSignInGoogle: () => {\r\n\t\t\t//   dispatch(setMessage('Signing in...'))\r\n\t\t\t//   return users.signInGoogle()\r\n\t\t},\r\n\t\tonResetPassword: () => {\r\n\t\t\t//   browserHistory.push('/passwordreset')\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\r\n","import React from 'react'\r\n\r\nimport List from '@material-ui/core/List';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { closeDrawer } from '../App/AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\tmarginTop: \"10rem\",\r\n\t\tmarginLeft: \"1rem\",\r\n\t\tmarginRight: \"1rem\"\r\n\t}\r\n}))\r\n\r\nconst Home = (props) => {\r\n\tconst classes = useStyles()\r\n\tconst { user } = props;\r\n\tlet menuItems = []\r\n\r\n\tmenuItems.push(<NavItem key={0} path=\"foods\" icon={<FastfoodIcon />} />)\r\n\tif (user.role === \"admin\") {\r\n        menuItems.push(<NavItem key={2} path=\"payments\" icon={<PaymentIcon />} />)\r\n        menuItems.push(<NavItem key={3} path=\"minermonitor\" icon={<TimelineIcon />} />)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<List className={classes.paper}>\r\n\t\t\t\t{menuItems}\r\n\t\t\t</List>\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)","import React from 'react'\r\n\r\nimport {\r\n    Dialog,\r\n    DialogActions,\r\n    Button,\r\n    DialogTitle,\r\n    DialogContent,\r\n    FormControl,\r\n    FormGroup,\r\n    FormControlLabel,\r\n    Checkbox,\r\n    Divider\r\n} from '@material-ui/core';\r\n\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    padded: {\r\n        padding: theme.spacing(2)\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1)\r\n    }\r\n}))\r\n\r\nconst FilterDialog = props => {\r\n    const classes = useStyles()\r\n    const { open, onClose, title, sort, filters, filterType, setFilters } = props\r\n    const type = open ? filters[filterType] : {}\r\n\r\n    const onSelectAll = () => {\r\n        Object.keys(type).forEach(x => {\r\n            filters[filterType][x] = \"$in\"\r\n        })\r\n        setFilters(filters, sort)\r\n    }\r\n\r\n    const sorted = typeof (title) === \"string\" ? sort[title.toLowerCase()] : false\r\n    const isAsc = sorted && sorted > 0\r\n    const isDesc = sorted && sorted < 0\r\n\r\n    const handleSortChange = (name) => {\r\n        if (!sorted) sort[name] = 1\r\n        else if (isAsc) sort[name] = -1\r\n        else delete sort[name]\r\n        setFilters(filters, sort)\r\n    }\r\n\r\n    const BasicContent = () => (\r\n        Object.keys(type).map(x => (\r\n            <FormControlLabel\r\n                key={x}\r\n                label={x.toUpperCase()}\r\n                control={\r\n                    <Checkbox\r\n                        color=\"primary\"\r\n                        checked={type[x] === \"$in\"}\r\n                        onChange={() => {\r\n                            filters[filterType][x] = type[x] === \"$in\" ? \"$nin\" : \"$in\";\r\n                            setFilters(filters, sort);\r\n                        }} />}\r\n            />\r\n        ))\r\n    )\r\n\r\n    const CookTimeContent = () => (\r\n        [\r\n            { label: \"< 30 min\", value: 30 },\r\n            { label: \"< 60 min\", value: 60 },\r\n            { label: \"< 90 min\", value: 90 },\r\n            { label: \"< 180 min\", value: 180 },\r\n        ].map(x => (\r\n            <FormControlLabel\r\n                key={x.label}\r\n                label={x.label}\r\n                control={\r\n                    <Checkbox\r\n                        color=\"primary\"\r\n                        checked={filters.speed[\"$lt\"] >= x.value}\r\n                        onChange={() => {\r\n                            filters.speed = { $lt: x.value }\r\n                            setFilters(filters, sort)\r\n                        }} />\r\n                }\r\n            />\r\n        ))\r\n    )\r\n\r\n    const isCookingTime = title === \"Cooking Time\"\r\n\r\n    return (\r\n        <Dialog open={open} onClose={() => onClose(filters, sort)} maxWidth={\"xs\"} >\r\n            <DialogTitle>\r\n                {title}\r\n            </DialogTitle>\r\n            <DialogContent >\r\n                {!isCookingTime &&\r\n                    <>\r\n                        <Button color=\"primary\" variant=\"outlined\" onClick={onSelectAll} className={classes.margin} >\r\n                            Select All\r\n                        </Button>\r\n                        <Divider className={classes.margin} />\r\n                    </>\r\n                }\r\n                <FormControl component=\"fieldset\" className={classes.padded} >\r\n                    <FormGroup>\r\n                        {isCookingTime ? <CookTimeContent /> : <BasicContent />}\r\n                    </FormGroup>\r\n                </FormControl>\r\n                <Divider className={classes.margin} />\r\n                <Button\r\n                    color=\"primary\"\r\n                    variant={sorted ? \"contained\" : \"outlined\"}\r\n                    endIcon={isAsc ? <ArrowUpwardIcon /> : (isDesc ? <ArrowDownwardIcon /> : null)}\r\n                    onClick={() => handleSortChange(title.toLowerCase())}\r\n                >\r\n                    Sort by\r\n                </Button>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button color=\"primary\" onClick={() => onClose(filters, sort)}>\r\n                    close\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default FilterDialog","import React from 'react'\r\n\r\nexport const boldSearch = (text, search) => {\r\n\tif (!text || !search) return text;\r\n\tsearch = search.toLowerCase()\r\n\ttext = text.toLowerCase()\r\n\tconst split = text.split(search);\r\n\tconst bolded = split.map((x, i) => {\r\n\t\tif (i === split.length - 1) return x;\r\n\t\treturn (<span key={i}>{x}<b>{search}</b></span>)\r\n\t})\r\n\treturn (\r\n\t\t<span>\r\n\t\t\t{bolded.map(x => x)}\r\n\t\t</span>\r\n\t)\r\n}","export const setFilters = (filters) => {\r\n\treturn { type: \"SET_FILTERS\", filters }\r\n}\r\n\r\nexport const selectFood = (food) => {\r\n\treturn { type: \"SELECT_FOOD\", food}\r\n}\r\n\r\nexport const setFoods = (foods) => {\r\n\treturn { type: \"SET_FOODS\", foods}\r\n}\r\n\r\nexport const onSetOpenFilters = () => {\r\n\treturn { type: \"SET_OPEN_FILTERS\"}\r\n}\r\n\r\nexport const distincts = (res) => {\r\n\treturn { type: \"SET_DISTINCTS\", res}\r\n}\r\n\r\nexport const setEditFood = (food) => {\r\n\treturn { type: \"EDIT_FOOD\", food}\r\n}\r\n\r\nexport const setErrors = (errors) => {\r\n\treturn { type: \"SET_ERRORS\", errors}\r\n}\r\n\r\nexport const setLatestFood = (food) => {\r\n\treturn { type: \"SET_LATEST_FOOD\", food}\r\n}\r\n\r\nexport const setOptions = (options) => {\r\n\treturn { type: \"SET_SEARCH_OPTIONS\", options }\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport Box from '@material-ui/core/Box';\r\nimport { boldSearch } from '../core/BoldSearch'\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setOptions } from './foodAction'\r\nimport { foods } from '../api'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tmaxWidth: \"300px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\",\r\n\t\twidth: \"100%\"\r\n\t},\r\n\tsearchDiv: {\r\n\t\twidth: \"60%\"\r\n\t},\r\n\tbtnDiv: {\r\n\t\twidth: \"40%\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tpadding: {\r\n\t\tpadding: theme.spacing(2)\r\n\t}\r\n}))\r\n\r\nfunction Search(props) {\r\n\tconst classes = useStyles()\r\n\tconst { search, onSelectFood, options, onSetOptions } = props\r\n\tconst [searchState, setSearchState] = useState(search)\r\n\r\n\tconst setSearch = search => {\r\n\t\tsetSearchState(search)\r\n\t\tonSetOptions(search)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box display=\"block\" justifyContent=\"center\" className={classes.padding}>\r\n\t\t\t<Autocomplete\r\n\t\t\t\toptions={options}\r\n\t\t\t\tgetOptionLabel={option => option.name}\r\n\t\t\t\trenderOption={option => boldSearch(option.name, searchState)}\r\n\t\t\t\trenderInput={params => {\r\n\t\t\t\t\tvar { InputProps, ...rest } = params;\r\n\t\t\t\t\tInputProps.startAdornment = (\r\n\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t\t\t</InputAdornment >)\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\tplaceholder=\"Search...\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tvalue={searchState}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tonChange={e => setSearch(e.target.value)}\r\n\t\t\t\t\t\t\tInputProps={InputProps}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t\tonChange={(e, value) => {\r\n\t\t\t\t\tonSelectFood(value)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t</ Box>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\toptions: state.food.searchOptions\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetOptions: search => {\r\n\t\t\tif (!search.length)\r\n\t\t\t\treturn dispatch(setOptions([]))\r\n\t\t\tconst query = { $regex: search }\r\n\t\t\tfoods.find(query)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setOptions(res.data))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Search)","const dayMs = 24 * 60 * 60 * 1000\r\n\r\nconst getShortTime = (date, short) => {\r\n    const d = date.getDate()\r\n    const m = date.getMonth() + 1\r\n    if (short) return `${d}.${m}`\r\n    const year = date.getFullYear().toString().substr(2)\r\n    return `${d}.${m}.${year}`\r\n}\r\n\r\nconst getDateText = (start, end) => {\r\n    const numDays = Math.floor((end - start) / dayMs)\r\n    const days = numDays < 2 ? \"day\" : \"days\"\r\n    const today = new Date()\r\n    const diff = Math.round((today - end) / dayMs)\r\n    var ago;\r\n    if (diff > 356) {\r\n        ago = \"Over a Year ago\"\r\n    } else if (diff > 30) {\r\n        const m = Math.round(diff / 30)\r\n        ago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n    } else if (diff > 7) {\r\n        const w = Math.round(diff / 7)\r\n        ago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n    } else if (diff > 0) {\r\n        ago = `${diff} day${diff > 1 ? \"s\" : \"\"} ago`\r\n    } else if (diff === 0) {\r\n        ago = \"today\"\r\n    } else if (diff === -1) {\r\n        ago = \"tomorrow\"\r\n    } else if (diff < -1) {\r\n        ago = `in ${diff * (-1)} days`\r\n    }\r\n    return `${ago} - ${getShortTime(start, true)}-${getShortTime(end)} (${numDays} ${days} food)`\r\n}\r\n\r\nexport const getDateTimeDifferenceString = (timestamp) => {\r\n    const now = new Date()\r\n    const diffSeconds = (now - timestamp) / 1000;\r\n    if (diffSeconds < 60)\r\n        return `${diffSeconds.toFixed(0)} s ago`\r\n    if (diffSeconds < 60 * 60)\r\n        return `${(diffSeconds / 60).toFixed(0)} min ago`\r\n    if (diffSeconds < 24 * 60 * 60)\r\n        return `${(diffSeconds / (60 * 60)).toFixed(0)} h ago`\r\n    if (diffSeconds < 7 * 24 * 60 * 60) {\r\n        const days = (diffSeconds / (24 * 60 * 60)).toFixed(0);\r\n        if (days === '1')\r\n            return `${days} day ago`\r\n        return `${days} days ago`\r\n    }\r\n    return `${timestamp.getDate()}.${timestamp.getMonth() + 1}.${timestamp.getFullYear().toString().slice(2)}`;\r\n}\r\n\r\n/**\r\n * dates = Array of date objects\r\n * return Array of strings\r\n * @param {Array} dates \r\n */\r\nconst combineDates = (dates, maxLength = 10) => {\r\n    if (!dates.length) return []\r\n    dates = dates.sort((a, b) => b - a)\r\n    const arr = []\r\n    var firstDate = dates[0]\r\n    var latestDate = dates[0]\r\n    dates.forEach((date, i) => {\r\n        if (arr.length >= maxLength) return arr\r\n        // start of new date clamp\r\n        if (latestDate - date > 2 * dayMs) {\r\n            arr.push(getDateText(firstDate, latestDate))\r\n            firstDate = date;\r\n            latestDate = date;\r\n            return\r\n        }\r\n        firstDate = date\r\n        if (i === dates.length - 1) {\r\n            arr.push(getDateText(firstDate, latestDate))\r\n        }\r\n    });\r\n    return arr\r\n}\r\nexport default combineDates","import React from 'react';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    TableSortLabel,\r\n    Toolbar,\r\n    Typography,\r\n    Tooltip,\r\n    Fab,\r\n    IconButton,\r\n    Menu,\r\n    MenuItem\r\n} from '@material-ui/core';\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport combineDates from './combineDates';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        paddingLeft: theme.spacing(2),\r\n        paddingRight: theme.spacing(1),\r\n    },\r\n    highlight:\r\n        theme.palette.type === 'light'\r\n            ? {\r\n                color: theme.palette.secondary.main,\r\n                backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n            }\r\n            : {\r\n                color: theme.palette.text.primary,\r\n                backgroundColor: theme.palette.secondary.dark,\r\n            },\r\n    toolBar: {\r\n        justifyContent: \"space-between\"\r\n    },\r\n    toolBarTitle: {\r\n        display: \"flex\",\r\n        alignItems: \"center\"\r\n    },\r\n    visuallyHidden: {\r\n        border: 0,\r\n        clip: 'rect(0 0 0 0)',\r\n        height: 1,\r\n        margin: -1,\r\n        overflow: 'hidden',\r\n        padding: 0,\r\n        position: 'absolute',\r\n        top: 20,\r\n        width: 1,\r\n    },\r\n    button: {\r\n        marginRight: theme.spacing(2),\r\n        marginLeft: theme.spacing(2),\r\n        minWidth: \"133px\",\r\n    }\r\n}));\r\n\r\n\r\nconst MyTable = (props) => {\r\n    const classes = useStyles();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const { columns, data, sort, setSort, limit, setLimit, onSelectFood, onAddFood, page, setPage, setFilterOpen, clearFilters } = props;\r\n    if (!data) return (\r\n        <div />\r\n    )\r\n\r\n    const foods = data.data\r\n    const count = data.total || 0;\r\n    const pager = count === 0 ? 0 : page;\r\n\r\n    const handleChange = (name) => {\r\n        const value = sort[name]\r\n        if (!value) sort[name] = 1\r\n        else if (value > 0) sort[name] = -1\r\n        else delete sort[name]\r\n        setSort(sort)\r\n    }\r\n\r\n    const ClearFiltersMenu = () => (\r\n        <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={() => setAnchorEl(null)}>\r\n            <MenuItem onClick={() => {\r\n                clearFilters()\r\n                setAnchorEl()\r\n            }}>\r\n                Clear Filters\r\n            </MenuItem>\r\n        </Menu>\r\n    )\r\n\r\n    const getSortDirection = name => {\r\n        const value = sort[name]\r\n        if (!value) return false;\r\n        if (value > 0) return \"asc\"\r\n        return \"desc\"\r\n    }\r\n\r\n    const SortableHeader = ({ headerName }) => (\r\n        <TableSortLabel\r\n            active={Boolean(sort[headerName])}\r\n            direction={getSortDirection(headerName) || \"asc\"}\r\n            onClick={(e) => {\r\n                e.preventDefault()\r\n                handleChange(headerName)\r\n            }}\r\n        >\r\n            {headerName}\r\n        </TableSortLabel>\r\n    )\r\n\r\n    const FilterableHeader = ({ headerName }) => (\r\n        <TableSortLabel\r\n            active={Boolean(sort[headerName])}\r\n            direction={getSortDirection(headerName) || \"asc\"}\r\n            onClick={() => setFilterOpen(headerName)}\r\n        >\r\n            {headerName}\r\n            <MoreVertIcon style={{ opacity: \"0.4\" }} />\r\n        </TableSortLabel>\r\n    )\r\n\r\n    const tableHeaders = (\r\n        <TableHead>\r\n            <TableRow>\r\n                {columns.map((name, i) => (\r\n                    <TableCell key={i}\r\n                        className={classes.root}\r\n                        align={\"left\"}\r\n                        padding=\"none\"\r\n                        sortDirection={getSortDirection(name)}\r\n                    >\r\n                        {props.columnNameToFilter[name] ?\r\n                            <FilterableHeader headerName={name} /> :\r\n                            <SortableHeader headerName={name} />}\r\n                    </TableCell>\r\n                ))}\r\n            </TableRow>\r\n        </TableHead>\r\n    )\r\n\r\n    const tableBody = (\r\n        <TableBody>\r\n            {foods.map((d, i) => (\r\n                <TableRow\r\n                    key={i}\r\n                    hover\r\n                    onClick={(e) => {\r\n                        e.preventDefault()\r\n                        onSelectFood(d)\r\n                    }}\r\n                >\r\n                    <TableCell >{d.maintype}</TableCell >\r\n                    <TableCell >{d.sidetype.join(\", \")}</TableCell>\r\n                    <TableCell >{d.name}</TableCell>\r\n                    <TableCell >{d.timeseaten}</TableCell>\r\n                    <TableCell >\r\n                        {d.lasteaten && d.lasteaten.length ? combineDates(d.lasteaten.map(x => new Date(x)), 1)[0].split(\" - \")[0] : \"\"}\r\n                    </TableCell>\r\n                    <TableCell >{d.time}</TableCell>\r\n                    <TableCell >{d.foodamount}</TableCell>\r\n                </TableRow>\r\n            ))}\r\n        </TableBody>\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            <Toolbar className={classes.toolBar}>\r\n                <div className={classes.toolBarTitle}>\r\n                    <IconButton onClick={e => setAnchorEl(e.currentTarget)}\r\n                        style={{ padding: \"0px\" }}\r\n                    >\r\n                        <MoreVertIcon style={{ opacity: \"0.4\" }} />\r\n                    </IconButton>\r\n                    <Typography variant=\"h6\" id=\"tableTitle\">\r\n                        Foods\r\n                    </Typography>\r\n                </div>\r\n                <Tooltip title=\"Add New Food\">\r\n                    <Fab color=\"primary\" size=\"medium\" onClick={() => onAddFood()}>\r\n                        <AddIcon />\r\n                    </Fab>\r\n                </Tooltip>\r\n            </Toolbar >\r\n            <ClearFiltersMenu />\r\n            <TableContainer>\r\n                <Table size={'medium'} >\r\n                    {tableHeaders}\r\n                    {tableBody}\r\n                </Table>\r\n            </TableContainer>\r\n            <TablePagination\r\n                component=\"div\"\r\n                count={count}\r\n                rowsPerPage={limit}\r\n                onChangeRowsPerPage={e => setLimit(e.target.value)}\r\n                rowsPerPageOptions={[10, 20, 40, 50]}\r\n                page={pager}\r\n                onChangePage={(e, newPage) => {\r\n                    e.preventDefault()\r\n                    setPage(newPage)\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}\r\nexport default MyTable","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, Button, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n}))\r\n\r\nexport default ({ open, onCancel, onOk, title, text, cancelText, okText }) => {\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={oncancel} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={onCancel} color=\"primary\">\r\n\t\t\t\t\t\t{cancelText || \"Cancel\"}\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={onOk} color=\"primary\">\r\n\t\t\t\t\t\t{okText || \"Apply\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, OutlinedInput, DialogTitle, DialogContent, TextField, MenuItem, FormControl, InputLabel, Select, Checkbox, ListItemText, FormHelperText } from '@material-ui/core';\r\n\r\nimport { setEditFood, setErrors, selectFood } from './foodAction'\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\twidth: \"250px\",\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\taddButton: {\r\n\t\tminWidth: \"100px\",\r\n\t\tmaxWidth: \"150px\",\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t\tcolor: theme.palette.primary.main\r\n\t},\r\n\tsideType: {\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tdialogContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tmargin: \"auto\",\r\n\t\twidth: \"fit-content\"\r\n\t}\r\n}))\r\n\r\nconst distDayTypes = [\r\n\t{ label: \"1 day\", value: 1 },\r\n\t{ label: \"2 days\", value: 2 },\r\n\t{ label: \"3 days\", value: 3 },\r\n\t{ label: \"4 days\", value: 4 },\r\n\t{ label: \"5 days\", value: 5 },\r\n]\r\n\r\nconst FoodEdit = ({ user, foodEdit, open, onSetEditFood, distMainTypes, distSideTypes, onSaveFood, onDeleteFood, errors, onUpdate }) => {\r\n\tconst classes = useStyles()\r\n\tvar food = Object.assign({}, foodEdit);\r\n\r\n\tconst [mainType, setMainType] = useState(food.maintype)\r\n\tconst [foodAmount, setFoodAmount] = useState(food.foodamount.toString())\r\n\tconst [sideTypes, setSideTypes] = useState(food.sidetype)\r\n\tconst [name, setName] = useState(food.name)\r\n\tconst [recipe, setRecipe] = useState(food.link)\r\n\tconst [eaten, setEaten] = useState(food.timeseaten)\r\n\tconst [cookTime, setCookTime] = useState(food.time)\r\n\tconst [deleteOpen, setDeleteOpen] = useState(false)\r\n\r\n\tconst constructFood = () => {\r\n\t\treturn {\r\n\t\t\t_id: food._id,\r\n\t\t\tname: name,\r\n\t\t\tlink: recipe,\r\n\t\t\tmaintype: mainType,\r\n\t\t\tsidetype: sideTypes,\r\n\t\t\tfoodamount: foodAmount,\r\n\t\t\ttime: cookTime,\r\n\t\t\ttimeseaten: eaten\r\n\t\t}\r\n\t}\r\n\r\n\tconst validateTime = (value) => {\r\n\t\tconst regex = new RegExp(\"[^0-9]\")\r\n\t\tif (regex.test(value)) return\r\n\t\tsetCookTime(value)\r\n\t}\r\n\r\n\tconst SelectField = ({ label, value, onChange, types }) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.selectFieldContainer}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tselect\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e => onChange(e.target.value)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{types.map((x, i) => (\r\n\t\t\t\t\t\t<MenuItem key={i} value={x.value || x}>\r\n\t\t\t\t\t\t\t{x.label || x}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</TextField>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst sideTypeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<FormControl className={classes.selectField} variant=\"outlined\"\r\n\t\t\t\terror={errors.includes(\"side\")}\r\n\t\t\t>\r\n\t\t\t\t<InputLabel className={classes.sideType}>Side Types</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tmultiline={true}\r\n\t\t\t\t\tvalue={sideTypes}\r\n\t\t\t\t\tonChange={e => setSideTypes(e.target.value)}\r\n\t\t\t\t\tinput={<OutlinedInput />}\r\n\t\t\t\t\trenderValue={sideTypes => sideTypes.join(\", \")}\r\n\t\t\t\t>\r\n\t\t\t\t\t{distSideTypes.map(type => (\r\n\t\t\t\t\t\t<MenuItem key={type} value={type}>\r\n\t\t\t\t\t\t\t<Checkbox checked={sideTypes.includes(type)} color=\"primary\" />\r\n\t\t\t\t\t\t\t<ListItemText primary={type} />\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t\t<FormHelperText>{errors.includes(\"side\") ? \"Must have at least one side type\" : \"\"}</FormHelperText>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst nameElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Name\"}\r\n\t\t\t\tvalue={name}\r\n\t\t\t\tmultiline={true}\r\n\t\t\t\tonChange={value => setName(value.target.value)}\r\n\t\t\t\terror={errors.includes(\"name\")}\r\n\t\t\t\thelperText={errors.includes(\"name\") ? \"Name can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst speedElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Cooking Time\"\r\n\t\t\t\tvalue={cookTime}\r\n\t\t\t\tonChange={e => validateTime(e.target.value)}\r\n\t\t\t\terror={errors.includes(\"time\")}\r\n\t\t\t\thelperText={errors.includes(\"time\") ? \"Cooking time can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst recipeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Recipe\"}\r\n\t\t\t\tvalue={recipe}\r\n\t\t\t\tmultiline={!recipe.includes(\"http\")}\r\n\t\t\t\tonChange={e => setRecipe(e.target.value)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst eatenElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Times Eaten\"\r\n\t\t\t\tvalue={eaten}\r\n\t\t\t\tonChange={e => setEaten(e.target.value)}\r\n\t\t\t\tdisabled={user.role !== \"admin\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst editContent = (\r\n\t\t<React.Fragment>\r\n\t\t\t{nameElement}\r\n\t\t\t<SelectField label={\"Main Type\"} value={mainType} onChange={(value) => setMainType(value)} types={distMainTypes} />\r\n\t\t\t{sideTypeElement}\r\n\t\t\t<SelectField label={\"Food Amount\"} value={foodAmount} onChange={(value) => setFoodAmount(value)} types={distDayTypes} />\r\n\t\t\t{speedElement}\r\n\t\t\t{recipeElement}\r\n\t\t\t{eatenElement}\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst deleteFood = (\r\n\t\t<Button startIcon={<DeleteForeverIcon />} onClick={() => setDeleteOpen(true)}>\r\n\t\t\tDelete\r\n\t\t</Button>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={() => onSetEditFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t<div className={classes.center}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t<div className={classes.div} />\r\n\t\t\t\t\t\t{food._id ? deleteFood : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent >\r\n\t\t\t\t\t<form className={classes.dialogContainer} noValidate>\r\n\t\t\t\t\t\t{editContent}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSetEditFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tonUpdate()\r\n\t\t\t\t\t\tonSaveFood(constructFood())\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\t{food.id ? \"Apply\" : \"Add\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<BackDialog\r\n\t\t\t\topen={deleteOpen}\r\n\t\t\t\tonCancel={() => setDeleteOpen(false)}\r\n\t\t\t\tonOk={() => {\r\n\t\t\t\t\tsetDeleteOpen(false)\r\n\t\t\t\t\tonDeleteFood(food._id)\r\n\t\t\t\t\tonUpdate()\r\n\t\t\t\t}}\r\n\t\t\t\ttitle=\"Delete Food\"\r\n\t\t\t\ttext=\"Are you sure?\"\r\n\t\t\t\tokText=\"Delete\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\tconst d = state.food.distincts\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\topen: state.food.foodEditOpen,\r\n\t\tdistMainTypes: d.main || [],\r\n\t\tdistSideTypes: d.side || [],\r\n\t\terrors: state.food.errors\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t\tdispatch(setErrors([]))\r\n\t\t},\r\n\t\tonDeleteFood: (id) => {\r\n\t\t\tif (!id) return\r\n\t\t\tfoods.remove(id)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch(setMessage(\"Food Deleted\"))\r\n\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tonSaveFood: (food) => {\r\n\t\t\tvar errors = []\r\n\t\t\tif (!food.name) errors.push(\"name\")\r\n\t\t\tif (!food.sidetype.length) errors.push(\"side\")\r\n\t\t\tif (!food.time) errors.push(\"time\")\r\n\t\t\tif (errors.length) {\r\n\t\t\t\treturn dispatch(setErrors(errors))\r\n\t\t\t} else {\r\n\t\t\t\tif (food._id) {\r\n\t\t\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('Food Updated'))\r\n\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfoods.create(food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('New Food Added'))\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FoodEdit)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Dialog, DialogActions, TextField, Button, DialogTitle, DialogContent, IconButton, Table, TableRow, TableCell, TableBody, Link, TableHead, Typography } from '@material-ui/core';\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport moment from 'moment-timezone'\r\nimport { selectFood, setEditFood } from './foodAction'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport combineDates from '../core/combineDates';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tspread: theme.spreadDivColumn,\r\n\tcenterColumns: theme.centerDivColumn,\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(3)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\tdatePickerTextfield: {\r\n\t\twidth: \"110px\"\r\n\t},\r\n\tbutton: {\r\n\t\twidth: \"180px\",\r\n\t\theight: \"60px\"\r\n\t}\r\n}))\r\n\r\nmoment.locale(\"en\")\r\nmoment.updateLocale(\"en\", {\r\n\tweek: { dow: 1, doy: 0 }\r\n})\r\n\r\n\r\n// const toFineTime = (time) => {\r\n// \tconst today = new Date()\r\n// \tconst diff = Math.round((today - time) / (24 * 60 * 60 * 1000))\r\n// \tvar ago;\r\n// \tif (diff > 356) {\r\n// \t\tago = \"Over a Year ago\"\r\n// \t} else if (diff > 30) {\r\n// \t\tconst m = Math.round(diff / 30)\r\n// \t\tago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n// \t} else if (diff > 7) {\r\n// \t\tconst w = Math.round(diff / 7)\r\n// \t\tago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n// \t} else if (diff === 0) {\r\n// \t\tago = \"today\"\r\n// \t} else if (diff === -1) {\r\n// \t\tago = \"tomorrow\"\r\n// \t} else if (diff < -1) {\r\n// \t\tago = `in ${diff * (-1)} days`\r\n// \t}\r\n// \treturn `${time.getDate()}.${time.getMonth() + 1}.${time.getFullYear()} - ${ago}`\r\n// }\r\n\r\nconst getLatestFoodInfo = food => {\r\n\tvar lastDate = new Date(food.lasteaten.sort((a, b) => new Date(b) - new Date(a))[0])\r\n\tif (lastDate < new Date()) lastDate = new Date()\r\n\tconst startDate = new Date(lastDate.valueOf() + 24 * 60 * 60 * 1000)\r\n\tconst endDate = new Date(startDate.valueOf() + food.foodamount * 24 * 60 * 60 * 1000)\r\n\treturn {\r\n\t\tstartDate: startDate,\r\n\t\tendDate: endDate\r\n\t}\r\n}\r\n\r\nconst SelectedFood = ({ food, latestFood, onSelectFood, onSetEditFood, onUpdate, onFoodSelection }) => {\r\n\tconst classes = useStyles()\r\n\tconst latestFoodInfo = getLatestFoodInfo(latestFood)\r\n\tconst [startDate, setStartDate] = useState(latestFoodInfo.startDate)\r\n\tconst [endDate, setEndDate] = useState(latestFoodInfo.endDate)\r\n\r\n\tif (!food) return null;\r\n\r\n\tconst handleSelect = () => {\r\n\t\tvar days = [startDate.toDateString()]\r\n\t\tvar currDay = startDate\r\n\t\twhile (true) {\r\n\t\t\tvar newDay = new Date(currDay.valueOf() + 24 * 60 * 60 * 1000)\r\n\t\t\tif (newDay > endDate) break\r\n\t\t\tdays.push(newDay.toDateString())\r\n\t\t\tcurrDay = newDay\r\n\t\t}\r\n\t\tif (!food.lasteaten) food.lasteaten = [];\r\n\t\tfood.lasteaten = food.lasteaten.concat(days)\r\n\t\tfood.timeseaten = food.timeseaten + 1\r\n\t\tonFoodSelection(food)\r\n\t\tonUpdate()\r\n\t}\r\n\r\n\r\n\tconst historyContent = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<Table size=\"small\">\r\n\t\t\t\t<TableHead>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>History</TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t\t{food.lasteaten ? combineDates(food.lasteaten.map(x => new Date(x))).map((f, i) => (\r\n\t\t\t\t\t\t<TableRow key={i}>\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t{f}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t)) : <TableRow><TableCell>No recordings</TableCell></TableRow>}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst selectContent = (\r\n\t\t<div className={classes.centerColumns}>\r\n\t\t\t<div>\r\n\t\t\t\t{food.link.includes(\"http\") || food.link.includes(\"www\") ?\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t<Link href={food.link}>\r\n\t\t\t\t\t\t\tLink To Recipe\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t: null}\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.spread}>\r\n\t\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={startDate}\r\n\t\t\t\t\t\tonChange={date => setStartDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"Start Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={endDate}\r\n\t\t\t\t\t\tonChange={date => setEndDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"End Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tstartIcon={<CheckIcon />}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t\tonClick={handleSelect}\r\n\t\t\t>Select Food</Button>\r\n\t\t\t{historyContent}\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={true} onClose={() => onSelectFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle >\r\n\t\t\t\t\t<div className={classes.spread}>\r\n\t\t\t\t\t\t{food.name}\r\n\t\t\t\t\t\t<IconButton onClick={() => onSetEditFood(food)}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{selectContent}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSelectFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfood: state.food.selectedFood,\r\n\t\tlatestFood: state.food.latestFood,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t},\r\n\t\tonFoodSelection: (food) => {\r\n\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setMessage(`Going to eat ${food.name}`))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tdispatch(setError(err.message))\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectedFood)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { foods } from '../api'\r\nimport FilterDialog from './FilterDialog'\r\nimport Search from './Search'\r\nimport Table from '../core/Table'\r\nimport FoodEdit from './foodEdit'\r\nimport SelectedFood from './SelectedFood'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setFilters, selectFood, setFoods, onSetOpenFilters, distincts, setEditFood, setLatestFood } from './foodAction'\r\nimport { setError } from '../App/AppActions';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: theme.root,\r\n}))\r\n\r\nconst columns = [\"Main\", \"Side\", \"Food\", \"Count\", \"LastEaten\", \"Cooking Time\", \"Food Amount\"]\r\nconst columnNameToFilter = {\r\n    \"Main\": \"main\",\r\n    \"Side\": \"side\",\r\n    \"Food Amount\": \"day\",\r\n    \"Cooking Time\": \"speed\"\r\n}\r\n\r\nconst defaultFood = {\r\n\tname: \"Name\",\r\n\tmaintype: \"liha\",\r\n\tsidetype: [\"pasta\"],\r\n\tfoodamount: 1,\r\n\tlink: \"\",\r\n\ttime: 60,\r\n\ttimeseaten: 0\r\n}\r\n\r\nconst Foods = ({ foods, sort, onSelectFood, onRefresh, filters, search, setOpenFilter, page, limit, selectedFood, foodEdit, initFilters, onSetEditFood }) => {\r\n\tconst classes = useStyles()\r\n    const [filterOpen, setFilterOpen] = React.useState(false)\r\n    \r\n    React.useEffect(() => {\r\n        initFilters()\r\n\t\tonRefresh(page, filters, sort, search, limit)\r\n    }, [])\r\n\r\n    const clearFilters = () => {\r\n        filters.speed = {$lt: 180}\r\n        Object.keys(filters)\r\n            .filter(x => x !== \"speed\")\r\n            .forEach(x => {\r\n                Object.keys(filters[x]).forEach(n => {\r\n                    filters[x][n] = \"$in\"\r\n                })\r\n        })\r\n        onRefresh(page, filters, {}, \"\", limit)\r\n    }\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<Search search={search} onSelectFood={onSelectFood} />\r\n\t\t\t<Table\r\n\t\t\t\tcolumns={columns}\r\n                columnNameToFilter={columnNameToFilter}\r\n\t\t\t\tdata={foods}\r\n\t\t\t\tsort={sort}\r\n\t\t\t\tsetSort={sort => onRefresh(0, filters, sort, search, limit)}\r\n\t\t\t\tlimit={limit}\r\n\t\t\t\tsetLimit={limit => onRefresh(page, filters, sort, search, limit)}\r\n\t\t\t\tonSelectFood={onSelectFood}\r\n                setFilterOpen={headerName => setFilterOpen(headerName)}\r\n\t\t\t\tonAddFood={() => onSetEditFood(defaultFood)}\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tsetPage={p => onRefresh(p, filters, sort, search, limit)}\r\n                clearFilters={() => clearFilters()}\r\n\t\t\t/>\r\n\t\t\t{selectedFood ? <SelectedFood onUpdate={() => onRefresh(page, filters, sort, search, limit)} /> : null}\r\n\t\t\t{foodEdit ? <FoodEdit foodEdit={foodEdit} onUpdate={() => onRefresh(page, filters, sort, search, limit)} /> : null}\r\n            <FilterDialog open={Boolean(filterOpen)} sort={sort} filters={filters} title={filterOpen} filterType={columnNameToFilter[filterOpen]} \r\n                setFilters={(f, s) => onRefresh(0, f, s, search, limit)}\r\n                onClose={(f,s) => {\r\n                    setFilterOpen(false)\r\n                    onRefresh(0, f, s, search, limit)\r\n                }}\r\n            />\r\n\t\t</Paper>\r\n\t)\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfoods: state.food.foods,\r\n\t\tsort: state.food.sort,\r\n\t\tfilters: state.food.filters,\r\n\t\tsearch: state.food.search,\r\n\t\tpage: state.food.page,\r\n\t\tlimit: state.food.limit,\r\n\t\tselectedFood: state.food.selectedFood,\r\n\t\tfoodEdit: state.food.foodEdit,\r\n\t}\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonRefresh: (page, filters, sort, search, limit) => {\r\n\t\t\tfoods.list(filters, page, sort, search, limit)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tdispatch(setFoods({\r\n\t\t\t\t\t\tfoods: result,\r\n\t\t\t\t\t\tfilters: filters,\r\n\t\t\t\t\t\tsort: sort,\r\n\t\t\t\t\t\tpage: page,\r\n\t\t\t\t\t\tlimit: limit,\r\n\t\t\t\t\t\tsearch: search\r\n\t\t\t\t\t}))\r\n\t\t\t\t\tfoods.lastEaten()\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tdispatch(setLatestFood(res))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tsetOpenFilter: () => {\r\n\t\t\tdispatch(onSetOpenFilters())\r\n\t\t},\r\n\t\tinitFilters: () => {\r\n\t\t\tvar filters = {\r\n\t\t\t\tmain: {},\r\n\t\t\t\tside: {},\r\n\t\t\t\tspeed: {$lt: 180},\r\n\t\t\t\tday: {}\r\n\t\t\t}\r\n\t\t\tfoods.distincts()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(distincts(res))\r\n\t\t\t\t\tres.main.forEach(m => {\r\n\t\t\t\t\t\tfilters.main[m] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.side.forEach(s => {\r\n\t\t\t\t\t\tfilters.side[s] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.day.forEach(d => {\r\n\t\t\t\t\t\tfilters.day[d] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tdispatch(setFilters(filters))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => setError(err.message))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Foods)","export const setData = (data) => {\r\n\treturn { type: \"SET_DATA\", data }\r\n}\r\n\r\nexport const setDeleteId = (id) => {\r\n\treturn { type: \"SET_DELETE_ID\", id}\r\n} \r\n\r\nexport const setDistinctNotes = (notes) => {\r\n    return { type: \"SET_DISTINCT_NOTES\", notes}\r\n}","const formatDate = oDate => {\r\n    let date = new Date(oDate)\r\n    const month = date.getMonth() + 1\r\n    const day = date.getDate()\r\n    return `${day}.${month}`\r\n}\r\n\r\nconst createDefaultContent = (payments, markPaidId) => {\r\n    let paymentText = \"\";\r\n    payments.forEach(p => {\r\n        paymentText += `${p.notes}, ${p.amount}, erpiv: ${formatDate(p.date)} (${p.imageName})\\n`;\r\n    })\r\n    const url = `${process.env.REACT_APP_MAIL_SERVICE_URL}/${markPaidId}`;\r\n    return `Hei,\\n\\nLiitteen taas laskuja:\\n\\n${paymentText}\\n\\n${url}\\n\\nTerveisin,\\nKimi Heinonen\\n`\r\n}\r\n\r\nexport const openOnMail = (payments, markPaidId) => {\r\n    let from = process.env.REACT_APP_MAIL_FROM;\r\n    let to = process.env.REACT_APP_MAIL_TO;\r\n    let title = \"Laskuja\";\r\n    let content = createDefaultContent(payments, markPaidId);\r\n    window.open(`mailto:${to}?subject=${title}&body=${encodeURIComponent(content)}`);\r\n}","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Checkbox, FormControlLabel, Tooltip } from '@material-ui/core';\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty';\r\nimport HourglassFullIcon from '@material-ui/icons/HourglassFull';\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n}))\r\n\r\n// mailed and paid --> Disabled and checked\r\n// mailed but pending --> Custom icon\r\n// not mailed and no pdf --> disabled\r\n// not mailed and pdf --> normal \r\n\r\nconst TableRowCheckBox = props => {\r\n    const classes = useStyles()\r\n    const { rowData, onChange, toMailList } = props;\r\n\r\n    const mailedAndPaid = rowData.mailed && rowData.paid;\r\n    const mailedAndPending = rowData.mailed && rowData.paid === false;\r\n    const notMailedNoPDF = !rowData.mailed && rowData.imageData == null;\r\n\r\n    let component, toolTipText;\r\n    if (mailedAndPaid) {\r\n        toolTipText = \"Mailed and paid\";\r\n        component = <Checkbox disabled checked icon={<DoneAllIcon />} color=\"primary\" />\r\n    }\r\n    else if (mailedAndPending) {\r\n        toolTipText = \"Mailed and pending\";\r\n        component = <Checkbox\r\n            icon={<HourglassEmptyIcon />}\r\n            checkedIcon={<HourglassFullIcon />}\r\n            checked={toMailList.find(x => x._id === rowData._id) != null}\r\n            color=\"primary\"\r\n            onChange={onChange}\r\n        />\r\n    }\r\n    else if (notMailedNoPDF) {\r\n        toolTipText = \"Missing pdf - cant mail\";\r\n        component = <Checkbox disabled checked={false} color=\"primary\" />\r\n    } else {\r\n        toolTipText = \"Not mailed\";\r\n        component = <Checkbox\r\n            color=\"primary\"\r\n            onChange={onChange}\r\n            checked={toMailList.find(x => x._id === rowData._id) != null}\r\n        />\r\n    }\r\n\r\n    return (\r\n        <Tooltip title={toolTipText}>\r\n            <span>\r\n                {component}\r\n            </span>\r\n        </Tooltip>\r\n    )\r\n}\r\n\r\nexport default TableRowCheckBox","import React, { useState, useEffect } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper, Button, TextField, Table, TableContainer, TableRow, TableCell, TableBody, TableHead, InputAdornment, IconButton, Checkbox, Tooltip } from '@material-ui/core'\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport { connect } from 'react-redux'\r\n\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\r\n\r\nimport { boldSearch } from '../core/BoldSearch'\r\nimport { payments, pendingPayments } from '../api'\r\nimport { setError, setMessage } from '../App/AppActions';\r\nimport { setData, setDeleteId, setDistinctNotes } from './paymentAction'\r\nimport { openOnMail } from './MailDialog'\r\nimport TableRowCheckBox from './TableRowCheckBox'\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: theme.root,\r\n    centerDivColumn: theme.centerDivColumn,\r\n    spacings: {\r\n        padding: theme.spacing(2),\r\n        width: \"10px\"\r\n    },\r\n    datePickerTextfieldWide: {\r\n        width: \"110px\"\r\n    },\r\n    datePickerTextfieldSmall: {\r\n        width: \"70px\"\r\n    },\r\n    tableIcon: {\r\n        width: \"5px\"\r\n    },\r\n    spacing: {\r\n        margin: theme.spacing(2),\r\n        width: \"200px\"\r\n    },\r\n    sendMailButton: {\r\n        marginLeft: \"-30px\",\r\n        marginRight: \"-30px\"\r\n    }\r\n}))\r\n\r\n// const MONHTLY_ALLOWANCE = 700\r\n\r\nconst formatDate = date => {\r\n    if (typeof date === \"string\") date = new Date(date)\r\n    const year = date.getFullYear()\r\n    const month = date.getMonth() + 1\r\n    const day = date.getDate()\r\n    return `${day}.${month}.${year}`\r\n}\r\n\r\nconst formatNotes = note => {\r\n    if (!note) return \"\"\r\n    if (note.length < 50) return note;\r\n    return `${note.substr(0, 50)}...`\r\n}\r\n\r\nconst firstDate = new Date(2020, 0, 1)\r\nconst yearStart = new Date(new Date().getUTCFullYear(), 0, 1)\r\nconst yearEnd = new Date(new Date().getUTCFullYear(), 11, 31)\r\n\r\nfunction Payments(props) {\r\n    const classes = useStyles()\r\n    const { data, deleteId, distinctNotes } = props;\r\n    const { onGetData, onAddPayment, onSetDeleteId, onDeletePayment, onGetDistinctNotes, onSendMail } = props;\r\n\r\n    const [date, setDate] = useState(new Date())\r\n    const [amount, setAmount] = useState(\"\")\r\n    const [note, setNote] = useState(\"\")\r\n    const [autoCompleteKey, setAutoCompleteKey] = useState(true)\r\n    const [startDate, setStartDate] = useState(yearStart)\r\n    const [endDate, setEndDate] = useState(yearEnd)\r\n    const [image, setImage] = useState({});\r\n    const [inputRef, setInputRef] = useState(null);\r\n    const [toMailList, setToMailList] = useState([])\r\n\r\n    var total, perMonth;\r\n    useEffect(() => {\r\n        onGetData(startDate, endDate);\r\n    }, [startDate, endDate, onGetData])\r\n\r\n    useEffect(() => {\r\n        if (distinctNotes.length === 0)\r\n            onGetDistinctNotes();\r\n    }, [onGetDistinctNotes, distinctNotes])\r\n\r\n    if (data) {\r\n        total = data.reduce((total, x) => total + x.amount, 0).toFixed(1)\r\n        const months = data.length ? (new Date(data[0].date).getMonth() - startDate.getMonth()) : 1;\r\n\r\n        perMonth = (total / months).toFixed(1);\r\n    }\r\n    const handleAddPayment = () => {\r\n        if (parseFloat(amount) <= 0) return\r\n        let payment = { date: date, amount: amount, notes: note }\r\n        if (image.name || image.data)\r\n            payment = { ...payment, imageName: image.name, imageData: image.data }\r\n        onAddPayment(payment, startDate, endDate)\r\n        setDate(new Date())\r\n        setAmount(\"\")\r\n        setNote(\"\")\r\n        setAutoCompleteKey(!autoCompleteKey) // To re-render cleared autoComplete\r\n        setImage({})\r\n    }\r\n\r\n    const AddImage = () => {\r\n        if ((image.name || image.data) && !window.confirm(\"Replace current image?\")) {\r\n            return;\r\n        }\r\n        if (!inputRef) {\r\n            console.error(\"No input Ref!!\")\r\n        } else {\r\n            inputRef.click();\r\n        }\r\n    }\r\n\r\n    const loadFile = () => {\r\n        if (typeof window.FileReader !== 'function') {\r\n            alert(\"The file API isn't supported on this browser yet.\");\r\n            return;\r\n        }\r\n        let input = document.getElementById('fileinput');\r\n        if (!input) {\r\n            alert(\"Um, couldn't find the fileinput element.\");\r\n        }\r\n        else if (!input.files) {\r\n            alert(\"This browser doesn't seem to support the 'files' property of file inputs.\");\r\n        }\r\n        else if (!input.files[0]) {\r\n            alert(\"Please select an Excel file before clicking 'Process'\");\r\n        }\r\n        else {\r\n            const selectedFile = input.files[0]\r\n\r\n            input.files = null // Without these the second upload try won't fire the onChange event\r\n            input.value = ''\r\n\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = e => {\r\n                setImage({\r\n                    name: selectedFile.name,\r\n                    data: e.target.result\r\n                })\r\n            }\r\n            fileReader.readAsDataURL(selectedFile);\r\n        }\r\n    }\r\n\r\n    const downloadImage = (image) => {\r\n        var a = document.createElement(\"a\");\r\n        a.href = image.data;\r\n        a.download = image.name;\r\n        a.click();\r\n    }\r\n\r\n    const handleMailList = (data) => {\r\n        // Already in the list -> remove it\r\n        if (toMailList.find(d => d._id === data._id) != null) {\r\n            setToMailList(toMailList.filter(x => x._id !== data._id));\r\n        } else {\r\n            toMailList.push(data);\r\n            setToMailList([...toMailList]);\r\n        }\r\n    }\r\n\r\n    const openMailAndMarkSend = () => {\r\n        const pending = {\r\n            isMarked: false,\r\n            ids: toMailList.map(x => x._id)\r\n        }\r\n        pendingPayments.create(pending)\r\n            .then(pendingEntity => {\r\n                openOnMail(toMailList, pendingEntity._id);\r\n                onSendMail(startDate, endDate, toMailList);\r\n                setToMailList([])\r\n            })\r\n            .catch(err => console.error(err))\r\n    }\r\n\r\n    const datePicker = (label, value, setValue, views, format, minDate = new Date(2020, 0, 1), maxDate = yearEnd) => (\r\n        <MuiPickersUtilsProvider utils={MomentUtils}>\r\n            <DatePicker\r\n                label={label}\r\n                format={format}\r\n                views={views}\r\n                minDate={minDate}\r\n                maxDate={maxDate}\r\n                showTodayButton={true}\r\n                value={value}\r\n                onChange={date => setValue(date._d)}\r\n                animateYearScrolling\r\n                TextFieldComponent={(props) => (\r\n                    <TextField\r\n                        label={label}\r\n                        onClick={props.onClick}\r\n                        value={props.value}\r\n                        InputProps={{\r\n                            endAdornment: <TodayIcon />\r\n                        }}\r\n                        size=\"small\"\r\n                        className={format.split(\".\").length > 2 ? classes.datePickerTextfieldWide : classes.datePickerTextfieldSmall}\r\n                    />\r\n                )}\r\n            />\r\n        </MuiPickersUtilsProvider>\r\n    )\r\n\r\n    const addPayment = (\r\n        <div className={classes.centerDivColumn}>\r\n            <div className={`${classes.spacing} ${classes.centerDivColumn}`}>\r\n                {datePicker(\"Date\", date, setDate, [\"year\", \"month\", \"date\"], \"DD.MM.YYYY\")}\r\n            </div>\r\n            <div className={classes.spacing}>\r\n                <TextField\r\n                    value={amount}\r\n                    type=\"number\"\r\n                    variant=\"outlined\"\r\n                    onChange={e => setAmount(e.target.value.replace(\",\", \".\"))}\r\n                    InputProps={{\r\n                        endAdornment: <InputAdornment position=\"end\"></InputAdornment>,\r\n                    }}\r\n                />\r\n            </div>\r\n            <div className={classes.spacing}>\r\n                <Autocomplete\r\n                    key={autoCompleteKey}\r\n                    freeSolo\r\n                    options={distinctNotes}\r\n                    renderOption={option => boldSearch(option, note)}\r\n                    renderInput={props =>\r\n                        <TextField\r\n                            {...props}\r\n                            label=\"Note\"\r\n                            value={note}\r\n                            fullWidth\r\n                            onChange={e => setNote(e.target.value)} />\r\n                    }\r\n                    onChange={(e, value) => setNote(value || \"\")}\r\n                />\r\n            </div>\r\n            <Button\r\n                className={classes.spacing}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => AddImage()}>\r\n                Add Image\r\n            </Button>\r\n            {image.name &&\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Button onClick={() => downloadImage(image)}>\r\n                        {image.name}\r\n                    </Button>\r\n                    <IconButton onClick={() => setImage({})}>\r\n                        <DeleteForeverIcon />\r\n                    </IconButton>\r\n                </div>}\r\n            <Button\r\n                className={classes.spacing}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<AddIcon />}\r\n                onClick={() => handleAddPayment()}>\r\n                Add Payment\r\n\t\t\t</Button>\r\n        </div>\r\n    )\r\n\r\n    const table = (\r\n        <TableContainer component={Paper}>\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>\r\n                            {datePicker(\"from\", startDate, setStartDate, [\"year\", \"month\"], \"MM.YY\", firstDate, endDate)}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            {datePicker(\"to\", endDate, setEndDate, [\"year\", \"month\"], \"MM.YY\", startDate, yearEnd)}\r\n                        </TableCell>\r\n                        <TableCell>{`Total: ${total} `}</TableCell>\r\n                        <TableCell>{`PerMonth: ${perMonth} `}</TableCell>\r\n                        <TableCell />\r\n                        <TableCell />\r\n                        <TableCell />\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>Created</TableCell>\r\n                        <TableCell>Bill Due</TableCell>\r\n                        <TableCell>Amount</TableCell>\r\n                        <TableCell>Notes</TableCell>\r\n                        <TableCell>Pdf</TableCell>\r\n                        <TableCell>\r\n                            {toMailList.length > 0 ?\r\n                                <Button variant=\"contained\" color=\"primary\"\r\n                                    className={classes.sendMailButton}\r\n                                    onClick={openMailAndMarkSend}\r\n                                    endIcon={<MailIcon />}>\r\n                                    Send\r\n                                </Button>\r\n                                : <IconButton disabled ><MailIcon /></IconButton>}\r\n                        </TableCell>\r\n                        <TableCell className={classes.tableIcon}></TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {data ? data.map(d => (\r\n                        <TableRow key={d.date}>\r\n                            <TableCell>{formatDate(d.createdAt)}</TableCell>\r\n                            <TableCell>{formatDate(d.date)}</TableCell>\r\n                            <TableCell>{d.amount} </TableCell>\r\n                            <TableCell>{formatNotes(d.notes)}</TableCell>\r\n                            <TableCell>\r\n                                {d.imageName &&\r\n                                    <Button onClick={() => downloadImage({ name: d.imageName, data: d.imageData })}>\r\n                                        {d.imageName}\r\n                                    </Button>\r\n                                }\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <TableRowCheckBox\r\n                                    rowData={d}\r\n                                    onChange={() => handleMailList(d)}\r\n                                    toMailList={toMailList}\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell className={classes.tableIcon}>\r\n                                <IconButton onClick={() => onSetDeleteId(d._id)}>\r\n                                    <DeleteForeverIcon />\r\n                                </IconButton>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    )) : null}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n    return (\r\n        <React.Fragment>\r\n            <Paper className={classes.root}>\r\n                {addPayment}\r\n            </Paper>\r\n            {table}\r\n            <BackDialog\r\n                open={Boolean(deleteId)}\r\n                onClose={() => onSetDeleteId(null)}\r\n                title=\"Delete payment\"\r\n                text=\"Are you sure?\"\r\n                okText={\"Delete\"}\r\n                onOk={() => onDeletePayment(deleteId, startDate, endDate)}\r\n            />\r\n            <input type=\"file\"\r\n                id=\"fileinput\"\r\n                style={{ display: \"none\" }}\r\n                accept=\".pdf\"\r\n                ref={elem => setInputRef(elem)}\r\n                onChange={() => loadFile()} />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        data: state.payment.data,\r\n        deleteId: state.payment.deleteId,\r\n        distinctNotes: state.payment.distinctNotes,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    const getData = (start, end) => {\r\n        payments.list({\r\n            date: {\r\n                $gt: start,\r\n                $lt: end\r\n            },\r\n            $sort: {\r\n                createdAt: -1\r\n            }\r\n        }).then(res => dispatch(setData(res.data)))\r\n            .catch(err => dispatch(setError(err.message)))\r\n    }\r\n    return {\r\n        onGetData: (start, end) => getData(start, end),\r\n        onAddPayment: (payment, start, end) => {\r\n            payments.create(payment)\r\n                .then(res => {\r\n                    dispatch(setMessage(\"Payment Added\"))\r\n                    getData(start, end)\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onSetDeleteId: (id) => {\r\n            dispatch(setDeleteId(id))\r\n        },\r\n        onDeletePayment: (id, start, end) => {\r\n            payments.remove(id)\r\n                .then(res => {\r\n                    dispatch(setMessage(\"Payment Deleted\"))\r\n                    dispatch(setDeleteId(null))\r\n                    getData(start, end)\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onGetDistinctNotes: () => {\r\n            payments.list({})\r\n                .then(res => {\r\n                    const allNotes = res.data.map(x => x.notes)\r\n                    const distinctNotes = [...new Set(allNotes)]\r\n                    if (distinctNotes.length === 0)\r\n                        distinctNotes.push(\"...\")\r\n                    dispatch(setDistinctNotes(distinctNotes))\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onSendMail: async (start, end, paymentList) => {\r\n            for (let index = 0; index < paymentList.length; index++) {\r\n                const payment = paymentList[index];\r\n                await payments.patch(payment._id, { mailed: true });\r\n            }\r\n            getData(start, end);\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Payments)","import React, { useEffect, useState } from 'react'\r\n\r\nimport { pendingPayments } from '../api'\r\nimport { Button, Dialog, DialogActions, DialogContent } from '@material-ui/core';\r\n\r\nconst MarkPendingPayments = props => {\r\n    const [state, setState] = useState({\r\n        dialogOpen: false,\r\n        seconds: 0\r\n    })\r\n    const id = props.params.id;\r\n\r\n    useEffect(() => {\r\n        let timer;\r\n        if (!state.dialogOpen)\r\n            return;\r\n\r\n        if (state.seconds === 0) {\r\n            closeAndRedirect();\r\n        } else {\r\n            let newSeconds = state.seconds - 1;\r\n            timer = setTimeout(() => setState({ ...state, seconds: newSeconds }), 1000);\r\n        }\r\n        return () => clearTimeout(timer);\r\n    }, [state.seconds])\r\n\r\n    const closeAndRedirect = () => {\r\n        setState({ dialogOpen: false, seconds: 0 })\r\n        window.close();\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            pendingPayments.get(id.replace(\":\", \"\"))\r\n                .then(res => {\r\n                    if (res && res.alreadyMarked) {\r\n                        window.close();\r\n                    } else {\r\n                        setState({ dialogOpen: true, seconds: 5 })\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                    window.close();\r\n                })\r\n        } else {\r\n            window.close();\r\n        }\r\n    }, [])\r\n\r\n    console.log(\"FOOBAR\")\r\n\r\n    return (\r\n        <Dialog open={state.dialogOpen}>\r\n            <DialogContent>\r\n                {`Laskut merkattu maksetuksi\\n\\n\r\n\r\n    Tm sulkeutuu automaattisesti ${state.seconds} sekunnin kuluttua...`}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={() => closeAndRedirect()}>\r\n                    Close\r\n        </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default MarkPendingPayments","import React, { useEffect, useCallback } from 'react'\r\n\r\nimport { Paper, IconButton } from '@material-ui/core'\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport { binanceApi } from '../api';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: theme.monitor.paper,\r\n    floatRight: theme.monitor.floatRight,\r\n    horizontal: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\",\r\n        width: \"85%\"\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    up: {\r\n        color: \"green\"\r\n    },\r\n    down: {\r\n        color: \"red\"\r\n    }\r\n}))\r\n\r\nconst binanceFoo = [{\r\n    askPrice: 28194.14000000,\r\n    askQty: 0.00071100,\r\n    bidPrice: 28190.56000000,\r\n    bidQty: 0.01496000,\r\n    closeTime: 1625943213703,\r\n    count: 57461,\r\n    firstId: 56346219,\r\n    highPrice: 28873.33000000,\r\n    lastId: 56403679,\r\n    lastPrice: \"29755.55000000\",\r\n    lastQty: 0.00206800,\r\n    lowPrice: 28019.55000000,\r\n    openPrice: 28140.19000000,\r\n    openTime: 1625856813703,\r\n    prevClosePrice: 28144.97000000,\r\n    priceChange: \"-1488.48000000\",\r\n    priceChangePercent: \"-4.764\",\r\n    quoteVolume: 41071006.63447189,\r\n    symbol: \"BTCUSDT\",\r\n    volume: 1443.29207600,\r\n    weightedAvgPrice: 28456.47621672,\r\n},\r\n{\r\n    askPrice: 0.06256900,\r\n    askQty: 32.42100000,\r\n    bidPrice: 0.06256800,\r\n    bidQty: 0.32000000,\r\n    closeTime: 1625943213687,\r\n    count: 146086,\r\n    firstId: 282229466,\r\n    highPrice: 0.06410600,\r\n    lastId: 282375551,\r\n    lastPrice: \"1749.66000000\",\r\n    lastQty: 0.31900000,\r\n    lowPrice: 0.06202100,\r\n    openPrice: 0.06386800,\r\n    openTime: 1625856813687,\r\n    prevClosePrice: 0.06387300,\r\n    priceChange: \"-122.63000000\",\r\n    priceChangePercent: \"-6.550\",\r\n    quoteVolume: 6506.87270971,\r\n    symbol: \"ETHUSDT\",\r\n    volume: 103275.20500000,\r\n    weightedAvgPrice: 0.06300518,\r\n}, {\r\n    symbol: \"USDEUR\",\r\n    value: 0.86\r\n}]\r\n\r\nconst parseBinanceData = (data, symbols) => {\r\n    let parsed = []\r\n\r\n    let usdeur = 1;\r\n    let usdeurSymbol = data.find(x => x.symbol === \"USDEUR\");\r\n    if (usdeurSymbol) {\r\n        usdeur = usdeurSymbol.value;\r\n    }\r\n\r\n    symbols.filter(x => x !== \"USDEUR\").forEach(symbol => {\r\n        let s = data.find(x => x.symbol === symbol);\r\n        if (s) {\r\n            parsed.push({\r\n                symbol: symbol.slice(0, 3),\r\n                icon: `${symbol.slice(0, 3)}.png`,\r\n                price: parseFloat(s.lastPrice) * usdeur,\r\n                changePrice: parseFloat(s.priceChange) * usdeur,\r\n                changePercent: parseFloat(s.priceChangePercent),\r\n            })\r\n\r\n        }\r\n    })\r\n\r\n    return parsed;\r\n}\r\n\r\nconst SYMBOLS = [\"BTCUSDT\", \"ETHUSDT\", \"USDEUR\"]\r\n\r\nconst BinanceMonitor = ({ refresh, data, setData }) => {\r\n    const fetchBinance = process.env.NODE_ENV === 'production' || true;\r\n    const classes = useStyles()\r\n\r\n    const fetchData = useCallback(() => {\r\n        if (fetchBinance) {\r\n            binanceApi.find({ symbols: SYMBOLS })\r\n                .then(res => {\r\n                    setData(parseBinanceData(res, SYMBOLS))\r\n                })\r\n                .catch(err => {\r\n                    console.log(\"Binance ERROR: \", err)\r\n                })\r\n        } else {\r\n            setData(parseBinanceData(binanceFoo, SYMBOLS))\r\n        }\r\n    }, [fetchBinance, setData])\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [refresh])\r\n\r\n    return (\r\n        <Paper elevation={4} className={classes.paper} >\r\n            <IconButton className={classes.floatRight} onClick={() => fetchData()}>\r\n                <RefreshIcon color=\"primary\" />\r\n            </IconButton>\r\n            {data.map(x => (\r\n                <div className={classes.horizontal} key={x.symbol}>\r\n                    {/* <img source={`./${x.icon}`} alt={x.name} style={{ height: \"50px\", width: \"50px\" }} /> */}\r\n                    <p className={classes.margin} style={{ width: \"28px\" }} >{x.symbol}</p>\r\n                    <p className={classes.margin} style={{ width: \"252x\" }} > {x.price?.toFixed(0)}</p>\r\n                    <div style={{ display: \"contents\", width: \"66px\" }}>\r\n                        <p className={classes.margin}>{x.changePercent?.toFixed(1)} %</p>\r\n                        {x.changePrice > 0 ?\r\n                            <ArrowDropUpIcon className={classes.up} /> :\r\n                            <ArrowDropDownIcon className={classes.down} />\r\n                        }\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default BinanceMonitor","import React, { useState } from 'react'\r\n\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport { Tab, Tabs } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    hiddenTabRoot: {\r\n        visibility: \"collapse\",\r\n        minHeight: \"0px\",\r\n        height: \"0px\"\r\n    },\r\n}))\r\n\r\nconst TabPanel = (props) => {\r\n    const { children, value, index, ...other } = props;\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`simple-tabpanel-${index}`}\r\n            aria-labelledby={`simple-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && children}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst TabProps = index => ({\r\n    id: `full-width-tab-${index}`,\r\n    'aria-controls': `full-width-tabpanel-${index}`,\r\n})\r\n\r\nconst SwibeTabs = props => {\r\n    const classes = useStyles()\r\n    const { panels, hideTabs, tabProps } = props;\r\n    const [tabValue, setTabValue] = useState(0)\r\n\r\n\r\n    const tabClasses = hideTabs ? { classes: { root: classes.hiddenTabRoot } } : {};\r\n    return (\r\n        <>\r\n            <Tabs value={tabValue} onChange={(_, value) => setTabValue(value)}\r\n                {...tabClasses} {...tabProps}>\r\n                {[...Array(panels.length).keys()].map(i => (\r\n                    <Tab label={`Tab-${i}`} {...TabProps(0)} />\r\n                ))}\r\n            </Tabs>\r\n            <SwipeableViews index={tabValue} onChangeIndex={i => setTabValue(i)}>\r\n                {panels.map((panelContent, index) => (\r\n                    <TabPanel value={tabValue} index={index}>\r\n                        {panelContent}\r\n                    </TabPanel>\r\n                ))}\r\n            </SwipeableViews>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SwibeTabs","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useCustomCompareEffect } from \"use-custom-compare\";\r\n\r\nimport { XYPlot, ArcSeries } from 'react-vis'\r\nimport { Paper, IconButton } from '@material-ui/core'\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport { nhApi } from '../api';\r\nimport { getDateTimeDifferenceString } from '../core/combineDates';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport SwibeTabs from '../core/SwibeTabs';\r\nimport isEqual from 'lodash/isEqual'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: theme.monitor.paper,\r\n    floatRight: theme.monitor.floatRight,\r\n    background: theme.monitor.lightBackground,\r\n    labelContainer: {\r\n        position: \"absolute\",\r\n        top: \"72px\",\r\n        left: \"calc(50% - 80px)\",\r\n        height: \"100px\",\r\n        width: \"150px\",\r\n        textAlign: \"center\"\r\n    },\r\n    statusContainer: {\r\n        position: \"absolute\",\r\n        top: \"91%\",\r\n        right: \"16px\"\r\n    },\r\n    labelStyle: {\r\n        lineHeight: \"8px\"\r\n    },\r\n    arcplotStyle: {\r\n        position: \"absolute\",\r\n        left: \"calc(50% - 170px)\",\r\n        top: \"8px\"\r\n    },\r\n    timeLabelsContainer: {\r\n        position: \"absolute\",\r\n        height: \"100%\",\r\n        top: \"calc(100% - 28px)\"\r\n    },\r\n    timelabel: {\r\n        lineHeight: \"0px\",\r\n        marginTop: \"4px\",\r\n        fontSize: \"0.705rem\",\r\n        color: \"#ffffff70\"\r\n    },\r\n    gpuContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\"\r\n    },\r\n    gpuInnerContainer: { width: \"45%\" },\r\n    gpuLabelDiv: { display: \"flex\", justifyContent: \"space-between\", height: \"22px\" }\r\n}))\r\n\r\nconst nhFoo = {\r\n    devicesStatuses: { MINING: 2, DISABLED: 1 },\r\n    minerStatuses: { MINING: 1, STOPPED: 1 },\r\n    miningRigs: [{\r\n        devices: [\r\n            { name: \"cpu\", deviceType: { enumName: \"CPU\", description: \"cpu\" } },\r\n            {\r\n                deviceType: { enumName: \"NVIDIA\", description: \"Nvidia\" },\r\n                id: \"2-GSrqi-ksfl+Woiv9mQxH-Q\",\r\n                intensity: { enumName: \"LOW\", description: \"Low power mode\" },\r\n                load: 100,\r\n                name: \"ASUS NVIDIA GeForce RTX 2070\",\r\n                nhqm: \"\",\r\n                powerMode: { enumName: \"HIGH\", description: \"High power mode\" },\r\n                powerUsage: 121,\r\n                revolutionsPerMinute: -1,\r\n                revolutionsPerMinutePercentage: 73,\r\n                speeds: [\r\n                    {\r\n                        algorithm: \"DAGGERHASHIMOTO\",\r\n                        displaySuffix: \"MH\",\r\n                        speed: \"42.44745200\",\r\n                        title: \"DaggerHashimoto\",\r\n                    }\r\n                ],\r\n                status: { enumName: \"MINING\", description: \"Mining\" },\r\n            },\r\n            {\r\n                deviceType: { enumName: \"NVIDIA\", description: \"Nvidia\" },\r\n                id: \"2-GSrqi-ksfl+Woiv9mQxH-Q\",\r\n                intensity: { enumName: \"LOW\", description: \"Low power mode\" },\r\n                load: 100,\r\n                name: \"ASUS NVIDIA GeForce RTX 3090\",\r\n                nhqm: \"\",\r\n                powerMode: { enumName: \"HIGH\", description: \"High power mode\" },\r\n                powerUsage: 270,\r\n                revolutionsPerMinute: -1,\r\n                revolutionsPerMinutePercentage: 73,\r\n                speeds: [\r\n                    {\r\n                        algorithm: \"DAGGERHASHIMOTO\",\r\n                        displaySuffix: \"MH\",\r\n                        speed: \"100.44745200\",\r\n                        title: \"DaggerHashimoto\",\r\n                    }\r\n                ],\r\n                status: { enumName: \"MINING\", description: \"Mining\" },\r\n            }\r\n        ],\r\n        statusTime: \"1626271434009\",\r\n        joinTime: 1625902469,\r\n        localProfitability: 0.0002364248037036576,\r\n        minerStatus: \"MINING\",\r\n        name: \"worker1\",\r\n        profitability: 0.00019872000000000002,\r\n        rigId: \"0-UhsRoOB50F6xOsjWpruBIg\",\r\n        rigPowerMode: \"HIGH\",\r\n        softwareVersions: \"NHM/3.0.6.5\",\r\n        stats: [{\r\n            algorithm: { enumName: \"DAGGERHASHIMOTO\", description: \"DaggerHashimoto\" },\r\n            difficulty: 0.05466773208073769,\r\n            market: \"EU\",\r\n            profitability: 0.00019872000000000002,\r\n            proxyId: 1,\r\n            speedAccepted: 120.22248971989666,\r\n            speedRejectedR1Target: 0.7826537381108614,\r\n            speedRejectedR2Stale: 1.5653074762217227,\r\n            speedRejectedR3Duplicate: 0,\r\n            speedRejectedR4NTime: 0,\r\n            speedRejectedR5Other: 1.5653074762217227,\r\n            speedRejectedTotal: 3.9132686905543066,\r\n            statsTime: 1625924868000,\r\n            timeConnected: 1625902483796,\r\n            unpaidAmount: \"0.00001701\",\r\n            xnsub: true\r\n        }]\r\n    }],\r\n    totalDevices: 2,\r\n    totalProfitability: 0.00019872000000000002,\r\n    totalProfitabilityLocal: 0.0002364248037036576,\r\n    totalRigs: 1,\r\n    unpaidAmount: \"0.00001701\",\r\n}\r\n\r\nconst PI = Math.PI\r\n\r\nconst parseData = data => {\r\n    var devices = data.miningRigs[0].devices\r\n        .filter(x => x.deviceType.enumName !== \"CPU\")\r\n        .map(x => ({\r\n            name: x.name,\r\n            powerUsage: x.powerUsage,\r\n            status: x.status.description,\r\n            speed: x.speeds\r\n        }))\r\n\r\n    var totalSpeed = devices.reduce((a, b) => a + b.speed.reduce((c, d) => c + Number(d.speed), 0), 0);\r\n    if (data.devicesStatuses?.DISABLED)\r\n        delete data.devicesStatuses.DISABLED\r\n\r\n    return {\r\n        status: data.devicesStatuses,\r\n        profitabilityBTC: data.totalProfitability,\r\n        totalSpeed: totalSpeed,\r\n        devices: devices,\r\n        time: new Date(parseInt(data.miningRigs[0].statusTime))\r\n    }\r\n}\r\n\r\nconst combineDatas = (nhData, hwinfoData) => {\r\n    if (!nhData || !nhData.devices)\r\n        return nhData;\r\n\r\n    if (hwinfoData && hwinfoData[0]) {\r\n        Object.keys(hwinfoData[0])\r\n            .forEach(x => {\r\n                var device = nhData.devices.find(d => d.name.includes(x))\r\n                if (device) {\r\n                    Object.keys(hwinfoData[0][x]).forEach(n => {\r\n                        device[n.replace(\"GPU\", \"\")] = hwinfoData[0][x][n];;\r\n                    })\r\n                }\r\n            })\r\n        nhData.totalGPUPower = nhData.devices.reduce((a, b) => a + b.Power, 0);\r\n        nhData.totalPower = nhData.totalGPUPower + hwinfoData[0].CPUPower + 50; // Constant 50 for basic PC power consumption\r\n    }\r\n\r\n    return nhData\r\n}\r\n\r\nconst getColor = (value, idealMin, idealMax, absMin, absMAx) => {\r\n    if (value <= absMin)\r\n        return \"#00ffff\"; // Cyan\r\n    if (value <= idealMin)\r\n        return \"#00dba4\"; // Green-Cyan\r\n    if (value <= idealMax)\r\n        return \"#00bd00\"; // Green\r\n    if (value <= absMAx)\r\n        return \"#FF8C00\"; // Dark Orange\r\n    return \"#FF0000\"; // Red\r\n}\r\n\r\nconst GenerateData = (value, radiusStart, height, idealMin, idealMax, absMin, absMax, label) => {\r\n    // Angle is half circle => [-pi /2, pi / 2]\r\n    let angle = - PI * (0.5) + (value / absMax) * PI\r\n    let color = getColor(value, idealMin, idealMax, absMin, absMax);\r\n    return { angle0: -PI * (0.5), angle: angle, radius0: radiusStart, radius: height, color: color, label: label }\r\n}\r\n\r\nconst CustomCompare = (prevDeps, nextDeps) => {\r\n    // nhData = [0], hwinfoData = [1]\r\n    if (!nextDeps[0] || !nextDeps[0].devices || !(nextDeps[1] && nextDeps[1][0]))\r\n        return true;\r\n\r\n    // Currentyl woudld onyl need memJuncTemp, totalGPUpower and totalSpeed\r\n    return isEqual(prevDeps, nextDeps)\r\n}\r\n\r\nconst CustomTimeLabelCompare = (prev, next) => {\r\n    for (let index = 0; index < prev.length; index++) {\r\n        if (prev[index] !== next[index])\r\n            return false;\r\n    }\r\n    return true;\r\n    // let prevHWTime = prev[prev.length - 1].length > 0 ? prev[prev.length - 1][0].time : null;\r\n    // let nextHWTime = next[next.length - 1].length > 0 ? next[next.length - 1][0].time : null;\r\n    // return prevHWTime === nextHWTime;\r\n}\r\n\r\nconst NHMonitor = ({ data, setData, combData, setCombData, hwinfoData, refresh, setRefresh }) => {\r\n    const fetchNH = process.env.NODE_ENV === 'production' // || true;\r\n    const classes = useStyles()\r\n    const [generatedData, setGeneratedData] = useState({ data: [], labels: [] })\r\n    const [timeLabels, setTimeLabels] = useState({ hwinfo: \"--\", nh: \"--\", updateTime: false })\r\n\r\n    const fetchData = useCallback(() => {\r\n        let cancelled = false;\r\n        if (fetchNH) {\r\n            nhApi.get()\r\n                .then(res => {\r\n                    if (cancelled)\r\n                        return;\r\n                    setData(parseData(res))\r\n                })\r\n                .catch(err => {\r\n                    console.log(\"NH ERROR: \", err)\r\n                })\r\n        } else {\r\n            setData(parseData(nhFoo))\r\n        }\r\n        return () => {\r\n            cancelled = true;\r\n        }\r\n    }, [fetchNH])\r\n\r\n    useEffect(fetchData, [refresh])\r\n\r\n    useCustomCompareEffect(\r\n        () => {\r\n            const hwinfoDataTimestamp = hwinfoData.length > 0 ? getDateTimeDifferenceString(new Date(hwinfoData[0].time)) : \"--\";\r\n            const nhTimestamp = data?.time ? getDateTimeDifferenceString(data.time) : \"--\";\r\n            setTimeLabels({ hwinfo: hwinfoDataTimestamp, nh: nhTimestamp, updateTime: timeLabels.updateTime })\r\n\r\n            let timeout = setTimeout(() => {\r\n                setTimeLabels({ ...timeLabels, updateTime: !timeLabels.updateTime })\r\n            }, 5000)\r\n\r\n            return () => {\r\n                clearTimeout(timeout)\r\n            }\r\n        },\r\n        [timeLabels.updateTime, data?.time, hwinfoData.length > 0 ? hwinfoData[0].time : null],\r\n        (prev, next) => CustomTimeLabelCompare(prev, next)\r\n    )\r\n\r\n    useCustomCompareEffect(\r\n        () => {\r\n            const combinedData = combineDatas(data, hwinfoData);\r\n            if (!Object.keys(combinedData).length)\r\n                return;\r\n            setCombData(combinedData)\r\n            setGeneratedData({\r\n                data: [\r\n                    combinedData.devices?.length > 1 && GenerateData(combinedData.devices[1].MemJunctTemp, 2.30, 2.75, 90, 98, 80, 102, \"MemJunc\"),\r\n                    GenerateData(combinedData.totalGPUPower, 2.15, 2.25, 390, 410, 150, 500, \"Power\"),\r\n                    GenerateData(combinedData.totalSpeed, 2.00, 2.10, 135, 150, 50, 160, \"Speed\"),\r\n                ],\r\n                labels: [\r\n                    combinedData.devices.length > 1 && <div key={\"MemJuncLabel\"}><p className={classes.labelStyle}>Mem: {combinedData.devices[1].MemJunctTemp?.toFixed(0)} &deg;</p></div>,\r\n                    <div key={\"PowerLabel\"}><p className={classes.labelStyle}>Power: {combinedData.totalGPUPower?.toFixed(0)} W</p></div>,\r\n                    <div key={\"SpeedLabel\"}><p className={classes.labelStyle}>Speed: {combinedData.totalSpeed?.toFixed(1)} MH/s</p></div>\r\n                ]\r\n            })\r\n        },\r\n        [data, hwinfoData],\r\n        (prevDeps, nextDeps) => CustomCompare(prevDeps, nextDeps)\r\n    )\r\n\r\n\r\n    const GPULabel = ({ title, value, alert }) => (\r\n        <div className={classes.gpuLabelDiv}>\r\n            <p className={classes.labelStyle}>{title}</p>\r\n            <p className={classes.labelStyle} style={alert ? { color: \"red\" } : {}}>{value}</p>\r\n        </div>\r\n    )\r\n    // Labels for GPU Panels\r\n    const createGPULabel = (title, value, valueIsRed) => <div className={classes.gpuLabelDiv}>\r\n        <p className={classes.labelStyle}>{title}</p>\r\n        <p className={classes.labelStyle} style={valueIsRed ? { color: \"red\" } : {}}>{value}</p>\r\n    </div>\r\n\r\n    // Base Panel wrapper for all panels\r\n    const PanelBase = props => (\r\n        <Paper elevation={4} className={classes.paper} style={{ position: \"relative\", height: \"200px\", overflow: \"hidden\" }}>\r\n            <IconButton className={classes.floatRight} onClick={() => setRefresh()}>\r\n                <RefreshIcon color=\"primary\" />\r\n            </IconButton>\r\n            <p style={{ marginLeft: \"8px\" }}>{props.title}</p>\r\n            {props.children}\r\n            <div className={classes.timeLabelsContainer}>\r\n                <p className={classes.timelabel}>HWinfo: {timeLabels.hwinfo}</p>\r\n                <p className={classes.timelabel}>NH: {timeLabels.nh}</p>\r\n            </div>\r\n        </Paper>\r\n    )\r\n\r\n    const overViewPanel = (\r\n        <PanelBase title=\"OverView\">\r\n            <XYPlot\r\n                className={classes.arcplotStyle}\r\n                xDomain={[-3, 3]}\r\n                yDomain={[-3, 3]}\r\n                width={300}\r\n                height={300}>\r\n                <ArcSeries\r\n                    colorType=\"literal\"\r\n                    animation={{\r\n                        damping: 9,\r\n                        stiffness: 300\r\n                    }}\r\n                    radiusDomain={[0, 3]}\r\n                    data={generatedData.data}\r\n                    getLabel={d => d.name}\r\n                />\r\n            </XYPlot>\r\n            {<div className={classes.labelContainer}>\r\n                {generatedData.labels}\r\n            </div>}\r\n            {combData?.status && <div className={classes.statusContainer}>\r\n                <p className={`${classes.labelStyle} ${classes.timelabel}`}>\r\n                    {JSON.stringify(combData.status)\r\n                        .split(\"{\").join(\"\")\r\n                        .split(\"}\").join(\"\")\r\n                        .split('\"').join(\"\")\r\n                        .split(\":\").join(\": \")\r\n                    }\r\n                </p>\r\n            </div>\r\n            }\r\n        </PanelBase>\r\n    )\r\n\r\n    const gpuPanels = combData?.devices?.map(gpu => (\r\n        <PanelBase key={gpu.name} title={gpu.name.split(\" \").slice(-1)[0]}>\r\n            <div className={classes.gpuContainer}>\r\n                <div className={classes.gpuInnerContainer}>\r\n                    <GPULabel title=\"GPU Temp: \" value={<>{gpu.Temp?.toFixed(1)} &deg;</>} />\r\n                    <GPULabel title=\"HotSpot: \" value={<>{gpu.HotSpotTemp?.toFixed(1)} &deg;</>} />\r\n                    {\"MemJunctTemp\" in gpu && <GPULabel title=\"MemJunc: \" value={<>{gpu.MemJunctTemp?.toFixed(1)} &deg;</>} alert={gpu.MemJunctTemp > 100} />}\r\n                    <GPULabel title=\"Fans: \" value={<>{gpu.Fan?.toFixed(1)} %</>} alert={gpu.Fan > 94} />\r\n                </div>\r\n                <div className={classes.gpuInnerContainer}>\r\n                    <GPULabel title=\"Power: \" value={<>{gpu.Power?.toFixed(1)} W</>} />\r\n                    <GPULabel title=\"Speed: \" value={<>{gpu.speed?.length > 0 ? parseFloat(gpu.speed[0]?.speed).toFixed(1) : 0} MH/s</>} />\r\n                    <GPULabel title=\"Algo: \" value={gpu.speed?.length > 0 ? gpu.speed[0]?.title : \"--\"} />\r\n                    <GPULabel title=\"Status: \" value={gpu.status.includes(\"OFFLINE\") ? \"OFFLINE\" : gpu.status} alert={gpu.status.includes(\"OFFLINE\")} />\r\n                </div>\r\n            </div>\r\n        </PanelBase>\r\n    ))\r\n\r\n    gpuPanels?.reverse()\r\n\r\n    // TODO time update interval\r\n\r\n    return <SwibeTabs hideTabs panels={gpuPanels ? [overViewPanel, ...gpuPanels] : [overViewPanel]} />\r\n}\r\n\r\nexport default NHMonitor","import React, { useState } from 'react'\r\nimport { useCustomCompareEffect } from \"use-custom-compare\";\r\n\r\nimport { Paper, Button, TextField } from '@material-ui/core'\r\nimport FlashOnIcon from '@material-ui/icons/FlashOn';\r\nimport FlashOffIcon from '@material-ui/icons/FlashOff';\r\nimport SwibeTabs from '../core/SwibeTabs';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        ...theme.monitor.paper,\r\n        marginTop: \"0px\",\r\n        marginBottom: \"0px\"\r\n    },\r\n    profitabilityContainer: {\r\n        textAlign: \"center\"\r\n    },\r\n    profitabilityProjectorContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-around\"\r\n    },\r\n    labelStyle: {\r\n        lineHeight: \"8px\"\r\n    },\r\n    profitLabelStyle: {\r\n        color: \"#00bd00\",\r\n        fontSize: \"18px\"\r\n    },\r\n    centered: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\"\r\n    },\r\n    tabRoot: {\r\n        visibility: \"collapse\",\r\n        minHeight: \"0px\",\r\n        height: \"0px\"\r\n    },\r\n    whiteLabel: {\r\n        color: theme.monitor.paper.color\r\n    }\r\n}))\r\n\r\nconst tryGetBinancePrice = binanceData => binanceData.find(x => x.symbol === \"BTC\")?.price\r\n\r\nconst CustomCompare = (prevDeps, nextDeps) => {\r\n    // False triggers, True doesn't\r\n\r\n    // Cannot produce the data\r\n    if (Number.isNaN(nextDeps[2]?.profitabilityBTC) || Number.isNaN(nextDeps[2]?.totalPower) || !Array.isArray(nextDeps[3]))\r\n        return true;\r\n\r\n    // Cannot produce the data\r\n    const nextPrice = tryGetBinancePrice(nextDeps[3])\r\n    if (!Boolean(nextPrice))\r\n        return true;\r\n\r\n    const prevPrice = tryGetBinancePrice(prevDeps[3])\r\n\r\n    return prevDeps[0] === nextDeps[0] &&                                       // do negate power cost\r\n        prevDeps[1] === nextDeps[1] &&                                          // powerCost amount\r\n        prevDeps[2]?.profitabilityBTC === nextDeps[2].profitabilityBTC &&       // nhData profitability\r\n        prevDeps[2]?.totalPower === nextDeps[2].totalPower &&                   // nhData power\r\n        prevPrice === nextPrice                                                 // BTC price\r\n}\r\n\r\nconst calculateProfitability = (profitPerDay, powerConsumptionWH, negatePower, powerCost) => {\r\n    const powerkWday = (powerConsumptionWH / 1000.0) * 24\r\n    const powerCostDaily = powerkWday * powerCost;\r\n    const dailyProfit = profitPerDay - (negatePower ? powerCostDaily : 0);\r\n    return {\r\n        profitabilityEUR: dailyProfit,\r\n        profitabilityWeek: dailyProfit * 7,\r\n        profitabilityMonth: dailyProfit * 365 / 12.0,\r\n        profitabilityYear: dailyProfit * 365,\r\n        powerCostPercentage: (powerCostDaily / profitPerDay) * 100\r\n    }\r\n}\r\n\r\nconst ProfitabilityMonitor = ({ nhData, binanceData }) => {\r\n    const classes = useStyles()\r\n    const [negatePowerCost, setNegatePowerCost] = useState(true)\r\n    const [powerCost, setPowerCost] = useState(0.158)\r\n    const [profits, setProfits] = useState({})\r\n\r\n    useCustomCompareEffect(\r\n        () => {\r\n            setProfits(\r\n                calculateProfitability(\r\n                    nhData.profitabilityBTC * tryGetBinancePrice(binanceData),\r\n                    nhData.totalPower,\r\n                    negatePowerCost,\r\n                    powerCost\r\n                )\r\n            )\r\n        },\r\n        [negatePowerCost, powerCost, nhData, binanceData],\r\n        (prevDeps, nextDeps) => CustomCompare(prevDeps, nextDeps)\r\n    );\r\n\r\n    const P = props => <p className={classes.labelStyle} {...props}>{props.children}</p>\r\n    const P2 = props => <p className={`${classes.labelStyle} ${classes.profitLabelStyle}`}>{props.children} </p>\r\n\r\n    const profitPercentage = profits?.powerCostPercentage;\r\n    const profitabilityPanel = (\r\n        <Paper elevation={4} className={classes.paper} >\r\n            <Button\r\n                style={{ float: \"right\", width: \"100px\", marginLeft: \"-100px\" }}\r\n                className={classes.whiteLabel}\r\n                onClick={() => setNegatePowerCost(!negatePowerCost)}\r\n                startIcon={negatePowerCost ? <FlashOnIcon style={{ color: \"yellow\" }} /> : <FlashOffIcon />}\r\n            >\r\n                {!Number.isFinite(profitPercentage) ? \"--\" : profitPercentage.toFixed(0)} %\r\n            </Button>\r\n            <div className={classes.profitabilityContainer}>\r\n                <div style={{ dispaly: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\r\n                    <P style={{ marginRight: \"-8px\" }}>Daily profit: </P>\r\n                    <P2 > {profits.profitabilityEUR?.toFixed(2)}</P2>\r\n                </div>\r\n                <div className={classes.profitabilityProjectorContainer}>\r\n                    <div>\r\n                        <P>Week</P>\r\n                        <P2 >{profits.profitabilityWeek?.toFixed(0)}</P2>\r\n                    </div>\r\n                    <div>\r\n                        <P>Month</P>\r\n                        <P2>{profits.profitabilityMonth?.toFixed(0)}</P2>\r\n                    </div>\r\n                    <div>\r\n                        <P>Year</P>\r\n                        <P2>{profits.profitabilityYear?.toFixed(0)}</P2>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Paper>\r\n    )\r\n\r\n    const changePowerCostPanel = (\r\n        <Paper elevation={4} className={`${classes.paper} ${classes.centered}`} style={{ height: \"148px\" }}>\r\n            <TextField\r\n                label={<><FlashOnIcon style={{ color: \"yellow\" }} />Power Cost per kW/h</>}\r\n                type=\"number\"\r\n                value={powerCost}\r\n                className={classes.powerCostLabel}\r\n                onChange={e => setPowerCost(e.target.value)}\r\n                InputLabelProps={{ className: `${classes.whiteLabel} ${classes.centered}` }}\r\n                InputProps={{ className: classes.whiteLabel, style: { textAlign: \"right\" } }}\r\n            />\r\n        </ Paper>\r\n    )\r\n\r\n    return (\r\n        <SwibeTabs hideTabs panels={[profitabilityPanel, changePowerCostPanel]} />\r\n    )\r\n}\r\n\r\nexport default ProfitabilityMonitor","import React, { useEffect, useState } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport { hwinfoApi } from '../api';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport BinanceMonitor from './BinanceMonitor';\r\nimport NHMonitor from './NHMonitor';\r\nimport ProfitabilityMonitor from './ProfitabilityMonitor';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        width: \"100%\",\r\n        height: \"100vh\"\r\n    },\r\n    background: theme.monitor.background,\r\n    refreshButtonContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\"\r\n    }\r\n}))\r\n\r\nconst MinerMonitor = props => {\r\n    const [state, setState] = useState({\r\n        refresh: false,\r\n    })\r\n    const [hwinfoData, setHWinfoData] = useState([])\r\n    const [binanceData, setBinanceData] = useState([])\r\n    const [nhData, setNHData] = useState({ data: {}, combinedData: {} })\r\n    const classes = useStyles()\r\n\r\n    // TODO avg of the fee's -> reduce from profitability\r\n\r\n    useEffect(() => {\r\n        hwinfoApi.list({ $limit: 1, $sort: { \"time\": -1 } })\r\n            .then(res => setHWinfoData(res.data))\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n\r\n    }, [state.refresh])\r\n\r\n    return (\r\n        <div className={`${classes.root} ${classes.background}`}>\r\n            <NHMonitor\r\n                refresh={state.refresh}\r\n                setRefresh={() => setState({ refresh: !state.refresh })}\r\n                data={nhData.data}\r\n                combData={nhData.combinedData}\r\n                setData={data => setNHData({ ...nhData, data: data })}\r\n                setCombData={data => setNHData({ ...nhData, combinedData: data })}\r\n                hwinfoData={hwinfoData}\r\n            />\r\n            <ProfitabilityMonitor\r\n                nhData={nhData.combinedData}\r\n                binanceData={binanceData}\r\n            />\r\n            <BinanceMonitor\r\n                refresh={state.refresh}\r\n                data={binanceData}\r\n                setData={data => setBinanceData(data)}\r\n            />\r\n            <div className={classes.refreshButtonContainer}>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<RefreshIcon />}\r\n                    onClick={() => setState({ ...state, refresh: !state.refresh })}\r\n                >\r\n                    Refresh\r\n                </Button>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default MinerMonitor","const drawerState = { open: false }\r\n\r\nexport default (state = drawerState, action) => {\r\n  switch (action.type) {\r\n    case 'OPEN_DRAWER':\r\n      return { open: true }\r\n    case 'CLOSE_DRAWER':\r\n      return { open: false }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","const profileMenuState = { open: false, anchor: null }\r\n\r\nexport default (state = profileMenuState, action) => {\r\n    switch (action.type) {\r\n        case 'OPEN_PROFILE_MENU':\r\n            return { open: true, anchor: action.target}\r\n        case 'CLOSE_PROFILE_MENU':\r\n            return { open: false, anchor: null }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","// import { foodService } from '../api'\r\n\r\n// TODO implement auto filtering on main types based on last eaten\r\n\r\nconst foodState = {\r\n\tfilters: {\r\n\t\tmain: {},\r\n\t\tside: {},\r\n\t\tspeed: {$lt: 180},\r\n\t\tday: {}\r\n\t},\r\n\tsearch: \"\",\r\n\tsearchOptions: [],\r\n\tsort: {},\r\n\tpage: 0,\r\n\tlimit: 10,\r\n\tselectedFood: null,\r\n\tfoodEdit: null,\r\n\tfoodEditOpen: false,\r\n\tfoods: {\r\n\t\tdata: []\r\n\t},\r\n\tfiltersOpen: false,\r\n\tdistincts: {},\r\n\terrors: [],\r\n\tlatestFood: null,\r\n}\r\n\r\nexport default (state = foodState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_FILTERS\":\r\n\t\t\treturn Object.assign({}, state, { filters: action.filters })\r\n\t\tcase \"SELECT_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { selectedFood: action.food })\r\n\t\tcase \"EDIT_FOOD\":\r\n\t\t\tconst isOpen = state.foodEditOpen;\r\n\t\t\tif (isOpen) return Object.assign({}, state, { foodEdit: null, foodEditOpen: false })\r\n\t\t\treturn Object.assign({}, state, { foodEdit: action.food, foodEditOpen: true })\r\n\t\tcase \"SET_FOODS\":\r\n\t\t\tconst newState = action.foods\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfoods: newState.foods,\r\n\t\t\t\tfilters: newState.filters,\r\n\t\t\t\tsort: newState.sort,\r\n\t\t\t\tsearch: newState.search,\r\n\t\t\t\tpage: newState.page,\r\n\t\t\t\tlimit: newState.limit\r\n\t\t\t})\r\n\t\tcase \"SET_OPEN_FILTERS\":\r\n\t\t\tconst open = state.filtersOpen;\r\n\t\t\treturn Object.assign({}, state, { filtersOpen: !open })\r\n\t\tcase \"SET_DISTINCTS\":\r\n\t\t\treturn Object.assign({}, state, { distincts: action.res })\r\n\t\tcase \"SET_ERRORS\":\r\n\t\t\treturn Object.assign({}, state, { errors: action.errors })\r\n\t\tcase \"SET_LATEST_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { latestFood: action.food })\r\n\t\tcase \"SET_SEARCH_OPTIONS\":\r\n\t\t\treturn Object.assign({}, state, { searchOptions: action.options})\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","const paymentState = {\r\n\tdata: null,\r\n\tdeleteId: null,\r\n    distinctNotes: []\r\n}\r\n\r\nexport default (state = paymentState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_DATA\":\r\n\t\t\treturn Object.assign({}, state, { data: action.data })\r\n\t\tcase \"SET_DELETE_ID\":\r\n\t\t\treturn Object.assign({}, state, { deleteId: action.id })\r\n        case \"SET_DISTINCT_NOTES\":\r\n            return Object.assign({}, state, { distinctNotes: action.notes })\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n","import { combineReducers } from 'redux'\r\nimport app from './App/AppReducer'\r\nimport user from './App/userReducer'\r\nimport drawer from './App/drawerReducer'\r\nimport profile from './App/profileReducer'\r\nimport food from './foods/foodReducers'\r\nimport payment from './payments/paymentReducer'\r\n\r\nexport default combineReducers({\r\n    app,\r\n    user,\r\n    drawer,\r\n    profile,\r\n    food,\r\n    payment,\r\n})\r\n","export default (state = {message: \"\", err: \"\"}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_MESSAGE\":\r\n\t\t\treturn {message: action.message, err: \"\"}\r\n\t\tcase \"SET_ERROR\":\r\n\t\t\treturn {message: \"\", err: action.message}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","export default (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t  case 'AUTH':\r\n\t\treturn action.user\r\n\t  case 'DEAUTH':\r\n\t\treturn {}\r\n\t  default:\r\n\t\treturn state\r\n\t}\r\n  }\r\n  ","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Router, Route, browserHistory } from 'react-router'\r\nimport { createStore } from 'redux'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport feathers from '@feathersjs/client'\r\nimport rest from '@feathersjs/rest-client'\r\nimport authentication from '@feathersjs/authentication-client'\r\nimport superagent from 'superagent'\r\n\r\nimport App from './App/App'\r\nimport SignIn from './signin/SignIn'\r\nimport Home from './home/home'\r\nimport Foods from './foods/Foods'\r\nimport Payments from './payments/payments'\r\nimport MarkPendingPayment from './pending-payments/MarkPendingPayment'\r\nimport MinerMonitor from './minermonitor/MonitorDashboard'\r\n\r\nimport reducers from './reducers'\r\nimport { authUser } from './App/AppActions'\r\n\r\nconst store = createStore(reducers)\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n\tconsole.log('This app is using DEVELOPMENT environment');\r\n\tconsole.log('REACT_APP_API_URL = ' + process.env.REACT_APP_API_URL);\r\n}\r\nif (process.env.NODE_ENV === \"production\") {\r\n\tif (!process.env.REACT_APP_API_URL)\r\n\t\tconsole.error('REACT_APP_API_URL is not set!')\r\n}\r\n\r\nconst app = feathers()\r\n\t.configure(rest(process.env.REACT_APP_API_URL).superagent(superagent))\r\n\t.configure(authentication({ storage: window.localStorage }))\r\n\r\nfunction handlePath(pathname) {\r\n\tif (pathname === '/signin' || pathname.includes('/pending-payments:')) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t//Get user from Redux state\r\n\tconst user = store.getState().user;\r\n\t//If we have no user, none is logged in.\r\n\tif (!user || !user._id) {\r\n\t\tbrowserHistory.push('/signin');\r\n\t\treturn;\r\n\t}\r\n}\r\n\r\nfunction enterHandler() {\r\n\tconst pathname = window.location.pathname\r\n\thandlePath(pathname)\r\n}\r\n\r\n\r\napp.reAuthenticate()\r\n\t.then(r => {\r\n\t\t//Populate Redux state with user information if authenticated.\r\n\t\tstore.dispatch(authUser(r.user))\r\n\t\tinitRender()\r\n\t})\r\n\t.catch(err => {\r\n\t\tinitRender()\r\n\t})\r\n\r\n\r\nfunction initRender() {\r\n\tReactDOM.render((\r\n\t\t<Provider store={store}>\r\n\t\t\t<Router history={browserHistory}>\r\n\t\t\t\t<Route path=\"/\" component={App} onEnter={enterHandler}>\r\n\t\t\t\t\t<Route path=\"/home\" component={Home} />\r\n\t\t\t\t\t<Route path=\"/signin\" component={SignIn} />\r\n\t\t\t\t\t<Route path=\"/foods\" component={Foods} />\r\n\t\t\t\t\t<Route path=\"/payments\" component={Payments} />\r\n                    <Route path=\"/pending-payments:id\" component={MarkPendingPayment} />\r\n                    <Route path=\"/minermonitor\" component={MinerMonitor} />\r\n\t\t\t\t</Route>\r\n\t\t\t</Router>\r\n\t\t</Provider>\r\n\t), document.getElementById('root'))\r\n}\r\n\r\nexport default app\r\n"],"sourceRoot":""}