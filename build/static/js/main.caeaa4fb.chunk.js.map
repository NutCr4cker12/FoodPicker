{"version":3,"sources":["theme.js","App/AppActions.js","App/Header.js","App/Message.js","core/NavItem.js","App/Nav.js","api.js","App/profile.js","App/App.js","signin/SignIn.js","home/home.js","core/TabContent.js","foods/FilterSection.js","foods/FilterSorting.js","foods/Filters.js","foods/Search.js","core/Table.js","foods/foodAction.js","core/BackDialog.js","foods/foodEdit.js","foods/SelectedFood.js","foods/Foods.js","shoplist/shoplist.js","payments/paymentAction.js","payments/payments.js","App/drawerReducer.js","App/profileReducer.js","foods/foodReducers.js","payments/paymentReducer.js","reducers.js","App/AppReducer.js","App/userReducer.js","index.js"],"names":["muiTheme","createMuiTheme","palette","primary","main","green","secondary","error","red","overrides","MuiPaper","root","flexBasis","MuiTabs","vertical","maxWidth","MuiGrid","justifyContent","MuiDialogTitle","flexDirection","alignItems","separate","flexGrow","marginTop","centerDivColumn","display","spreadDivColumn","AppTheme","props","ThemeProvider","theme","children","setError","message","type","setMessage","authUser","user","useStyles","makeStyles","navBar","zIndex","drawer","position","top","left","margin","connect","state","drawerOpen","open","profileOpen","profile","dispatch","onOpenDrawer","onCloseDrawer","onNavigate","pathname","browserHistory","push","onOpenProfile","event","target","currentTarget","onCloseProfile","appbar","mobileNavIcon","profileButton","location","classes","_id","IconButton","onClick","style","color","fontSize","edge","AppBar","className","Toolbar","text","app","err","onClose","Snackbar","Boolean","autoHideDuration","elevation","variant","severity","path","icon","ListItem","button","key","ListItemIcon","ListItemText","capitalCase","menuItems","Divider","role","Drawer","List","isChrome","navigator","userAgent","indexOf","isSafari","isOpera","toLowerCase","users","email","password","authenticate","strategy","logout","getSorting","sort","s","Object","keys","forEach","value","name","convertName","convertFilters","filters","f","d","assign","nins","length","map","x","parseInt","split","$nin","foodService","service","foods","page","search","sorting","query","$skip","$limit","$sort","$search","find","food","create","id","patch","remove","Promise","resolve","reject","then","result","mainTypes","sideTypes","dayTypes","Array","data","maintype","sidetype","Set","side","day","lasteaten","$lasteaten","res","paymentsService","payments","payment","anchorEl","anchor","onSignOut","timeout","setTimeout","clearTimeout","catch","keepMounted","disableAutoFocus","MenuItem","disabled","opacity","isQuest","App","profileMenu","this","CssBaseline","React","Component","spacing","TextField","paddingRight","onSignIn","onSignInGoogle","onResetPassword","useState","setEmail","setPassword","submitHanlder","preventDefault","Paper","subheader","ListSubheader","onSubmit","label","fullWidth","onChange","e","helperText","Button","startIcon","paper","marginLeft","marginRight","index","other","Typography","component","hidden","aria-labelledby","Box","p","filterSectionRoot","backgroundColor","background","height","tabs","borderRight","divider","verticalTab","center","tabContainer","paddingTop","speedContainer","minWidth","speedText","speedBtn","padding","textAlign","filterButton","width","filterButtonDisabled","header","filterTab","setFilters","tabValue","setTabValue","onFilterClick","selected","newValue","forceColumn","filter","first","GridHeader","Fragment","Grid","item","xs","onOffBtn","on","buttonFilters","arr","container","directon","justify","mainContent","sideContent","dayContent","speedFilter","speed","speedValue","timeIsLess","speedFilterText","handleSpeedClick","speedContent","Slider","defaultValue","track","getAriaValueText","valueLabelDisplay","valueLabelFormat","hours","Math","floor","mins","getSpeedLabel","step","min","max","getSpeedText","Tabs","orientation","indicatorColor","textColor","Tab","TabContent","buttonContainer","descriptionContainer","upperdescriptionContainer","textContainer","setSort","SortButton","getSortDescriptionUp","handleChange","getSortDescriptionDown","actionContent","copyObj","JSON","parse","stringify","currentFilters","filtersOpen","onApply","setOpenFilter","currentSort","clearFilters","liha","Dialog","FilterSorting","DialogActions","autoFocus","borderRadius","shape","fade","common","white","breakpoints","up","searchDiv","btnDiv","div","onSetSearch","searchState","setSearch","placeholder","InputProps","startAdornment","InputAdornment","paddingLeft","highlight","lighten","light","dark","title","flex","visuallyHidden","border","clip","overflow","columns","onSelectFood","setPage","count","total","pager","tableToolbar","Tooltip","endIcon","getSortDirection","tableHeaders","TableHead","TableRow","i","TableCell","align","sortDirection","TableSortLabel","active","direction","tableBody","TableBody","hover","join","timeseaten","TableContainer","Table","size","TablePagination","rowsPerPage","onChangePage","newPage","selectFood","setEditFood","setErrors","errors","onCancel","onOk","cancelText","okText","oncancel","DialogTitle","DialogContent","selectFieldContainer","selectField","addButton","sideType","dialogContainer","distDayTypes","distincts","foodEditOpen","distMainTypes","distSideTypes","onSetEditFood","onDeleteFood","onSaveFood","time","foodEdit","onUpdate","mainType","setMainType","foodamount","toString","foodAmount","setFoodAmount","setSideTypes","setName","link","recipe","setRecipe","eaten","setEaten","cookTime","setCookTime","deleteOpen","setDeleteOpen","SelectField","types","select","sideTypeElement","FormControl","includes","InputLabel","Select","multiple","multiline","input","OutlinedInput","renderValue","Checkbox","checked","FormHelperText","nameElement","speedElement","RegExp","test","recipeElement","eatenElement","editContent","deleteFood","noValidate","BackDialog","spread","centerColumns","datePickerTextfield","selectedFood","latestFood","onFoodSelection","latestFoodInfo","lastDate","Date","a","b","startDate","valueOf","endDate","getLatestFoodInfo","setStartDate","setEndDate","historyContent","reverse","slice","ago","today","diff","round","m","w","getDate","getMonth","getFullYear","toFineTime","selectContent","Link","href","utils","MomentUtils","DatePicker","format","views","minDate","showTodayButton","date","_d","animateYearScrolling","TextFieldComponent","days","toDateString","currDay","newDay","concat","defaultFood","onRefresh","initFilters","$lt","limit","shoplist","setDeleteId","spacings","tableIcon","deleteId","getData","startOfTheMonth","getTime","$gt","onGetData","onAddPayment","onSetDeleteId","onDeletePayment","setDate","amount","setAmount","note","setNote","reduce","toFixed","addPayment","replace","endAdornment","parseFloat","notes","table","year","month","formatDate","substr","formatNotes","drawerState","profileMenuState","foodState","paymentState","combineReducers","action","isOpen","newState","store","createStore","reducers","feathers","configure","rest","process","superagent","authentication","storage","window","localStorage","enterHandler","getState","handlePath","initRender","ReactDOM","render","history","onEnter","Home","SignIn","Foods","ShopList","Payments","document","getElementById","reAuthenticate","r"],"mappings":"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","file":"static/js/main.caeaa4fb.chunk.js","sourcesContent":["import React from 'react'\r\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { green, red } from '@material-ui/core/colors'\r\n\r\nconst muiTheme = createMuiTheme({\r\n\tpalette: {\r\n\t\t// primary: green,\r\n\t\tprimary: {\r\n\t\t\tmain: green[800]\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#fffffF\"\r\n\t\t},\r\n\t\terror: red\r\n\t},\r\n\toverrides: {\r\n\t\tMuiPaper: {\r\n\t\t\troot: {\r\n\t\t\t\t// flex: 1,\r\n\t\t\t\tflexBasis: \"auto\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiTabs: {\r\n\t\t\tvertical: {\r\n\t\t\t\tmaxWidth: \"80px\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiGrid: {\r\n\t\t\troot: {\r\n\t\t\t\tjustifyContent: \"space-evenly\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiDialogTitle: {\r\n\t\t\troot: {\r\n\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\talignItems: \"center\",\r\n\t\t\t\tjustifyContent: \"space-between\"\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tseparate: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\troot: {\r\n\t\tmarginTop: \"4rem\"\r\n\t},\r\n\tcenterDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspreadDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t}\r\n})\r\n\r\n\r\nexport const AppTheme = (props) => {\r\n\r\n\treturn (\r\n\t\t<ThemeProvider theme={muiTheme}>\r\n\t\t\t<div>\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t</ThemeProvider>\r\n\t)\r\n}\r\n","export const setError = message => {\r\n\treturn { type: 'SET_ERROR', message }\r\n  }\r\n\r\n  export const setMessage = message => {\r\n\treturn { type: 'SET_MESSAGE', message }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  \r\n  export const openDrawer = () => {\r\n\treturn { type: 'OPEN_DRAWER' }\r\n  }\r\n  \r\n  export const closeDrawer = () => {\r\n\treturn { type: 'CLOSE_DRAWER' }\r\n  }\r\n  \r\n  export const openProfile = (target) => {\r\n\treturn { type: \"OPEN_PROFILE_MENU\", target }\r\n  }\r\n  \r\n  export const closeProfile = () => {\r\n\treturn { type: \"CLOSE_PROFILE_MENU\" }\r\n  }\r\n  \r\n  export const authUser = user => {\r\n\treturn { type: 'AUTH', user }\r\n  }\r\n  \r\n  export const deauthUser = () => {\r\n\treturn { type: 'DEAUTH' }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  ","import React from 'react';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { connect } from 'react-redux';\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { closeDrawer, openDrawer, openProfile, closeProfile } from './AppActions'\r\n\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tnavBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\tposition: \"fixed\",\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\tmargin: 0,\r\n\t\t// backgroundColor: theme.palette.primary.dark\r\n\t},\r\n\tseparate: theme.separate\r\n}))\r\n\r\nconst Header = ({ location, user, drawerOpen, onOpenDrawer, onCloseDrawer, profileOpen, onOpenProfile, onCloseProfile }) => {\r\n\tconst classes = useStyles();\r\n\tlet appbar, mobileNavIcon, profileButton\r\n\r\n\tprofileButton = (\r\n\t\tuser._id != null &&\r\n\t\t<div>\r\n\t\t\t<IconButton onClick={profileOpen ? onCloseProfile : onOpenProfile} style={{ color: 'white' }}>\r\n\t\t\t\t<AccountCircleIcon fontSize=\"large\" />\r\n\t\t\t</IconButton>\r\n\t\t</div>\r\n\t)\r\n\r\n\tif (location.pathname === '/signin') {\r\n\t\t//do nothing\r\n\t}\r\n\telse\r\n\t\tmobileNavIcon =\r\n\t\t\t<IconButton edge=\"start\" style={{ color: 'white' }} onClick={() => {drawerOpen ? onCloseDrawer() : onOpenDrawer()}} >\r\n\t\t\t\t<MenuIcon />\r\n\t\t\t</IconButton>\r\n\r\n\tappbar = (\r\n\t\t<AppBar position=\"static\" className={classes.navBar}>\r\n\t\t\t<Toolbar>\r\n\t\t\t\t{mobileNavIcon}\r\n\t\t\t\t<div className={classes.separate} />\r\n\t\t\t\t{profileButton}\r\n\t\t\t</Toolbar>\r\n\t\t</AppBar>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t{appbar}\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open,\r\n\t\tprofileOpen: state.profile.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonOpenDrawer: () => {\r\n\t\t\tdispatch(openDrawer())\r\n\t\t},\r\n\t\tonCloseDrawer: () => {\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonOpenProfile: (event) => {\r\n\t\t\tdispatch(openProfile(event.currentTarget))\r\n\t\t},\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)","import React from 'react'\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setMessage } from './AppActions'\r\n\r\nconst Message = ({ text, err, onClose }) => (\r\n\t<Snackbar\r\n\t\topen={Boolean(err || text)}\r\n\t\tautoHideDuration={3000}\r\n\t\tonClose={onClose}\r\n\t\t// anchorOrigin={{horizontal: \"center\", vertical: \"top\"}}\r\n\t>\r\n\t\t<MuiAlert\r\n\t\t\televation={6}\r\n\t\t\tvariant=\"filled\"\r\n\t\t\tonClose={onClose}\r\n\t\t\tseverity={err ? \"error\" : text ? \"success\" : \"info\"}\r\n\t\t>\r\n\t\t\t{err ? err : text ? text : \"\"}\r\n\t\t</MuiAlert>\r\n\t</Snackbar>\r\n)\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\ttext: state.app.message,\r\n\t\terr: state.app.err\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonClose: () => {\r\n\t\t\tdispatch(setMessage(\"\"))\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Message)\r\n","import React from 'react'\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { capitalCase } from \"capital-case\";\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeDrawer } from '../App/AppActions'\r\n\r\nconst NavItem = (props) => {\r\n\tconst { path, icon, onNavigate } = props;\r\n\r\n\treturn (\r\n\t\t<ListItem button key={path} onClick={() => onNavigate(`/${path}`)}>\r\n\t\t\t<ListItemIcon>{icon}</ListItemIcon>\r\n\t\t\t<ListItemText primary={capitalCase(path)} />\r\n\t\t</ListItem>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NavItem)","import React from 'react';\r\n\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\n\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeDrawer, openDrawer } from './AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst Nav = ({user, drawerOpen, onOpenDrawer, onCloseDrawer, onNavigate}) => {\r\n\tlet menuItems = []\r\n\r\n\r\n\tif (user._id) {\r\n\t\tmenuItems.push(<Divider key=\"div1\" />)\r\n\t\tmenuItems.push(<NavItem key={1} path={\"home\"} icon={<HomeIcon/>} />)\r\n\t\tmenuItems.push(<NavItem key={2} path=\"foods\" icon={<FastfoodIcon />} />)\r\n\t\tmenuItems.push(<NavItem key={3} path=\"shoplist\" icon={<ShoppingCartIcon />} />)\r\n\t\tif (user.role === \"admin\") {\r\n\t\t\tmenuItems.push(<NavItem key={4} path=\"payments\" icon={<PaymentIcon />} />)\r\n\t\t}\r\n\t\tmenuItems.push(<Divider key=\"div2\" />)\r\n\r\n\t\treturn (\r\n\t\t\t<Drawer \r\n\t\t\t\topen={drawerOpen}\r\n\t\t\t\tonClose={open => open? onCloseDrawer() : onOpenDrawer()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{menuItems}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Drawer>\r\n\t\t)\r\n\t}\r\n\treturn (<div/>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t  onOpenDrawer: () => {\r\n\t\tdispatch(openDrawer())\r\n\t  },\r\n\t  onCloseDrawer: () => {\r\n\t\tdispatch(closeDrawer())\r\n\t  },\r\n\t  onNavigate: pathname => {\r\n\t\tbrowserHistory.push(pathname)\r\n\t\tdispatch(closeDrawer())\r\n\t  }    \r\n\t}\r\n  }\r\n  \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav)","import app from '.'\r\n\r\nlet isChrome = navigator.userAgent.indexOf('Chrome') > -1\r\n// let isExplorer = navigator.userAgent.indexOf('MSIE') > -1\r\n// let isFirefox = navigator.userAgent.indexOf('Firefox') > -1\r\nlet isSafari = navigator.userAgent.indexOf(\"Safari\") > -1\r\nlet isOpera = navigator.userAgent.toLowerCase().indexOf(\"op\") > -1\r\nif (isChrome && isSafari) isSafari = false\r\nif (isChrome && isOpera) isChrome = false\r\n\r\n// const passwordChangeService = () => app.service('v1/password-change')\r\n// const passwordResetRequestService = () => app.service('v1/password-requestreset')\r\n// const passwordResetRequestAdminService = () => app.service('v1/password-requestreset-admin')\r\n// const passwordResetService = () => app.service('v1/password-reset')\r\nconst userService = () => app.service('v1/users')\r\nexport const users = {\r\n\tlist: query => {\r\n\t\treturn userService().find({ query: query });\r\n\t},\r\n\tget: id => {\r\n\t\tif (!id) {\r\n\t\t\treturn app.get('authentication');\r\n\t\t}\r\n\t\treturn userService().get(id)\r\n\t},\r\n\tcreate: user => userService().create(user),\r\n\tpatch: (id, user) => userService().patch(id, user),\r\n\tremove: id => userService().remove(id),\r\n\tauthenticate: () => app.authentication.reAuthenticate(true),\r\n\tsignIn: (email, password) => app.authenticate({ strategy: 'local', email, password }),\r\n\t//   signInGoogle: () => {\r\n\t//     window.location.href = process.env.REACT_APP_OAUTH_URL + '/google';\r\n\t//     return Promise.resolve(null)\r\n\t//   },\r\n\tsignOut: () => app.logout(),\r\n\t//   changePassword: (oldPassword, newPassword) => passwordChangeService().create({ oldPassword, newPassword }),\r\n\t//   resetPassword: (id, token, password) => passwordResetService().create({ id, token, password }),\r\n\t//   requestPasswordReset: email => passwordResetRequestService().create({ email }),\r\n\t//   requestPasswordResetAdmin: email => passwordResetRequestAdminService().create({ email }),\r\n}\r\n\r\nconst getSorting = (sort) => { // desc = -1, asc = 1\r\n\tconst s = {}\r\n\tconst convertName = (name) => {\r\n\t\tswitch (name) {\r\n\t\t\tcase \"main\":\r\n\t\t\t\treturn \"maintype\"\r\n\t\t\tcase \"side\":\r\n\t\t\t\treturn \"sidetype\"\r\n\t\t\tcase \"food\":\r\n\t\t\t\treturn \"name\"\r\n\t\t\tcase \"Food Amount\":\r\n\t\t\t\treturn \"foodamount\"\r\n\t\t\tcase \"Cooking Time\":\r\n\t\t\t\treturn \"time\"\r\n\t\t\tcase \"Last Eaten\":\r\n\t\t\t\treturn \"lasteaten\"\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"timeseaten\"\r\n\t\t}\r\n\t}\r\n\tObject.keys(sort).forEach(key => {\r\n\t\tconst value = sort[key];\r\n\t\tif (value === \"asc\") {\r\n\t\t\tsort[key] = 1\r\n\t\t} else if (value === \"desc\") {\r\n\t\t\tsort[key] = -1\r\n\t\t}\r\n\t\ts[convertName(key)] = sort[key]\r\n\t})\r\n\treturn s\r\n}\r\n\r\nconst convertFilters = (filters) => {\r\n\tvar f = {}\r\n\tObject.keys(filters).forEach(type => {\r\n\t\tvar d = {}\r\n\t\tif (type === \"speed\") {\r\n\t\t\td[\"time\"] = filters[type]\r\n\t\t\tf = Object.assign(f, d)\r\n\t\t} else {\r\n\t\t\tvar nins = []\r\n\t\t\tObject.keys(filters[type]).forEach(name => {\r\n\t\t\t\tif (filters[type][name] === \"$nin\") nins.push(name)\r\n\t\t\t})\r\n\t\t\tif (nins.length) {\r\n\t\t\t\tif (type === \"day\") {\r\n\t\t\t\t\tnins = nins.map(x => parseInt(x.split(\" \")[0]))\r\n\t\t\t\t\td[\"foodamount\"] = { $nin: nins }\r\n\t\t\t\t} else {\r\n\t\t\t\t\td[`${type}type`] = { $nin: nins }\r\n\t\t\t\t}\r\n\t\t\t\tf = Object.assign(f, d)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\treturn f\r\n}\r\n\r\nconst foodService = () => app.service('v1/foods')\r\nexport const foods = {\r\n\tlist: (filters, page, sort, search = \"\") => {\r\n\t\tconst f = convertFilters(filters)\r\n\t\tconst sorting = getSorting(sort)\r\n\t\tvar query = Object.assign(f, {\r\n\t\t\t$skip: ((page - 1) < 0 ? 0 : page) * 10,\r\n\t\t\t$limit: 10,\r\n\t\t\t$sort: sorting,\r\n\t\t})\r\n\t\tif (search) query = Object.assign(query, { $search: search })\r\n\t\treturn foodService().find({ query: query })\r\n\t},\r\n\tget: id => foodService().get(id),\r\n\tcreate: food => foodService().create(food),\r\n\tpatch: (id, food) => foodService().patch(id, food),\r\n\tremove: id => foodService().remove(id),\r\n\tdistincts: () => {\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t\tfoodService().find({ query: { $limit: 10000 } })\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tlet mainTypes = []\r\n\t\t\t\t\tlet sideTypes = []\r\n\t\t\t\t\tconst dayTypes = [...Array(4).keys()].map(d => `${d + 1} day`)\r\n\t\t\t\t\tresult.data.forEach(f => {\r\n\t\t\t\t\t\tmainTypes.push(f.maintype)\r\n\t\t\t\t\t\tf.sidetype.forEach(s => sideTypes.push(s))\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tmain: [...new Set(mainTypes)],\r\n\t\t\t\t\t\tside: [...new Set(sideTypes)],\r\n\t\t\t\t\t\tday: dayTypes\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t)\r\n\t},\r\n\tlastEaten: () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tfoodService().find({ query: {\r\n\t\t\t\t$sort: {\r\n\t\t\t\t\tlasteaten: -1\r\n\t\t\t\t},\r\n\t\t\t\t$lasteaten: true\r\n\t\t\t}}).then(res => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\n\r\n\r\nconst shopListService = () => app.service('v1/shoplist')\r\nexport const shoplist = {\r\n\tlist: query => {\r\n\t\treturn shopListService().find({ query: query })\r\n\t},\r\n\tget: id => shopListService().get(id),\r\n\tcreate: item => shopListService().create(item),\r\n\tpatch: (id, item) => shopListService().patch(id, item),\r\n\tremove: id => shopListService().remove(id)\r\n}\r\n\r\nconst paymentsService = () => app.service('v1/payments')\r\nexport const payments = {\r\n\tlist: query => paymentsService().find({ query: query }),\r\n\tget: id => paymentsService().get(id),\r\n\tcreate: payment => paymentsService().create(payment),\r\n\tpatch: (id, payment) => paymentsService().patch(id, payment),\r\n\tremove: id => paymentsService().remove(id)\r\n}","import React from 'react'\r\n\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider'\r\n\r\nimport ActionExitToApp from '@material-ui/icons/ExitToApp';\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { closeProfile, setMessage, deauthUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst profile = ({ user, profileOpen, onCloseProfile, anchorEl, onSignOut }) => {\r\n\r\n\treturn (\r\n\t\t<Menu\r\n\t\t\tanchorEl={anchorEl}\r\n\t\t\tkeepMounted\r\n\t\t\topen={profileOpen}\r\n\t\t\tonClose={onCloseProfile}\r\n\t\t\tdisableAutoFocus={true}\r\n\t\t>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={`Signed in as: ${user.isQuest ? \" Quest\" : \"\"}`} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={user.name} secondary={user.email} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<Divider />\r\n\t\t\t<MenuItem onClick={() => {\r\n\t\t\t\tonCloseProfile()\r\n\t\t\t\tonSignOut()\r\n\t\t\t}}>\r\n\t\t\t\t<ListItemIcon><ActionExitToApp /></ListItemIcon>\r\n\t\t\t\t<ListItemText primary='Sign Out' />\r\n\t\t\t</MenuItem>\r\n\t\t</Menu>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tprofileOpen: state.profile.open,\r\n\t\tanchorEl: state.profile.anchor\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t},\r\n\t\tonSignOut: () => {\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign out.'))\r\n\t\t\t}, 5000)\r\n\t\t\tusers.signOut()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed out.'))\r\n\t\t\t\t\tdispatch(deauthUser())\r\n\t\t\t\t\t// eslint-disable-next-line no-restricted-globals\r\n\t\t\t\t\tbrowserHistory.push('/signin');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage(err.message))\r\n\t\t\t\t})\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(profile)\r\n","import React from 'react'\r\nimport { AppTheme } from '../theme'\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Header from './Header'\r\nimport Message from './Message'\r\n\r\nimport Nav from './Nav'\r\nimport Profile from './profile'\r\n// import MediaQuery from 'react-responsive'\r\n\r\nexport default class App extends React.Component {\r\n\r\n\trender() {\r\n\t\tlet navBar, profileMenu;\r\n\t\tif (this.props.location.pathname !== \"/signin\") {\r\n\t\t\tnavBar =\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Nav />\r\n\t\t\t\t</div>\r\n\t\t\tprofileMenu = <div><Profile /></div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<AppTheme>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<CssBaseline />\r\n\t\t\t\t\t<Header location={this.props.location} />\r\n\t\t\t\t\t{navBar}\r\n\t\t\t\t\t{profileMenu}\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{this.props.main}\r\n\t\t\t\t\t\t{this.props.children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Message />\r\n\t\t\t\t</div>\r\n\t\t\t</AppTheme>\r\n\t\t)\r\n\t}\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport List from '@material-ui/core/List'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ActionLock from '@material-ui/icons/Lock'\r\n\r\n// import Toolbar from '../core/Toolbar'\r\n\r\n// import { CookieDisclaimer } from '../home/CookieDisclaimer'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\n// import { BrowserRouter } from 'react-router-dom'\r\nimport { browserHistory } from 'react-router'\r\nimport { setMessage, setError, authUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tmarginTop: \"8rem\",\r\n\t\tdisplay: 'flex',\r\n\t\tmargin: theme.spacing(2),\r\n\t},\r\n\tTextField: {\r\n\t\tdisplay: \"flex\",\r\n\t\tmargin: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(4)\r\n\t}\r\n}))\r\n\r\nfunction SignIn(props) {\r\n\tconst classes = useStyles();\r\n\tconst [error] = useState();\r\n\tconst [email, setEmail] = useState();\r\n\tconst [password, setPassword] = useState();\r\n\r\n\tconst { onSignIn } = props;\r\n\r\n\tconst submitHanlder = event => {\r\n\t\tevent.preventDefault()\r\n\t\tonSignIn(email, password)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper elevation={3}>\r\n\t\t\t\t<List subheader={<ListSubheader>Sign In</ListSubheader>}>\r\n\t\t\t\t\t<form onSubmit={submitHanlder} style={{ marginTop: '24px' }}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Email\"\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 1 || error === 3 ? \"E-mail is required\" : error === 4 ? 'E-mail does not contain \"@\" symbol' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 2 || error === 3 ? 'Password is required' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tstartIcon={<ActionLock />}\r\n\t\t\t\t\t\t\t\tonClick={submitHanlder}\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t>Sign In</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"submit\" style={{ display: \"none\" }} />\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</List>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSignIn: (email, password) => {\r\n\t\t\tif (email.length === 0 && password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail and password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(3) }\r\n\t\t\t}\r\n\t\t\tif (email.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(1) }\r\n\t\t\t}\r\n\t\t\tif (email.indexOf('@') === -1) {\r\n\t\t\t\tdispatch(setMessage('E-mail does not contain \"@\" symbol'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(4) }\r\n\t\t\t}\r\n\t\t\tif (password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('Password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(2) }\r\n\t\t\t}\r\n\t\t\tdispatch(setMessage('Signing in...'))\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign in.'))\r\n\t\t\t}, 5000)\r\n\t\t\treturn users.signIn(email, password)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed in.'));\r\n\t\t\t\t\tdispatch(authUser(result.user));\r\n\t\t\t\t\tbrowserHistory.push('/home')\r\n\t\t\t\t\treturn { user: result.user, error: null }\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tif (err.name === 'MongoError') {\r\n\t\t\t\t\t\tdispatch(setMessage('Server error. Try again later.'))\r\n\t\t\t\t\t} else if (err.name === 'NotAuthenticated') {\r\n\t\t\t\t\t\tdispatch(setMessage('Unable to sign in. Invalid e-mail or password.'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatch(setError('Error: ' + err.name + err.message))\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbrowserHistory.push('/')\r\n\t\t\t\t\tsetTimeout(() => browserHistory.push('/signin'), 10)\r\n\t\t\t\t\treturn { user: null, error: err };\r\n\t\t\t\t})\r\n\t\t},\r\n\t\tonSignInGoogle: () => {\r\n\t\t\t//   dispatch(setMessage('Signing in...'))\r\n\t\t\t//   return users.signInGoogle()\r\n\t\t},\r\n\t\tonResetPassword: () => {\r\n\t\t\t//   browserHistory.push('/passwordreset')\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\r\n","import React from 'react'\r\n\r\nimport List from '@material-ui/core/List';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport { connect } from 'react-redux';\r\nimport { closeDrawer } from '../App/AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\tmarginTop: \"10rem\",\r\n\t\tmarginLeft: \"1rem\",\r\n\t\tmarginRight: \"1rem\"\r\n\t}\r\n}))\r\n\r\nconst Home = (props) => {\r\n\tconst classes = useStyles()\r\n\tconst { user } = props;\r\n\tlet menuItems = []\r\n\r\n\tmenuItems.push(<NavItem key={0} path=\"foods\" icon={<FastfoodIcon />} />)\r\n\tmenuItems.push(<NavItem key={1} path=\"shoplist\" icon={<ShoppingCartIcon />} />)\r\n\tif (user.role === \"admin\") {\r\n\t\tmenuItems.push(<NavItem key={2} path=\"payments\" icon={<PaymentIcon />} />)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<List className={classes.paper}>\r\n\t\t\t\t{menuItems}\r\n\t\t\t</List>\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)","import React from 'react'\r\n\r\nimport { Box, Typography } from '@material-ui/core';\r\n\r\nexport default (props) => {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<Typography\r\n\t\t\tcomponent=\"div\"\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`simple-tabpanel-${index}`}\r\n\t\t\taria-labelledby={`simple-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && <Box p={3}>{children}</Box>}\r\n\t\t</Typography>\r\n\t);\r\n}","import React, { useState } from 'react'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { Tabs, Tab, Button, Slider, Grid } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport TabContent from '../core/TabContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfilterSectionRoot: {\r\n\t\tflexGrow: 1,\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tdisplay: 'flex',\r\n\t\theight: 224,\r\n\t\t// marginLeft: \"-20px\"\r\n\t},\r\n\ttabs: {\r\n\t\tborderRight: `1px solid ${theme.palette.divider}`,\r\n\t\tbackgroundColor: theme.palette.primary,\r\n\t},\r\n\tverticalTab: {\r\n\t\talignItems: \"start\",\r\n\t\tmaxWidth: \"10px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\ttabContainer: {\r\n\t\tflexGrow: 1,\r\n\t\tmaxWidth: \"250px\",\r\n\t\tmarginLeft: \"-56px\",\r\n\t\tmarginTop: \"-40px\",\r\n\t\tpaddingTop: \"2px\"\r\n\t},\r\n\tspeedContainer: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmarginLeft: \"5px\"\r\n\t},\r\n\tspeedText: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspeedBtn: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tmargin: \"10px\"\r\n\t},\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(1),\r\n\t\ttextAlign: 'center',\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t},\r\n\tfilterButton: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\"\r\n\t},\r\n\tfilterButtonDisabled: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\",\r\n\t\tcolor: \"#d3d3d3\"\r\n\t},\r\n\theader: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\",\r\n\t\topacity: 1,\r\n\t\t// border: `1px solid ${theme.palette.primary.main}`,\r\n\t\t// color: theme.palette.primary.main\r\n\t},\r\n\tfilterTab: {\r\n\t\tminWidth: \"80px\"\r\n\t},\r\n}));\r\n\r\nconst getSpeedLabel = (value) => {\r\n\tconst hours = Math.floor(value / 60)\r\n\tconst mins = Math.floor((value % 60) / 6);\r\n\tif (mins === 0) return hours\r\n\treturn `${hours}.${mins}`\r\n}\r\n\r\nconst getSpeedText = (value) => {\r\n\tconst hours = Math.floor(value / 60)\r\n\tconst mins = Math.floor(value % 60);\r\n\tif (hours === 0) return `    ${mins} min`\r\n\tif (mins === 0) return `${hours} h       `\r\n\treturn `${hours}h ${mins} min`\r\n}\r\n\r\nconst inSpread = 2;\r\nconst outSpread = 12;\r\nconst gridSpacing = 3;\r\n\r\nconst FilterSection = ({ filters, setFilters }) => {\r\n\tconst classes = useStyles()\r\n\tconst [tabValue, setTabValue] = useState(0)\r\n\r\n\tconst onFilterClick = (f) => {\r\n\t\tvar selected;\r\n\t\tif (f in filters.main) selected = filters.main\r\n\t\telse if (f in filters.side) selected = filters.side\r\n\t\telse if (f in filters.day) selected = filters.day\r\n\t\tconst newValue = selected[f] === \"$in\" ? \"$nin\" : \"$in\"\r\n\t\tselected[f] = newValue\r\n\t\tsetFilters(filters)\r\n\t}\r\n\t\r\n\tconst forceColumn = (type, filter) => {\r\n\t\tconst first = Object.keys(type.type)[0]\r\n\r\n\t\tvar selected;\r\n\t\tif (first in filters.main) selected = filters.main\r\n\t\telse if (first in filters.side) selected = filters.side\r\n\t\telse if (first in filters.day) selected = filters.day\r\n\r\n\t\tObject.keys(selected).forEach(f => {\r\n\t\t\tselected[f] = filter\r\n\t\t})\r\n\t\tsetFilters(filters)\r\n\t}\r\n\r\n\tconst GridHeader = (type) => (\r\n\t\t<React.Fragment>\r\n\t\t\t<Grid item xs={inSpread}>\r\n\t\t\t\t<Button color=\"primary\" className={classes.header} onClick={() => forceColumn(type, \"$in\")}>Include</Button>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={inSpread}>\r\n\t\t\t\t<Button color=\"primary\" className={classes.header} onClick={() => forceColumn(type, \"$nin\")}>Exclude</Button>\r\n\t\t\t</Grid>\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst onOffBtn = (on, label, onClick) => (\r\n\t\t<Button\r\n\t\t\tvariant={on ? \"contained\" : \"outlined\"}\r\n\t\t\tcolor={on ? \"primary\" : \"default\"}\r\n\t\t\tonClick={() => onClick(label)}\r\n\t\t\tclassName={on ? classes.filterButton : classes.filterButtonDisabled}\r\n\t\t>{label}</Button>\r\n\t)\r\n\r\n\tconst buttonFilters = (type) => {\r\n\t\tconst arr = Object.keys(type)\r\n\t\treturn (\r\n\t\t\t<div className={classes.tabContainer}>\r\n\t\t\t\t<Grid container spacing={1} directon=\"row\" justify=\"space-evenly\" alignItems=\"flex-start\">\r\n\t\t\t\t\t<Grid container item xs={outSpread} spacing={gridSpacing}>\r\n\t\t\t\t\t\t<GridHeader type={type} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{arr.map(f => {\r\n\t\t\t\t\t\tconst left = type[f] === \"$in\"\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<React.Fragment key={f}>\r\n\t\t\t\t\t\t\t\t<Grid container item xs={outSpread} spacing={gridSpacing} >\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={inSpread} >\r\n\t\t\t\t\t\t\t\t\t\t{onOffBtn(left, f, onFilterClick)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={inSpread} >\r\n\t\t\t\t\t\t\t\t\t\t{onOffBtn(!left, f, onFilterClick)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst mainContent = buttonFilters(filters.main)\r\n\tconst sideContent = buttonFilters(filters.side)\r\n\tconst dayContent = buttonFilters(filters.day)\r\n\r\n\tconst speedFilter = Object.keys(filters.speed)[0]\r\n\tconst speedValue = filters.speed[speedFilter]\r\n\tconst timeIsLess = speedFilter === \"$lt\"\r\n\tconst speedFilterText = timeIsLess ? \"less\" : \"more\";\r\n\r\n\tconst handleSpeedClick = (value) => {\r\n\t\tfilters.speed = timeIsLess ? {\"$gt\": speedValue} : {\"$lt\": speedValue}\r\n\t\tsetFilters(filters)\r\n\t}\r\n\r\n\tconst speedContent = (\r\n\t\t<div className={classes.speedContainer}>\r\n\t\t\t<div className={classes.speedBtn}>\r\n\t\t\t\t{onOffBtn(timeIsLess, \"<\", handleSpeedClick)}\r\n\t\t\t\t{onOffBtn(!timeIsLess, \">\", handleSpeedClick)}\r\n\t\t\t</div>\r\n\t\t\t<Slider\r\n\t\t\t\tvalue={speedValue}\r\n\t\t\t\tdefaultValue={180}\r\n\t\t\t\ttrack={timeIsLess ? \"normal\" : \"inverted\"}\r\n\t\t\t\tgetAriaValueText={value => `${value}`}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tvalueLabelFormat={value => getSpeedLabel(value)}\r\n\t\t\t\tonChange={(e, value) => {\r\n\t\t\t\t\tif (value !== speedValue) {\r\n\t\t\t\t\t\tfilters.speed[speedFilter] = value\r\n\t\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tstep={30}\r\n\t\t\t\tmin={0}\r\n\t\t\t\tmax={180}\r\n\t\t\t/>\r\n\t\t\t{/* <Typography id=\"discrete-slider-restrict\" gutterBottom> */}\r\n\t\t\t\t<div className={classes.speedText}>\r\n\t\t\t\t\t<div>{`Takes ${speedFilterText} than `}</div>\r\n\t\t\t\t\t<div>{`${getSpeedText(speedValue)}`}</div>\r\n\t\t\t\t\t<div>{` to make`}</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/* </Typography> */}\r\n\t\t</div>\r\n\t);\r\n\t\r\n\treturn (\r\n\t\t<div className={classes.filterSectionRoot}>\r\n\t\t\t<Tabs\r\n\t\t\t\torientation=\"vertical\"\r\n\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\tvalue={tabValue}\r\n\t\t\t\tonChange={(e, value) => setTabValue(value)}\r\n\t\t\t>\r\n\t\t\t\t<Tab label=\"Main\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Side\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Speed\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Day\" className={classes.filterTab} />\r\n\t\t\t</Tabs>\r\n\t\t\t<TabContent value={tabValue} index={0} >\r\n\t\t\t\t{mainContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={1} >\r\n\t\t\t\t{sideContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={2} >\r\n\t\t\t\t{speedContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={3} >\r\n\t\t\t\t{dayContent}\r\n\t\t\t</TabContent>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FilterSection)","import React from 'react'\r\n\r\nimport { Button, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfilterSectionRoot: {\r\n\t\tflexGrow: 1,\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tdisplay: 'flex',\r\n\t\theight: 224,\r\n\t\twidth: \"325px\"\r\n\t},\r\n\tbuttonContainer: {\r\n\t\twidth: \"33%\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tdescriptionContainer: {\r\n\t\theight: \"40%\",\r\n\t\tcolor: \"rgba(0, 0, 0, 0.54)\"\r\n\t},\r\n\tupperdescriptionContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"flex-end\"\r\n\t},\r\n\ttextContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t}\r\n}));\r\n\r\nexport default ({ sort, setSort }) => {\r\n\tconst classes = useStyles()\r\n\r\n\tconst handleChange = (name) => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) sort[name] = 1\r\n\t\telse if (value > 0) sort[name] = -1\r\n\t\telse delete sort[name]\r\n\t\tsetSort(sort)\r\n\t}\r\n\r\n\tconst getSortDescriptionUp = name => {\r\n\t\tif (!sort[name] || sort[name] < 0) return null\r\n\t\tconst icon = <ArrowUpwardIcon />\r\n\t\tconst text = name === \"Food Amount\" ? \"Less first\" : (name === \"Cooking Time\" ? \"Fastest first\" : \"Oldest first\")\r\n\t\treturn (\r\n\t\t\t<div className={classes.textContainer}>\r\n\t\t\t\t{icon}\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</Typography>\r\n\t\t\t</ div>\r\n\t\t)\r\n\t}\r\n\t\r\n\tconst getSortDescriptionDown = name => {\r\n\t\tif (!sort[name] || sort[name] > 0) return  null\r\n\t\tconst icon = <ArrowDownwardIcon />\r\n\t\tconst text = name === \"Food Amount\" ? \"Multiple first\" : (name === \"Cooking Time\" ? \"Slowest first\" : \"Latest first\")\r\n\t\treturn (\r\n\t\t\t<div className={classes.textContainer}>\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t{icon}\r\n\t\t\t</ div>\r\n\t\t)\r\n\t}\r\n\t\r\n\r\n\tconst SortButton = (name) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.buttonContainer}>\r\n\t\t\t\t<div className={`${classes.descriptionContainer} ${classes.upperdescriptionContainer}`}>\r\n\t\t\t\t\t{getSortDescriptionUp(name)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={() => handleChange(name)}>\r\n\t\t\t\t\t{name}\r\n\t\t\t\t</Button>\r\n\t\t\t\t<div className={classes.descriptionContainer}>\r\n\t\t\t\t\t{getSortDescriptionDown(name)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.filterSectionRoot}>\r\n\t\t\t{SortButton(\"Food Amount\")}\r\n\t\t\t{SortButton(\"Cooking Time\")}\r\n\t\t\t{SortButton(\"Last Eaten\")}\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, Tabs, Tab } from '@material-ui/core';\r\n\r\nimport FilterSection from './FilterSection'\r\nimport FilterSorting from './FilterSorting'\r\nimport TabContent from '../core/TabContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttabs: {\r\n\t\twidth: \"100%\",\r\n\t},\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tactionContent: {\r\n\t\talignItems: \"stretch\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t},\r\n}))\r\n\r\nconst copyObj = filters => {\r\n\treturn JSON.parse(JSON.stringify(filters))\r\n}\r\n\r\n\r\nconst Filters = ({ onApply, filtersOpen, setOpenFilter, currentFilters, currentSort, clearFilters }) => {\r\n\tconst classes = useStyles()\r\n\tconst [tabValue, setTabValue] = useState(0)\r\n\tconst [filters, setFilters] = useState(copyObj(currentFilters))\r\n\tconst [sort, setSort] = useState(copyObj(currentSort))\r\n\r\n\tif (!filters.main.liha && currentFilters.main.liha) {\r\n\t\tsetFilters(copyObj(currentFilters))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={filtersOpen} onClose={() => {\r\n\t\t\t\tsetFilters(copyObj(currentFilters))\r\n\t\t\t\tsetSort(copyObj(currentSort))\r\n\t\t\t\tsetOpenFilter()\r\n\t\t\t}} >\r\n\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvariant=\"fullWidth\"\r\n\t\t\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\tvalue={tabValue}\r\n\t\t\t\t\t\tonChange={(e, value) => setTabValue(value)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tab label=\"Filters\" />\r\n\t\t\t\t\t\t<Tab label=\"Sort\" />\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t<TabContent value={tabValue} index={0} >\r\n\t\t\t\t\t\t<FilterSection\r\n\t\t\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\t\t\tsetFilters={f => setFilters(copyObj(f))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabContent>\r\n\t\t\t\t\t<TabContent value={tabValue} index={1} >\r\n\t\t\t\t\t\t<FilterSorting \r\n\t\t\t\t\t\t\tsort={sort}\r\n\t\t\t\t\t\t\tsetSort={s => setSort(copyObj(s))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabContent>\r\n\t\t\t\t</div>\r\n\t\t\t\t<DialogActions className={classes.actionContent}>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tfilters.main.liha = null;\r\n\t\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t\t\tsetSort({})\r\n\t\t\t\t\t\tclearFilters()\r\n\t\t\t\t\t}} color=\"primary\" >\r\n\t\t\t\t\t\tClear Filters\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tsetOpenFilter()\r\n\t\t\t\t\t\tonApply(filters, sort)\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\tApply\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tcurrentFilters: state.food.filters,\r\n\t\tfiltersOpen: state.food.filtersOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Filters)","import React, { useState } from 'react'\r\n\r\nimport { fade, makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tsearch: {\r\n\t\tposition: 'relative',\r\n\t\tborderRadius: theme.shape.borderRadius,\r\n\t\tbackgroundColor: fade(theme.palette.common.white, 0.15),\r\n\t\t'&:hover': {\r\n\t\t\tbackgroundColor: fade(theme.palette.common.white, 0.25),\r\n\t\t},\r\n\t\tmarginRight: theme.spacing(2),\r\n\t\tmarginLeft: 0,\r\n\t\twidth: '80%',\r\n\t\t[theme.breakpoints.up('sm')]: {\r\n\t\t\tmarginLeft: theme.spacing(3),\r\n\t\t\twidth: 'auto',\r\n\t\t},\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tmaxWidth: \"300px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\",\r\n\t\twidth: \"100%\"\r\n\t},\r\n\tsearchDiv : {\r\n\t\twidth: \"60%\"\r\n\t},\r\n\tbtnDiv: {\r\n\t\twidth: \"40%\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t}\r\n}))\r\n\r\nexport default ({ search, onSetSearch, children }) => {\r\n\tconst classes = useStyles()\r\n\tconst [searchState, setSearch] = useState(search)\r\n\r\n\treturn (\r\n\t\t<div className={classes.center}>\r\n\t\t\t<div className={classes.searchDiv}>\r\n\t\t\t<TextField\r\n\t\t\t\ttype=\"search\"\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tvalue={searchState}\r\n\t\t\t\tonChange={event => setSearch(event.target.value)}\r\n\t\t\t\tplaceholder=\"Search\"\r\n\t\t\t\tclassName={classes.margin}\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tstartAdornment: <InputAdornment position=\"start\">\r\n\t\t\t\t\t\t<SearchIcon onClick={() => {\r\n\t\t\t\t\t\t\tonSetSearch(searchState)\r\n\t\t\t\t\t\t}} />\r\n\t\t\t\t\t</InputAdornment>,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.btnDiv} >\r\n\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport { Button } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t},\r\n\thighlight:\r\n\t\ttheme.palette.type === 'light'\r\n\t\t\t? {\r\n\t\t\t\tcolor: theme.palette.secondary.main,\r\n\t\t\t\tbackgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n\t\t\t}\r\n\t\t\t: {\r\n\t\t\t\tcolor: theme.palette.text.primary,\r\n\t\t\t\tbackgroundColor: theme.palette.secondary.dark,\r\n\t\t\t},\r\n\ttitle: {\r\n\t\tflex: '1 1 100%',\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1,\r\n\t},\r\n}));\r\n\r\n\r\nexport default (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { columns, data, sort, setSort, onSelectFood, page, setPage, setOpenFilter } = props;\r\n\tif (!data) return (\r\n\t\t<div />\r\n\t)\r\n\t\r\n\tconst foods = data.data\r\n\tconst count = data.total || 0;\r\n\tconst pager = count === 0 ? 0 : page;\r\n\r\n\tconst handleChange = (name) => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) sort[name] = 1\r\n\t\telse if (value > 0) sort[name] = -1\r\n\t\telse delete sort[name]\r\n\t\tsetSort(sort)\r\n\t}\r\n\r\n\tconst tableToolbar = (\r\n\t\t<Toolbar >\r\n\t\t\t<Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t\tFoods\r\n\t\t  \t\t</Typography>\r\n\t\t\t<Tooltip title=\"Filter list\">\r\n\t\t\t\t<Button endIcon={<FilterListIcon />} onClick={() => { setOpenFilter() }}>\r\n\t\t\t\t\tFilter\r\n\t\t\t\t\t</Button>\r\n\t\t\t</Tooltip>\r\n\t\t</Toolbar>\r\n\t)\r\n\r\n\tconst getSortDirection = name => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) return false;\r\n\t\tif (value > 0) return \"asc\"\r\n\t\treturn \"desc\"\r\n\t}\r\n\r\n\tconst tableHeaders = (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t{columns.map((name, i) => (\r\n\t\t\t\t\t<TableCell key={i}\r\n\t\t\t\t\t\tclassName={classes.root}\r\n\t\t\t\t\t\talign={\"left\"}\r\n\t\t\t\t\t\tpadding=\"none\"\r\n\t\t\t\t\t\tsortDirection={getSortDirection(name)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\tactive={Boolean(sort[name])}\r\n\t\t\t\t\t\t\tdirection={getSortDirection(name) || \"asc\"}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\thandleChange(name)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t)\r\n\r\n\tconst tableBody = (\r\n\t\t<TableBody>\r\n\t\t\t{foods.map((d, i) => (\r\n\t\t\t\t<TableRow\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\thover\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\tonSelectFood(d)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.maintype}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.sidetype.join(\", \")}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.name}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.timeseaten}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t</TableRow>\r\n\t\t\t))}\r\n\t\t</TableBody>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{tableToolbar}\r\n\t\t\t<TableContainer>\r\n\t\t\t\t<Table size={'medium'} >\r\n\t\t\t\t\t{tableHeaders}\r\n\t\t\t\t\t{tableBody}\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={count}\r\n\t\t\t\trowsPerPage={10}\r\n\t\t\t\tpage={pager}\r\n\t\t\t\tonChangePage={(e, newPage) => {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\tsetPage(newPage)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t</div>\r\n\t)\r\n}","export const setFilters = (filters) => {\r\n\treturn { type: \"SET_FILTERS\", filters }\r\n}\r\n\r\nexport const selectFood = (food) => {\r\n\treturn { type: \"SELECT_FOOD\", food}\r\n}\r\n\r\nexport const setFoods = (foods) => {\r\n\treturn { type: \"SET_FOODS\", foods}\r\n}\r\n\r\nexport const onSetOpenFilters = () => {\r\n\treturn { type: \"SET_OPEN_FILTERS\"}\r\n}\r\n\r\nexport const distincts = (res) => {\r\n\treturn { type: \"SET_DISTINCTS\", res}\r\n}\r\n\r\nexport const setEditFood = (food) => {\r\n\treturn { type: \"EDIT_FOOD\", food}\r\n}\r\n\r\nexport const setErrors = (errors) => {\r\n\treturn { type: \"SET_ERRORS\", errors}\r\n}\r\n\r\nexport const setLatestFood = (food) => {\r\n\treturn { type: \"SET_LATEST_FOOD\", food}\r\n}","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, Button, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n}))\r\n\r\nexport default ({ open, onCancel, onOk, title, text, cancelText, okText }) => {\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={oncancel} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={onCancel} color=\"primary\">\r\n\t\t\t\t\t\t{cancelText || \"Cancel\"}\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={onOk} color=\"primary\">\r\n\t\t\t\t\t\t{okText || \"Apply\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, OutlinedInput, DialogTitle, DialogContent, TextField, MenuItem, FormControl, InputLabel, Select, Checkbox, ListItemText, FormHelperText } from '@material-ui/core';\r\n\r\nimport { setEditFood, setErrors, selectFood } from './foodAction'\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\twidth: \"250px\",\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\taddButton: {\r\n\t\tminWidth: \"100px\",\r\n\t\tmaxWidth: \"150px\",\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t\tcolor: theme.palette.primary.main\r\n\t},\r\n\tsideType: {\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tdialogContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tmargin: \"auto\",\r\n\t\twidth: \"fit-content\"\r\n\t}\r\n}))\r\n\r\nconst distDayTypes = [\r\n\t{ label: \"1 day\", value: 1 },\r\n\t{ label: \"2 days\", value: 2 },\r\n\t{ label: \"3 days\", value: 3 },\r\n\t{ label: \"4 days\", value: 4 },\r\n\t{ label: \"5 days\", value: 5 },\r\n]\r\n\r\nconst FoodEdit = ({ user, foodEdit, open, onSetEditFood, distMainTypes, distSideTypes, onSaveFood, onDeleteFood, errors, onUpdate }) => {\r\n\tconst classes = useStyles()\r\n\tvar food = Object.assign({}, foodEdit);\r\n\r\n\tconst [mainType, setMainType] = useState(food.maintype)\r\n\tconst [foodAmount, setFoodAmount] = useState(food.foodamount.toString())\r\n\tconst [sideTypes, setSideTypes] = useState(food.sidetype)\r\n\tconst [name, setName] = useState(food.name)\r\n\tconst [recipe, setRecipe] = useState(food.link)\r\n\tconst [eaten, setEaten] = useState(food.timeseaten)\r\n\tconst [cookTime, setCookTime] = useState(food.time)\r\n\tconst [deleteOpen, setDeleteOpen] = useState(false)\r\n\r\n\tconst constructFood = () => {\r\n\t\treturn {\r\n\t\t\t_id: food._id,\r\n\t\t\tname: name,\r\n\t\t\tlink: recipe,\r\n\t\t\tmaintype: mainType,\r\n\t\t\tsidetype: sideTypes,\r\n\t\t\tfoodamount: foodAmount,\r\n\t\t\ttime: cookTime,\r\n\t\t\ttimeseaten: eaten\r\n\t\t}\r\n\t}\r\n\r\n\tconst validateTime = (value) => {\r\n\t\tconst regex = new RegExp(\"[^0-9]\")\r\n\t\tif (regex.test(value)) return\r\n\t\tsetCookTime(value)\r\n\t}\r\n\r\n\tconst SelectField = ({ label, value, onChange, types }) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.selectFieldContainer}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tselect\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e => onChange(e.target.value)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{types.map((x, i) => (\r\n\t\t\t\t\t\t<MenuItem key={i} value={x.value || x}>\r\n\t\t\t\t\t\t\t{x.label || x}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</TextField>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst sideTypeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<FormControl className={classes.selectField} variant=\"outlined\"\r\n\t\t\t\terror={errors.includes(\"side\")}\r\n\t\t\t>\r\n\t\t\t\t<InputLabel className={classes.sideType}>Side Types</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tmultiline={true}\r\n\t\t\t\t\tvalue={sideTypes}\r\n\t\t\t\t\tonChange={e => setSideTypes(e.target.value)}\r\n\t\t\t\t\tinput={<OutlinedInput />}\r\n\t\t\t\t\trenderValue={sideTypes => sideTypes.join(\", \")}\r\n\t\t\t\t>\r\n\t\t\t\t\t{distSideTypes.map(type => (\r\n\t\t\t\t\t\t<MenuItem key={type} value={type}>\r\n\t\t\t\t\t\t\t<Checkbox checked={sideTypes.includes(type)} color=\"primary\" />\r\n\t\t\t\t\t\t\t<ListItemText primary={type} />\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t\t<FormHelperText>{errors.includes(\"side\") ? \"Must have at least one side type\" : \"\"}</FormHelperText>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst nameElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Name\"}\r\n\t\t\t\tvalue={name}\r\n\t\t\t\tmultiline={true}\r\n\t\t\t\tonChange={value => setName(value.target.value)}\r\n\t\t\t\terror={errors.includes(\"name\")}\r\n\t\t\t\thelperText={errors.includes(\"name\") ? \"Name can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst speedElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Cooking Time\"\r\n\t\t\t\tvalue={cookTime}\r\n\t\t\t\tonChange={e => validateTime(e.target.value)}\r\n\t\t\t\terror={errors.includes(\"time\")}\r\n\t\t\t\thelperText={errors.includes(\"time\") ? \"Cooking time can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst recipeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Recipe\"}\r\n\t\t\t\tvalue={recipe}\r\n\t\t\t\tmultiline={!recipe.includes(\"http\")}\r\n\t\t\t\tonChange={e => setRecipe(e.target.value)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst eatenElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Times Eaten\"\r\n\t\t\t\tvalue={eaten}\r\n\t\t\t\tonChange={e => setEaten(e.target.value)}\r\n\t\t\t\tdisabled={user.role !== \"admin\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst editContent = (\r\n\t\t<React.Fragment>\r\n\t\t\t{nameElement}\r\n\t\t\t<SelectField label={\"Main Type\"} value={mainType} onChange={(value) => setMainType(value)} types={distMainTypes} />\r\n\t\t\t{sideTypeElement}\r\n\t\t\t<SelectField label={\"Food Amount\"} value={foodAmount} onChange={(value) => setFoodAmount(value)} types={distDayTypes} />\r\n\t\t\t{speedElement}\r\n\t\t\t{recipeElement}\r\n\t\t\t{eatenElement}\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst deleteFood = (\r\n\t\t<Button startIcon={<DeleteForeverIcon />} onClick={() => setDeleteOpen(true)}>\r\n\t\t\tDelete\r\n\t\t</Button>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={() => onSetEditFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t<div className={classes.center}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t<div className={classes.div} />\r\n\t\t\t\t\t\t{food._id ? deleteFood : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent >\r\n\t\t\t\t\t<form className={classes.dialogContainer} noValidate>\r\n\t\t\t\t\t\t{editContent}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSetEditFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tonUpdate()\r\n\t\t\t\t\t\tonSaveFood(constructFood())\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\t{food.id ? \"Apply\" : \"Add\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<BackDialog\r\n\t\t\t\topen={deleteOpen}\r\n\t\t\t\tonCancel={() => setDeleteOpen(false)}\r\n\t\t\t\tonOk={() => {\r\n\t\t\t\t\tsetDeleteOpen(false)\r\n\t\t\t\t\tonDeleteFood(food._id)\r\n\t\t\t\t\tonUpdate()\r\n\t\t\t\t}}\r\n\t\t\t\ttitle=\"Delete Food\"\r\n\t\t\t\ttext=\"Are you sure?\"\r\n\t\t\t\tokText=\"Delete\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\tconst d = state.food.distincts\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\topen: state.food.foodEditOpen,\r\n\t\tdistMainTypes: d.main || [],\r\n\t\tdistSideTypes: d.side || [],\r\n\t\terrors: state.food.errors\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t\tdispatch(setErrors([]))\r\n\t\t},\r\n\t\tonDeleteFood: (id) => {\r\n\t\t\tif (!id) return\r\n\t\t\tfoods.remove(id)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch(setMessage(\"Food Deleted\"))\r\n\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tonSaveFood: (food) => {\r\n\t\t\tvar errors = []\r\n\t\t\tif (!food.name) errors.push(\"name\")\r\n\t\t\tif (!food.sidetype.length) errors.push(\"side\")\r\n\t\t\tif (!food.time) errors.push(\"time\")\r\n\t\t\tif (errors.length) {\r\n\t\t\t\treturn dispatch(setErrors(errors))\r\n\t\t\t} else {\r\n\t\t\t\tif (food._id) {\r\n\t\t\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('Food Updated'))\r\n\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfoods.create(food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('New Food Added'))\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FoodEdit)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Dialog, DialogActions, TextField, Button, DialogTitle, DialogContent, IconButton, Table, TableRow, TableCell, TableBody, Link, TableHead, Typography } from '@material-ui/core';\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport { selectFood, setEditFood } from './foodAction'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tspread: theme.spreadDivColumn,\r\n\tcenterColumns: theme.centerDivColumn,\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(3)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\twidth: \"250px\",\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\tdatePickerTextfield: {\r\n\t\twidth: \"110px\"\r\n\t},\r\n\tbutton: {\r\n\t\twidth: \"180px\",\r\n\t\theight: \"60px\"\r\n\t}\r\n}))\r\n\r\n\r\nconst toFineTime = (time) => {\r\n\tconst today = new Date()\r\n\tconst diff = Math.round((today - time) / (24 * 60 * 60 * 1000))\r\n\tvar ago;\r\n\tif (diff > 356) {\r\n\t\tago = \"Over a Year ago\"\r\n\t} else if (diff > 30) {\r\n\t\tconst m = Math.round(diff / 30)\r\n\t\tago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff > 7) {\r\n\t\tconst w = Math.round(diff / 7)\r\n\t\tago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff === 0) {\r\n\t\tago = \"today\"\r\n\t} else if (diff === -1) {\r\n\t\tago = \"tomorrow\"\r\n\t} else if (diff < -1) {\r\n\t\tago = `in ${diff * (-1)} days`\r\n\t}\r\n\treturn `${time.getDate()}.${time.getMonth() + 1}.${time.getFullYear()} - ${ago}`\r\n}\r\n\r\nconst getLatestFoodInfo = food => {\r\n\tvar lastDate = new Date(food.lasteaten.sort((a, b) => new Date(b) - new Date(a))[0])\r\n\tif (lastDate < new Date()) lastDate = new Date()\r\n\tconst startDate = new Date(lastDate.valueOf() + 24 * 60 * 60 * 1000)\r\n\tconst endDate = new Date(startDate.valueOf() + food.foodamount * 24 * 60 * 60 * 1000)\r\n\treturn {\r\n\t\tstartDate: startDate,\r\n\t\tendDate: endDate\r\n\t}\r\n}\r\n\r\nconst SelectedFood = ({ food, latestFood, onSelectFood, onSetEditFood, onUpdate, onFoodSelection }) => {\r\n\tconst classes = useStyles()\r\n\tconst latestFoodInfo = getLatestFoodInfo(latestFood)\r\n\tconst [startDate, setStartDate] = useState(latestFoodInfo.startDate)\r\n\tconst [endDate, setEndDate] = useState(latestFoodInfo.endDate)\r\n\r\n\tif (!food) return null;\r\n\r\n\tconst handleSelect = () => {\r\n\t\tvar days = [startDate.toDateString()]\r\n\t\tvar currDay = startDate\r\n\t\twhile (true) {\r\n\t\t\tvar newDay = new Date(currDay.valueOf() + 24 * 60 * 60 * 1000)\r\n\t\t\tif (newDay > endDate) break\r\n\t\t\tdays.push(newDay.toDateString())\r\n\t\t\tcurrDay = newDay\r\n\t\t}\r\n\t\tif (!food.lasteaten) food.lasteaten = [];\r\n\t\tfood.lasteaten = food.lasteaten.concat(days)\r\n\t\tfood.timeseaten = food.timeseaten + 1\r\n\t\tonFoodSelection(food)\r\n\t\tonUpdate()\r\n\t}\r\n\r\n\r\n\tconst historyContent = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<Table size=\"small\">\r\n\t\t\t\t<TableHead>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>History</TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t\t{food.lasteaten ? food.lasteaten.reverse().slice(0, 10).map((f, i) => (\r\n\t\t\t\t\t\t<TableRow key={i}>\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t{toFineTime(new Date(f))}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t)) : <TableRow><TableCell>No recordings</TableCell></TableRow>}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst selectContent = (\r\n\t\t<div className={classes.centerColumns}>\r\n\t\t\t<div>\r\n\t\t\t\t{food.link.includes(\"http\") || food.link.includes(\"www\") ?\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t<Link href={food.link}>\r\n\t\t\t\t\t\t\tLink To Recipe\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t: null}\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.spread}>\r\n\t\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={startDate}\r\n\t\t\t\t\t\tonChange={date => setStartDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"Start Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={endDate}\r\n\t\t\t\t\t\tonChange={date => setEndDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"End Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tstartIcon={<CheckIcon />}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t\tonClick={handleSelect}\r\n\t\t\t>Select Food</Button>\r\n\t\t\t{historyContent}\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={true} onClose={() => onSelectFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle >\r\n\t\t\t\t\t<div className={classes.spread}>\r\n\t\t\t\t\t\t{food.name}\r\n\t\t\t\t\t\t<IconButton onClick={() => onSetEditFood(food)}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{selectContent}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSelectFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfood: state.food.selectedFood,\r\n\t\tlatestFood: state.food.latestFood,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t},\r\n\t\tonFoodSelection: (food) => {\r\n\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setMessage(`Going to eat ${food.name}`))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tdispatch(setError(err.message))\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectedFood)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { foods } from '../api'\r\nimport Filters from './Filters'\r\nimport Search from './Search'\r\nimport Table from '../core/Table'\r\nimport FoodEdit from './foodEdit'\r\nimport SelectedFood from './SelectedFood'\r\n\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setFilters, selectFood, setFoods, onSetOpenFilters, distincts, setEditFood, setLatestFood } from './foodAction'\r\nimport { setError } from '../App/AppActions';\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: theme.root,\r\n\tbutton: {\r\n\t\tmarginRight: theme.spacing(2),\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tminWidth: \"133px\",\r\n\t\t// maxHeight: \"36px\"\r\n\t}\r\n}))\r\n\r\nconst columns = [\"Main\", \"Side\", \"Food\", \"Count\"]\r\n\r\nconst defaultFood = {\r\n\tname: \"Name\",\r\n\tmaintype: \"liha\",\r\n\tsidetype: [\"pasta\"],\r\n\tfoodamount: 1,\r\n\tlink: \"\",\r\n\ttime: 60,\r\n\ttimeseaten: 0\r\n}\r\n\r\nconst Foods = ({ foods, sort, onSelectFood, onRefresh, filters, search, setOpenFilter, page, selectedFood, foodEdit, initFilters, onSetEditFood }) => {\r\n\tconst classes = useStyles()\r\n\r\n\tif (!foods.limit) {  // Init fetching\r\n\t\tinitFilters()\r\n\t\tonRefresh(page, filters, sort, search)\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<Search search={search} onSetSearch={s => onRefresh(page, filters, sort, s)} >\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={() => onSetEditFood(defaultFood)}\r\n\t\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.button}\r\n\t\t\t\t>\r\n\t\t\t\t\tAdd Food\r\n\t\t\t</Button>\r\n\t\t\t</Search>\r\n\t\t\t<Filters\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tcurrentFilters={filters}\r\n\t\t\t\tcurrentSort={sort}\r\n\t\t\t\tonApply={(f, s) => onRefresh(page, f, s, search)}\r\n\t\t\t\tclearFilters={() => initFilters()}\r\n\t\t\t/>\r\n\t\t\t<Table\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tdata={foods}\r\n\t\t\t\tsort={sort}\r\n\t\t\t\tsetSort={sort => onRefresh(page, filters, sort, search)}\r\n\t\t\t\tonSelectFood={onSelectFood}\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tsetPage={p => onRefresh(p, filters, sort, search)}\r\n\t\t\t/>\r\n\t\t\t{selectedFood ? <SelectedFood onUpdate={() => onRefresh(page, filters, sort, search)} /> : null}\r\n\t\t\t{foodEdit ? <FoodEdit foodEdit={foodEdit} onUpdate={() => onRefresh(page, filters, sort, search)} /> : null}\r\n\t\t</Paper>\r\n\t)\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfoods: state.food.foods,\r\n\t\tsort: state.food.sort,\r\n\t\tfilters: state.food.filters,\r\n\t\tsearch: state.food.search,\r\n\t\tpage: state.food.page,\r\n\t\tselectedFood: state.food.selectedFood,\r\n\t\tfoodEdit: state.food.foodEdit,\r\n\t}\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonRefresh: (page, filters, sort, search) => {\r\n\t\t\tfoods.list(filters, page, sort, search)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tdispatch(setFoods({\r\n\t\t\t\t\t\tfoods: result,\r\n\t\t\t\t\t\tfilters: filters,\r\n\t\t\t\t\t\tsort: sort,\r\n\t\t\t\t\t\tpage: page,\r\n\t\t\t\t\t\tsearch: search\r\n\t\t\t\t\t}))\r\n\t\t\t\t\tfoods.lastEaten()\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tdispatch(setLatestFood(res))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tsetOpenFilter: () => {\r\n\t\t\tdispatch(onSetOpenFilters())\r\n\t\t},\r\n\t\tinitFilters: () => {\r\n\t\t\tvar filters = {\r\n\t\t\t\tmain: {},\r\n\t\t\t\tside: {},\r\n\t\t\t\tspeed: {$lt: 180},\r\n\t\t\t\tday: {}\r\n\t\t\t}\r\n\t\t\tfoods.distincts()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(distincts(res))\r\n\t\t\t\t\tres.main.forEach(m => {\r\n\t\t\t\t\t\tfilters.main[m] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.side.forEach(s => {\r\n\t\t\t\t\t\tfilters.side[s] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.day.forEach(d => {\r\n\t\t\t\t\t\tfilters.day[d] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tdispatch(setFilters(filters))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => setError(err.message))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Foods)","import React from 'react'\r\n\r\nfunction shoplist(props) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tshoplist\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default shoplist","export const setData = (data) => {\r\n\treturn { type: \"SET_DATA\", data }\r\n}\r\n\r\nexport const setDeleteId = (id) => {\r\n\treturn { type: \"SET_DELETE_ID\", id}\r\n} ","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper, Button, TextField, Table, TableContainer, TableRow, TableCell, TableBody, TableHead, InputAdornment, IconButton } from '@material-ui/core'\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport { connect } from 'react-redux'\r\n\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\n\r\nimport { payments } from '../api'\r\nimport { setError, setMessage } from '../App/AppActions';\r\nimport { setData, setDeleteId } from './paymentAction'\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: theme.root,\r\n\tcenterDivColumn: theme.centerDivColumn,\r\n\tspacings: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\twidth: \"10px\"\r\n\t},\r\n\tdatePickerTextfield: {\r\n\t\twidth: \"110px\"\r\n\t},\r\n\ttableIcon: {\r\n\t\twidth: \"5px\"\r\n\t},\r\n\tspacing: {\r\n\t\tmargin: theme.spacing(2),\r\n\t\twidth: \"200px\"\r\n\t}\r\n}))\r\n\r\nconst MONHTLY_ALLOWANCE = 700\r\n\r\nconst formatDate = date => {\r\n\tif (typeof date === \"string\") date = new Date(date)\r\n\tconst year = date.getFullYear()\r\n\tconst month = date.getMonth() + 1\r\n\tconst day = date.getDate()\r\n\treturn `${day}.${month}.${year}`\r\n}\r\n\r\nconst formatNotes = note => {\r\n\tif (!note) return \"\"\r\n\tif (note.length < 100) return note;\r\n\treturn `${note.substr(0, 100)}...`\r\n}\r\n\r\n/*\r\n\tTODO: Count total sum for the month \r\n\t\t\tCount 'left to spend' fro the month\r\n\t\t\tAdd Edit for payments\r\n\t\t\tAlternative search options ? (for specific month etc.. ?)\r\n*/\r\n\r\nfunction Payments(props) {\r\n\tconst classes = useStyles()\r\n\tconst { data, deleteId } = props;\r\n\tconst { onGetData, onAddPayment, onSetDeleteId, onDeletePayment } = props;\r\n\tconst [date, setDate] = useState(new Date())\r\n\tconst [amount, setAmount] = useState(\"\")\r\n\tconst [note, setNote] = useState(\"\")\r\n\r\n\tvar total, left, count;\r\n\tif (!data) onGetData()\r\n\telse {\r\n\t\ttotal = data.reduce((total, x) => total + x.amount, 0).toFixed(2)\r\n\t\tleft = (MONHTLY_ALLOWANCE - total).toFixed(2);\r\n\t\tcount = data.length;\r\n\t}\r\n\r\n\tconst handleAddPayment = () => {\r\n\t\tif (parseFloat(amount) <= 0) return\r\n\t\tonAddPayment({ date: date, amount: amount, notes: note })\r\n\t\tsetDate(new Date())\r\n\t\tsetAmount(\"\")\r\n\t\tsetNote(\"\")\r\n\t}\r\n\r\n\tconst addPayment = (\r\n\t\t<div className={classes.centerDivColumn}>\r\n\t\t\t<div className={`${classes.spacing} ${classes.centerDivColumn}`}>\r\n\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t<DatePicker\r\n\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\tvalue={date}\r\n\t\t\t\t\tonChange={date => setDate(date._d)}\r\n\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tclassName={classes.datePickerTextfield}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t<TextField\r\n\t\t\t\tmultiline\r\n\t\t\t\tlabel=\"Notes\"\r\n\t\t\t\tvalue={note}\r\n\t\t\t\tonChange={e => setNote(e.target.value)}\r\n\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.spacing}>\r\n\t\t\t<TextField\r\n\t\t\t\tvalue={amount}\r\n\t\t\t\tlabel=\"Amount\"\r\n\t\t\t\ttype=\"number\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tonChange={e => setAmount(e.target.value.replace(\",\", \".\"))}\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tendAdornment: <InputAdornment position=\"end\"></InputAdornment>,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tclassName={classes.spacing}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\tonClick={() => handleAddPayment()}\r\n\t\t\t>\r\n\t\t\t\tAdd Payment\r\n\t\t\t\t</Button>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst table = (\r\n\t\t<TableContainer component={Paper}>\r\n\t\t\t<Table>\r\n\t\t\t\t<TableHead>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>{`Count: ${count}`}</TableCell>\r\n\t\t\t\t\t\t<TableCell>{`Total: ${total} `}</TableCell>\r\n\t\t\t\t\t\t<TableCell>{`Left: ${left} `}</TableCell>\r\n\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t{/* <Button onClick={() => onMonthSelect()}>\r\n\t\t\t\t\t\t\tSelect Month // TODO IMPLEMENT MONTH SELECTING\r\n\t\t\t\t\t\t\t</Button> */}\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>Date</TableCell>\r\n\t\t\t\t\t\t<TableCell>Amount</TableCell>\r\n\t\t\t\t\t\t<TableCell>Notes</TableCell>\r\n\t\t\t\t\t\t<TableCell className={classes.tableIcon}></TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t\t{data ? data.map(d => (\r\n\t\t\t\t\t\t<TableRow key={d.date}>\r\n\t\t\t\t\t\t\t<TableCell>{formatDate(d.date)}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>{d.amount} </TableCell>\r\n\t\t\t\t\t\t\t<TableCell>{formatNotes(d.notes)}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell className={classes.tableIcon}>\r\n\t\t\t\t\t\t\t\t<IconButton onClick={() => onSetDeleteId(d._id)}>\r\n\t\t\t\t\t\t\t\t\t<DeleteForeverIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t)) : null}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</Table>\r\n\t\t</TableContainer>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t{addPayment}\r\n\t\t\t</Paper>\r\n\t\t\t{table}\r\n\t\t\t<BackDialog\r\n\t\t\t\topen={Boolean(deleteId)}\r\n\t\t\t\tonClose={() => onSetDeleteId(null)}\r\n\t\t\t\ttitle=\"Delete payment\"\r\n\t\t\t\ttext=\"Are you sure?\"\r\n\t\t\t\tokText={\"Delete\"}\r\n\t\t\t\tonOk={() => onDeletePayment(deleteId)}\r\n\t\t\t/>\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tdata: state.payment.data,\r\n\t\tdeleteId: state.payment.deleteId,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\tconst getData = () => {\r\n\t\tconst today = new Date()\r\n\t\tconst startOfTheMonth = new Date(today.getFullYear(), today.getMonth(), 0).getTime()\r\n\t\tpayments.list({\r\n\t\t\tdate: {\r\n\t\t\t\t$gt: startOfTheMonth\r\n\t\t\t},\r\n\t\t\t$sort: {\r\n\t\t\t\tdate: -1\r\n\t\t\t}\r\n\t\t}).then(res => dispatch(setData(res.data)))\r\n\t\t.catch(err => dispatch(setError(err.message)))\r\n\t}\r\n\treturn {\r\n\t\tonGetData: () => getData(),\r\n\t\tonAddPayment: (payment) => {\r\n\t\t\tpayments.create(payment)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setMessage(\"Payment Added\"))\r\n\t\t\t\t\tgetData()\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tonSetDeleteId: (id) => {\r\n\t\t\tdispatch(setDeleteId(id))\r\n\t\t},\r\n\t\tonDeletePayment: (id) => {\r\n\t\t\tpayments.remove(id)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setMessage(\"Payment Deleted\"))\r\n\t\t\t\t\tdispatch(setDeleteId(null))\r\n\t\t\t\t\tgetData()\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Payments)","const drawerState = { open: false }\r\n\r\nexport default (state = drawerState, action) => {\r\n  switch (action.type) {\r\n    case 'OPEN_DRAWER':\r\n      return { open: true }\r\n    case 'CLOSE_DRAWER':\r\n      return { open: false }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","const profileMenuState = { open: false, anchor: null }\r\n\r\nexport default (state = profileMenuState, action) => {\r\n    switch (action.type) {\r\n        case 'OPEN_PROFILE_MENU':\r\n            return { open: true, anchor: action.target}\r\n        case 'CLOSE_PROFILE_MENU':\r\n            return { open: false, anchor: null }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","// import { foodService } from '../api'\r\n\r\n// TODO implement auto filtering on main types based on last eaten\r\n\r\nconst foodState = {\r\n\tfilters: {\r\n\t\tmain: {},\r\n\t\tside: {},\r\n\t\tspeed: {$lt: 180},\r\n\t\tday: {}\r\n\t},\r\n\tsearch: \"\",\r\n\tsort: {},\r\n\tpage: 0,\r\n\tselectedFood: null,\r\n\tfoodEdit: null,\r\n\tfoodEditOpen: false,\r\n\tfoods: {\r\n\t\tdata: []\r\n\t},\r\n\tfiltersOpen: false,\r\n\tdistincts: {},\r\n\terrors: [],\r\n\tlatestFood: null,\r\n}\r\n\r\nexport default (state = foodState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_FILTERS\":\r\n\t\t\treturn Object.assign({}, state, { filters: action.filters })\r\n\t\tcase \"SELECT_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { selectedFood: action.food })\r\n\t\tcase \"EDIT_FOOD\":\r\n\t\t\tconst isOpen = state.foodEditOpen;\r\n\t\t\tif (isOpen) return Object.assign({}, state, { foodEdit: null, foodEditOpen: false })\r\n\t\t\treturn Object.assign({}, state, { foodEdit: action.food, foodEditOpen: true })\r\n\t\tcase \"SET_FOODS\":\r\n\t\t\tconst newState = action.foods\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfoods: newState.foods,\r\n\t\t\t\tfilters: newState.filters,\r\n\t\t\t\tsort: newState.sort,\r\n\t\t\t\tsearch: newState.search,\r\n\t\t\t\tpage: newState.page\r\n\t\t\t})\r\n\t\tcase \"SET_OPEN_FILTERS\":\r\n\t\t\tconst open = state.filtersOpen;\r\n\t\t\treturn Object.assign({}, state, { filtersOpen: !open })\r\n\t\tcase \"SET_DISTINCTS\":\r\n\t\t\treturn Object.assign({}, state, { distincts: action.res })\r\n\t\tcase \"SET_ERRORS\":\r\n\t\t\treturn Object.assign({}, state, { errors: action.errors })\r\n\t\tcase \"SET_LATEST_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { latestFood: action.food })\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","const paymentState = {\r\n\tdata: null,\r\n\tdeleteId: null,\r\n}\r\n\r\nexport default (state = paymentState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_DATA\":\r\n\t\t\treturn Object.assign({}, state, { data: action.data })\r\n\t\tcase \"SET_DELETE_ID\":\r\n\t\t\treturn Object.assign({}, state, { deleteId: action.id })\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n","import { combineReducers } from 'redux'\r\nimport app from './App/AppReducer'\r\nimport user from './App/userReducer'\r\nimport drawer from './App/drawerReducer'\r\nimport profile from './App/profileReducer'\r\nimport food from './foods/foodReducers'\r\nimport payment from './payments/paymentReducer'\r\n\r\nexport default combineReducers({\r\n  app,\r\n  user,\r\n  drawer,\r\n  profile,\r\n  food,\r\n  payment\r\n})\r\n","export default (state = {message: \"\", err: \"\"}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_MESSAGE\":\r\n\t\t\treturn {message: action.message, err: \"\"}\r\n\t\tcase \"SET_ERROR\":\r\n\t\t\treturn {message: \"\", err: action.message}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","export default (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t  case 'AUTH':\r\n\t\treturn action.user\r\n\t  case 'DEAUTH':\r\n\t\treturn {}\r\n\t  default:\r\n\t\treturn state\r\n\t}\r\n  }\r\n  ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router, Route, browserHistory } from 'react-router'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\n\nimport feathers from '@feathersjs/client'\nimport rest from '@feathersjs/rest-client'\nimport authentication from '@feathersjs/authentication-client'\nimport superagent from 'superagent'\n\nimport App from './App/App'\nimport SignIn from './signin/SignIn'\nimport Home from './home/home'\nimport Foods from './foods/Foods'\nimport ShopList from './shoplist/shoplist'\nimport Payments from './payments/payments'\n\nimport reducers from './reducers'\nimport { authUser } from './App/AppActions'\n\nconst store = createStore(reducers)\n\nif (process.env.NODE_ENV === \"development\") {\n\tconsole.log('This app is using DEVELOPMENT environment');\n\tconsole.log('REACT_APP_API_URL = ' + process.env.REACT_APP_API_URL);\n\tconsole.log('REACT_APP_OAUTH_URL = ' + process.env.REACT_APP_OAUTH_URL);\n}\nif (process.env.NODE_ENV === \"production\") {\n\tif (!process.env.REACT_APP_API_URL)\n\t\tconsole.error('REACT_APP_API_URL is not set!')\n\tif (!process.env.REACT_APP_OAUTH_URL)\n\t\tconsole.error('REACT_APP_OAUTH_URL is not set!')\n}\n\nconst app = feathers()\n\t.configure(rest(process.env.REACT_APP_API_URL).superagent(superagent))\n\t.configure(authentication({ storage: window.localStorage }))\n\nfunction handlePath(pathname) {\n\tif (pathname === '/signin' || pathname === '/passwordreset') {\n\t\treturn;\n\t}\n\n\t//Get user from Redux state\n\tconst user = store.getState().user;\n\t//If we have no user, none is logged in.\n\tif (!user || !user._id) {\n\t\tbrowserHistory.push('/signin');\n\t\treturn;\n\t}\n\n\t// if (pathname !== \"/home\" || pathname !== \"/signin\" || pathname !== \"/foods\" || pathname !== \"/shoplist\") {\n\t// \tbrowserHistory.push(\"/home\");\n\t// \treturn;\n\t// }\n}\n\nfunction enterHandler() {\n\tconst pathname = window.location.pathname\n\thandlePath(pathname)\n}\n\n\napp.reAuthenticate()\n\t.then(r => {\n\t\t//Populate Redux state with user information if authenticated.\n\t\tstore.dispatch(authUser(r.user))\n\t\tinitRender()\n\t})\n\t.catch(err => {\n\t\tinitRender()\n\t})\n\n\nfunction initRender() {\n\tReactDOM.render((\n\t\t<Provider store={store}>\n\t\t\t<Router history={browserHistory}>\n\t\t\t\t<Route path=\"/\" component={App} onEnter={enterHandler}>\n\t\t\t\t\t<Route path=\"/home\" component={Home} />\n\t\t\t\t\t<Route path=\"/signin\" component={SignIn} />\n\t\t\t\t\t<Route path=\"/foods\" component={Foods} />\n\t\t\t\t\t<Route path=\"/shoplist\" component={ShopList} />\n\t\t\t\t\t<Route path=\"/payments\" component={Payments} />\n\t\t\t\t</Route>\n\t\t\t</Router>\n\t\t</Provider>\n\t), document.getElementById('root'))\n}\n\nexport default app\n"],"sourceRoot":""}