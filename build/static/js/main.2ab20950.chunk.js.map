{"version":3,"sources":["theme.js","App/AppActions.js","App/Header.js","App/Message.js","core/NavItem.js","App/Nav.js","api.js","App/profile.js","App/App.js","signin/SignIn.js","home/home.js","core/TabContent.js","foods/FilterSection.js","foods/FilterSorting.js","foods/Filters.js","core/BoldSearch.js","foods/foodAction.js","foods/Search.js","core/combineDates.js","core/Table.js","core/BackDialog.js","foods/foodEdit.js","foods/SelectedFood.js","foods/Foods.js","shoplist/Shoplist.js","payments/paymentAction.js","payments/MailDialog.js","payments/TableRowCheckBox.js","payments/payments.js","pending-payments/MarkPendingPayment.js","minermonitor/BinanceMonitor.js","minermonitor/NHMonitor.js","minermonitor/ProfitabilityMonitor.js","minermonitor/MonitorDashboard.js","transactions/Transactions.js","categories/CategoriesContent.js","categories/CategoryTypeContent.js","categories/UnlabeledContent.js","categories/Categories.js","transactions/transactionActions.js","payments/Session/textParser.js","payments/Session/SessionModal.js","payments/Session/Session.js","App/drawerReducer.js","App/profileReducer.js","foods/foodReducers.js","payments/paymentReducer.js","transactions/transactionReducer.js","categories/categoriesReducer.js","reducers.js","App/AppReducer.js","App/userReducer.js","index.js"],"names":["defaultTheme","createMuiTheme","muiTheme","palette","primary","main","green","secondary","error","red","overrides","MuiPaper","root","flexBasis","MuiTabs","vertical","maxWidth","MuiGrid","justifyContent","MuiDialogTitle","flexDirection","alignItems","separate","flexGrow","marginTop","centerDivColumn","display","spreadDivColumn","monitor","paper","width","spacing","margin","padding","backgroundColor","color","floatRight","float","background","lightBackground","AppTheme","props","ThemeProvider","theme","children","setError","message","type","setMessage","authUser","user","useStyles","makeStyles","navBar","zIndex","drawer","top","left","connect","state","drawerOpen","open","profileOpen","profile","dispatch","onOpenDrawer","onCloseDrawer","onNavigate","pathname","browserHistory","push","onOpenProfile","event","target","currentTarget","onCloseProfile","appbar","mobileNavIcon","profileButton","location","classes","_id","IconButton","onClick","style","fontSize","edge","AppBar","position","className","Toolbar","text","app","err","onClose","Snackbar","Boolean","autoHideDuration","elevation","variant","severity","path","icon","ListItem","button","key","ListItemIcon","ListItemText","capitalCase","menuItems","Divider","role","Drawer","List","isChrome","navigator","userAgent","indexOf","isSafari","isOpera","toLowerCase","users","email","password","authenticate","strategy","logout","getSorting","sort","s","Object","keys","forEach","value","name","convertName","convertFilters","filters","f","d","assign","nins","length","map","x","parseInt","split","$nin","foodService","service","foods","page","search","limit","sorting","query","$skip","$limit","$sort","$search","find","food","create","id","patch","remove","Promise","resolve","reject","then","result","mainTypes","sideTypes","dayTypes","Array","data","maintype","sidetype","Set","side","day","lasteaten","$lasteaten","res","paymentsService","payments","payment","paid","pendingPaymentsService","pendingPayments","get","pending","transactionService","transactionsApi","hwinfoApi","nhApi","binanceApi","anchorEl","anchor","onSignOut","timeout","setTimeout","clearTimeout","catch","keepMounted","disableAutoFocus","MenuItem","disabled","opacity","isQuest","App","profileMenu","this","CssBaseline","React","Component","TextField","paddingRight","onSignIn","onSignInGoogle","onResetPassword","useState","setEmail","setPassword","submitHanlder","preventDefault","Paper","subheader","ListSubheader","onSubmit","label","fullWidth","onChange","e","helperText","Button","startIcon","marginLeft","marginRight","TabContent","index","other","Typography","component","hidden","aria-labelledby","Box","p","filterSectionRoot","height","tabs","borderRight","divider","verticalTab","center","tabContainer","paddingTop","speedContainer","minWidth","speedText","speedBtn","textAlign","filterButton","filterButtonDisabled","header","filterTab","setFilters","tabValue","setTabValue","onFilterClick","selected","newValue","forceColumn","filter","first","GridHeader","Fragment","Grid","item","xs","onOffBtn","on","buttonFilters","arr","container","directon","justify","mainContent","sideContent","dayContent","speedFilter","speed","speedValue","timeIsLess","speedFilterText","handleSpeedClick","speedContent","Slider","defaultValue","track","getAriaValueText","valueLabelDisplay","valueLabelFormat","hours","Math","floor","mins","getSpeedLabel","step","min","max","getSpeedText","Tabs","orientation","indicatorColor","textColor","Tab","buttonContainer","descriptionContainer","upperdescriptionContainer","textContainer","setSort","SortButton","getSortDescriptionUp","handleChange","getSortDescriptionDown","actionContent","copyObj","JSON","parse","stringify","currentFilters","filtersOpen","onApply","setOpenFilter","currentSort","clearFilters","liha","Dialog","FilterSorting","DialogActions","autoFocus","boldSearch","bolded","i","selectFood","setEditFood","setErrors","errors","setOptions","options","searchDiv","btnDiv","div","searchOptions","onSetOptions","$regex","console","log","onSelectFood","searchState","setSearchState","Autocomplete","getOptionLabel","option","renderOption","renderInput","params","InputProps","rest","startAdornment","InputAdornment","placeholder","setSearch","dayMs","getShortTime","date","short","getDate","m","getMonth","year","getFullYear","toString","substr","getDateText","start","end","ago","numDays","days","today","Date","diff","round","w","dates","maxLength","a","b","firstDate","latestDate","paddingLeft","highlight","lighten","light","dark","title","flex","visuallyHidden","border","clip","overflow","columns","setLimit","onAddFood","setPage","count","total","pager","tableToolbar","Tooltip","size","endIcon","getSortDirection","tableHeaders","TableHead","TableRow","TableCell","align","sortDirection","TableSortLabel","active","direction","tableBody","TableBody","hover","join","timeseaten","combineDates","time","foodamount","TableContainer","Table","TablePagination","rowsPerPage","onChangeRowsPerPage","rowsPerPageOptions","onChangePage","newPage","onCancel","onOk","cancelText","okText","oncancel","DialogTitle","DialogContent","selectFieldContainer","selectField","addButton","common","white","sideType","dialogContainer","distDayTypes","distincts","foodEditOpen","distMainTypes","distSideTypes","onSetEditFood","onDeleteFood","onSaveFood","foodEdit","onUpdate","mainType","setMainType","foodAmount","setFoodAmount","setSideTypes","setName","link","recipe","setRecipe","eaten","setEaten","cookTime","setCookTime","deleteOpen","setDeleteOpen","SelectField","types","select","sideTypeElement","FormControl","includes","InputLabel","Select","multiple","multiline","input","OutlinedInput","renderValue","Checkbox","checked","FormHelperText","nameElement","speedElement","RegExp","test","recipeElement","eatenElement","editContent","deleteFood","noValidate","BackDialog","spread","centerColumns","datePickerTextfield","moment","locale","updateLocale","week","dow","doy","selectedFood","latestFood","onFoodSelection","latestFoodInfo","lastDate","startDate","valueOf","endDate","getLatestFoodInfo","setStartDate","setEndDate","historyContent","selectContent","Link","href","utils","MomentUtils","DatePicker","format","views","minDate","showTodayButton","_d","animateYearScrolling","TextFieldComponent","toDateString","currDay","newDay","concat","defaultFood","onRefresh","initFilters","$lt","Shoplist","setDeleteId","createDefaultContent","markPaidId","paymentText","notes","amount","oDate","month","formatDate","imageName","url","process","TableRowCheckBox","toolTipText","rowData","toMailList","mailedAndPaid","mailed","mailedAndPending","notMailedNoPDF","imageData","checkedIcon","spacings","datePickerTextfieldWide","datePickerTextfieldSmall","tableIcon","sendMailButton","yearStart","getUTCFullYear","yearEnd","deleteId","distinctNotes","getData","$gt","createdAt","onGetData","onAddPayment","onSetDeleteId","onDeletePayment","onGetDistinctNotes","allNotes","onSendMail","paymentList","perMonth","setDate","setAmount","note","setNote","autoCompleteKey","setAutoCompleteKey","image","setImage","inputRef","setInputRef","setToMailList","useEffect","reduce","toFixed","downloadImage","document","createElement","download","click","datePicker","setValue","maxDate","endAdornment","addPayment","replace","freeSolo","window","confirm","parseFloat","handleAddPayment","table","isMarked","ids","pendingEntity","content","encodeURIComponent","openOnMail","formatNotes","handleMailList","accept","ref","elem","FileReader","getElementById","files","selectedFile","fileReader","onload","readAsDataURL","alert","loadFile","MarkPendingPayments","dialogOpen","seconds","setState","timer","closeAndRedirect","newSeconds","close","alreadyMarked","horizontal","up","down","parseBinanceData","parsed","btc","symbol","price","lastPrice","changePrice","priceChange","changePercent","priceChangePercent","eth","BinanceMonitor","refresh","setData","fetchData","useCallback","symbols","labelContainer","labelStyle","lineHeight","arcplotStyle","PI","parseData","devices","miningRigs","deviceType","enumName","powerUsage","status","description","speeds","totalSpeed","c","Number","devicesStatuses","profitabilityBTC","totalProfitability","GenerateData","radiusStart","idealMin","idealMax","absMin","absMax","angle","absMAx","getColor","angle0","radius0","radius","NHMonitor","setCombData","hwinfoData","labels","generatedData","setGeneratedData","useCustomCompareEffect","combinedData","nhData","device","n","totalGPUPower","Power","totalPower","CPUPower","combineDatas","MemJunctTemp","prevDeps","nextDeps","isEqual","CustomCompare","xDomain","yDomain","colorType","animation","damping","stiffness","radiusDomain","getLabel","marginBottom","profitabilityContainer","profitabilityProjectorContainer","profitLabelStyle","centered","tabRoot","visibility","minHeight","whiteLabel","TabPanel","TabProps","tryGetBinancePrice","binanceData","ProfitabilityMonitor","negatePowerCost","setNegatePowerCost","powerCost","setPowerCost","profits","setProfits","profitPerDay","powerConsumptionWH","negatePower","powerCostDaily","dailyProfit","profitabilityEUR","profitabilityWeek","profitabilityMonth","profitabilityYear","powerCostPercentage","calculateProfitability","isArray","nextPrice","prevPrice","P","P2","_","onChangeIndex","dispaly","powerCostLabel","InputLabelProps","MinerMonitor","setHWinfoData","setBinanceData","setNHData","dummyRefresh","combData","floatRightBtn","transactions","labelManagerOpen","imageLoadRef","useRef","current","foo","t","saaja","marginBtn","categories","categoryTypes","onAddCategory","sub","sub2","onEditCategory","onListCategories","onListTransactions","parseImageResult","viite","confidence","iban","euro","dueDate","lines","line","k","progressDiv","bottom","SessionModal","loaderIndicator","worker","workerLoadProgress","modalOpen","onAdd","CircularProgress","LinearProgress","recognize","parsedResult","parseImage","loaderDiv","actionButtons","addBillButton","drawerState","initWorker","createWorker","logger","progress","load","loadLanguage","initialize","kill","terminate","Slide","in","mountOnEnter","unmountOnExit","profileMenuState","foodState","paymentState","transactionState","skip","combineReducers","action","isOpen","newState","store","createStore","reducers","feathers","configure","superagent","authentication","storage","localStorage","enterHandler","getState","handlePath","initRender","ReactDOM","render","history","onEnter","Home","SignIn","Foods","ShopList","Payments","MarkPendingPayment","reAuthenticate","r"],"mappings":"0TAIMA,EAAeC,YAAe,IAE9BC,EAAWD,YAAe,CAC/BE,QAAS,CAERC,QAAS,CACRC,KAAMC,IAAM,MAEbC,UAAW,CACVF,KAAM,WAEPG,MAAOC,KAERC,UAAW,CACVC,SAAU,CACTC,KAAM,CAELC,UAAW,SAGbC,QAAS,CACRC,SAAU,CACTC,SAAU,SAGZC,QAAS,CACRL,KAAM,CACLM,eAAgB,iBAGlBC,eAAgB,CACfP,KAAM,CACLQ,cAAe,MACfC,WAAY,SACZH,eAAgB,mBAInBI,SAAU,CACTC,SAAU,GAEXX,KAAM,CACLY,UAAW,QAEZC,gBAAiB,CAChBC,QAAS,OACTN,cAAe,SACfC,WAAY,UAEbM,gBAAiB,CAChBD,QAAS,OACTN,cAAe,MACfC,WAAY,SACZH,eAAgB,iBAEdU,QAAS,CACLC,MAAO,CACHC,MAAM,eAAD,OAAiB9B,EAAa+B,QAAQ,GAAtC,KACLC,OAAQhC,EAAa+B,QAAQ,GAC7BE,QAASjC,EAAa+B,QAAQ,GAC9BG,gBAAiB,OACjBC,MAAO,QAEXC,WAAY,CACRC,MAAO,SAEXC,WAAY,CACRA,WAAY,UACZH,MAAO,QAEXI,gBAAiB,CACbL,gBAAiB,OACjBC,MAAO,WAMNK,EAAW,SAACC,GAExB,OACC,kBAACC,EAAA,EAAD,CAAeC,MAAOzC,GACrB,6BACEuC,EAAMG,Y,+DCvFEC,EAAW,SAAAC,GACvB,MAAO,CAAEC,KAAM,YAAaD,YAGdE,EAAa,SAAAF,GAC3B,MAAO,CAAEC,KAAM,cAAeD,YAqBhBG,EAAW,SAAAC,GACzB,MAAO,CAAEH,KAAM,OAAQG,S,kBCblBC,EAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCU,OAAQ,CACPC,OAAQX,EAAMW,OAAOC,OAAS,EAC9BC,IAAK,EACLC,KAAM,EACNzB,OAAQ,GAETV,SAAUqB,EAAMrB,aAuEFoC,eA7BS,SAACC,GACxB,MAAO,CACNT,KAAMS,EAAMT,KACZU,WAAYD,EAAMJ,OAAOM,KACzBC,YAAaH,EAAMI,QAAQF,SAIF,SAACG,GAC3B,MAAO,CACNC,aAAc,WACbD,ED/DK,CAAEjB,KAAM,iBCiEdmB,cAAe,WACdF,ED9DK,CAAEjB,KAAM,kBCgEdoB,WAAY,SAAAC,GACXC,IAAeC,KAAKF,GACpBJ,EDlEK,CAAEjB,KAAM,kBCoEdwB,cAAe,SAACC,GACfR,EDjEK,CAAEjB,KAAM,oBAAqB0B,OCiEbD,EAAME,iBAE5BC,eAAgB,WACfX,EDhEK,CAAEjB,KAAM,2BCqEDW,EApEA,SAAC,GAA6G,IAExHkB,EAAQC,EAAeC,EAFVC,EAA0G,EAA1GA,SAAU7B,EAAgG,EAAhGA,KAAMU,EAA0F,EAA1FA,WAAYK,EAA8E,EAA9EA,aAAcC,EAAgE,EAAhEA,cAAeJ,EAAiD,EAAjDA,YAAaS,EAAoC,EAApCA,cAAeI,EAAqB,EAArBA,eAChGK,EAAU7B,IA+BhB,OA5BA2B,EACa,MAAZ5B,EAAK+B,KACL,6BACC,kBAACC,EAAA,EAAD,CAAYC,QAASrB,EAAca,EAAiBJ,EAAea,MAAO,CAAEjD,MAAO,UAClF,kBAAC,IAAD,CAAmBkD,SAAS,YAKL,YAAtBN,EAASX,WAIZS,EACC,kBAACK,EAAA,EAAD,CAAYI,KAAK,QAAQF,MAAO,CAAEjD,MAAO,SAAWgD,QAAS,WAAOvB,EAAaM,IAAkBD,MAClG,kBAAC,IAAD,QAGHW,EACC,kBAACW,EAAA,EAAD,CAAQC,SAAS,SAASC,UAAWT,EAAQ3B,QAC5C,kBAACqC,EAAA,EAAD,KACEb,EACD,yBAAKY,UAAWT,EAAQ1D,WACvBwD,IAMH,gCACEF,M,kBChBWlB,eAfS,SAACC,GACxB,MAAO,CACNgC,KAAMhC,EAAMiC,IAAI9C,QAChB+C,IAAKlC,EAAMiC,IAAIC,QAIU,SAAC7B,GAC3B,MAAO,CACN8B,QAAS,WACR9B,EAAShB,EAAW,SAKRU,EAlCC,SAAC,GAAD,IAAGiC,EAAH,EAAGA,KAAME,EAAT,EAASA,IAAKC,EAAd,EAAcA,QAAd,OACf,kBAACC,EAAA,EAAD,CACClC,KAAMmC,QAAQH,GAAOF,GACrBM,iBAAkB,IAClBH,QAASA,GAGT,kBAAC,IAAD,CACCI,UAAW,EACXC,QAAQ,SACRL,QAASA,EACTM,SAAUP,EAAM,QAAUF,EAAO,UAAY,QAE5CE,IAAYF,GAAc,S,oKCgBfjC,gBAfS,SAACC,GACxB,MAAO,MAKmB,SAACK,GAC3B,MAAO,CACNG,WAAY,SAAAC,GACXC,IAAeC,KAAKF,GACpBJ,EHjBK,CAAEjB,KAAM,qBGsBDW,EA1BC,SAACjB,GAAW,IACnB4D,EAA2B5D,EAA3B4D,KAAMC,EAAqB7D,EAArB6D,KAAMnC,EAAe1B,EAAf0B,WAEpB,OACC,kBAACoC,GAAA,EAAD,CAAUC,QAAM,EAACC,IAAKJ,EAAMlB,QAAS,kBAAMhB,EAAW,IAAD,OAAKkC,MACzD,kBAACK,GAAA,EAAD,KAAeJ,GACf,kBAACK,GAAA,EAAD,CAAcvG,QAASwG,aAAYP,SCqDvB3C,gBAvBS,SAACC,GACxB,MAAO,CACNT,KAAMS,EAAMT,KACZU,WAAYD,EAAMJ,OAAOM,SAIA,SAACG,GAC3B,MAAO,CACLC,aAAc,WACfD,EJ9CM,CAAEjB,KAAM,iBIgDbmB,cAAe,WAChBF,EJ7CM,CAAEjB,KAAM,kBI+CboB,WAAY,SAAAC,GACbC,IAAeC,KAAKF,GACpBJ,EJjDM,CAAEjB,KAAM,qBIuDDW,EApDH,SAAC,GAAiE,IAAhER,EAA+D,EAA/DA,KAAMU,EAAyD,EAAzDA,WAAYK,EAA6C,EAA7CA,aAAcC,EAA+B,EAA/BA,cACzC2C,GADwE,EAAhB1C,WAC5C,IAGhB,OAAIjB,EAAK+B,KACR4B,EAAUvC,KAAK,kBAACwC,EAAA,EAAD,CAASL,IAAI,UAC5BI,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAM,OAAQC,KAAM,kBAAC,IAAD,SACpDO,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,QAAQC,KAAM,kBAAC,IAAD,SAC7CO,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,WAAWC,KAAM,kBAAC,KAAD,SAC1C,UAAdpD,EAAK6D,OACCF,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,WAAWC,KAAM,kBAAC,KAAD,SACtDO,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,eAAeC,KAAM,kBAAC,KAAD,UAEpEO,EAAUvC,KAAK,kBAACwC,EAAA,EAAD,CAASL,IAAI,UAG3B,kBAACO,EAAA,EAAD,CACCnD,KAAMD,EACNkC,QAAS,SAAAjC,GAAI,OAAIA,EAAMK,IAAkBD,MAExC,kBAACgD,EAAA,EAAD,KACEJ,KAKE,iC,2DC1CLK,GAAWC,UAAUC,UAAUC,QAAQ,WAAa,EAGpDC,GAAWH,UAAUC,UAAUC,QAAQ,WAAa,EACpDE,GAAUJ,UAAUC,UAAUI,cAAcH,QAAQ,OAAS,EAC7DH,IAAYI,KAAUA,IAAW,GACjCJ,IAAYK,KAASL,IAAW,GAMpC,IACaO,GAcJ,SAACC,EAAOC,GAAR,OAAqB/B,GAAIgC,aAAa,CAAEC,SAAU,QAASH,QAAOC,cAd9DF,GAmBH,kBAAM7B,GAAIkC,UAOdC,GAAa,SAACC,GACnB,IAAMC,EAAI,GA4BV,OATAC,OAAOC,KAAKH,GAAMI,SAAQ,SAAA3B,GACzB,IAAM4B,EAAQL,EAAKvB,GACL,QAAV4B,EACHL,EAAKvB,GAAO,EACQ,SAAV4B,IACVL,EAAKvB,IAAQ,GAEdwB,EAzBmB,SAACK,GACpB,OAAQA,GACP,IAAK,OACJ,MAAO,WACR,IAAK,OACJ,MAAO,WACR,IAAK,OACJ,MAAO,OACR,IAAK,cACJ,MAAO,aACR,IAAK,eACJ,MAAO,OACR,IAAK,aACJ,MAAO,YACR,QACC,MAAO,cAUPC,CAAY9B,IAAQuB,EAAKvB,MAErBwB,GAGFO,GAAiB,SAACC,GACvB,IAAIC,EAAI,GAsBR,OArBAR,OAAOC,KAAKM,GAASL,SAAQ,SAAArF,GAC5B,IAAI4F,EAAI,GACR,GAAa,UAAT5F,EACH4F,EAAC,KAAWF,EAAQ1F,GACpB2F,EAAIR,OAAOU,OAAOF,EAAGC,OACf,CACN,IAAIE,EAAO,GACXX,OAAOC,KAAKM,EAAQ1F,IAAOqF,SAAQ,SAAAE,GACN,SAAxBG,EAAQ1F,GAAMuF,IAAkBO,EAAKvE,KAAKgE,MAE3CO,EAAKC,SACK,QAAT/F,GACH8F,EAAOA,EAAKE,KAAI,SAAAC,GAAC,OAAIC,SAASD,EAAEE,MAAM,KAAK,OAC3CP,EAAC,WAAiB,CAAEQ,KAAMN,IAE1BF,EAAE,GAAD,OAAI5F,EAAJ,SAAkB,CAAEoG,KAAMN,GAE5BH,EAAIR,OAAOU,OAAOF,EAAGC,QAIjBD,GAGFU,GAAc,kBAAMxD,GAAIyD,QAAQ,aACzBC,GACN,SAACb,EAASc,EAAMvB,GAA8B,IAAxBwB,EAAuB,uDAAd,GAAIC,EAAU,uCAC5Cf,EAAIF,GAAeC,GACnBiB,EAAU3B,GAAWC,GACvB2B,EAAQzB,OAAOU,OAAOF,EAAG,CAC5BkB,MAAqC,IAA5BL,EAAO,EAAK,EAAI,EAAIA,GAC7BM,OAAQJ,EACRK,MAAOJ,IAGR,OADIF,IAAQG,EAAQzB,OAAOU,OAAOe,EAAO,CAAEI,QAASP,KAC7CJ,KAAcY,KAAK,CAAEL,MAAOA,KAVxBL,GAaJ,SAAAW,GAAI,OAAIb,KAAcc,OAAOD,IAbzBX,GAcL,SAACa,EAAIF,GAAL,OAAcb,KAAcgB,MAAMD,EAAIF,IAdjCX,GAeJ,SAAAa,GAAE,OAAIf,KAAciB,OAAOF,IAfvBb,GAgBN,SAAAK,GAAK,OAAIP,KAAcY,KAAK,CAAEL,MAAOA,KAhB/BL,GAiBD,WACV,OAAO,IAAIgB,SAAQ,SAACC,EAASC,GAAV,OAClBpB,KAAcY,KAAK,CAAEL,MAAO,CAAEE,OAAQ,OACpCY,MAAK,SAAAC,GACL,IAAIC,EAAY,GACZC,EAAY,GACVC,EAAW,aAAIC,MAAM,GAAG3C,QAAQY,KAAI,SAAAJ,GAAC,gBAAOA,EAAI,EAAX,WAC3C+B,EAAOK,KAAK3C,SAAQ,SAAAM,GACnBiC,EAAUrG,KAAKoE,EAAEsC,UACjBtC,EAAEuC,SAAS7C,SAAQ,SAAAH,GAAC,OAAI2C,EAAUtG,KAAK2D,SAExCsC,EAAQ,CACPlK,KAAK,aAAK,IAAI6K,IAAIP,IAClBQ,KAAK,aAAK,IAAID,IAAIN,IAClBQ,IAAKP,WA/BEvB,GAqCD,WACV,OAAO,IAAIgB,SAAQ,SAACC,EAASC,GAC5BpB,KAAcY,KAAK,CAAEL,MAAO,CAC3BG,MAAO,CACNuB,WAAY,GAEbC,YAAY,KACTb,MAAK,SAAAc,GACRhB,EAAQgB,UAkBNC,GAAkB,kBAAM5F,GAAIyD,QAAQ,gBAC7BoC,GACN,SAAA9B,GAAK,OAAI6B,KAAkBxB,KAAK,CAAEL,MAAOA,KADnC8B,GAGJ,SAAAC,GAAO,OAAIF,KAAkBtB,OAAlB,6BAA8BwB,GAA9B,IAAuCC,MAAM,MAHpDF,GAIL,SAACtB,EAAIuB,GAAL,OAAiBF,KAAkBpB,MAAMD,EAAIuB,IAJxCD,GAKJ,SAAAtB,GAAE,OAAIqB,KAAkBnB,OAAOF,IAGlCyB,GAAyB,kBAAMhG,GAAIyD,QAAQ,wBACpCwC,GAEP,SAAA1B,GAAE,OAAIyB,KAAyBE,IAAI3B,IAF5B0B,GAGJ,SAAAE,GAAO,OAAIH,KAAyB1B,OAAO6B,IAK9CC,GAAqB,kBAAMpG,GAAIyD,QAAQ,oBAChC4C,GACH,SAAAtC,GAAK,OAAIqC,KAAqBhC,KAAK,CAAEL,MAAOA,KAwBzCuC,GACH,SAAAvC,GAAK,OAFa/D,GAAIyD,QAAQ,aAELW,KAAK,CAAEL,MAAOA,KAIpCwC,GACJ,kBAFevG,GAAIyD,QAAQ,SAETyC,IAAI,KAIlBM,GACH,SAACzC,GAAD,OAFmB/D,GAAIyD,QAAQ,cAEHW,KAAK,CAAEL,MAAOA,KCvIrCjG,gBApCS,SAACC,GACxB,MAAO,CACNT,KAAMS,EAAMT,KACZY,YAAaH,EAAMI,QAAQF,KAC3BwI,SAAU1I,EAAMI,QAAQuI,WAIC,SAACtI,GAC3B,MAAO,CACNW,eAAgB,WACfX,ENnCK,CAAEjB,KAAM,wBMqCdoB,WAAY,SAAAC,GACXC,IAAeC,KAAKF,IAErBmI,UAAW,WACV,IAAMC,EAAUC,YAAW,WAC1BzI,EAAShB,EAAW,0CAClB,KACHyE,KACEgD,MAAK,WACLiC,aAAaF,GACbxI,EAAShB,EAAW,gBACpBgB,ENxCG,CAAEjB,KAAM,WM0CXsB,IAAeC,KAAK,cAEpBqI,OAAM,SAAA9G,GACN6G,aAAaF,GACbxI,EAAShB,EAAW6C,EAAI/C,iBAMdY,EAhEC,SAAC,GAAgE,IAA9DR,EAA6D,EAA7DA,KAAMY,EAAuD,EAAvDA,YAAaa,EAA0C,EAA1CA,eAAgB0H,EAA0B,EAA1BA,SAAUE,EAAgB,EAAhBA,UAE/D,OACC,kBAAC,KAAD,CACCF,SAAUA,EACVO,aAAW,EACX/I,KAAMC,EACNgC,QAASnB,EACTkI,kBAAkB,GAElB,kBAACC,GAAA,EAAD,CAAUC,UAAU,EAAM3H,MAAO,CAAE4H,QAAS,IAC3C,kBAACrG,GAAA,EAAD,CAAcvG,QAAO,wBAAmB8C,EAAK+J,QAAU,SAAW,OAEnE,kBAACH,GAAA,EAAD,CAAUC,UAAU,EAAM3H,MAAO,CAAE4H,QAAS,IAC3C,kBAACrG,GAAA,EAAD,CAAcvG,QAAS8C,EAAKoF,KAAM/H,UAAW2C,EAAKwE,SAEnD,kBAACZ,EAAA,EAAD,MACA,kBAACgG,GAAA,EAAD,CAAU3H,QAAS,WAClBR,IACA4H,MAEA,kBAAC7F,GAAA,EAAD,KAAc,kBAAC,KAAD,OACd,kBAACC,GAAA,EAAD,CAAcvG,QAAQ,kBC/BL8M,G,4JAEjB,WACI,IAAI7J,EAAQ8J,EAKZ,MAJqC,YAAjCC,KAAK3K,MAAMsC,SAASX,WACpBf,EAAS,kBAAC,GAAD,MACT8J,EAAc,kBAAC,GAAD,OAGd,kBAAC,EAAD,KACI,6BACI,kBAACE,EAAA,EAAD,MACA,kBAAC,EAAD,CAAQtI,SAAUqI,KAAK3K,MAAMsC,WAC5B1B,EACA8J,EACAC,KAAK3K,MAAMpC,KACX+M,KAAK3K,MAAMG,SACZ,kBAAC,EAAD,Y,GAjBa0K,IAAMC,W,qECYjCpK,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtC/B,KAAM,CACLY,UAAW,OACXE,QAAS,OACTM,OAAQW,EAAMZ,QAAQ,IAEvByL,UAAW,CACV9L,QAAS,OACTM,OAAQW,EAAMZ,QAAQ,GACtB0L,aAAc9K,EAAMZ,QAAQ,QAkE9B,IA0De2B,gBA1DS,SAACC,GACxB,MAAO,MAGmB,SAACK,GAC3B,MAAO,CACN0J,SAAU,SAAChG,EAAOC,GACjB,GAAqB,IAAjBD,EAAMoB,QAAoC,IAApBnB,EAASmB,OAElC,OADA9E,EAAShB,EAAW,wCACb,CAAEE,KAAM,KAAM1C,MAAO8J,QAAQC,QAAQ,IAE7C,GAAqB,IAAjB7C,EAAMoB,OAET,OADA9E,EAAShB,EAAW,2BACb,CAAEE,KAAM,KAAM1C,MAAO8J,QAAQC,QAAQ,IAE7C,IAA4B,IAAxB7C,EAAML,QAAQ,KAEjB,OADArD,EAAShB,EAAW,uCACb,CAAEE,KAAM,KAAM1C,MAAO8J,QAAQC,QAAQ,IAE7C,GAAwB,IAApB5C,EAASmB,OAEZ,OADA9E,EAAShB,EAAW,6BACb,CAAEE,KAAM,KAAM1C,MAAO8J,QAAQC,QAAQ,IAE7CvG,EAAShB,EAAW,kBACpB,IAAMwJ,EAAUC,YAAW,WAC1BzI,EAAShB,EAAW,yCAClB,KACH,OAAOyE,GAAaC,EAAOC,GACzB8C,MAAK,SAAAC,GAKL,OAJAgC,aAAaF,GACbxI,EAAShB,EAAW,eACpBgB,EAASf,EAASyH,EAAOxH,OACzBmB,IAAeC,KAAK,SACb,CAAEpB,KAAMwH,EAAOxH,KAAM1C,MAAO,SACjCmM,OAAM,SAAA9G,GAWR,OAVA6G,aAAaF,GACI,eAAb3G,EAAIyC,KACPtE,EAAShB,EAAW,mCACG,qBAAb6C,EAAIyC,KACdtE,EAAShB,EAAW,mDAEpBgB,EAASnB,EAAS,UAAYgD,EAAIyC,KAAOzC,EAAI/C,UAE9CuB,IAAeC,KAAK,KACpBmI,YAAW,kBAAMpI,IAAeC,KAAK,aAAY,IAC1C,CAAEpB,KAAM,KAAM1C,MAAOqF,OAG/B8H,eAAgB,aAIhBC,gBAAiB,gBAMJlK,EAxHf,SAAgBjB,GACf,IAAMuC,EAAU7B,KADM,EAEN0K,qBAATrN,EAFe,uBAGIqN,qBAHJ,oBAGfnG,EAHe,KAGRoG,EAHQ,OAIUD,qBAJV,oBAIflG,EAJe,KAILoG,EAJK,KAMdL,EAAajL,EAAbiL,SAEFM,EAAgB,SAAAxJ,GACrBA,EAAMyJ,iBACNP,EAAShG,EAAOC,IAGjB,OACC,yBAAKlC,UAAWT,EAAQpE,MACvB,kBAACsN,GAAA,EAAD,CAAOhI,UAAW,EAAGd,MAAO,CAAEtD,MAAO,SACpC,kBAACmF,EAAA,EAAD,CAAMkH,UAAW,kBAACC,GAAA,EAAD,iBAChB,0BAAMC,SAAUL,EAAe5I,MAAO,CAAE5D,UAAW,SAClD,6BACC,kBAACgM,GAAA,EAAD,CACC/H,UAAWT,EAAQwI,UACnBc,MAAM,QACkBjG,MAAOX,EAC/B6G,WAAW,EACXC,SAAU,SAAAC,GAAC,OAAIX,EAASW,EAAEhK,OAAO4D,QACjCtF,KAAK,QACLvC,QAASA,EACTkO,WAAsB,IAAVlO,GAAyB,IAAVA,EAAc,qBAAiC,IAAVA,EAAc,qCAAuC,QAGvH,6BACC,kBAACgN,GAAA,EAAD,CACC/H,UAAWT,EAAQwI,UACnBc,MAAM,WACkBjG,MAAOV,EAC/B4G,WAAW,EACXC,SAAU,SAAAC,GAAC,OAAIV,EAAYU,EAAEhK,OAAO4D,QACpCtF,KAAK,WACLvC,QAASA,EACTkO,WAAsB,IAAVlO,GAAyB,IAAVA,EAAc,uBAAyB,QAGpE,6BACC,kBAACmO,GAAA,EAAD,CACCxI,QAAQ,YACRhE,MAAM,UACNyM,UAAW,kBAAC,KAAD,MACXzJ,QAAS6I,EACTvI,UAAWT,EAAQwI,WALpB,YAQD,2BAAOzK,KAAK,SAASqC,MAAO,CAAE1D,QAAS,iBCvEvCyB,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCd,MAAO,CACNL,UAAW,QACXqN,WAAY,OACZC,YAAa,YAyCApL,gBAfS,SAACC,GACxB,MAAO,CACNT,KAAMS,EAAMT,SAIa,SAACc,GAC3B,MAAO,CACNG,WAAY,SAAAC,GACXC,IAAeC,KAAKF,GACpBJ,ETxCK,CAAEjB,KAAM,qBS6CDW,EArCF,SAACjB,GACb,IAAMuC,EAAU7B,KACRD,EAAST,EAATS,KACJ2D,EAAY,GAShB,OAPAA,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,QAAQC,KAAM,kBAAC,IAAD,SACnDO,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,WAAWC,KAAM,kBAAC,KAAD,SACpC,UAAdpD,EAAK6D,OACFF,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,WAAWC,KAAM,kBAAC,KAAD,SACtDO,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,eAAeC,KAAM,kBAAC,KAAD,UAIhE,6BACC,kBAACW,EAAA,EAAD,CAAMxB,UAAWT,EAAQnD,OACvBgF,O,wFCjBUkI,GAjBI,SAACtM,GAAW,IACtBG,EAAqCH,EAArCG,SAAUyF,EAA2B5F,EAA3B4F,MAAO2G,EAAoBvM,EAApBuM,MAAUC,EADN,aACgBxM,EADhB,8BAG7B,OACC,kBAACyM,GAAA,EAAD,eACCC,UAAU,MACVpI,KAAK,WACLqI,OAAQ/G,IAAU2G,EAClB7E,GAAE,0BAAqB6E,GACvBK,kBAAA,qBAA+BL,IAC3BC,GAEH5G,IAAU2G,GAAS,kBAACM,GAAA,EAAD,CAAKC,EAAG,GAAI3M,KCR7BO,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtC6M,kBAAmB,CAClBjO,SAAU,EACVW,gBAAiBS,EAAMxC,QAAQmC,WAAWT,MAC1CH,QAAS,OACT+N,OAAQ,KAGTC,KAAM,CACLC,YAAY,aAAD,OAAehN,EAAMxC,QAAQyP,SACxC1N,gBAAiBS,EAAMxC,QAAQC,SAEhCyP,YAAa,CACZxO,WAAY,QACZL,SAAU,QAEX8O,OAAQ,CACPpO,QAAS,OACT8D,SAAU,WACVnE,WAAY,UAEb0O,aAAc,CACbxO,SAAU,EACVP,SAAU,QACV6N,WAAY,QACZrN,UAAW,QACXwO,WAAY,OAEbC,eAAgB,CACfC,SAAU,QACVrB,WAAY,OAEbsB,UAAW,CACVzO,QAAS,OACTN,cAAe,SACfC,WAAY,UAEb+O,SAAU,CACT1O,QAAS,OACTL,WAAY,SACZW,OAAQ,QAETH,MAAO,CACNI,QAASU,EAAMZ,QAAQ,GACvBsO,UAAW,SACXlO,MAAOQ,EAAMxC,QAAQwF,KAAKpF,WAE3B+P,aAAc,CACbxO,MAAO,OACPuD,SAAU,SAEXkL,qBAAsB,CACrBzO,MAAO,OACPuD,SAAU,QACVlD,MAAO,WAERqO,OAAQ,CACP1O,MAAO,OACPuD,SAAU,QACV2H,QAAS,GAIVyD,UAAW,CACVP,SAAU,YA2LGxM,gBAVS,SAACC,GACxB,MAAO,MAImB,SAACK,GAC3B,MAAO,KAION,EApKO,SAAC,GAA6B,IAA3B+E,EAA0B,EAA1BA,QAASiI,EAAiB,EAAjBA,WAC3B1L,EAAU7B,KADkC,EAElB0K,mBAAS,GAFS,oBAE3C8C,EAF2C,KAEjCC,EAFiC,KAI5CC,EAAgB,SAACnI,GACtB,IAAIoI,EACApI,KAAKD,EAAQpI,KAAMyQ,EAAWrI,EAAQpI,KACjCqI,KAAKD,EAAQ0C,KAAM2F,EAAWrI,EAAQ0C,KACtCzC,KAAKD,EAAQ2C,MAAK0F,EAAWrI,EAAQ2C,KAC9C,IAAM2F,EAA2B,QAAhBD,EAASpI,GAAe,OAAS,MAClDoI,EAASpI,GAAKqI,EACdL,EAAWjI,IAGNuI,EAAc,SAACjO,EAAMkO,GAC1B,IAEIH,EAFEI,EAAQhJ,OAAOC,KAAKpF,EAAKA,MAAM,GAGjCmO,KAASzI,EAAQpI,KAAMyQ,EAAWrI,EAAQpI,KACrC6Q,KAASzI,EAAQ0C,KAAM2F,EAAWrI,EAAQ0C,KAC1C+F,KAASzI,EAAQ2C,MAAK0F,EAAWrI,EAAQ2C,KAElDlD,OAAOC,KAAK2I,GAAU1I,SAAQ,SAAAM,GAC7BoI,EAASpI,GAAKuI,KAEfP,EAAWjI,IAGN0I,EAAa,SAACpO,GAAD,OAClB,kBAAC,IAAMqO,SAAP,KACC,kBAACC,GAAA,EAAD,CAAMC,MAAI,EAACC,GAlCG,GAmCb,kBAAC5C,GAAA,EAAD,CAAQxM,MAAM,UAAUsD,UAAWT,EAAQwL,OAAQrL,QAAS,kBAAM6L,EAAYjO,EAAM,SAApF,YAED,kBAACsO,GAAA,EAAD,CAAMC,MAAI,EAACC,GArCG,GAsCb,kBAAC5C,GAAA,EAAD,CAAQxM,MAAM,UAAUsD,UAAWT,EAAQwL,OAAQrL,QAAS,kBAAM6L,EAAYjO,EAAM,UAApF,cAKGyO,EAAW,SAACC,EAAInD,EAAOnJ,GAAZ,OAChB,kBAACwJ,GAAA,EAAD,CACCxI,QAASsL,EAAK,YAAc,WAC5BtP,MAAOsP,EAAK,UAAY,UACxBtM,QAAS,kBAAMA,EAAQmJ,IACvB7I,UAAWgM,EAAKzM,EAAQsL,aAAetL,EAAQuL,sBAC9CjC,IAGGoD,EAAgB,SAAC3O,GACtB,IAAM4O,EAAMzJ,OAAOC,KAAKpF,GACxB,OACC,yBAAK0C,UAAWT,EAAQ+K,cACvB,kBAACsB,GAAA,EAAD,CAAMO,WAAS,EAAC7P,QAAS,EAAG8P,SAAS,MAAMC,QAAQ,eAAezQ,WAAW,cAC5E,kBAACgQ,GAAA,EAAD,CAAMO,WAAS,EAACN,MAAI,EAACC,GAxDR,GAwDuBxP,QAvDrB,GAwDd,kBAACoP,EAAD,CAAYpO,KAAMA,KAElB4O,EAAI5I,KAAI,SAAAL,GACR,IAAMjF,EAAmB,QAAZV,EAAK2F,GAClB,OACC,kBAAC,IAAM0I,SAAP,CAAgB3K,IAAKiC,GACpB,kBAAC2I,GAAA,EAAD,CAAMO,WAAS,EAACN,MAAI,EAACC,GA/DX,GA+D0BxP,QA9DxB,GA+DX,kBAACsP,GAAA,EAAD,CAAMC,MAAI,EAACC,GAjEH,GAkENC,EAAS/N,EAAMiF,EAAGmI,IAEpB,kBAACQ,GAAA,EAAD,CAAMC,MAAI,EAACC,GApEH,GAqENC,GAAU/N,EAAMiF,EAAGmI,YAWvBkB,EAAcL,EAAcjJ,EAAQpI,MACpC2R,EAAcN,EAAcjJ,EAAQ0C,MACpC8G,EAAaP,EAAcjJ,EAAQ2C,KAEnC8G,EAAchK,OAAOC,KAAKM,EAAQ0J,OAAO,GACzCC,EAAa3J,EAAQ0J,MAAMD,GAC3BG,EAA6B,QAAhBH,EACbI,EAAkBD,EAAa,OAAS,OAExCE,EAAmB,SAAClK,GACzBI,EAAQ0J,MAAQE,EAAa,CAAC,IAAOD,GAAc,CAAC,IAAOA,GAC3D1B,EAAWjI,IAGN+J,EACL,yBAAK/M,UAAWT,EAAQiL,gBACvB,yBAAKxK,UAAWT,EAAQoL,UACtBoB,EAASa,EAAY,IAAKE,GAC1Bf,GAAUa,EAAY,IAAKE,IAE7B,kBAACE,GAAA,EAAD,CACCpK,MAAO+J,EACPM,aAAc,IACdC,MAAON,EAAa,SAAW,WAC/BO,iBAAkB,SAAAvK,GAAK,gBAAOA,IAC9BwK,kBAAkB,OAClBC,iBAAkB,SAAAzK,GAAK,OAzHL,SAACA,GACtB,IAAM0K,EAAQC,KAAKC,MAAM5K,EAAQ,IAC3B6K,EAAOF,KAAKC,MAAO5K,EAAQ,GAAM,GACvC,OAAa,IAAT6K,EAAmBH,EACjB,GAAN,OAAUA,EAAV,YAAmBG,GAqHWC,CAAc9K,IACzCmG,SAAU,SAACC,EAAGpG,GACTA,IAAU+J,IACb3J,EAAQ0J,MAAMD,GAAe7J,EAC7BqI,EAAWjI,KAGb2K,KAAM,GACNC,IAAK,EACLC,IAAK,MAGL,yBAAK7N,UAAWT,EAAQmL,WACvB,6CAAemC,EAAf,WACA,uCAhIgB,SAACjK,GACrB,IAAM0K,EAAQC,KAAKC,MAAM5K,EAAQ,IAC3B6K,EAAOF,KAAKC,MAAM5K,EAAQ,IAChC,OAAc,IAAV0K,EAAmB,OAAN,OAAcG,EAAd,QACJ,IAATA,EAAkB,GAAN,OAAUH,EAAV,aACV,GAAN,OAAUA,EAAV,aAAoBG,EAApB,QA2HaK,CAAanB,KACtB,2CAMJ,OACC,yBAAK3M,UAAWT,EAAQwK,mBACvB,kBAACgE,GAAA,EAAD,CACCC,YAAY,WACZhO,UAAWT,EAAQ0K,KACnBgE,eAAe,UACfC,UAAU,UACVtL,MAAOsI,EACPnC,SAAU,SAACC,EAAGpG,GAAJ,OAAcuI,EAAYvI,KAEpC,kBAACuL,GAAA,EAAD,CAAKtF,MAAM,OAAO7I,UAAWT,EAAQyL,YACrC,kBAACmD,GAAA,EAAD,CAAKtF,MAAM,OAAO7I,UAAWT,EAAQyL,YACrC,kBAACmD,GAAA,EAAD,CAAKtF,MAAM,QAAQ7I,UAAWT,EAAQyL,YACtC,kBAACmD,GAAA,EAAD,CAAKtF,MAAM,MAAM7I,UAAWT,EAAQyL,aAErC,kBAAC,GAAD,CAAYpI,MAAOsI,EAAU3B,MAAO,GAClC+C,GAEF,kBAAC,GAAD,CAAY1J,MAAOsI,EAAU3B,MAAO,GAClCgD,GAEF,kBAAC,GAAD,CAAY3J,MAAOsI,EAAU3B,MAAO,GAClCwD,GAEF,kBAAC,GAAD,CAAYnK,MAAOsI,EAAU3B,MAAO,GAClCiD,O,0CC3OC9O,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtC6M,kBAAmB,CAClBjO,SAAU,EACVW,gBAAiBS,EAAMxC,QAAQmC,WAAWT,MAC1CH,QAAS,OACT+N,OAAQ,IACR3N,MAAO,SAER+R,gBAAiB,CAChB/R,MAAO,MACPJ,QAAS,OACTN,cAAe,SACfC,WAAY,SACZH,eAAgB,SAChBc,OAAQW,EAAMZ,QAAQ,IAEvB+R,qBAAsB,CACrBrE,OAAQ,MACRtN,MAAO,uBAER4R,0BAA2B,CAC1BrS,QAAS,OACTL,WAAY,YAEb2S,cAAe,CACdtS,QAAS,OACTN,cAAe,SACfC,WAAY,cAIC,eAAwB,IAArB2G,EAAoB,EAApBA,KAAMiM,EAAc,EAAdA,QACjBjP,EAAU7B,KAuCV+Q,EAAa,SAAC5L,GACnB,OACC,yBAAK7C,UAAWT,EAAQ6O,iBACvB,yBAAKpO,UAAS,UAAKT,EAAQ8O,qBAAb,YAAqC9O,EAAQ+O,4BAhCjC,SAAAzL,GAC5B,IAAKN,EAAKM,IAASN,EAAKM,GAAQ,EAAG,OAAO,KAC1C,IAAMhC,EAAO,kBAAC,KAAD,MACPX,EAAgB,gBAAT2C,EAAyB,aAAyB,iBAATA,EAA0B,gBAAkB,eAClG,OACC,yBAAK7C,UAAWT,EAAQgP,eACtB1N,EACD,kBAAC4I,GAAA,EAAD,KACEvJ,IAyBAwO,CAAqB7L,IAEvB,kBAACqG,GAAA,EAAD,CAAQxI,QAAQ,YAAYhE,MAAM,UAAUgD,QAAS,kBA3CnC,SAACmD,GACrB,IAAMD,EAAQL,EAAKM,GACdD,EACIA,EAAQ,EAAGL,EAAKM,IAAS,SACtBN,EAAKM,GAFLN,EAAKM,GAAQ,EAGzB2L,EAAQjM,GAsCqDoM,CAAa9L,KACtEA,GAEF,yBAAK7C,UAAWT,EAAQ8O,sBAxBI,SAAAxL,GAC9B,IAAKN,EAAKM,IAASN,EAAKM,GAAQ,EAAG,OAAQ,KAC3C,IAAMhC,EAAO,kBAAC,KAAD,MACPX,EAAgB,gBAAT2C,EAAyB,iBAA6B,iBAATA,EAA0B,gBAAkB,eACtG,OACC,yBAAK7C,UAAWT,EAAQgP,eACvB,kBAAC9E,GAAA,EAAD,KACEvJ,GAEDW,GAgBC+N,CAAuB/L,MAM5B,OACC,yBAAK7C,UAAWT,EAAQwK,mBACtB0E,EAAW,eACXA,EAAW,gBACXA,EAAW,gBCzFT/Q,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtC+M,KAAM,CACL5N,MAAO,QAER8P,UAAW,CACV5P,OAAQW,EAAMZ,QAAQ,IAEvBuS,cAAe,CACdjT,WAAY,UACZH,eAAgB,qBAIZqT,GAAU,SAAA9L,GACf,OAAO+L,KAAKC,MAAMD,KAAKE,UAAUjM,KAgFnB/E,gBAbS,SAACC,GACxB,MAAO,CACNgR,eAAgBhR,EAAMsG,KAAKxB,QAC3BmM,YAAajR,EAAMsG,KAAK2K,gBAIC,SAAC5Q,GAC3B,MAAO,KAKON,EA5EC,SAAC,GAAwF,IAAtFmR,EAAqF,EAArFA,QAASD,EAA4E,EAA5EA,YAAaE,EAA+D,EAA/DA,cAAeH,EAAgD,EAAhDA,eAAgBI,EAAgC,EAAhCA,YAAaC,EAAmB,EAAnBA,aAC9EhQ,EAAU7B,KADuF,EAEvE0K,mBAAS,GAF8D,oBAEhG8C,EAFgG,KAEtFC,EAFsF,OAGzE/C,mBAAS0G,GAAQI,IAHwD,oBAGhGlM,EAHgG,KAGvFiI,EAHuF,OAI/E7C,mBAAS0G,GAAQQ,IAJ8D,oBAIhG/M,EAJgG,KAI1FiM,EAJ0F,KAUvG,OAJKxL,EAAQpI,KAAK4U,MAAQN,EAAetU,KAAK4U,MAC7CvE,EAAW6D,GAAQI,IAInB,6BACC,kBAACO,GAAA,EAAD,CAAQrR,KAAM+Q,EAAa9O,QAAS,WACnC4K,EAAW6D,GAAQI,IACnBV,EAAQM,GAAQQ,IAChBD,MAEA,yBAAKrP,UAAWT,EAAQ4M,WACvB,kBAAC4B,GAAA,EAAD,CACCrN,QAAQ,YACRV,UAAWT,EAAQ0K,KACnBgE,eAAe,UACfC,UAAU,UACVtL,MAAOsI,EACPnC,SAAU,SAACC,EAAGpG,GAAJ,OAAcuI,EAAYvI,KAEpC,kBAACuL,GAAA,EAAD,CAAKtF,MAAM,YACX,kBAACsF,GAAA,EAAD,CAAKtF,MAAM,UAEZ,kBAAC,GAAD,CAAYjG,MAAOsI,EAAU3B,MAAO,GACnC,kBAAC,GAAD,CACCvG,QAASA,EACTiI,WAAY,SAAAhI,GAAC,OAAIgI,EAAW6D,GAAQ7L,QAGtC,kBAAC,GAAD,CAAYL,MAAOsI,EAAU3B,MAAO,GACnC,kBAACmG,GAAD,CACCnN,KAAMA,EACNiM,QAAS,SAAAhM,GAAC,OAAIgM,EAAQM,GAAQtM,SAIjC,kBAACmN,GAAA,EAAD,CAAe3P,UAAWT,EAAQsP,eACjC,kBAAC3F,GAAA,EAAD,CAAQxJ,QAAS,WAChBsD,EAAQpI,KAAK4U,KAAO,KACpBvE,EAAWjI,GACXwL,EAAQ,IACRe,KACE7S,MAAM,WALT,iBAQA,kBAACwM,GAAA,EAAD,CAAQxJ,QAAS,WAChB2P,IACAD,EAAQpM,EAAST,IACf7F,MAAM,UAAUkT,WAAS,GAH5B,e,oBC7EQC,GAAa,SAAC3P,EAAM6D,GAChC,IAAK7D,IAAS6D,EAAQ,OAAO7D,EAC7B6D,EAASA,EAAOhC,cAEhB,IAAM0B,GADNvD,EAAOA,EAAK6B,eACO0B,MAAMM,GACnB+L,EAASrM,EAAMH,KAAI,SAACC,EAAGwM,GAC5B,OAAIA,IAAMtM,EAAMJ,OAAS,EAAUE,EAC3B,0BAAMvC,IAAK+O,GAAIxM,EAAE,2BAAIQ,OAE9B,OACC,8BACE+L,EAAOxM,KAAI,SAAAC,GAAC,OAAIA,O,qBCTPyM,GAAa,SAACxL,GAC1B,MAAO,CAAElH,KAAM,cAAekH,SAelByL,GAAc,SAACzL,GAC3B,MAAO,CAAElH,KAAM,YAAakH,SAGhB0L,GAAY,SAACC,GACzB,MAAO,CAAE7S,KAAM,aAAc6S,WAOjBC,GAAa,SAACC,GAC1B,MAAO,CAAE/S,KAAM,qBAAsB+S,YClBhC3S,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCX,OAAQ,CACPA,OAAQW,EAAMZ,QAAQ,GACtBf,SAAU,SAEX8O,OAAQ,CACPpO,QAAS,OACT8D,SAAU,WACVnE,WAAY,SACZS,MAAO,QAERiU,UAAW,CACVjU,MAAO,OAERkU,OAAQ,CACPlU,MAAO,OAERmU,IAAK,CACJ1U,SAAU,GAEXU,QAAS,CACRA,QAASU,EAAMZ,QAAQ,QA8CzB,IAuBe2B,gBAvBS,SAACC,GACxB,MAAO,CACNmS,QAASnS,EAAMsG,KAAKiM,kBAIK,SAAClS,GAC3B,MAAO,CACNmS,aAAc,SAAA3M,GACb,IAAKA,EAAOV,OACX,OAAO9E,EAAS6R,GAAW,KAE5BvM,GADc,CAAE8M,OAAQ5M,IAEtBiB,MAAK,SAAAc,GACLvH,EAAS6R,GAAWtK,EAAIR,UAExB4B,OAAM,SAAA9G,GACNwQ,QAAQC,IAAIzQ,UAMFnC,EAjEf,SAAgBjB,GACf,IAAMuC,EAAU7B,KACRqG,EAAgD/G,EAAhD+G,OAAQ+M,EAAwC9T,EAAxC8T,aAAcT,EAA0BrT,EAA1BqT,QAASK,EAAiB1T,EAAjB0T,aAFjB,EAGgBtI,mBAASrE,GAHzB,oBAGfgN,EAHe,KAGFC,EAHE,KAUtB,OACC,kBAACnH,GAAA,EAAD,CAAK5N,QAAQ,QAAQR,eAAe,SAASuE,UAAWT,EAAQ/C,SAC/D,kBAACyU,GAAA,EAAD,CACCZ,QAASA,EACTa,eAAgB,SAAAC,GAAM,OAAIA,EAAOtO,MACjCuO,aAAc,SAAAD,GAAM,OAAItB,GAAWsB,EAAOtO,KAAMkO,IAChDM,YAAa,SAAAC,GAAW,IACjBC,EAAwBD,EAAxBC,WAAeC,EADC,aACQF,EADR,gBAMtB,OAJAC,EAAWE,eACV,kBAACC,GAAA,EAAD,CAAgB3R,SAAS,SACxB,kBAAC,KAAD,OAGD,kBAACgI,GAAA,EAAD,iBACKyJ,EADL,CAECG,YAAY,YACZjR,QAAQ,WACRkC,MAAOmO,EACPjI,WAAS,EACTC,SAAU,SAAAC,GAAC,OAxBC,SAAAjF,GACjBiN,EAAejN,GACf2M,EAAa3M,GAsBO6N,CAAU5I,EAAEhK,OAAO4D,QAClC2O,WAAYA,MAIfxI,SAAU,SAACC,EAAGpG,GACbkO,EAAalO,U,4IC3EZiP,GAAQ,MAERC,GAAe,SAACC,EAAMC,GAC3B,IAAM9O,EAAI6O,EAAKE,UACTC,EAAIH,EAAKI,WAAa,EAC5B,GAAIH,EAAO,MAAM,GAAN,OAAU9O,EAAV,YAAegP,GAC1B,IAAME,EAAOL,EAAKM,cAAcC,WAAWC,OAAO,GAClD,MAAM,GAAN,OAAUrP,EAAV,YAAegP,EAAf,YAAoBE,IAGfI,GAAc,SAACC,EAAOC,GAC3B,IAIIC,EAJEC,EAAUrF,KAAKC,OAAOkF,EAAMD,GAASZ,IACrCgB,EAAOD,EAAU,EAAI,MAAQ,OAC7BE,EAAQ,IAAIC,KACZC,EAAOzF,KAAK0F,OAAOH,EAAQJ,GAAOb,IAExC,GAAImB,EAAO,IACVL,EAAM,uBACA,GAAIK,EAAO,GAAI,CACrB,IAAMd,EAAI3E,KAAK0F,MAAMD,EAAO,IAC5BL,EAAG,UAAMT,EAAN,iBAAgBA,EAAI,EAAI,IAAM,GAA9B,aACG,GAAIc,EAAO,EAAG,CACpB,IAAME,EAAI3F,KAAK0F,MAAMD,EAAO,GAC5BL,EAAG,UAAMO,EAAN,gBAAeA,EAAI,EAAI,IAAM,GAA7B,aACOF,EAAO,EACjBL,EAAG,UAAMK,EAAN,eAAiBA,EAAO,EAAI,IAAM,GAAlC,QACgB,IAATA,EACVL,EAAM,SACc,IAAVK,EACVL,EAAM,WACIK,GAAQ,IAClBL,EAAG,cAAkB,EAATK,EAAT,UAEJ,MAAM,GAAN,OAAUL,EAAV,cAAmBb,GAAaW,GAAO,GAAvC,YAAgDX,GAAaY,GAA7D,aAAsEE,EAAtE,YAAiFC,EAAjF,WAQc,YAACM,GAA2B,IAApBC,EAAmB,uDAAP,GAClC,IAAKD,EAAM9P,OAAQ,MAAO,GAC1B8P,EAAQA,EAAM5Q,MAAK,SAAC8Q,EAAGC,GAAJ,OAAUA,EAAID,KACjC,IAAMnH,EAAM,GACRqH,EAAYJ,EAAM,GAClBK,EAAaL,EAAM,GAevB,OAdAA,EAAMxQ,SAAQ,SAACoP,EAAMhC,GACpB,OAAI7D,EAAI7I,QAAU+P,EAAkBlH,EAEhCsH,EAAazB,EAAO,EAAIF,IAC3B3F,EAAIrN,KAAK2T,GAAYe,EAAWC,IAChCD,EAAYxB,OACZyB,EAAazB,KAGdwB,EAAYxB,OACRhC,IAAMoD,EAAM9P,OAAS,GACxB6I,EAAIrN,KAAK2T,GAAYe,EAAWC,SAG3BtH,GC1CFxO,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtC/B,KAAM,CACLsY,YAAavW,EAAMZ,QAAQ,GAC3B0L,aAAc9K,EAAMZ,QAAQ,IAE7BoX,UACwB,UAAvBxW,EAAMxC,QAAQ4C,KACX,CACDZ,MAAOQ,EAAMxC,QAAQI,UAAUF,KAC/B6B,gBAAiBkX,aAAQzW,EAAMxC,QAAQI,UAAU8Y,MAAO,MAEvD,CACDlX,MAAOQ,EAAMxC,QAAQwF,KAAKvF,QAC1B8B,gBAAiBS,EAAMxC,QAAQI,UAAU+Y,MAE5CC,MAAO,CACNC,KAAM,YAEPC,eAAgB,CACfC,OAAQ,EACRC,KAAM,gBACNlK,OAAQ,EACRzN,QAAS,EACT4X,SAAU,SACV3X,QAAS,EACTuD,SAAU,WACVhC,IAAK,GACL1B,MAAO,GAER0E,OAAQ,CACPsI,YAAanM,EAAMZ,QAAQ,GAC3B8M,WAAYlM,EAAMZ,QAAQ,GAC1BmO,SAAU,aAKG,YAACzN,GACf,IAAMuC,EAAU7B,KACR0W,EAAyGpX,EAAzGoX,QAAS9O,EAAgGtI,EAAhGsI,KAAM/C,EAA0FvF,EAA1FuF,KAAMiM,EAAoFxR,EAApFwR,QAASxK,EAA2EhH,EAA3EgH,MAAOqQ,EAAoErX,EAApEqX,SAAUvD,EAA0D9T,EAA1D8T,aAAcwD,EAA4CtX,EAA5CsX,UAAWxQ,EAAiC9G,EAAjC8G,KAAMyQ,EAA2BvX,EAA3BuX,QAASlF,EAAkBrS,EAAlBqS,cAC/F,IAAK/J,EAAM,OACV,8BAGD,IAAMzB,EAAQyB,EAAKA,KACbkP,EAAQlP,EAAKmP,OAAS,EACtBC,EAAkB,IAAVF,EAAc,EAAI1Q,EAU1B6Q,EACL,kBAAC1U,EAAA,EAAD,KACC,kBAACwJ,GAAA,EAAD,CAAYzJ,UAAWT,EAAQuU,MAAOpT,QAAQ,KAAKgE,GAAG,cAAtD,SAGA,kBAACkQ,GAAA,EAAD,CAASd,MAAM,gBACd,kBAAC5K,GAAA,EAAD,CACCxI,QAAQ,YACRhB,QAAS4U,EACTnL,UAAW,kBAAC,KAAD,MACXzM,MAAM,UACNsD,UAAWT,EAAQwB,OACnB8T,KAAK,SANN,aAUD,kBAACD,GAAA,EAAD,CAASd,MAAM,eACd,kBAAC5K,GAAA,EAAD,CACCxI,QAAQ,YACRhE,MAAM,UACNoY,QAAS,kBAAC,KAAD,MACTD,KAAK,QACL7U,UAAWT,EAAQwB,OACnBrB,QAAS,WAAQ2P,MANlB,YAaG0F,EAAmB,SAAAlS,GACxB,IAAMD,EAAQL,EAAKM,GACnB,QAAKD,IACDA,EAAQ,EAAU,MACf,SAGFoS,EACL,kBAACC,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,KACEd,EAAQ9Q,KAAI,SAACT,EAAMkN,GAAP,OACZ,kBAACoF,GAAA,EAAD,CAAWnU,IAAK+O,EACf/P,UAAWT,EAAQpE,KACnBia,MAAO,OACP5Y,QAAQ,OACR6Y,cAAeN,EAAiBlS,IAEhC,kBAACyS,GAAA,EAAD,CACCC,OAAQhV,QAAQgC,EAAKM,IACrB2S,UAAWT,EAAiBlS,IAAS,MACrCnD,QAAS,SAACsJ,GACTA,EAAER,iBA3DY,SAAC3F,GACrB,IAAMD,EAAQL,EAAKM,GACdD,EACIA,EAAQ,EAAGL,EAAKM,IAAS,SACtBN,EAAKM,GAFLN,EAAKM,GAAQ,EAGzB2L,EAAQjM,GAuDFoM,CAAa9L,KAGbA,SAQD4S,EACL,kBAACC,GAAA,EAAD,KACE7R,EAAMP,KAAI,SAACJ,EAAG6M,GAAJ,OACV,kBAACmF,GAAA,EAAD,CACClU,IAAK+O,EACL4F,OAAK,EACLjW,QAAS,SAACsJ,GACTA,EAAER,iBACFsI,EAAa5N,KAGd,kBAACiS,GAAA,EAAD,KACEjS,EAAEqC,UAEJ,kBAAC4P,GAAA,EAAD,KACEjS,EAAEsC,SAASoQ,KAAK,OAElB,kBAACT,GAAA,EAAD,KACEjS,EAAEL,MAEJ,kBAACsS,GAAA,EAAD,KACEjS,EAAE2S,YAEJ,kBAACV,GAAA,EAAD,KACEjS,EAAE0C,WAAa1C,EAAE0C,UAAUvC,OAC5ByS,GAAa5S,EAAE0C,UAAUtC,KAAI,SAAAC,GAAC,OAAI,IAAIwP,KAAKxP,MAAK,GAAG,GAAGE,MAAM,OAAO,GACjE,IAEH,kBAAC0R,GAAA,EAAD,KACEjS,EAAE6S,MAEJ,kBAACZ,GAAA,EAAD,KACEjS,EAAE8S,iBAOR,OACC,6BACErB,EACD,kBAACsB,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,CAAOrB,KAAM,UACXG,EACAS,IAGH,kBAACU,GAAA,EAAD,CACCzM,UAAU,MACV8K,MAAOA,EACP4B,YAAapS,EACbqS,oBAAqB,SAAArN,GAAC,OAAIqL,EAASrL,EAAEhK,OAAO4D,QAC5C0T,mBAAoB,CAAC,GAAG,GAAG,GAAG,IAC9BxS,KAAM4Q,EACN6B,aAAc,SAACvN,EAAGwN,GACjBxN,EAAER,iBACF+L,EAAQiC,Q,oGC7LP9Y,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCiP,UAAW,CACV5P,OAAQW,EAAMZ,QAAQ,QAIT,eAAgE,IAA7D8B,EAA4D,EAA5DA,KAAMqY,EAAsD,EAAtDA,SAAUC,EAA4C,EAA5CA,KAAM5C,EAAsC,EAAtCA,MAAO5T,EAA+B,EAA/BA,KAAMyW,EAAyB,EAAzBA,WAAYC,EAAa,EAAbA,OAC1DrX,EAAU7B,KAEhB,OACC,6BACC,kBAAC+R,GAAA,EAAD,CAAQrR,KAAMA,EAAMiC,QAASwW,SAAU7W,UAAWT,EAAQ4M,WACzD,kBAAC2K,GAAA,EAAD,KACEhD,GAEF,kBAACiD,GAAA,EAAD,KACE7W,GAEF,kBAACyP,GAAA,EAAD,KACC,kBAACzG,GAAA,EAAD,CAAQxJ,QAAS+W,EAAU/Z,MAAM,WAC/Bia,GAAc,UAEhB,kBAACzN,GAAA,EAAD,CAAQxJ,QAASgX,EAAMha,MAAM,WAC3Bka,GAAU,aChBXlZ,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCiP,UAAW,CACV5P,OAAQW,EAAMZ,QAAQ,IAEvB0a,qBAAsB,CACrB3a,MAAO,QACPG,QAASU,EAAMZ,QAAQ,IAExB2a,YAAa,CACZxM,SAAU,QACVlP,SAAU,SAEX2b,UAAW,CACVzM,SAAU,QACVlP,SAAU,QACVkB,gBAAiBS,EAAMxC,QAAQyc,OAAOC,MACtC1a,MAAOQ,EAAMxC,QAAQC,QAAQC,MAE9Byc,SAAU,CACT5a,gBAAiBS,EAAMxC,QAAQyc,OAAOC,OAEvC/M,OAAQ,CACPpO,QAAS,OACT8D,SAAU,WACVnE,WAAY,UAEb4U,IAAK,CACJ1U,SAAU,GAEXwb,gBAAiB,CAChBrb,QAAS,OACTN,cAAe,SACfY,OAAQ,OACRF,MAAO,mBAIHkb,GAAe,CACpB,CAAE1O,MAAO,QAASjG,MAAO,GACzB,CAAEiG,MAAO,SAAUjG,MAAO,GAC1B,CAAEiG,MAAO,SAAUjG,MAAO,GAC1B,CAAEiG,MAAO,SAAUjG,MAAO,GAC1B,CAAEiG,MAAO,SAAUjG,MAAO,IAmQZ3E,gBA3DS,SAACC,GACxB,IAAMgF,EAAIhF,EAAMsG,KAAKgT,UACrB,MAAO,CACN/Z,KAAMS,EAAMT,KACZW,KAAMF,EAAMsG,KAAKiT,aACjBC,cAAexU,EAAEtI,MAAQ,GACzB+c,cAAezU,EAAEwC,MAAQ,GACzByK,OAAQjS,EAAMsG,KAAK2L,WAIM,SAAC5R,GAC3B,MAAO,CACNqZ,cAAe,SAACpT,GACfjG,EAAS0R,GAAYzL,IACrBjG,EAAS2R,GAAU,MAEpB2H,aAAc,SAACnT,GACTA,GACLb,GAAaa,GACXM,MAAK,WACLzG,EAAShB,EAAW,iBACpBgB,EAAS0R,GAAY,OACrB1R,EAASyR,GAAW,OACpBzR,EAAS2R,GAAU,QAEnBhJ,OAAM,SAAA9G,GAAG,OAAI7B,EAASnB,EAASgD,EAAI/C,cAEtCya,WAAY,SAACtT,GACZ,IAAI2L,EAAS,GAIb,GAHK3L,EAAK3B,MAAMsN,EAAOtR,KAAK,QACvB2F,EAAKgB,SAASnC,QAAQ8M,EAAOtR,KAAK,QAClC2F,EAAKuR,MAAM5F,EAAOtR,KAAK,QACxBsR,EAAO9M,OACV,OAAO9E,EAAS2R,GAAUC,IAEtB3L,EAAKhF,IACRqE,GAAYW,EAAKhF,IAAKgF,GACpBQ,MAAK,WACLzG,EAAShB,EAAW,iBAEpBgB,EAAS0R,GAAY,OACrB1R,EAAS2R,GAAU,QAEnBhJ,OAAM,SAAA9G,GAAG,OAAI7B,EAASnB,EAASgD,EAAI/C,aAErCwG,GAAaW,GACXQ,MAAK,WACLzG,EAAShB,EAAW,mBACpBgB,EAAS0R,GAAY,OACrB1R,EAAS2R,GAAU,QAEnBhJ,OAAM,SAAA9G,GAAG,OAAI7B,EAASnB,EAASgD,EAAI/C,iBAO3BY,EAhQE,SAAC,GAAuH,IAArHR,EAAoH,EAApHA,KAAMsa,EAA8G,EAA9GA,SAAU3Z,EAAoG,EAApGA,KAAMwZ,EAA8F,EAA9FA,cAAeF,EAA+E,EAA/EA,cAAeC,EAAgE,EAAhEA,cAAeG,EAAiD,EAAjDA,WAAYD,EAAqC,EAArCA,aAAc1H,EAAuB,EAAvBA,OAAQ6H,EAAe,EAAfA,SAClHzY,EAAU7B,KACZ8G,EAAO/B,OAAOU,OAAO,GAAI4U,GAF0G,EAIvG3P,mBAAS5D,EAAKe,UAJyF,oBAIhI0S,EAJgI,KAItHC,EAJsH,OAKnG9P,mBAAS5D,EAAKwR,WAAW1D,YAL0E,oBAKhI6F,EALgI,KAKpHC,EALoH,OAMrGhQ,mBAAS5D,EAAKgB,UANuF,oBAMhIL,EANgI,KAMrHkT,EANqH,OAO/GjQ,mBAAS5D,EAAK3B,MAPiG,oBAOhIA,EAPgI,KAO1HyV,EAP0H,OAQ3GlQ,mBAAS5D,EAAK+T,MAR6F,oBAQhIC,EARgI,KAQxHC,EARwH,OAS7GrQ,mBAAS5D,EAAKqR,YAT+F,oBAShI6C,EATgI,KASzHC,EATyH,OAUvGvQ,mBAAS5D,EAAKuR,MAVyF,oBAUhI6C,EAVgI,KAUtHC,EAVsH,OAWnGzQ,oBAAS,GAX0F,oBAWhI0Q,EAXgI,KAWpHC,EAXoH,KAgCjIC,EAAc,SAAC,GAAuC,IAArCnQ,EAAoC,EAApCA,MAAOjG,EAA6B,EAA7BA,MAAOmG,EAAsB,EAAtBA,SAAUkQ,EAAY,EAAZA,MAC9C,OACC,yBAAKjZ,UAAWT,EAAQyX,sBACvB,kBAACjP,GAAA,EAAD,CACCmR,QAAM,EACNrQ,MAAOA,EACPC,WAAW,EACX9I,UAAWT,EAAQ0X,YACnBvW,QAAQ,WACRkC,MAAOA,EACPmG,SAAU,SAAAC,GAAC,OAAID,EAASC,EAAEhK,OAAO4D,SAEhCqW,EAAM3V,KAAI,SAACC,EAAGwM,GAAJ,OACV,kBAAC1I,GAAA,EAAD,CAAUrG,IAAK+O,EAAGnN,MAAOW,EAAEX,OAASW,GAClCA,EAAEsF,OAAStF,SAQZ4V,EACL,yBAAKnZ,UAAWT,EAAQyX,sBACvB,kBAACoC,GAAA,EAAD,CAAapZ,UAAWT,EAAQ0X,YAAavW,QAAQ,WACpD3F,MAAOoV,EAAOkJ,SAAS,SAEvB,kBAACC,GAAA,EAAD,CAAYtZ,UAAWT,EAAQ8X,UAA/B,cACA,kBAACkC,GAAA,EAAD,CACCC,UAAQ,EACR1Q,WAAW,EACX2Q,WAAW,EACX7W,MAAOuC,EACP4D,SAAU,SAAAC,GAAC,OAAIqP,EAAarP,EAAEhK,OAAO4D,QACrC8W,MAAO,kBAACC,GAAA,EAAD,MACPC,YAAa,SAAAzU,GAAS,OAAIA,EAAUyQ,KAAK,QAExC+B,EAAcrU,KAAI,SAAAhG,GAAI,OACtB,kBAAC+J,GAAA,EAAD,CAAUrG,IAAK1D,EAAMsF,MAAOtF,GAC3B,kBAACuc,GAAA,EAAD,CAAUC,QAAS3U,EAAUkU,SAAS/b,GAAOZ,MAAM,YACnD,kBAACwE,GAAA,EAAD,CAAcvG,QAAS2C,SAI1B,kBAACyc,GAAA,EAAD,KAAiB5J,EAAOkJ,SAAS,QAAU,mCAAqC,MAK7EW,EACL,yBAAKha,UAAWT,EAAQyX,sBACvB,kBAACjP,GAAA,EAAD,CACCrH,QAAQ,WACRV,UAAWT,EAAQ0X,YACnBpO,MAAO,OACPjG,MAAOC,EACP4W,WAAW,EACX1Q,SAAU,SAAAnG,GAAK,OAAI0V,EAAQ1V,EAAM5D,OAAO4D,QACxC7H,MAAOoV,EAAOkJ,SAAS,QACvBpQ,WAAYkH,EAAOkJ,SAAS,QAAU,sBAAwB,MAK3DY,EACL,yBAAKja,UAAWT,EAAQyX,sBACvB,kBAACjP,GAAA,EAAD,CACCrH,QAAQ,WACRV,UAAWT,EAAQ0X,YACnBpO,MAAM,eACNjG,MAAOgW,EACP7P,SAAU,SAAAC,GAAC,OA7EQpG,EA6ESoG,EAAEhK,OAAO4D,WA5EzB,IAAIsX,OAAO,UACfC,KAAKvX,IACfiW,EAAYjW,IAHQ,IAACA,GA8EnB7H,MAAOoV,EAAOkJ,SAAS,QACvBpQ,WAAYkH,EAAOkJ,SAAS,QAAU,8BAAgC,MAKnEe,EACL,yBAAKpa,UAAWT,EAAQyX,sBACvB,kBAACjP,GAAA,EAAD,CACCrH,QAAQ,WACRV,UAAWT,EAAQ0X,YACnBpO,MAAO,SACPjG,MAAO4V,EACPiB,WAAYjB,EAAOa,SAAS,QAC5BtQ,SAAU,SAAAC,GAAC,OAAIyP,EAAUzP,EAAEhK,OAAO4D,WAK/ByX,EACL,yBAAKra,UAAWT,EAAQyX,sBACvB,kBAACjP,GAAA,EAAD,CACCrH,QAAQ,WACRV,UAAWT,EAAQ0X,YACnBpO,MAAM,cACNjG,MAAO8V,EACP3P,SAAU,SAAAC,GAAC,OAAI2P,EAAS3P,EAAEhK,OAAO4D,QACjC0E,SAAwB,UAAd7J,EAAK6D,QAKZgZ,EACL,kBAAC,IAAM3O,SAAP,KACEqO,EACD,kBAAChB,EAAD,CAAanQ,MAAO,YAAajG,MAAOqV,EAAUlP,SAAU,SAACnG,GAAD,OAAWsV,EAAYtV,IAAQqW,MAAOvB,IACjGyB,EACD,kBAACH,EAAD,CAAanQ,MAAO,cAAejG,MAAOuV,EAAYpP,SAAU,SAACnG,GAAD,OAAWwV,EAAcxV,IAAQqW,MAAO1B,KACvG0C,EACAG,EACAC,GAIGE,GACL,kBAACrR,GAAA,EAAD,CAAQC,UAAW,kBAAC,KAAD,MAAuBzJ,QAAS,kBAAMqZ,GAAc,KAAvE,UAKD,OACC,6BACC,kBAACtJ,GAAA,EAAD,CAAQrR,KAAMA,EAAMiC,QAAS,kBAAMuX,EAAc,OAAO5X,UAAWT,EAAQ4M,WAC1E,kBAAC2K,GAAA,EAAD,KACC,yBAAK9W,UAAWT,EAAQ8K,QACtBxH,EACD,yBAAK7C,UAAWT,EAAQiR,MACvBhM,EAAKhF,IAAM+a,GAAa,OAG3B,kBAACxD,GAAA,EAAD,KACC,0BAAM/W,UAAWT,EAAQ+X,gBAAiBkD,YAAU,GAClDF,IAGH,kBAAC3K,GAAA,EAAD,KACC,kBAACzG,GAAA,EAAD,CAAQxJ,QAAS,kBAAMkY,EAAc,OAAOlb,MAAM,WAAlD,UAGA,kBAACwM,GAAA,EAAD,CAAQxJ,QAAS,WAChBsY,IACAF,EAjKG,CACNtY,IAAKgF,EAAKhF,IACVqD,KAAMA,EACN0V,KAAMC,EACNjT,SAAU0S,EACVzS,SAAUL,EACV6Q,WAAYmC,EACZpC,KAAM6C,EACN/C,WAAY6C,KA0JPhc,MAAM,UAAUkT,WAAS,GAC1BpL,EAAKE,GAAK,QAAU,SAIxB,kBAAC+V,GAAD,CACCrc,KAAM0a,EACNrC,SAAU,kBAAMsC,GAAc,IAC9BrC,KAAM,WACLqC,GAAc,GACdlB,EAAarT,EAAKhF,KAClBwY,KAEDlE,MAAM,cACN5T,KAAK,gBACL0W,OAAO,e,0HCxOLlZ,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCwd,OAAQxd,EAAMhB,gBACdye,cAAezd,EAAMlB,gBACrBmQ,UAAW,CACV5P,OAAQW,EAAMZ,QAAQ,IAEvBC,OAAQ,CACPA,OAAQW,EAAMZ,QAAQ,IAEvB0a,qBAAsB,CACrBxa,QAASU,EAAMZ,QAAQ,IAExB2a,YAAa,CACZxM,SAAU,QACVlP,SAAU,SAEXqf,oBAAqB,CACpBve,MAAO,SAER0E,OAAQ,CACP1E,MAAO,QACP2N,OAAQ,YAIV6Q,KAAOC,OAAO,MACdD,KAAOE,aAAa,KAAM,CACzBC,KAAM,CAAEC,IAAK,EAAGC,IAAK,KA0BtB,IAoLejd,gBA7BS,SAACC,GACxB,MAAO,CACNT,KAAMS,EAAMT,KACZ+G,KAAMtG,EAAMsG,KAAK2W,aACjBC,WAAYld,EAAMsG,KAAK4W,eAIE,SAAC7c,GAC3B,MAAO,CACNuS,aAAc,SAACtM,GACdjG,EAASyR,GAAWxL,KAErBoT,cAAe,SAACpT,GACfjG,EAAS0R,GAAYzL,KAEtB6W,gBAAiB,SAAC7W,GACjBX,GAAYW,EAAKhF,IAAKgF,GACpBQ,MAAK,SAAAc,GACLvH,EAAShB,EAAW,gBAAD,OAAiBiH,EAAK3B,QACzCtE,EAASyR,GAAW,UAEpB9I,OAAM,SAAA9G,GACN7B,EAASnB,EAASgD,EAAI/C,iBAMZY,EAzKM,SAAC,GAAkF,IAAhFuG,EAA+E,EAA/EA,KAAM4W,EAAyE,EAAzEA,WAAYtK,EAA6D,EAA7DA,aAAc8G,EAA+C,EAA/CA,cAAeI,EAAgC,EAAhCA,SAAUqD,EAAsB,EAAtBA,gBAC1E9b,EAAU7B,KACV4d,EAbmB,SAAA9W,GACzB,IAAI+W,EAAW,IAAIxI,KAAKvO,EAAKoB,UAAUrD,MAAK,SAAC8Q,EAAGC,GAAJ,OAAU,IAAIP,KAAKO,GAAK,IAAIP,KAAKM,MAAI,IAC7EkI,EAAW,IAAIxI,OAAQwI,EAAW,IAAIxI,MAC1C,IAAMyI,EAAY,IAAIzI,KAAKwI,EAASE,UAAY,OAC1CC,EAAU,IAAI3I,KAAKyI,EAAUC,UAA8B,GAAlBjX,EAAKwR,WAAkB,GAAK,GAAK,KAChF,MAAO,CACNwF,UAAWA,EACXE,QAASA,GAMaC,CAAkBP,GAF6D,EAGpEhT,mBAASkT,EAAeE,WAH4C,oBAG/FA,EAH+F,KAGpFI,EAHoF,OAIxExT,mBAASkT,EAAeI,SAJgD,oBAI/FA,EAJ+F,KAItFG,EAJsF,KAMtG,IAAKrX,EAAM,OAAO,KAElB,IAiBMsX,EACL,yBAAK9b,UAAWT,EAAQyX,sBACvB,kBAACd,GAAA,EAAD,CAAOrB,KAAK,SACX,kBAACI,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,kBAGF,kBAACO,GAAA,EAAD,KACElR,EAAKoB,UAAYkQ,GAAatR,EAAKoB,UAAUtC,KAAI,SAAAC,GAAC,OAAI,IAAIwP,KAAKxP,OAAKD,KAAI,SAACL,EAAG8M,GAAJ,OACxE,kBAACmF,GAAA,EAAD,CAAUlU,IAAK+O,GACd,kBAACoF,GAAA,EAAD,KACElS,OAGC,kBAACiS,GAAA,EAAD,KAAU,kBAACC,GAAA,EAAD,0BAMb4G,EACL,yBAAK/b,UAAWT,EAAQob,eACvB,6BACEnW,EAAK+T,KAAKc,SAAS,SAAW7U,EAAK+T,KAAKc,SAAS,OACjD,kBAAC5P,GAAA,EAAD,KACC,kBAACuS,GAAA,EAAD,CAAMC,KAAMzX,EAAK+T,MAAjB,mBAIC,MAEJ,yBAAKvY,UAAWT,EAAQmb,QACvB,kBAAC,KAAD,CAAyBwB,MAAOC,MAC/B,kBAACC,GAAA,EAAD,CACCvT,MAAM,OACNwT,OAAO,aACPC,MAAO,CAAC,OAAQ,QAAS,QACzBC,QAAS,IAAIxJ,KAAK,KAAM,EAAG,GAC3ByJ,iBAAiB,EACjB5Z,MAAO4Y,EACPzS,SAAU,SAAAgJ,GAAI,OAAI6J,EAAa7J,EAAK0K,KACpCC,sBAAoB,EACpBC,mBAAoB,SAAC3f,GAAD,OACnB,kBAAC+K,GAAA,EAAD,CACCc,MAAM,aACNnJ,QAAS1C,EAAM0C,QACfkD,MAAO5F,EAAM4F,MACb2O,WAAY,CACXE,eAAgB,kBAAC,KAAD,OAEjBoD,KAAK,QACL7U,UAAS,UAAKT,EAAQqb,oBAAb,YAAoCrb,EAAQhD,aAIxD,kBAAC6f,GAAA,EAAD,CACCvT,MAAM,OACNwT,OAAO,aACPC,MAAO,CAAC,OAAQ,QAAS,QACzBC,QAAS,IAAIxJ,KAAK,KAAM,EAAG,GAC3ByJ,iBAAiB,EACjB5Z,MAAO8Y,EACP3S,SAAU,SAAAgJ,GAAI,OAAI8J,EAAW9J,EAAK0K,KAClCC,sBAAoB,EACpBC,mBAAoB,SAAC3f,GAAD,OACnB,kBAAC+K,GAAA,EAAD,CACCc,MAAM,WACNnJ,QAAS1C,EAAM0C,QACfkD,MAAO5F,EAAM4F,MACb2O,WAAY,CACXE,eAAgB,kBAAC,KAAD,OAEjBoD,KAAK,QACL7U,UAAS,UAAKT,EAAQqb,oBAAb,YAAoCrb,EAAQhD,eAM1D,kBAAC2M,GAAA,EAAD,CACCC,UAAW,kBAAC,KAAD,MACXzI,QAAQ,YACRhE,MAAM,UACNsD,UAAWT,EAAQwB,OACnBrB,QAtGkB,WAGpB,IAFA,IAAImT,EAAO,CAAC2I,EAAUoB,gBAClBC,EAAUrB,IACD,CACZ,IAAIsB,EAAS,IAAI/J,KAAK8J,EAAQpB,UAAY,OAC1C,GAAIqB,EAASpB,EAAS,MACtB7I,EAAKhU,KAAKie,EAAOF,gBACjBC,EAAUC,EAENtY,EAAKoB,YAAWpB,EAAKoB,UAAY,IACtCpB,EAAKoB,UAAYpB,EAAKoB,UAAUmX,OAAOlK,GACvCrO,EAAKqR,WAAarR,EAAKqR,WAAa,EACpCwF,EAAgB7W,GAChBwT,MAoFC,eAOC8D,GAIH,OACC,6BACC,kBAACrM,GAAA,EAAD,CAAQrR,MAAM,EAAMiC,QAAS,kBAAMyQ,EAAa,OAAO9Q,UAAWT,EAAQ4M,WACzE,kBAAC2K,GAAA,EAAD,KACC,yBAAK9W,UAAWT,EAAQmb,QACtBlW,EAAK3B,KACN,kBAACpD,EAAA,EAAD,CAAYC,QAAS,kBAAMkY,EAAcpT,KACxC,kBAAC,KAAD,SAIH,kBAACuS,GAAA,EAAD,KACEgF,GAEF,kBAACpM,GAAA,EAAD,KACC,kBAACzG,GAAA,EAAD,CAAQxJ,QAAS,kBAAMoR,EAAa,OAAOpU,MAAM,WAAjD,gBCrMCgB,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtC/B,KAAM+B,EAAM/B,SAGPiZ,GAAU,CAAC,OAAQ,OAAQ,OAAQ,QAAS,YAAa,eAAgB,eAEzE4I,GAAc,CACnBna,KAAM,OACN0C,SAAU,OACVC,SAAU,CAAC,SACXwQ,WAAY,EACZuC,KAAM,GACNxC,KAAM,GACNF,WAAY,GAkHE5X,gBAvES,SAACC,GACxB,MAAO,CACNT,KAAMS,EAAMT,KACZoG,MAAO3F,EAAMsG,KAAKX,MAClBtB,KAAMrE,EAAMsG,KAAKjC,KACjBS,QAAS9E,EAAMsG,KAAKxB,QACpBe,OAAQ7F,EAAMsG,KAAKT,OACnBD,KAAM5F,EAAMsG,KAAKV,KACjBE,MAAO9F,EAAMsG,KAAKR,MAClBmX,aAAcjd,EAAMsG,KAAK2W,aACzBpD,SAAU7Z,EAAMsG,KAAKuT,aAMI,SAACxZ,GAC3B,MAAO,CACNuS,aAAc,SAACtM,GACdjG,EAASyR,GAAWxL,KAErByY,UAAW,SAACnZ,EAAMd,EAAST,EAAMwB,EAAQC,GACxCH,GAAWb,EAASc,EAAMvB,EAAMwB,EAAQC,GACtCgB,MAAK,SAAAC,GACL1G,EPtFG,CAAEjB,KAAM,YAAauG,MOsFN,CACjBA,MAAOoB,EACPjC,QAASA,EACTT,KAAMA,EACNuB,KAAMA,EACNE,MAAOA,EACPD,OAAQA,KAETF,KACEmB,MAAK,SAAAc,GACLvH,EP5EC,CAAEjB,KAAM,kBAAmBkH,KO4ELsB,UAGzBoB,OAAM,SAAA9G,GAAG,OAAI7B,EAASnB,EAASgD,EAAI/C,cAEtCgS,cAAe,WACd9Q,EPlGK,CAAEjB,KAAM,sBOoGd4f,YAAa,WACZ,IAAIla,EAAU,CACbpI,KAAM,GACN8K,KAAM,GACNgH,MAAO,CAACyQ,IAAK,KACbxX,IAAK,IAEN9B,KACEmB,MAAK,SAAAc,GACLvH,EP1GoB,SAACuH,GACzB,MAAO,CAAExI,KAAM,gBAAiBwI,OOyGnB0R,CAAU1R,IACnBA,EAAIlL,KAAK+H,SAAQ,SAAAuP,GAChBlP,EAAQpI,KAAKsX,GAAK,SAEnBpM,EAAIJ,KAAK/C,SAAQ,SAAAH,GAChBQ,EAAQ0C,KAAKlD,GAAK,SAEnBsD,EAAIH,IAAIhD,SAAQ,SAAAO,GACfF,EAAQ2C,IAAIzC,GAAK,SAElB3E,EPpIqB,SAACyE,GAC1B,MAAO,CAAE1F,KAAM,cAAe0F,WOmIjBiI,CAAWjI,OAEpBkE,OAAM,SAAA9G,GAAG,OAAIhD,EAASgD,EAAI/C,aAE7Bua,cAAe,SAACpT,GACfjG,EAAS0R,GAAYzL,QAKTvG,EA/GD,SAAC,GAA+I,IAA7I4F,EAA4I,EAA5IA,MAAOtB,EAAqI,EAArIA,KAAMuO,EAA+H,EAA/HA,aAAcmM,EAAiH,EAAjHA,UAAWja,EAAsG,EAAtGA,QAASe,EAA6F,EAA7FA,OAAQsL,EAAqF,EAArFA,cAAevL,EAAsE,EAAtEA,KAAME,EAAgE,EAAhEA,MAAOmX,EAAyD,EAAzDA,aAAcpD,EAA2C,EAA3CA,SAAUmF,EAAiC,EAAjCA,YAAatF,EAAoB,EAApBA,cAClIrY,EAAU7B,KAQhB,OANKmG,EAAMG,QACVkZ,IACAD,EAAUnZ,EAAMd,EAAST,EAAMwB,EAAQC,IAKvC,kBAACyE,GAAA,EAAD,CAAOzI,UAAWT,EAAQpE,MACzB,kBAAC,GAAD,CAAQ4I,OAAQA,EAAQ+M,aAAcA,IACtC,kBAAC,GAAD,CACCzB,cAAeA,EACfH,eAAgBlM,EAChBsM,YAAa/M,EACb6M,QAAS,SAACnM,EAAGT,GAAJ,OAAUya,EAAUnZ,EAAMb,EAAGT,EAAGuB,EAAQC,IACjDuL,aAAc,kBAAM2N,OAErB,kBAAC,GAAD,CACC9I,QAASA,GACT9O,KAAMzB,EACNtB,KAAMA,EACNyB,MAAOA,EACPwK,QAAS,SAAAjM,GAAI,OAAI0a,EAAUnZ,EAAMd,EAAST,EAAMwB,EAAQC,IACxDqQ,SAAU,SAAArQ,GAAK,OAAIiZ,EAAUnZ,EAAMd,EAAST,EAAMwB,EAAQC,IAC1D8M,aAAcA,EACdwD,UAAW,kBAAMsD,EAAcoF,KAC/B3N,cAAeA,EACfvL,KAAMA,EACNyQ,QAAS,SAAAzK,GAAC,OAAImT,EAAUnT,EAAG9G,EAAST,EAAMwB,EAAQC,MAElDmX,EAAe,kBAAC,GAAD,CAAcnD,SAAU,kBAAMiF,EAAUnZ,EAAMd,EAAST,EAAMwB,EAAQC,MAAa,KACjG+T,EAAW,kBAAC,GAAD,CAAUA,SAAUA,EAAUC,SAAU,kBAAMiF,EAAUnZ,EAAMd,EAAST,EAAMwB,EAAQC,MAAa,SCtDlGoZ,OARf,SAAkBpgB,GACjB,OACC,0C,kDCAWqgB,GAAc,SAAC3Y,GAC3B,MAAO,CAAEpH,KAAM,gBAAiBoH,OCE3B4Y,GAAuB,SAACtX,EAAUuX,GACpC,IAAIC,EAAc,GAClBxX,EAASrD,SAAQ,SAAAmH,GACb0T,GAAW,UAAO1T,EAAE2T,MAAT,aAAmB3T,EAAE4T,OAArB,sCAVA,SAAAC,GACf,IAAI5L,EAAO,IAAIgB,KAAK4K,GACdC,EAAQ7L,EAAKI,WAAa,EAC1BxM,EAAMoM,EAAKE,UACjB,MAAM,GAAN,OAAUtM,EAAV,YAAiBiY,GAMyCC,CAAW/T,EAAEiI,MAAxD,aAAkEjI,EAAEgU,UAApE,UAEf,IAAMC,EAAG,UAAMC,gEAAN,YAAgDT,GACzD,MAAM,yCAAN,OAA6CC,EAA7C,eAA+DO,EAA/D,oC,+DCLErgB,GAAYC,aAAW,SAAAT,GAAK,MAAK,MAqDxB+gB,GA5CU,SAAAjhB,GACLU,KAAhB,IAOIgM,EAAWwU,EANPC,EAAkCnhB,EAAlCmhB,QAASpV,EAAyB/L,EAAzB+L,SAAUqV,EAAephB,EAAfohB,WAErBC,EAAgBF,EAAQG,QAAUH,EAAQjY,KAC1CqY,EAAmBJ,EAAQG,SAA2B,IAAjBH,EAAQjY,KAC7CsY,GAAkBL,EAAQG,QAA+B,MAArBH,EAAQM,UA6BlD,OA1BIJ,GACAH,EAAc,kBACdxU,EAAY,kBAACmQ,GAAA,EAAD,CAAUvS,UAAQ,EAACwS,SAAO,EAACjZ,KAAM,kBAAC,KAAD,MAAiBnE,MAAM,aAE/D6hB,GACLL,EAAc,qBACdxU,EAAY,kBAACmQ,GAAA,EAAD,CACRhZ,KAAM,kBAAC,KAAD,MACN6d,YAAa,kBAAC,KAAD,MACb5E,QAAwD,MAA/CsE,EAAW7Z,MAAK,SAAAhB,GAAC,OAAIA,EAAE/D,MAAQ2e,EAAQ3e,OAChD9C,MAAM,UACNqM,SAAUA,KAGTyV,GACLN,EAAc,0BACdxU,EAAY,kBAACmQ,GAAA,EAAD,CAAUvS,UAAQ,EAACwS,SAAS,EAAOpd,MAAM,cAErDwhB,EAAc,aACdxU,EAAY,kBAACmQ,GAAA,EAAD,CACRnd,MAAM,UACNqM,SAAUA,EACV+Q,QAAwD,MAA/CsE,EAAW7Z,MAAK,SAAAhB,GAAC,OAAIA,EAAE/D,MAAQ2e,EAAQ3e,UAKpD,kBAACoV,GAAA,EAAD,CAASd,MAAOoK,GACZ,8BACKxU,KC/BXhM,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACnC/B,KAAM+B,EAAM/B,KACZa,gBAAiBkB,EAAMlB,gBACvB2iB,SAAU,CACNniB,QAASU,EAAMZ,QAAQ,GACvBD,MAAO,QAEXuiB,wBAAyB,CACrBviB,MAAO,SAEXwiB,yBAA0B,CACtBxiB,MAAO,QAEXyiB,UAAW,CACPziB,MAAO,OAEXC,QAAS,CACLC,OAAQW,EAAMZ,QAAQ,GACtBD,MAAO,SAEX0iB,eAAgB,CACZ3V,WAAY,QACZC,YAAa,aAMfwU,GAAa,SAAA9L,GACK,kBAATA,IAAmBA,EAAO,IAAIgB,KAAKhB,IAC9C,IAAMK,EAAOL,EAAKM,cACZuL,EAAQ7L,EAAKI,WAAa,EAC1BxM,EAAMoM,EAAKE,UACjB,MAAM,GAAN,OAAUtM,EAAV,YAAiBiY,EAAjB,YAA0BxL,IASxBmB,GAAY,IAAIR,KAAK,KAAM,EAAG,GAC9BiM,GAAY,IAAIjM,MAAK,IAAIA,MAAOkM,iBAAkB,EAAG,GACrDC,GAAU,IAAInM,MAAK,IAAIA,MAAOkM,iBAAkB,GAAI,IA4S1D,IAgEehhB,gBAhES,SAACC,GACrB,MAAO,CACHoH,KAAMpH,EAAM+H,QAAQX,KACpB6Z,SAAUjhB,EAAM+H,QAAQkZ,SACxBC,cAAelhB,EAAM+H,QAAQmZ,kBAIV,SAAC7gB,GACxB,IAAM8gB,EAAU,SAAC5M,EAAOC,GACpB1M,GAAc,CACV+L,KAAM,CACFuN,IAAK7M,EACL0K,IAAKzK,GAETrO,MAAO,CACHkb,WAAY,KAEjBva,MAAK,SAAAc,GAAG,OAAIvH,EHjYf,CAAEjB,KAAM,WAAYgI,KGiYYQ,EAAIR,UAC/B4B,OAAM,SAAA9G,GAAG,OAAI7B,EAASnB,EAASgD,EAAI/C,cAE5C,MAAO,CACHmiB,UAAW,SAAC/M,EAAOC,GAAR,OAAgB2M,EAAQ5M,EAAOC,IAC1C+M,aAAc,SAACxZ,EAASwM,EAAOC,GAC3B1M,GAAgBC,GACXjB,MAAK,SAAAc,GACFvH,EAAShB,EAAW,kBACpB8hB,EAAQ5M,EAAOC,MAElBxL,OAAM,SAAA9G,GAAG,OAAI7B,EAASnB,EAASgD,EAAI/C,cAE5CqiB,cAAe,SAAChb,GACZnG,EAAS8e,GAAY3Y,KAEzBib,gBAAiB,SAACjb,EAAI+N,EAAOC,GACzB1M,GAAgBtB,GACXM,MAAK,SAAAc,GACFvH,EAAShB,EAAW,oBACpBgB,EAAS8e,GAAY,OACrBgC,EAAQ5M,EAAOC,MAElBxL,OAAM,SAAA9G,GAAG,OAAI7B,EAASnB,EAASgD,EAAI/C,cAE5CuiB,mBAAoB,WAChB5Z,GAAc,IACThB,MAAK,SAAAc,GACF,IAAM+Z,EAAW/Z,EAAIR,KAAKhC,KAAI,SAAAC,GAAC,OAAIA,EAAEka,SAC/B2B,EAAa,aAAO,IAAI3Z,IAAIoa,IACL,IAAzBT,EAAc/b,QACd+b,EAAcvgB,KAAK,OACvBN,EHzZT,CAAEjB,KAAM,qBAAsBmgB,MGyZK2B,OAE7BlY,OAAM,SAAA9G,GAAG,OAAI7B,EAASnB,EAASgD,EAAI/C,cAE5CyiB,WAAW,WAAD,8BAAE,WAAOrN,EAAOC,EAAKqN,GAAnB,kBAAA1M,EAAA,sDACC9J,EAAQ,EADT,YACYA,EAAQwW,EAAY1c,QADhC,uBAEE4C,EAAU8Z,EAAYxW,GAFxB,SAGEvD,GAAeC,EAAQzG,IAAK,CAAE8e,QAAQ,IAHxC,OACwC/U,IADxC,sBAKR8V,EAAQ5M,EAAOC,GALP,2CAAF,uDAAC,MAUJzU,EA1Wf,SAAkBjB,GACd,IAcIyX,EAAOuL,EAdLzgB,EAAU7B,KACR4H,EAAkCtI,EAAlCsI,KAAM6Z,EAA4BniB,EAA5BmiB,SAAUC,EAAkBpiB,EAAlBoiB,cAChBI,EAA4FxiB,EAA5FwiB,UAAWC,EAAiFziB,EAAjFyiB,aAAcC,EAAmE1iB,EAAnE0iB,cAAeC,EAAoD3iB,EAApD2iB,gBAAiBC,EAAmC5iB,EAAnC4iB,mBAAoBE,EAAe9iB,EAAf8iB,WAHhE,EAKG1X,mBAAS,IAAI2K,MALhB,oBAKdhB,EALc,KAKRkO,EALQ,OAMO7X,mBAAS,IANhB,oBAMdsV,EANc,KAMNwC,EANM,OAOG9X,mBAAS,IAPZ,oBAOd+X,EAPc,KAORC,EAPQ,OAQyBhY,oBAAS,GARlC,oBAQdiY,EARc,KAQGC,EARH,OASalY,mBAAS4W,IATtB,oBASdxD,EATc,KASHI,EATG,OAUSxT,mBAAS8W,IAVlB,oBAUdxD,EAVc,KAULG,EAVK,OAWKzT,mBAAS,IAXd,oBAWdmY,EAXc,KAWPC,EAXO,OAYWpY,mBAAS,MAZpB,oBAYdqY,EAZc,KAYJC,EAZI,OAaetY,mBAAS,IAbxB,oBAadgW,EAbc,KAaFuC,EAbE,KAgBrBC,qBAAU,WACNpB,EAAUhE,EAAWE,KACtB,CAACF,EAAWE,EAAS8D,IAExBoB,qBAAU,WACuB,IAAzBxB,EAAc/b,QACduc,MACL,CAACA,EAAoBR,IAEpB9Z,IAIA0a,IAHAvL,EAAQnP,EAAKub,QAAO,SAACpM,EAAOlR,GAAR,OAAckR,EAAQlR,EAAEma,SAAQ,GAAGoD,QAAQ,KAChDxb,EAAKjC,OAAU,IAAI0P,KAAKzN,EAAK,GAAGyM,MAAMI,WAAaqJ,EAAUrJ,WAAc,IAE9D2O,QAAQ,IAExC,IAwDMC,EAAgB,SAACR,GACnB,IAAIlN,EAAI2N,SAASC,cAAc,KAC/B5N,EAAE4I,KAAOsE,EAAMjb,KACf+N,EAAE6N,SAAWX,EAAM1d,KACnBwQ,EAAE8N,SA2BAC,EAAa,SAACvY,EAAOjG,EAAOye,EAAU/E,EAAOD,GAAhC,IAAwCE,EAAxC,uDAAkD,IAAIxJ,KAAK,KAAM,EAAG,GAAIuO,EAAxE,uDAAkFpC,GAAlF,OACf,kBAAC,KAAD,CAAyBhD,MAAOC,MAC5B,kBAACC,GAAA,EAAD,CACIvT,MAAOA,EACPwT,OAAQA,EACRC,MAAOA,EACPC,QAASA,EACT+E,QAASA,EACT9E,iBAAiB,EACjB5Z,MAAOA,EACPmG,SAAU,SAAAgJ,GAAI,OAAIsP,EAAStP,EAAK0K,KAChCC,sBAAoB,EACpBC,mBAAoB,SAAC3f,GAAD,OAChB,kBAAC+K,GAAA,EAAD,CACIc,MAAOA,EACPnJ,QAAS1C,EAAM0C,QACfkD,MAAO5F,EAAM4F,MACb2O,WAAY,CACRgQ,aAAc,kBAAC,KAAD,OAElB1M,KAAK,QACL7U,UAAWqc,EAAO5Y,MAAM,KAAKJ,OAAS,EAAI9D,EAAQqf,wBAA0Brf,EAAQsf,gCAOlG2C,GACF,yBAAKxhB,UAAWT,EAAQvD,iBACpB,yBAAKgE,UAAS,UAAKT,EAAQjD,QAAb,YAAwBiD,EAAQvD,kBACzColB,EAAW,OAAQrP,EAAMkO,EAAS,CAAC,OAAQ,QAAS,QAAS,eAElE,yBAAKjgB,UAAWT,EAAQjD,SACpB,kBAACyL,GAAA,EAAD,CACInF,MAAO8a,EACPpgB,KAAK,SACLoD,QAAQ,WACRqI,SAAU,SAAAC,GAAC,OAAIkX,EAAUlX,EAAEhK,OAAO4D,MAAM6e,QAAQ,IAAK,OACrDlQ,WAAY,CACRgQ,aAAc,kBAAC7P,GAAA,EAAD,CAAgB3R,SAAS,OAAzB,cAI1B,yBAAKC,UAAWT,EAAQjD,SACpB,kBAAC2U,GAAA,EAAD,CACIjQ,IAAKqf,EACLqB,UAAQ,EACRrR,QAAS+O,EACThO,aAAc,SAAAD,GAAM,OAAItB,GAAWsB,EAAQgP,IAC3C9O,YAAa,SAAArU,GAAK,OACd,kBAAC+K,GAAA,EAAD,iBACQ/K,EADR,CAEI6L,MAAM,OACNjG,MAAOud,EACPrX,WAAS,EACTC,SAAU,SAAAC,GAAC,OAAIoX,EAAQpX,EAAEhK,OAAO4D,YAExCmG,SAAU,SAACC,EAAGpG,GAAJ,OAAcwd,EAAQxd,GAAS,QAGjD,kBAACsG,GAAA,EAAD,CACIlJ,UAAWT,EAAQjD,QACnBoE,QAAQ,YACRhE,MAAM,UACNgD,QAAS,aA1IZ6gB,EAAM1d,OAAQ0d,EAAMjb,MAAUqc,OAAOC,QAAQ,6BAG7CnB,EAGDA,EAASU,QAFTvQ,QAAQ7V,MAAM,qBAkId,aAOCwlB,EAAM1d,MACH,yBAAKlD,MAAO,CAAE1D,QAAS,OAAQN,cAAe,QAC1C,kBAACuN,GAAA,EAAD,CAAQxJ,QAAS,kBAAMqhB,EAAcR,KAChCA,EAAM1d,MAEX,kBAACpD,EAAA,EAAD,CAAYC,QAAS,kBAAM8gB,EAAS,MAChC,kBAAC,KAAD,QAGZ,kBAACtX,GAAA,EAAD,CACIlJ,UAAWT,EAAQjD,QACnBoE,QAAQ,YACRhE,MAAM,UACNyM,UAAW,kBAAC,KAAD,MACXzJ,QAAS,kBAzKI,WACrB,KAAImiB,WAAWnE,IAAW,GAA1B,CACA,IAAIzX,EAAU,CAAE8L,KAAMA,EAAM2L,OAAQA,EAAQD,MAAO0C,IAC/CI,EAAM1d,MAAQ0d,EAAMjb,QACpBW,EAAO,6BAAQA,GAAR,IAAiB6X,UAAWyC,EAAM1d,KAAM4b,UAAW8B,EAAMjb,QACpEma,EAAaxZ,EAASuV,EAAWE,GACjCuE,EAAQ,IAAIlN,MACZmN,EAAU,IACVE,EAAQ,IACRE,GAAoBD,GACpBG,EAAS,KA+JcsB,KALnB,gBAWFC,GACF,kBAAC9L,GAAA,EAAD,CAAgBvM,UAAWjB,MACvB,kBAACyN,GAAA,EAAD,KACI,kBAACjB,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,KACKiM,EAAW,OAAQ5F,EAAWI,EAAc,CAAC,OAAQ,SAAU,QAASrI,GAAWmI,IAExF,kBAACvG,GAAA,EAAD,KACKiM,EAAW,KAAM1F,EAASG,EAAY,CAAC,OAAQ,SAAU,QAASL,EAAW0D,KAElF,kBAAC/J,GAAA,EAAD,sBAAsBV,EAAtB,YACA,kBAACU,GAAA,EAAD,yBAAyB6K,EAAzB,YACA,kBAAC7K,GAAA,EAAD,MACA,kBAACA,GAAA,EAAD,MACA,kBAACA,GAAA,EAAD,OAEJ,kBAACD,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,gBACA,kBAACA,GAAA,EAAD,iBACA,kBAACA,GAAA,EAAD,eACA,kBAACA,GAAA,EAAD,cACA,kBAACA,GAAA,EAAD,YACA,kBAACA,GAAA,EAAD,KACKiJ,EAAW/a,OAAS,EACjB,kBAAC6F,GAAA,EAAD,CAAQxI,QAAQ,YAAYhE,MAAM,UAC9BsD,UAAWT,EAAQwf,eACnBrf,QAjIJ,WACxB,IAAM4G,EAAU,CACZ0b,UAAU,EACVC,IAAK7D,EAAW9a,KAAI,SAAAC,GAAC,OAAIA,EAAE/D,QAE/B4G,GAAuBE,GAClBtB,MAAK,SAAAkd,IFpKQ,SAAClc,EAAUuX,GACjC,IAGI4E,EAAU7E,GAAqBtX,EAAUuX,GAC7CoE,OAAOvjB,KAAP,iBAHS4f,gCAGT,oBAFY,UAEZ,iBAAkDoE,mBAAmBD,KEgKzDE,CAAWjE,EAAY8D,EAAc1iB,KACrCsgB,EAAWtE,EAAWE,EAAS0C,GAC/BuC,EAAc,OAEjBzZ,OAAM,SAAA9G,GAAG,OAAIwQ,QAAQ7V,MAAMqF,OAuHJ0U,QAAS,kBAAC,KAAD,OAHb,QAME,kBAACrV,EAAA,EAAD,CAAY6H,UAAQ,GAAE,kBAAC,KAAD,QAEhC,kBAAC6N,GAAA,EAAD,CAAWnV,UAAWT,EAAQuf,cAGtC,kBAACpJ,GAAA,EAAD,KACKpQ,EAAOA,EAAKhC,KAAI,SAAAJ,GAAC,OACd,kBAACgS,GAAA,EAAD,CAAUlU,IAAKkC,EAAE6O,MACb,kBAACoD,GAAA,EAAD,KAAY0I,GAAW3a,EAAEqc,YACzB,kBAACpK,GAAA,EAAD,KAAY0I,GAAW3a,EAAE6O,OACzB,kBAACoD,GAAA,EAAD,KAAYjS,EAAEwa,OAAd,WACA,kBAACvI,GAAA,EAAD,KAlQR,SAAAgL,GAChB,OAAKA,EACDA,EAAK9c,OAAS,GAAW8c,EACvB,GAAN,OAAUA,EAAK5N,OAAO,EAAG,IAAzB,OAFkB,GAiQkB+P,CAAYpf,EAAEua,QAC1B,kBAACtI,GAAA,EAAD,KACKjS,EAAE4a,WACC,kBAAC5U,GAAA,EAAD,CAAQxJ,QAAS,kBAAMqhB,EAAc,CAAEle,KAAMK,EAAE4a,UAAWxY,KAAMpC,EAAEub,cAC7Dvb,EAAE4a,YAIf,kBAAC3I,GAAA,EAAD,KACI,kBAAC,GAAD,CACIgJ,QAASjb,EACT6F,SAAU,kBArKnB,SAACzD,GAE4B,MAA5C8Y,EAAW7Z,MAAK,SAAArB,GAAC,OAAIA,EAAE1D,MAAQ8F,EAAK9F,OACpCmhB,EAAcvC,EAAW5S,QAAO,SAAAjI,GAAC,OAAIA,EAAE/D,MAAQ8F,EAAK9F,SAEpD4e,EAAWvf,KAAKyG,GAChBqb,EAAc,aAAIvC,KA+JsBmE,CAAerf,IAC/Bkb,WAAYA,KAGpB,kBAACjJ,GAAA,EAAD,CAAWnV,UAAWT,EAAQuf,WAC1B,kBAACrf,EAAA,EAAD,CAAYC,QAAS,kBAAMggB,EAAcxc,EAAE1D,OACvC,kBAAC,KAAD,YAIX,QAKrB,OACI,kBAAC,IAAMmM,SAAP,KACI,kBAAClD,GAAA,EAAD,CAAOzI,UAAWT,EAAQpE,MACrBqmB,IAEJO,GACD,kBAACtH,GAAD,CACIrc,KAAMmC,QAAQ4e,GACd9e,QAAS,kBAAMqf,EAAc,OAC7B5L,MAAM,iBACN5T,KAAK,gBACL0W,OAAQ,SACRF,KAAM,kBAAMiJ,EAAgBR,EAAU3D,EAAWE,MAErD,2BAAOpe,KAAK,OACRoH,GAAG,YACH/E,MAAO,CAAE1D,QAAS,QAClBumB,OAAO,OACPC,IAAK,SAAAC,GAAI,OAAIhC,EAAYgC,IACzB3Z,SAAU,kBA9OL,WACb,GAAiC,oBAAtB4Y,OAAOgB,WAAlB,CAIA,IAAIjJ,EAAQsH,SAAS4B,eAAe,aACpC,GAAKlJ,EAGA,GAAKA,EAAMmJ,MAGX,GAAKnJ,EAAMmJ,MAAM,GAGjB,CACD,IAAMC,EAAepJ,EAAMmJ,MAAM,GAEjCnJ,EAAMmJ,MAAQ,KACdnJ,EAAM9W,MAAQ,GAEd,IAAImgB,EAAa,IAAIJ,WACrBI,EAAWC,OAAS,SAAAha,GAChBwX,EAAS,CACL3d,KAAMigB,EAAajgB,KACnByC,KAAM0D,EAAEhK,OAAOiG,UAGvB8d,EAAWE,cAAcH,QAfzBI,MAAM,8DAHNA,MAAM,kFAHNA,MAAM,iDALNA,MAAM,qDA4OcC,UCvSjBC,GA/Da,SAAApmB,GAAU,IAAD,EACPoL,mBAAS,CAC/Bib,YAAY,EACZC,QAAS,IAHoB,oBAC1BplB,EAD0B,KACnBqlB,EADmB,KAK3B7e,EAAK1H,EAAMsU,OAAO5M,GAExBkc,qBAAU,WACN,IAAI4C,EACJ,GAAKtlB,EAAMmlB,WAAX,CAGA,GAAsB,IAAlBnlB,EAAMolB,QACNG,QACG,CACH,IAAIC,EAAaxlB,EAAMolB,QAAU,EACjCE,EAAQxc,YAAW,kBAAMuc,EAAS,6BAAKrlB,GAAN,IAAaolB,QAASI,OAAe,KAE1E,OAAO,kBAAMzc,aAAauc,OAC3B,CAACtlB,EAAMolB,UAEV,IAAMG,EAAmB,WACrBF,EAAS,CAAEF,YAAY,EAAOC,QAAS,IACvC3B,OAAOgC,SAwBX,OArBA/C,qBAAU,WACFlc,EACA0B,GAAoB1B,EAAG+c,QAAQ,IAAK,KAC/Bzc,MAAK,SAAAc,GACEA,GAAOA,EAAI8d,cACXjC,OAAOgC,QAEPJ,EAAS,CAAEF,YAAY,EAAMC,QAAS,OAG7Cpc,OAAM,SAAA9G,GACHwQ,QAAQ7V,MAAMqF,GACduhB,OAAOgC,WAGfhC,OAAOgC,UAEZ,IAEH/S,QAAQC,IAAI,UAGR,kBAACpB,GAAA,EAAD,CAAQrR,KAAMF,EAAMmlB,YAChB,kBAACtM,GAAA,EAAD,0FAGyB7Y,EAAMolB,QAH/B,0BAKA,kBAAC3T,GAAA,EAAD,KACI,kBAACzG,GAAA,EAAD,CAAQxI,QAAQ,YAAYhE,MAAM,UAAUgD,QAAS,kBAAM+jB,MAA3D,Y,+DCjDV/lB,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACnCd,MAAOc,EAAMf,QAAQC,MACrBO,WAAYO,EAAMf,QAAQQ,WAC1BknB,WAAY,CACR5nB,QAAS,OACTL,WAAY,SACZH,eAAgB,iBAEpBc,OAAQ,CACJA,OAAQW,EAAMZ,QAAQ,IAE1BwnB,GAAI,CACApnB,MAAO,SAEXqnB,KAAM,CACFrnB,MAAO,WAmDTsnB,GAAmB,SAAA1e,GACrB,IAAI2e,EAAS,GAETC,EAAM5e,EAAKf,MAAK,SAAAhB,GAAC,MAAiB,WAAbA,EAAE4gB,UAC3B,IAAID,EASA,OAAOD,EARPA,EAAOplB,KAAK,CACRslB,OAAQ,MACRtjB,KAAM,UACNujB,MAAOvC,WAAWqC,EAAIG,WACtBC,YAAazC,WAAWqC,EAAIK,aAC5BC,cAAe3C,WAAWqC,EAAIO,sBAMtC,IAAIC,EAAMpf,EAAKf,MAAK,SAAAhB,GAAC,MAAiB,WAAbA,EAAE4gB,UAW3B,OAVIO,GACAT,EAAOplB,KAAK,CACRslB,OAAQ,MACRtjB,KAAM,UACNujB,MAAOvC,WAAW6C,EAAIL,WAAaxC,WAAWqC,EAAIG,WAClDC,YAAazC,WAAW6C,EAAIH,aAC5BC,cAAe3C,WAAW6C,EAAID,sBAI/BR,GAqDIU,GAlDQ,SAAC,GAAgC,IAA9BC,EAA6B,EAA7BA,QAAStf,EAAoB,EAApBA,KAAMuf,EAAc,EAAdA,QAE/BtlB,EAAU7B,KAEVonB,EAAYC,uBAAY,WAEtBpe,GAAgB,CAAEqe,QAAS,CAAC,SAAU,YACjChgB,MAAK,SAAAc,GACF8K,QAAQC,IAAI,qBAAsB/K,GAClC+e,EAAQb,GAAiBle,OAE5BoB,OAAM,SAAA9G,GACHwQ,QAAQC,IAAI,kBAAmBzQ,QAK5C,CAhBkB4d,KAgBH6G,IAMlB,OAJAjE,qBAAU,WACNkE,MACD,CAACF,IAECtf,EAKD,kBAACmD,GAAA,EAAD,CAAOhI,UAAW,EAAGT,UAAWT,EAAQnD,OACpC,kBAACqD,EAAA,EAAD,CAAYO,UAAWT,EAAQ5C,WAAY+C,QAAS,kBAAMolB,MACtD,kBAAC,KAAD,CAAapoB,MAAM,aAEtB4I,EAAKhC,KAAI,SAAAC,GAAC,eACP,yBAAKvD,UAAWT,EAAQskB,WAAY7iB,IAAKuC,EAAE4gB,QAEvC,uBAAGnkB,UAAWT,EAAQhD,QAAUgH,EAAE4gB,QAClC,uBAAGnkB,UAAWT,EAAQhD,QAAtB,UAAgCgH,EAAE6gB,aAAlC,aAAgC,EAAStD,QAAQ,GAAjD,WACA,yBAAKnhB,MAAO,CAAE1D,QAAS,aACnB,uBAAG+D,UAAWT,EAAQhD,QAAtB,UAA+BgH,EAAEihB,qBAAjC,aAA+B,EAAiB1D,QAAQ,GAAxD,MACCvd,EAAE+gB,YAAc,EACb,kBAAC,KAAD,CAAiBtkB,UAAWT,EAAQukB,KACpC,kBAAC,KAAD,CAAmB9jB,UAAWT,EAAQwkB,aAjBnD,sC,yCCxHTrmB,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACnCd,MAAOc,EAAMf,QAAQC,MACrBO,WAAYO,EAAMf,QAAQQ,WAC1BE,WAAYK,EAAMf,QAAQW,gBAC1BmoB,eAAgB,CACZllB,SAAU,WACVhC,IAAK,OACLC,KAAM,mBACNgM,OAAQ,QACR3N,MAAO,QACPuO,UAAW,UAEfsa,WAAY,CACRC,WAAY,OAEhBC,aAAc,CACVrlB,SAAU,gBAuFZslB,GAAK9X,KAAK8X,GAEVC,GAAY,SAAAhgB,GACd,IAAIigB,EAAUjgB,EAAKkgB,WAAW,GAAGD,QAC5B/Z,QAAO,SAAAjI,GAAC,MAA8B,QAA1BA,EAAEkiB,WAAWC,YACzBpiB,KAAI,SAAAC,GAAC,MAAK,CACPV,KAAMU,EAAEV,KACR8iB,WAAYpiB,EAAEoiB,WACdC,OAAQriB,EAAEqiB,OAAOC,YACjBnZ,MAAOnJ,EAAEuiB,WAGbC,EAAaR,EAAQ1E,QAAO,SAACxN,EAAGC,GAAJ,OAAUD,EAAIC,EAAE5G,MAAMmU,QAAO,SAACmF,EAAG9iB,GAAJ,OAAU8iB,EAAIC,OAAO/iB,EAAEwJ,SAAQ,KAAI,GAChG,MAAO,CACHkZ,OAAQtgB,EAAK4gB,gBACbC,iBAAkB7gB,EAAK8gB,mBACvBL,WAAYA,EACZR,QAASA,IAqCXc,GAAe,SAACzjB,EAAO0jB,EAAatc,EAAQuc,EAAUC,EAAUC,EAAQC,EAAQ7d,GAElF,IAAI8d,EAAgB,IAANtB,GAAcziB,EAAQ8jB,EAAUrB,GAC1C3oB,EAfS,SAACkG,EAAO2jB,EAAUC,EAAUC,EAAQG,GACjD,OAAIhkB,GAAS6jB,EACF,UACP7jB,GAAS2jB,EACF,UACP3jB,GAAS4jB,EACF,UACP5jB,GAASgkB,EACF,UACJ,UAMKC,CAASjkB,EAAO2jB,EAAUC,EAAUC,EAAQC,GACxD,MAAO,CAAEI,OAAe,IAANzB,GAAYsB,MAAOA,EAAOI,QAAST,EAAaU,OAAQhd,EAAQtN,MAAOA,EAAOmM,MAAOA,IA6F5Foe,GAjFG,SAAC,GAAyD,IAAvD3hB,EAAsD,EAAtDA,KAAMuf,EAAgD,EAAhDA,QAASqC,EAAuC,EAAvCA,YAAaC,EAA0B,EAA1BA,WAAYvC,EAAc,EAAdA,QAEnDrlB,EAAU7B,KAFuD,EAG7B0K,mBAAS,CAC/C9C,KAAM,GACN8hB,OAAQ,KAL2D,oBAGhEC,EAHgE,KAGjDC,EAHiD,KAQjExC,EAAYC,uBAAY,WAEtBre,KACK1B,MAAK,SAAAc,GACF+e,EAAQS,GAAUxf,OAGrBoB,OAAM,SAAA9G,GACHwQ,QAAQC,IAAI,aAAczQ,QAKvC,CApBa4d,OAgDhB,OA1BA4C,oBAAUkE,EAAW,CAACF,IACtB2C,cACI,WAAO,IAAD,QACIC,EA3EG,SAACC,EAAQN,GAC1B,OAAKM,GAAWA,EAAOlC,SAGnB4B,GAAcA,EAAW,KACzB1kB,OAAOC,KAAKykB,EAAW,IAClBxkB,SAAQ,SAAAY,GACL,IAAImkB,EAASD,EAAOlC,QAAQhhB,MAAK,SAAArB,GAAC,OAAIA,EAAEL,KAAKwW,SAAS9V,MAClDmkB,GACAjlB,OAAOC,KAAKykB,EAAW,GAAG5jB,IAAIZ,SAAQ,SAAAglB,GAClCD,EAAOC,EAAElG,QAAQ,MAAO,KAAO0F,EAAW,GAAG5jB,GAAGokB,SAIhEF,EAAOG,cAAgBH,EAAOlC,QAAQ1E,QAAO,SAACxN,EAAGC,GAAJ,OAAUD,EAAIC,EAAEuU,QAAO,GACpEJ,EAAOK,WAAaL,EAAOG,cAAgBT,EAAW,GAAGY,SAAW,IAGjEN,GAhBIA,EAyEkBO,CAAa1iB,EAAM6hB,GACxCvW,QAAQC,IAAI,kBAAmB2W,GAC1B/kB,OAAOC,KAAK8kB,GAAcnkB,SAE/B6jB,EAAYM,GACZF,EAAiB,CACbhiB,KAAM,EACF,UAAAkiB,EAAajC,eAAb,eAAsBliB,QAAS,GAAKgjB,GAAamB,EAAajC,QAAQ,GAAG0C,aAAc,IAAM,KAAM,GAAI,GAAI,GAAI,IAAK,WACpH5B,GAAamB,EAAaI,cAAe,KAAM,KAAM,IAAK,IAAK,IAAK,IAAK,SACzEvB,GAAamB,EAAazB,WAAY,EAAM,IAAM,IAAK,IAAK,GAAI,IAAK,UAEzEqB,OAAQ,CACJI,EAAajC,QAAQliB,OAAS,GAAK,yBAAKrC,IAAK,gBAAgB,uBAAGhB,UAAWT,EAAQ2lB,YAAtB,kBAAwCsC,EAAajC,QAAQ,GAAG0C,oBAAhE,aAAwC,EAAsCnH,QAAQ,GAAtF,UAC7D,yBAAK9f,IAAK,cAAc,uBAAGhB,UAAWT,EAAQ2lB,YAAtB,oBAA0CsC,EAAazB,kBAAvD,aAA0C,EAAyBjF,QAAQ,GAA3E,OACxB,yBAAK9f,IAAK,cAAc,uBAAGhB,UAAWT,EAAQ2lB,YAAtB,oBAA0CsC,EAAazB,kBAAvD,aAA0C,EAAyBjF,QAAQ,GAA3E,gBAIpC,CAACxb,EAAM6hB,IACP,SAACe,EAAUC,GAAX,OAtDc,SAACD,EAAUC,GAE7B,QAAKA,EAAS,IAAOA,EAAS,GAAG5C,SAAa4C,EAAS,IAAMA,EAAS,GAAG,KAIlEC,KAAQF,EAAUC,GAgDGE,CAAcH,EAAUC,MAKhD,oCACI,kBAAC1f,GAAA,EAAD,CAAOhI,UAAW,EAAGT,UAAWT,EAAQnD,MAAOuD,MAAO,CAAEI,SAAU,WAAYiK,OAAQ,UAClF,kBAACvK,EAAA,EAAD,CAAYO,UAAWT,EAAQ5C,WAAY+C,QAAS,kBAAMolB,MACtD,kBAAC,KAAD,CAAapoB,MAAM,aAEvB,kBAAC,KAAD,CACIsD,UAAWT,EAAQ6lB,aACnBkD,QAAS,EAAE,EAAG,GACdC,QAAS,EAAE,EAAG,GACdlsB,MAAO,IACP2N,OAAQ,KACR,kBAAC,KAAD,CACIwe,UAAU,UACVC,UAAW,CACPC,QAAS,EACTC,UAAW,KAEfC,aAAc,CAAC,EAAG,GAClBtjB,KAAM+hB,EAAc/hB,KACpBujB,SAAU,SAAA3lB,GAAC,OAAIA,EAAEL,SAGxB,yBAAK7C,UAAWT,EAAQ0lB,gBACpBoC,EAAcD,W,+DCvP7B1pB,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACnCd,MAAM,6BACCc,EAAMf,QAAQC,OADhB,IAEDL,UAAW,MACX+sB,aAAc,QAElBC,uBAAwB,CACpBne,UAAW,UAEfoe,gCAAiC,CAC7B/sB,QAAS,OACTR,eAAgB,gBAEpBypB,WAAY,CACRC,WAAY,OAEhB8D,iBAAkB,CACdvsB,MAAO,UACPkD,SAAU,QAEdspB,SAAU,CACNjtB,QAAS,OACTL,WAAY,SACZH,eAAgB,UAEpB0tB,QAAS,CACLC,WAAY,WACZC,UAAW,MACXrf,OAAQ,OAEZsf,WAAY,CACR5sB,MAAOQ,EAAMf,QAAQC,MAAMM,WAK7B6sB,GAAW,SAACvsB,GAAW,IACjBG,EAAqCH,EAArCG,SAAUyF,EAA2B5F,EAA3B4F,MAAO2G,EAAoBvM,EAApBuM,MAAUC,EADX,aACqBxM,EADrB,8BAGxB,OACI,uCACIsE,KAAK,WACLqI,OAAQ/G,IAAU2G,EAClB7E,GAAE,0BAAqB6E,GACvBK,kBAAA,qBAA+BL,IAC3BC,GAEH5G,IAAU2G,GAASpM,IAK1BqsB,GAAW,SAAAjgB,GAAK,MAAK,CACvB7E,GAAG,kBAAD,OAAoB6E,GACtB,gBAAgB,uBAAhB,OAAwCA,KAGtCkgB,GAAqB,SAAAC,GAAW,uBAAIA,EAAYnlB,MAAK,SAAAhB,GAAC,MAAiB,QAAbA,EAAE4gB,iBAA5B,aAAI,EAA2CC,OAwHtEuF,GApFc,SAAC,GAA6B,IAAD,UAA1BlC,EAA0B,EAA1BA,OAAQiC,EAAkB,EAAlBA,YAC9BnqB,EAAU7B,KADsC,EAER0K,oBAAS,GAFD,oBAE/CwhB,EAF+C,KAE9BC,EAF8B,OAGpBzhB,mBAAS,MAHW,oBAG/C0hB,EAH+C,KAGpCC,EAHoC,OAIxB3hB,mBAAS,IAJe,oBAI/C4hB,EAJ+C,KAItCC,EAJsC,OAKtB7hB,mBAAS,GALa,oBAK/C8C,EAL+C,KAKrCC,EALqC,KAOtDoc,cACI,WACI0C,EAtBmB,SAACC,EAAcC,EAAoBC,EAAaN,GAC3E,IACMO,EADcF,EAAqB,IAAU,GACfL,EAC9BQ,EAAcJ,GAAgBE,EAAcC,EAAiB,GACnE,MAAO,CACHE,iBAAkBD,EAClBE,kBAAiC,EAAdF,EACnBG,mBAAkC,IAAdH,EAAoB,GACxCI,kBAAiC,IAAdJ,EACnBK,oBAAsBN,EAAiBH,EAAgB,KAc/CU,CACInD,EAAOtB,iBAAmBsD,GAAmBC,GAC7CjC,EAAOK,WACP8B,EACAE,MAIZ,CAACF,EAAiBE,EAAWrC,EAAQiC,IACrC,SAACxB,EAAUC,GAAX,OArDc,SAACD,EAAUC,GAAc,IAAD,QAI1C,KAAI,UAACA,EAAS,UAAV,aAAC,EAAahC,qBAAoB,UAACgC,EAAS,UAAV,aAAC,EAAaL,cAAeziB,MAAMwlB,QAAQ1C,EAAS,IACtF,OAAO,EAGX,IAAM2C,EAAYrB,GAAmBtB,EAAS,IAC9C,IAAK5nB,QAAQuqB,GACT,OAAO,EAEX,IAAMC,EAAYtB,GAAmBvB,EAAS,IAE9C,OAAOA,EAAS,KAAOC,EAAS,IAC5BD,EAAS,KAAOC,EAAS,KACzB,UAAAD,EAAS,UAAT,eAAa/B,oBAAqBgC,EAAS,GAAGhC,mBAC9C,UAAA+B,EAAS,UAAT,eAAaJ,cAAeK,EAAS,GAAGL,YACxCiD,IAAcD,EAmCUzC,CAAcH,EAAUC,MAGpD,IAAM6C,EAAI,SAAAhuB,GAAK,OAAI,qCAAGgD,UAAWT,EAAQ2lB,YAAgBloB,GAAQA,EAAMG,WACjE8tB,EAAK,SAAAjuB,GAAK,OAAI,uBAAGgD,UAAS,UAAKT,EAAQ2lB,WAAb,YAA2B3lB,EAAQ0pB,mBAAqBjsB,EAAMG,SAA1E,YAEpB,OACI,oCACI,kBAAC4Q,GAAA,EAAD,CAAMnL,MAAOsI,EAAUnC,SAAU,SAACmiB,EAAGtoB,GAAJ,OAAcuI,EAAYvI,IAAQrD,QAAS,CACxEpE,KAAMoE,EAAQ4pB,UAEd,kBAAChb,GAAA,EAAD,eAAKtF,MAAM,QAAW2gB,GAAS,KAC/B,kBAACrb,GAAA,EAAD,eAAKtF,MAAM,QAAW2gB,GAAS,MAEnC,kBAAC,KAAD,CAAgBjgB,MAAO2B,EAAUigB,cAAe,SAAApb,GAAC,OAAI5E,EAAY4E,KAC7D,kBAAC,GAAD,CAAUnN,MAAOsI,EAAU3B,MAAO,GAC9B,kBAACd,GAAA,EAAD,CAAOhI,UAAW,EAAGT,UAAWT,EAAQnD,OACpC,kBAAC8M,GAAA,EAAD,CACIvJ,MAAO,CAAE/C,MAAO,QAASP,MAAO,QAAS+M,WAAY,UACrDpJ,UAAWT,EAAQ+pB,WACnB5pB,QAAS,kBAAMmqB,GAAoBD,IACnCzgB,UAAWygB,EAAkB,kBAAC,KAAD,CAAajqB,MAAO,CAAEjD,MAAO,YAAiB,kBAAC,KAAD,OAJ/E,OAMKstB,QANL,IAMKA,GANL,UAMKA,EAASW,2BANd,aAMK,EAA8B7J,QAAQ,GAN3C,MAQA,yBAAK9gB,UAAWT,EAAQwpB,wBACpB,yBAAKppB,MAAO,CAAEyrB,QAAS,OAAQ3vB,eAAgB,SAAUG,WAAY,WACjE,kBAACovB,EAAD,CAAGrrB,MAAO,CAAE0J,YAAa,SAAzB,kBACA,kBAAC4hB,EAAD,mBAAOjB,EAAQO,wBAAf,aAAO,EAA0BzJ,QAAQ,KAE7C,yBAAK9gB,UAAWT,EAAQypB,iCACpB,6BACI,kBAACgC,EAAD,aACA,kBAACC,EAAD,eAAMjB,EAAQQ,yBAAd,aAAM,EAA2B1J,QAAQ,KAE7C,6BACI,kBAACkK,EAAD,cACA,kBAACC,EAAD,eAAKjB,EAAQS,0BAAb,aAAK,EAA4B3J,QAAQ,KAE7C,6BACI,kBAACkK,EAAD,aACA,kBAACC,EAAD,eAAKjB,EAAQU,yBAAb,aAAK,EAA2B5J,QAAQ,SAM5D,kBAAC,GAAD,CAAUle,MAAOsI,EAAU3B,MAAO,GAC9B,kBAACd,GAAA,EAAD,CAAOhI,UAAW,EAAGT,UAAS,UAAKT,EAAQnD,MAAb,YAAsBmD,EAAQ2pB,UAAYvpB,MAAO,CAAEqK,OAAQ,UACrF,kBAACjC,GAAA,EAAD,CACIc,MAAO,oCAAE,kBAAC,KAAD,CAAalJ,MAAO,CAAEjD,MAAO,YAA/B,uBACPY,KAAK,SACLsF,MAAOknB,EACP9pB,UAAWT,EAAQ8rB,eACnBtiB,SAAU,SAAAC,GAAC,OAAI+gB,EAAa/gB,EAAEhK,OAAO4D,QACrC0oB,gBAAiB,CAAEtrB,UAAU,GAAD,OAAKT,EAAQ+pB,WAAb,YAA2B/pB,EAAQ2pB,WAC/D3X,WAAY,CAAEvR,UAAWT,EAAQ+pB,WAAY3pB,MAAO,CAAEiL,UAAW,iBCvKvFlN,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACnC/B,KAAM,CACFoP,WAAYrN,EAAMZ,QAAQ,GAC1BD,MAAO,OACP2N,OAAQ,SAEZnN,WAAYK,EAAMf,QAAQU,eAsCf0uB,GAnCM,SAAAvuB,GAAU,IAAD,EACAoL,mBAAS,CAC/Bwc,SAAS,IAFa,oBACnB1mB,EADmB,KACZqlB,EADY,OAIUnb,mBAAS,IAJnB,oBAInB+e,EAJmB,KAIPqE,EAJO,OAKYpjB,mBAAS,IALrB,oBAKnBshB,EALmB,KAKN+B,EALM,OAMErjB,mBAAS,CAAE9C,KAAM,GAAIkiB,aAAc,KANrC,oBAMnBC,EANmB,KAMXiE,EANW,KAOpBnsB,EAAU7B,KAkBhB,OAbAkjB,qBAAU,WACNna,GAAe,CAAErC,OAAQ,EAAGC,MAAO,CAAE,MAAS,KACzCW,MAAK,SAAAc,GAAG,OACL0lB,EAAc1lB,EAAIR,SAErB4B,OAAM,SAAA9G,GACHwQ,QAAQC,IAAIzQ,QAGrB,CAAClC,EAAM0mB,UAEVhU,QAAQC,IAAI,qBAAsB4W,GAG9B,yBAAKznB,UAAS,UAAKT,EAAQpE,KAAb,YAAqBoE,EAAQ1C,aACvC,kBAACqM,GAAA,EAAD,CAAQxI,QAAQ,YAAYhE,MAAM,UAAUgD,QAAS,kBAAM6jB,EAAS,6BAAKrlB,GAAN,IAAaytB,cAAeztB,EAAMytB,kBAArG,WACA,kBAAC,GAAD,CAAW/G,QAAS1mB,EAAM0mB,QAAStf,KAAMmiB,EAAOniB,KAAMsmB,SAAUnE,EAAOD,aAAc3C,QAAS,SAAAvf,GAAI,OAAIomB,EAAU,6BAAKjE,GAAN,IAAcniB,KAAMA,MAAQ4hB,YAAa,SAAA5hB,GAAI,OAAIomB,EAAU,6BAAKjE,GAAN,IAAcD,aAAcliB,MAAQ6hB,WAAYA,IACzN,kBAAC,GAAD,CAAsBM,OAAQA,EAAOD,aAAckC,YAAaA,IAChE,kBAAC,GAAD,CAAgB9E,QAAS1mB,EAAM0mB,QAAStf,KAAMokB,EAAa7E,QAAS,SAAAvf,GAAI,OAAImmB,EAAenmB,QC1CjG5H,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACnC/B,KAAM+B,EAAM/B,KACZ0wB,cAAe,CACXjvB,MAAO,QACPL,OAAQW,EAAMZ,QAAQ,QCPxBoB,ID0GSO,aAZS,SAACC,GACrB,MAAO,CACH4tB,aAAc5tB,EAAM4tB,iBAID,SAACvtB,GACxB,MAAO,KAKIN,EA/FM,SAAAjB,GACjB,IAAMuC,EAAU7B,KADU,EAEA0K,mBAAS,CAC/B2jB,kBAAkB,IAHI,oBAKpBC,GALoB,UAKLC,iBAAO,OAG5BrL,qBAAU,cAEP,IA2CH,OAAO,yBAAK5gB,UAAWT,EAAQpE,MAC3B,kBAAC+N,GAAA,EAAD,CAAQxI,QAAQ,YAAYhE,MAAM,UAAUgD,QAAS,WAC5CssB,EAIAA,EAAaE,SAIlBtb,QAAQC,IAAI,gBACZmb,EAAaE,QAAQ/K,SAJjBvQ,QAAQC,IAAI,cAJZD,QAAQC,IAAI,YAFpB,cAcA,kBAAC3H,GAAA,EAAD,CACIlJ,UAAWT,EAAQssB,cACnBnrB,QAAQ,YACRhE,MAAM,UACNgD,QAAS,WACLd,IAAeC,KAAK,iBAL5B,qBASA,2BAAOvB,KAAK,OAAOoH,GAAG,YAAY/E,MAAO,CAAE1D,QAAS,QAChDumB,OAAO,yBACPC,IAAKuJ,EAAcjjB,SAAU,kBAnEpB,WACb,GAAiC,oBAAtB4Y,OAAOgB,WAAlB,CAIA,IAAIjJ,EAAQsH,SAAS4B,eAAe,aACpC,GAAKlJ,EAEA,GAAKA,EAAMmJ,MAEX,GAAKnJ,EAAMmJ,MAAM,GAEjB,CACD,IAAMC,EAAepJ,EAAMmJ,MAAM,GAEjCnJ,EAAMmJ,MAAQ,KACdnJ,EAAM9W,MAAQ,GAEdgO,QAAQC,IAAI,kBAAmBiS,GAE/B,IAAIC,EAAa,IAAIJ,WACrBI,EAAWC,OAAS,SAAAha,IACP,yCAAG,uBAAAqK,EAAA,0FAAH,oDAKT8Y,IASJpJ,EAAWE,cAAcH,QAzBzBI,MAAM,iCAFNtS,QAAQ7V,MAAM,0BAFd6V,QAAQ7V,MAAM,wCALdmoB,MAAM,qDAiE6BC,UC1F7BxlB,aAAW,SAAAT,GAAK,MAAK,OAsBxBe,gBARS,SAACC,GAAD,MAAY,MAIT,SAACK,GAAD,MAAe,KAI3BN,EAlBW,SAAAjB,GACNU,KAEhB,OACI,qDCRFA,GAAYC,aAAW,SAAAT,GAAK,MAAK,MAoBxBe,gBARS,SAACC,GAAD,MAAY,MAIT,SAACK,GAAD,MAAe,KAI3BN,EAhBa,SAAAjB,GACRU,KAEhB,OAAO,uDCPLA,GAAYC,aAAW,SAAAT,GAAK,MAAK,MA6BxBe,gBARS,SAACC,GAAD,MAAY,MAIT,SAACK,GAAD,MAAe,KAI3BN,EAzBU,SAAAjB,GACLU,KAAhB,IACQouB,EAAiB9uB,EAAjB8uB,aAIR,OAFAlb,QAAQC,IAAIib,GAGR,6BACKA,GAAgBA,EAAaxoB,KAAI,SAAA8oB,GAAC,OAC/B,6BACKA,EAAEC,c,qBCEjB3uB,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACnC/B,KAAM+B,EAAM/B,KACZmxB,UAAW,CAAE/vB,OAAQW,EAAMZ,QAAQ,IACnCF,MAAO,CACHI,QAASU,EAAMZ,QAAQ,GACvBC,OAAQW,EAAMZ,QAAQ,GACtB0N,OAAQ,Y,IAoFD/L,aA3BS,SAACC,GACrB,MAAO,CACH4tB,aAAc5tB,EAAM4tB,aAAaA,aAAaxmB,KAC9CinB,WAAYruB,EAAMquB,WAAWA,WAC7BC,cAAetuB,EAAMquB,WAAWC,kBAIb,SAACjuB,GACxB,MAAO,CACHkuB,cAAe,SAAC5pB,EAAMjI,EAAM8xB,EAAKC,KAGjCC,eAAgB,SAACloB,EAAI7B,EAAMjI,EAAM8xB,EAAKC,KAGtCE,iBAAkB,aAGlBC,mBAAoB,WAChBtmB,GAAqB,CAAEpC,OAAQ,KAC1BY,MAAK,SAAAc,GAAG,OAAIvH,ECxGlB,CAAEjB,KAAM,kBAAmBwuB,aDwGgBhmB,OACrCoB,OAAM,SAAA9G,GAAG,OAAI7B,EAASnB,EAASgD,EAAI/C,iBAKrCY,EAhFI,SAAAjB,GACf,IAAMuC,EAAU7B,KADQ,EAEE0K,mBAAS,CAC/B8C,SAAU,IAHU,oBAEjBhN,EAFiB,KAEVqlB,EAFU,KAKhBrY,EAAahN,EAAbgN,SACA4hB,EAAgE9vB,EAAhE8vB,mBAAoBhB,EAA4C9uB,EAA5C8uB,aAA4C9uB,EAA9BuvB,WAA8BvvB,EAAlBwvB,cAQtD,OANA5b,QAAQC,IAAI,MAAOib,GAEnBlL,qBAAU,WACNkM,MACD,IAGC,yBAAK9sB,UAAWT,EAAQpE,KAAMwE,MAAO,CAAEqK,OAAQ,SAC3C,kBAACd,GAAA,EAAD,CACIlJ,UAAWT,EAAQ+sB,UACnBnjB,UAAW,kBAAC,KAAD,MACXzJ,QAAS,WACLd,IAAeC,KAAK,mBAJ5B,QAQA,kBAAC4J,GAAA,EAAD,CAAOzI,UAAWT,EAAQnD,MAAOqE,UAAW,GACxC,kBAACsN,GAAA,EAAD,CACIrN,QAAQ,YACRV,UAAWT,EAAQ0K,KACnBgE,eAAe,UACfC,UAAU,UACVtL,MAAOsI,EACPnC,SAAU,SAACC,EAAGpG,GAAJ,OAAc2gB,EAAS,6BAAKrlB,GAAN,IAAagN,SAAUtI,OAEvD,kBAACuL,GAAA,EAAD,CAAKtF,MAAM,eACX,kBAACsF,GAAA,EAAD,CAAKtF,MAAM,mBACX,kBAACsF,GAAA,EAAD,CAAKtF,MAAM,eAEf,kBAAC,GAAD,CAAYjG,MAAOsI,EAAU3B,MAAO,GAChC,kBAAC,GAAD,OAEJ,kBAAC,GAAD,CAAY3G,MAAOsI,EAAU3B,MAAO,GAChC,kBAAC,GAAD,OAEJ,kBAAC,GAAD,CAAY3G,MAAOsI,EAAU3B,MAAO,GAChC,kBAAC,GAAD,CACIuiB,aAAcA,U,sCEpEzBiB,GAAmB,SAAAznB,GAC5B,IAAML,EAAS,CACX+nB,MAAO,CAAE/nB,OAAQ,GAAIgoB,WAAY,GACjCC,KAAM,CAAEjoB,OAAQ,GAAIgoB,WAAY,GAChCZ,MAAO,CAAEpnB,OAAQ,GAAIgoB,WAAY,GACjCE,KAAM,CAAEloB,OAAQ,EAAGgoB,WAAY,GAC/BG,QAAS,CAAEnoB,OAAQ,IAAI8N,KAAMka,WAAY,IAuB7C3nB,EAAK+nB,MAAM1qB,SAAQ,SAAA2qB,GACfA,EAAOA,EAAKvrB,iBAIhB,IAAM+D,EAAM,GAEZ,OADArD,OAAOC,KAAKuC,GAAQtC,SAAQ,SAAA4qB,GAAC,OAAIznB,EAAIynB,GAAKtoB,EAAOsoB,GAAGtoB,UAC7Ca,GCrCLpI,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACnCswB,YAAa,CACTztB,SAAU,WACV0tB,OAAQ,OACRpxB,MAAO,YAgHAqxB,GA5GM,SAAA1wB,GACjB,IA2DI2wB,EA3DEpuB,EAAU7B,KAERkwB,EAA0D5wB,EAA1D4wB,OAAQC,EAAkD7wB,EAAlD6wB,mBAAoBC,EAA8B9wB,EAA9B8wB,UAAWztB,EAAmBrD,EAAnBqD,QAAS0tB,EAAU/wB,EAAV+wB,MAH9B,EAIA3lB,mBAAS,CAC/B4kB,MAAO,GACPE,KAAM,GACNb,MAAO,GACPc,KAAM,EACNC,QAAS,IAAIra,KACbwN,MAAO,OAVe,oBAInBriB,EAJmB,KAIZqlB,EAJY,KAYpByI,EAAeC,iBAAO,MAEtBtd,EAAe,SAAA3F,GACjBua,EAAS,6BAAKrlB,GAAN,mBAAc8K,EAAEhK,OAAO6D,KAAOmG,EAAEhK,OAAO4D,UAuDnD,OAT2B,IAAvBirB,GAA4BA,EAAqB,IACjDF,EACI,yBAAK3tB,UAAWT,EAAQiuB,aACpB,kBAACQ,GAAA,EAAD,CAAkBtxB,MAAM,UAAUgE,QAAQ,kBAC1C,kBAACutB,GAAA,EAAD,CAAgBvxB,MAAM,UAAUgE,QAAQ,cAAckC,MAA4B,IAArBirB,MAMrE,kBAACpe,GAAA,EAAD,CAAQrR,KAAM0vB,EAAWztB,QAASA,GAC9B,kBAAC0W,GAAA,EAAD,KACI,kBAAC7N,GAAA,EAAD,CAAQxI,QAAQ,YAAYhE,MAAM,UAAUgD,QAAS,WAC7CssB,GAAgBA,EAAaE,SAC7BF,EAAaE,QAAQ/K,SAEzB7Z,UAAW/G,QAAQqtB,IAJvB,cAOA,6BACI,kBAAC7lB,GAAA,EAAD,CAAWc,MAAM,OAAOhG,KAAK,OAAOD,MAAO1E,EAAMgvB,KAAMnkB,SAAU4F,KAErE,6BACI,kBAAC5G,GAAA,EAAD,CAAWc,MAAM,QAAQhG,KAAK,QAAQD,MAAO1E,EAAMmuB,MAAOtjB,SAAU4F,KAExE,6BACI,kBAAC5G,GAAA,EAAD,CAAWc,MAAM,OAAOhG,KAAK,OAAOD,MAAO1E,EAAMivB,KAAMpkB,SAAU4F,KAErE,6BACI,kBAAC5G,GAAA,EAAD,CAAWc,MAAM,QAAQhG,KAAK,QAAQD,MAAO1E,EAAM8uB,MAAOjkB,SAAU4F,KAExE,6BACI,kBAAC5G,GAAA,EAAD,CAAWc,MAAM,oBAAWhG,KAAK,UAAUD,MAAO1E,EAAMkvB,QAASrkB,SAAU4F,KAE9Egf,GAEL,kBAAChe,GAAA,EAAD,KACI,kBAACzG,GAAA,EAAD,CAAQxI,QAAQ,YAAYhE,MAAM,YAAYgD,QAASW,GAAvD,UACA,kBAAC6I,GAAA,EAAD,CAAQxI,QAAQ,YAAYhE,MAAM,UAAUgD,QAASquB,GAArD,OACA,2BAAOzwB,KAAK,OAAOoH,GAAG,YAAY/E,MAAO,CAAE1D,QAAS,QAChDumB,OAAO,+BACPC,IAAKuJ,EAAcjjB,SAAU,kBApF5B,WACb,GAAiC,oBAAtB4Y,OAAOgB,WAAlB,CAIA,IAAIjJ,EAAQsH,SAAS4B,eAAe,aACpC,GAAKlJ,EAEA,GAAKA,EAAMmJ,MAEX,GAAKnJ,EAAMmJ,MAAM,GAEjB,CACD,IAAMC,EAAepJ,EAAMmJ,MAAM,GAEjCnJ,EAAMmJ,MAAQ,KACdnJ,EAAM9W,MAAQ,GAEdgO,QAAQC,IAAI,kBAAmBiS,GAE/B,IAAIC,EAAa,IAAIJ,WACrBI,EAAWC,OAAS,SAAAha,IACA,yCAAG,+BAAAqK,EAAA,sEACMua,EAAOM,UAAUllB,EAAEhK,OAAOiG,QADhC,OACTA,EADS,OAEf2L,QAAQC,IAAI,eAAgB5L,GACtBkpB,EAAepB,GAAiB9nB,EAAOK,MAC7Cie,EAAS,CAAE4K,eAAc5N,MAAOvX,EAAEhK,OAAOiG,SAJ1B,2CAAH,oDAOhBmpB,IASJrL,EAAWE,cAAcH,QA3BzBI,MAAM,iCAFNtS,QAAQ7V,MAAM,0BAFd6V,QAAQ7V,MAAM,wCALdmoB,MAAM,qDAkFqCC,S,UC1GjDzlB,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACnC/B,KAAK,gBACE+B,EAAM/B,MAEbkzB,UAAW,CACPpyB,QAAS,OACTN,cAAe,SACfC,WAAY,SACZG,UAAW,OACXgE,SAAU,WACV1D,MAAO,QAEXiyB,cAAe,CACXvuB,SAAU,WACV0tB,OAAQ,OACRxxB,QAAS,OACTR,eAAgB,gBAChBY,MAAO,OACPE,OAAQW,EAAMZ,QAAQ,IAE1BiyB,cAAe,CACXhyB,OAAQW,EAAMZ,QAAQ,QChCxBkyB,IDkHSvwB,aATS,SAACC,GACrB,MAAO,MAIgB,SAACK,MAIbN,EA9EC,SAAAjB,GACZ,IAAMuC,EAAU7B,KADK,EAEK0K,mBAAS,CAC/BwlB,OAAQ,KACRC,mBAAoB,EACpBC,WAAW,IALM,oBAEd5vB,EAFc,KAEPqlB,EAFO,KAQrB3C,qBAAU,WACN,IAAM6N,EAAU,yCAAG,6BAAApb,EAAA,6DACTua,EAASc,wBAAa,CACxBC,OAAQ,SAAAzc,GACa,qBAAbA,EAAE0T,QACFrC,EAAS,6BAAKrlB,GAAN,IAAa2vB,mBAAoB3b,EAAE0c,YAE/Che,QAAQC,IAAI,WAAYqB,MANjB,SAUT0b,EAAOiB,OAVE,uBAWTjB,EAAOkB,aAAa,OAXX,uBAYTlB,EAAOmB,WAAW,OAZT,OAcfxL,EAAS,6BAAKrlB,GAAN,IAAa0vB,OAAQA,KAdd,2CAAH,qDAmBhB,OAHK1vB,EAAM0vB,QACPa,IAEG,WACH,IAAMO,EAAI,yCAAG,uBAAA3b,EAAA,6DACTzC,QAAQC,IAAI,kBADH,SAEH3S,EAAM0vB,OAAOqB,YAFV,OAGTre,QAAQC,IAAI,qBAHH,2CAAH,qDAKN3S,EAAM0vB,QACNoB,OAET,IASH,OAAO,yBAAKhvB,UAAWT,EAAQpE,MAC3B,kBAAC+N,GAAA,EAAD,CAAQlJ,UAAWT,EAAQgvB,cAAe7tB,QAAQ,YAAYhE,MAAM,UAAUgD,QAAS,kBAAM6jB,EAAS,6BAAKrlB,GAAN,IAAa4vB,WAAW,OAA7H,YAGA,kBAAC,GAAD,iBAAkB5vB,EAAlB,CAAyBmC,QAAS,kBAAMkjB,EAAS,6BAAKrlB,GAAN,IAAa4vB,WAAW,MACpEC,MAAO,SAAA/wB,GACH4T,QAAQC,IAAI,wBAAyB7T,OAG7C,yBAAKgD,UAAWT,EAAQ+uB,eACpB,kBAACplB,GAAA,EAAD,CAAQxI,QAAQ,YAAYhE,MAAM,YAAYgD,QAAS,kBAjBvCd,IAAeC,KAAK,eAiBpC,QACA,kBAACqK,GAAA,EAAD,CAAQxI,QAAQ,YAAYhE,MAAM,YAAYgD,QAAS,WAf3DkR,QAAQC,IAAI,2BAeR,WAGJ,kBAACqe,GAAA,EAAD,CAAO1Z,UAAU,KAAK2Z,IAAK5uB,QAAQrC,EAAM0vB,QAASwB,cAAY,EAACC,eAAa,GACxE,yBAAKrvB,UAAWT,EAAQ8uB,WACpB,kBAACL,GAAA,EAAD,CAAkBtxB,MAAM,UAAUgE,QAAQ,kBAC1C,kBAAC+I,GAAA,EAAD,CAAY/M,MAAM,WAAlB,2BCnGI,CAAE0B,MAAM,ICAtBkxB,GAAmB,CAAElxB,MAAM,EAAOyI,OAAQ,MCI1C0oB,GAAY,CACjBvsB,QAAS,CACRpI,KAAM,GACN8K,KAAM,GACNgH,MAAO,CAACyQ,IAAK,KACbxX,IAAK,IAEN5B,OAAQ,GACR0M,cAAe,GACflO,KAAM,GACNuB,KAAM,EACNE,MAAO,GACPmX,aAAc,KACdpD,SAAU,KACVN,cAAc,EACd5T,MAAO,CACNyB,KAAM,IAEP6J,aAAa,EACbqI,UAAW,GACXrH,OAAQ,GACRiL,WAAY,MCzBPoU,GAAe,CACpBlqB,KAAM,KACN6Z,SAAU,KACPC,cAAe,ICHbqQ,GAAmB,CACrB3D,aAAc,CACVhoB,KAAM,EACN4rB,KAAM,EACN1rB,MAAO,IACPsB,KAAM,KCLRmqB,GAAmB,CACrBlD,WAAY,GACZC,cAAe,ICQJmD,eAAgB,CAC3BxvB,ICXW,WAA6C,IAA5CjC,EAA2C,uDAAnC,CAACb,QAAS,GAAI+C,IAAK,IAAKwvB,EAAW,uCAC1D,OAAQA,EAAOtyB,MACd,IAAK,cACJ,MAAO,CAACD,QAASuyB,EAAOvyB,QAAS+C,IAAK,IACvC,IAAK,YACJ,MAAO,CAAC/C,QAAS,GAAI+C,IAAKwvB,EAAOvyB,SAClC,QACC,OAAOa,IDKNT,KEZW,WAAyB,IAAxBS,EAAuB,uDAAf,GAAI0xB,EAAW,uCACtC,OAAQA,EAAOtyB,MACb,IAAK,OACN,OAAOsyB,EAAOnyB,KACb,IAAK,SACN,MAAO,GACN,QACD,OAAOS,IFMLJ,ONXW,WAAkC,IAAjCI,EAAgC,uDAAxBswB,GAAaoB,EAAW,uCAC9C,OAAQA,EAAOtyB,MACb,IAAK,cACH,MAAO,CAAEc,MAAM,GACjB,IAAK,eACH,MAAO,CAAEA,MAAM,GACjB,QACE,OAAOF,IMKTI,QLZW,WAAuC,IAAtCJ,EAAqC,uDAA7BoxB,GAAkBM,EAAW,uCACjD,OAAQA,EAAOtyB,MACX,IAAK,oBACD,MAAO,CAAEc,MAAM,EAAMyI,OAAQ+oB,EAAO5wB,QACxC,IAAK,qBACD,MAAO,CAAEZ,MAAM,EAAOyI,OAAQ,MAClC,QACI,OAAO3I,IKMfsG,KJaW,WAAgC,IAA/BtG,EAA8B,uDAAtBqxB,GAAWK,EAAW,uCAC7C,OAAQA,EAAOtyB,MACd,IAAK,cACJ,OAAOmF,OAAOU,OAAO,GAAIjF,EAAO,CAAE8E,QAAS4sB,EAAO5sB,UACnD,IAAK,cACJ,OAAOP,OAAOU,OAAO,GAAIjF,EAAO,CAAEid,aAAcyU,EAAOprB,OACxD,IAAK,YACJ,IAAMqrB,EAAS3xB,EAAMuZ,aACrB,OAAIoY,EAAeptB,OAAOU,OAAO,GAAIjF,EAAO,CAAE6Z,SAAU,KAAMN,cAAc,IACrEhV,OAAOU,OAAO,GAAIjF,EAAO,CAAE6Z,SAAU6X,EAAOprB,KAAMiT,cAAc,IACxE,IAAK,YACJ,IAAMqY,EAAWF,EAAO/rB,MACxB,OAAOpB,OAAOU,OAAO,GAAIjF,EAAO,CAC/B2F,MAAOisB,EAASjsB,MAChBb,QAAS8sB,EAAS9sB,QAClBT,KAAMutB,EAASvtB,KACfwB,OAAQ+rB,EAAS/rB,OACjBD,KAAMgsB,EAAShsB,KACfE,MAAO8rB,EAAS9rB,QAElB,IAAK,mBACJ,IAAM5F,EAAOF,EAAMiR,YACnB,OAAO1M,OAAOU,OAAO,GAAIjF,EAAO,CAAEiR,aAAc/Q,IACjD,IAAK,gBACJ,OAAOqE,OAAOU,OAAO,GAAIjF,EAAO,CAAEsZ,UAAWoY,EAAO9pB,MACrD,IAAK,aACJ,OAAOrD,OAAOU,OAAO,GAAIjF,EAAO,CAAEiS,OAAQyf,EAAOzf,SAClD,IAAK,kBACJ,OAAO1N,OAAOU,OAAO,GAAIjF,EAAO,CAAEkd,WAAYwU,EAAOprB,OACtD,IAAK,qBACJ,OAAO/B,OAAOU,OAAO,GAAIjF,EAAO,CAAEuS,cAAemf,EAAOvf,UACzD,QACC,OAAOnS,II5CN+H,QHVW,WAAmC,IAAlC/H,EAAiC,uDAAzBsxB,GAAcI,EAAW,uCAChD,OAAQA,EAAOtyB,MACd,IAAK,WACJ,OAAOmF,OAAOU,OAAO,GAAIjF,EAAO,CAAEoH,KAAMsqB,EAAOtqB,OAChD,IAAK,gBACJ,OAAO7C,OAAOU,OAAO,GAAIjF,EAAO,CAAEihB,SAAUyQ,EAAOlrB,KAC9C,IAAK,qBACD,OAAOjC,OAAOU,OAAO,GAAIjF,EAAO,CAAEkhB,cAAewQ,EAAOnS,QAClE,QACC,OAAOvf,IGEN4tB,aFRW,WAAuC,IAAtC5tB,EAAqC,uDAA7BuxB,GAAkBG,EAAW,uCACjD,OAAQA,EAAOtyB,MACX,IAAK,kBACD,OAAOmF,OAAOU,OAAO,GAAIjF,EAAO,CAAE4tB,aAAc8D,EAAO9D,eAC3D,QACI,OAAO5tB,IEIfquB,WDbW,WAAuC,IAAtCruB,EAAqC,uDAA7BuxB,GAAkBG,EAAW,uCAIzC,OAHAA,EAAOtyB,KAGAY,KIiBb6xB,GAAQC,YAAYC,IAc1B,IAAM9vB,GAAM+vB,MACVC,UAAU3e,IAAKwM,6CAA+BoS,WAAWA,MACzDD,UAAUE,IAAe,CAAEC,QAAS3O,OAAO4O,gBAqB7C,SAASC,MAnBT,SAAoB7xB,GACnB,GAAiB,YAAbA,IAA0BA,EAAS0a,SAAS,sBAAhD,CAKA,IAAM5b,EAAOsyB,GAAMU,WAAWhzB,KAEzBA,GAASA,EAAK+B,KAClBZ,IAAeC,KAAK,YAYrB6xB,CADiB/O,OAAOriB,SAASX,UAgBlC,SAASgyB,KACRC,IAASC,OACR,kBAAC,IAAD,CAAUd,MAAOA,IAChB,kBAAC,IAAD,CAAQe,QAASlyB,KAChB,kBAAC,IAAD,CAAOgC,KAAK,IAAI8I,UAAWjC,GAAKspB,QAASP,IACxC,kBAAC,IAAD,CAAO5vB,KAAK,QAAQ8I,UAAWsnB,KAC/B,kBAAC,IAAD,CAAOpwB,KAAK,UAAU8I,UAAWunB,KACjC,kBAAC,IAAD,CAAOrwB,KAAK,SAAS8I,UAAWwnB,KAChC,kBAAC,IAAD,CAAOtwB,KAAK,YAAY8I,UAAWynB,KACnC,kBAAC,IAAD,CAAOvwB,KAAK,YAAY8I,UAAW0nB,KACpB,kBAAC,IAAD,CAAOxwB,KAAK,uBAAuB8I,UAAW2nB,KAC9C,kBAAC,IAAD,CAAOzwB,KAAK,gBAAgB8I,UAAW6hB,QAOvDvK,SAAS4B,eAAe,SA7B5BziB,GAAImxB,iBACFtsB,MAAK,SAAAusB,GAELxB,GAAMxxB,SAASf,EAAS+zB,EAAE9zB,OAC1BkzB,QAEAzpB,OAAM,SAAA9G,GACNuwB,QAyBaxwB,sB","file":"static/js/main.2ab20950.chunk.js","sourcesContent":["import React from 'react'\r\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { green, red } from '@material-ui/core/colors'\r\n\r\nconst defaultTheme = createMuiTheme({})\r\n\r\nconst muiTheme = createMuiTheme({\r\n\tpalette: {\r\n\t\t// primary: green,\r\n\t\tprimary: {\r\n\t\t\tmain: green[800]\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#fffffF\"\r\n\t\t},\r\n\t\terror: red\r\n\t},\r\n\toverrides: {\r\n\t\tMuiPaper: {\r\n\t\t\troot: {\r\n\t\t\t\t// flex: 1,\r\n\t\t\t\tflexBasis: \"auto\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiTabs: {\r\n\t\t\tvertical: {\r\n\t\t\t\tmaxWidth: \"80px\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiGrid: {\r\n\t\t\troot: {\r\n\t\t\t\tjustifyContent: \"space-evenly\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiDialogTitle: {\r\n\t\t\troot: {\r\n\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\talignItems: \"center\",\r\n\t\t\t\tjustifyContent: \"space-between\"\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tseparate: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\troot: {\r\n\t\tmarginTop: \"4rem\"\r\n\t},\r\n\tcenterDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspreadDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t},\r\n    monitor: {\r\n        paper: {\r\n            width: `calc(100% - ${defaultTheme.spacing(3)})`,\r\n            margin: defaultTheme.spacing(2),\r\n            padding: defaultTheme.spacing(1),\r\n            backgroundColor: \"#333\",\r\n            color: \"#fff\",\r\n        },\r\n        floatRight: {\r\n            float: \"right\"\r\n        },\r\n        background: {\r\n            background: \"#121212\",\r\n            color: \"#fff\",\r\n        },\r\n        lightBackground: {\r\n            backgroundColor: \"#333\",\r\n            color: \"#fff\",\r\n        }\r\n    }\r\n})\r\n\r\n\r\nexport const AppTheme = (props) => {\r\n\r\n\treturn (\r\n\t\t<ThemeProvider theme={muiTheme}>\r\n\t\t\t<div>\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t</ThemeProvider>\r\n\t)\r\n}\r\n","export const setError = message => {\r\n\treturn { type: 'SET_ERROR', message }\r\n  }\r\n\r\n  export const setMessage = message => {\r\n\treturn { type: 'SET_MESSAGE', message }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  \r\n  export const openDrawer = () => {\r\n\treturn { type: 'OPEN_DRAWER' }\r\n  }\r\n  \r\n  export const closeDrawer = () => {\r\n\treturn { type: 'CLOSE_DRAWER' }\r\n  }\r\n  \r\n  export const openProfile = (target) => {\r\n\treturn { type: \"OPEN_PROFILE_MENU\", target }\r\n  }\r\n  \r\n  export const closeProfile = () => {\r\n\treturn { type: \"CLOSE_PROFILE_MENU\" }\r\n  }\r\n  \r\n  export const authUser = user => {\r\n\treturn { type: 'AUTH', user }\r\n  }\r\n  \r\n  export const deauthUser = () => {\r\n\treturn { type: 'DEAUTH' }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  ","import React from 'react';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { connect } from 'react-redux';\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { closeDrawer, openDrawer, openProfile, closeProfile } from './AppActions'\r\n\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tnavBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\tmargin: 0,\r\n\t},\r\n\tseparate: theme.separate\r\n}))\r\n\r\nconst Header = ({ location, user, drawerOpen, onOpenDrawer, onCloseDrawer, profileOpen, onOpenProfile, onCloseProfile }) => {\r\n\tconst classes = useStyles();\r\n\tlet appbar, mobileNavIcon, profileButton\r\n\r\n\tprofileButton = (\r\n\t\tuser._id != null &&\r\n\t\t<div>\r\n\t\t\t<IconButton onClick={profileOpen ? onCloseProfile : onOpenProfile} style={{ color: 'white' }}>\r\n\t\t\t\t<AccountCircleIcon fontSize=\"large\" />\r\n\t\t\t</IconButton>\r\n\t\t</div>\r\n\t)\r\n\r\n\tif (location.pathname === '/signin') {\r\n\t\t//do nothing\r\n\t}\r\n\telse\r\n\t\tmobileNavIcon =\r\n\t\t\t<IconButton edge=\"start\" style={{ color: 'white' }} onClick={() => {drawerOpen ? onCloseDrawer() : onOpenDrawer()}} >\r\n\t\t\t\t<MenuIcon />\r\n\t\t\t</IconButton>\r\n\r\n\tappbar = (\r\n\t\t<AppBar position=\"static\" className={classes.navBar}>\r\n\t\t\t<Toolbar>\r\n\t\t\t\t{mobileNavIcon}\r\n\t\t\t\t<div className={classes.separate} />\r\n\t\t\t\t{profileButton}\r\n\t\t\t</Toolbar>\r\n\t\t</AppBar>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t{appbar}\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open,\r\n\t\tprofileOpen: state.profile.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonOpenDrawer: () => {\r\n\t\t\tdispatch(openDrawer())\r\n\t\t},\r\n\t\tonCloseDrawer: () => {\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonOpenProfile: (event) => {\r\n\t\t\tdispatch(openProfile(event.currentTarget))\r\n\t\t},\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)","import React from 'react'\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setMessage } from './AppActions'\r\n\r\nconst Message = ({ text, err, onClose }) => (\r\n\t<Snackbar\r\n\t\topen={Boolean(err || text)}\r\n\t\tautoHideDuration={3000}\r\n\t\tonClose={onClose}\r\n\t\t// anchorOrigin={{horizontal: \"center\", vertical: \"top\"}}\r\n\t>\r\n\t\t<MuiAlert\r\n\t\t\televation={6}\r\n\t\t\tvariant=\"filled\"\r\n\t\t\tonClose={onClose}\r\n\t\t\tseverity={err ? \"error\" : text ? \"success\" : \"info\"}\r\n\t\t>\r\n\t\t\t{err ? err : text ? text : \"\"}\r\n\t\t</MuiAlert>\r\n\t</Snackbar>\r\n)\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\ttext: state.app.message,\r\n\t\terr: state.app.err\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonClose: () => {\r\n\t\t\tdispatch(setMessage(\"\"))\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Message)\r\n","import React from 'react'\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { capitalCase } from \"capital-case\";\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeDrawer } from '../App/AppActions'\r\n\r\nconst NavItem = (props) => {\r\n\tconst { path, icon, onNavigate } = props;\r\n\r\n\treturn (\r\n\t\t<ListItem button key={path} onClick={() => onNavigate(`/${path}`)}>\r\n\t\t\t<ListItemIcon>{icon}</ListItemIcon>\r\n\t\t\t<ListItemText primary={capitalCase(path)} />\r\n\t\t</ListItem>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NavItem)","import React from 'react';\r\n\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\n\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { closeDrawer, openDrawer } from './AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst Nav = ({user, drawerOpen, onOpenDrawer, onCloseDrawer, onNavigate}) => {\r\n\tlet menuItems = []\r\n\r\n\r\n\tif (user._id) {\r\n\t\tmenuItems.push(<Divider key=\"div1\" />)\r\n\t\tmenuItems.push(<NavItem key={1} path={\"home\"} icon={<HomeIcon/>} />)\r\n\t\tmenuItems.push(<NavItem key={2} path=\"foods\" icon={<FastfoodIcon />} />)\r\n        menuItems.push(<NavItem key={3} path=\"shoplist\" icon={<ShoppingCartIcon />} />)\r\n\t\tif (user.role === \"admin\") {\r\n            menuItems.push(<NavItem key={4} path=\"payments\" icon={<PaymentIcon />} />)\r\n            menuItems.push(<NavItem key={3} path=\"minermonitor\" icon={<TimelineIcon />} />)\r\n\t\t}\r\n\t\tmenuItems.push(<Divider key=\"div2\" />)\r\n\r\n\t\treturn (\r\n\t\t\t<Drawer \r\n\t\t\t\topen={drawerOpen}\r\n\t\t\t\tonClose={open => open? onCloseDrawer() : onOpenDrawer()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{menuItems}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Drawer>\r\n\t\t)\r\n\t}\r\n\treturn (<div/>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t  onOpenDrawer: () => {\r\n\t\tdispatch(openDrawer())\r\n\t  },\r\n\t  onCloseDrawer: () => {\r\n\t\tdispatch(closeDrawer())\r\n\t  },\r\n\t  onNavigate: pathname => {\r\n\t\tbrowserHistory.push(pathname)\r\n\t\tdispatch(closeDrawer())\r\n\t  }    \r\n\t}\r\n  }\r\n  \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav)","import app from '.'\r\n\r\nlet isChrome = navigator.userAgent.indexOf('Chrome') > -1\r\n// let isExplorer = navigator.userAgent.indexOf('MSIE') > -1\r\n// let isFirefox = navigator.userAgent.indexOf('Firefox') > -1\r\nlet isSafari = navigator.userAgent.indexOf(\"Safari\") > -1\r\nlet isOpera = navigator.userAgent.toLowerCase().indexOf(\"op\") > -1\r\nif (isChrome && isSafari) isSafari = false\r\nif (isChrome && isOpera) isChrome = false\r\n\r\n// const passwordChangeService = () => app.service('v1/password-change')\r\n// const passwordResetRequestService = () => app.service('v1/password-requestreset')\r\n// const passwordResetRequestAdminService = () => app.service('v1/password-requestreset-admin')\r\n// const passwordResetService = () => app.service('v1/password-reset')\r\nconst userService = () => app.service('v1/users')\r\nexport const users = {\r\n\tlist: query => {\r\n\t\treturn userService().find({ query: query });\r\n\t},\r\n\tget: id => {\r\n\t\tif (!id) {\r\n\t\t\treturn app.get('authentication');\r\n\t\t}\r\n\t\treturn userService().get(id)\r\n\t},\r\n\tcreate: user => userService().create(user),\r\n\tpatch: (id, user) => userService().patch(id, user),\r\n\tremove: id => userService().remove(id),\r\n\tauthenticate: () => app.authentication.reAuthenticate(true),\r\n\tsignIn: (email, password) => app.authenticate({ strategy: 'local', email, password }),\r\n\t//   signInGoogle: () => {\r\n\t//     window.location.href = process.env.REACT_APP_OAUTH_URL + '/google';\r\n\t//     return Promise.resolve(null)\r\n\t//   },\r\n\tsignOut: () => app.logout(),\r\n\t//   changePassword: (oldPassword, newPassword) => passwordChangeService().create({ oldPassword, newPassword }),\r\n\t//   resetPassword: (id, token, password) => passwordResetService().create({ id, token, password }),\r\n\t//   requestPasswordReset: email => passwordResetRequestService().create({ email }),\r\n\t//   requestPasswordResetAdmin: email => passwordResetRequestAdminService().create({ email }),\r\n}\r\n\r\nconst getSorting = (sort) => { // desc = -1, asc = 1\r\n\tconst s = {}\r\n\tconst convertName = (name) => {\r\n\t\tswitch (name) {\r\n\t\t\tcase \"main\":\r\n\t\t\t\treturn \"maintype\"\r\n\t\t\tcase \"side\":\r\n\t\t\t\treturn \"sidetype\"\r\n\t\t\tcase \"food\":\r\n\t\t\t\treturn \"name\"\r\n\t\t\tcase \"Food Amount\":\r\n\t\t\t\treturn \"foodamount\"\r\n\t\t\tcase \"Cooking Time\":\r\n\t\t\t\treturn \"time\"\r\n\t\t\tcase \"Last Eaten\":\r\n\t\t\t\treturn \"lasteaten\"\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"timeseaten\"\r\n\t\t}\r\n\t}\r\n\tObject.keys(sort).forEach(key => {\r\n\t\tconst value = sort[key];\r\n\t\tif (value === \"asc\") {\r\n\t\t\tsort[key] = 1\r\n\t\t} else if (value === \"desc\") {\r\n\t\t\tsort[key] = -1\r\n\t\t}\r\n\t\ts[convertName(key)] = sort[key]\r\n\t})\r\n\treturn s\r\n}\r\n\r\nconst convertFilters = (filters) => {\r\n\tvar f = {}\r\n\tObject.keys(filters).forEach(type => {\r\n\t\tvar d = {}\r\n\t\tif (type === \"speed\") {\r\n\t\t\td[\"time\"] = filters[type]\r\n\t\t\tf = Object.assign(f, d)\r\n\t\t} else {\r\n\t\t\tvar nins = []\r\n\t\t\tObject.keys(filters[type]).forEach(name => {\r\n\t\t\t\tif (filters[type][name] === \"$nin\") nins.push(name)\r\n\t\t\t})\r\n\t\t\tif (nins.length) {\r\n\t\t\t\tif (type === \"day\") {\r\n\t\t\t\t\tnins = nins.map(x => parseInt(x.split(\" \")[0]))\r\n\t\t\t\t\td[\"foodamount\"] = { $nin: nins }\r\n\t\t\t\t} else {\r\n\t\t\t\t\td[`${type}type`] = { $nin: nins }\r\n\t\t\t\t}\r\n\t\t\t\tf = Object.assign(f, d)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\treturn f\r\n}\r\n\r\nconst foodService = () => app.service('v1/foods')\r\nexport const foods = {\r\n\tlist: (filters, page, sort, search = \"\", limit) => {\r\n\t\tconst f = convertFilters(filters)\r\n\t\tconst sorting = getSorting(sort)\r\n\t\tvar query = Object.assign(f, {\r\n\t\t\t$skip: ((page - 1) < 0 ? 0 : page) * 10,\r\n\t\t\t$limit: limit,\r\n\t\t\t$sort: sorting,\r\n\t\t})\r\n\t\tif (search) query = Object.assign(query, { $search: search })\r\n\t\treturn foodService().find({ query: query })\r\n\t},\r\n\tget: id => foodService().get(id),\r\n\tcreate: food => foodService().create(food),\r\n\tpatch: (id, food) => foodService().patch(id, food),\r\n\tremove: id => foodService().remove(id),\r\n\tfind: query => foodService().find({ query: query }),\r\n\tdistincts: () => {\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t\tfoodService().find({ query: { $limit: 10000 } })\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tlet mainTypes = []\r\n\t\t\t\t\tlet sideTypes = []\r\n\t\t\t\t\tconst dayTypes = [...Array(4).keys()].map(d => `${d + 1} day`)\r\n\t\t\t\t\tresult.data.forEach(f => {\r\n\t\t\t\t\t\tmainTypes.push(f.maintype)\r\n\t\t\t\t\t\tf.sidetype.forEach(s => sideTypes.push(s))\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tmain: [...new Set(mainTypes)],\r\n\t\t\t\t\t\tside: [...new Set(sideTypes)],\r\n\t\t\t\t\t\tday: dayTypes\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t)\r\n\t},\r\n\tlastEaten: () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tfoodService().find({ query: {\r\n\t\t\t\t$sort: {\r\n\t\t\t\t\tlasteaten: -1\r\n\t\t\t\t},\r\n\t\t\t\t$lasteaten: true\r\n\t\t\t}}).then(res => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\n\r\n\r\nconst shopListService = () => app.service('v1/shoplist')\r\nexport const shoplist = {\r\n\tlist: query => {\r\n\t\treturn shopListService().find({ query: query })\r\n\t},\r\n\tget: id => shopListService().get(id),\r\n\tcreate: item => shopListService().create(item),\r\n\tpatch: (id, item) => shopListService().patch(id, item),\r\n\tremove: id => shopListService().remove(id)\r\n}\r\n\r\nconst paymentsService = () => app.service('v1/payments')\r\nexport const payments = {\r\n\tlist: query => paymentsService().find({ query: query }),\r\n\tget: id => paymentsService().get(id),\r\n\tcreate: payment => paymentsService().create({ ...payment, paid: false }),\r\n\tpatch: (id, payment) => paymentsService().patch(id, payment),\r\n\tremove: id => paymentsService().remove(id)\r\n}\r\n\r\nconst pendingPaymentsService = () => app.service('v1/pending-payments')\r\nexport const pendingPayments = {\r\n\tlist: query => pendingPaymentsService().find({ query: query }),\r\n\tget: id => pendingPaymentsService().get(id),\r\n\tcreate: pending => pendingPaymentsService().create(pending),\r\n\t// patch: (id, pending) => pendingPaymentsService().patch(id, pending),\r\n\t// remove: id => pendingPaymentsService().remove(id)\r\n}\r\n\r\nconst transactionService = () => app.service('v1/transactions')\r\nexport const transactionsApi = {\r\n    list: query => transactionService().find({ query: query }),\r\n    get: id => transactionService().get(id),\r\n    patch: (id, transaction) => transactionService().patch(id, transaction)\r\n}\r\n\r\nconst categoriesService = () => app.service('v1/categories')\r\nexport const categoriesApi = {\r\n    list: query => categoriesService().find({ query: query }),\r\n    get: id => categoriesService().get(id),\r\n    create: cateogry => categoriesService().create(cateogry),\r\n\tpatch: (id, cateogry) => categoriesService().patch(id, cateogry),\r\n\tremove: id => categoriesService().remove(id)   \r\n}\r\n\r\nconst categoryTypeService = () => app.service('v1/category-type')\r\nexport const categoryTypesApi = {\r\n    list: query => categoryTypeService().find({ query: query }),\r\n    get: id => categoryTypeService().get(id),\r\n    create: type => categoryTypeService().create(type),\r\n\tpatch: (id, type) => categoryTypeService().patch(id, type),\r\n\tremove: id => categoryTypeService().remove(id)   \r\n}\r\n\r\nconst hwinfoService = () => app.service('v1/hwinfo')\r\nexport const hwinfoApi = {\r\n    list: query => hwinfoService().find({ query: query })\r\n}\r\n\r\nconst nhService = () => app.service('v1/nh')\r\nexport const nhApi = {\r\n    get: () => nhService().get({})\r\n}\r\n\r\nconst binanceService = () => app.service('v1/binance')\r\nexport const binanceApi = {\r\n    find: (query) => binanceService().find({ query: query })\r\n}","import React from 'react'\r\n\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider'\r\n\r\nimport ActionExitToApp from '@material-ui/icons/ExitToApp';\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { closeProfile, setMessage, deauthUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst profile = ({ user, profileOpen, onCloseProfile, anchorEl, onSignOut }) => {\r\n\r\n\treturn (\r\n\t\t<Menu\r\n\t\t\tanchorEl={anchorEl}\r\n\t\t\tkeepMounted\r\n\t\t\topen={profileOpen}\r\n\t\t\tonClose={onCloseProfile}\r\n\t\t\tdisableAutoFocus={true}\r\n\t\t>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={`Signed in as: ${user.isQuest ? \" Quest\" : \"\"}`} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={user.name} secondary={user.email} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<Divider />\r\n\t\t\t<MenuItem onClick={() => {\r\n\t\t\t\tonCloseProfile()\r\n\t\t\t\tonSignOut()\r\n\t\t\t}}>\r\n\t\t\t\t<ListItemIcon><ActionExitToApp /></ListItemIcon>\r\n\t\t\t\t<ListItemText primary='Sign Out' />\r\n\t\t\t</MenuItem>\r\n\t\t</Menu>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tprofileOpen: state.profile.open,\r\n\t\tanchorEl: state.profile.anchor\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t},\r\n\t\tonSignOut: () => {\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign out.'))\r\n\t\t\t}, 5000)\r\n\t\t\tusers.signOut()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed out.'))\r\n\t\t\t\t\tdispatch(deauthUser())\r\n\t\t\t\t\t// eslint-disable-next-line no-restricted-globals\r\n\t\t\t\t\tbrowserHistory.push('/signin');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage(err.message))\r\n\t\t\t\t})\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(profile)\r\n","import React from 'react'\r\nimport { AppTheme } from '../theme'\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Header from './Header'\r\nimport Message from './Message'\r\n\r\nimport Nav from './Nav'\r\nimport Profile from './profile'\r\n// import MediaQuery from 'react-responsive'\r\n\r\nexport default class App extends React.Component {\r\n\r\n    render() {\r\n        let navBar, profileMenu;\r\n        if (this.props.location.pathname !== \"/signin\") {\r\n            navBar = <Nav />\r\n            profileMenu = <Profile />\r\n        }\r\n        return (\r\n            <AppTheme>\r\n                <div>\r\n                    <CssBaseline />\r\n                    <Header location={this.props.location} />\r\n                    {navBar}\r\n                    {profileMenu}\r\n                    {this.props.main}\r\n                    {this.props.children}\r\n                    <Message />\r\n                </div>\r\n            </AppTheme>\r\n        )\r\n    }\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport List from '@material-ui/core/List'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ActionLock from '@material-ui/icons/Lock'\r\n\r\n// import { CookieDisclaimer } from '../home/CookieDisclaimer'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { setMessage, setError, authUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tmarginTop: \"8rem\",\r\n\t\tdisplay: 'flex',\r\n\t\tmargin: theme.spacing(2),\r\n\t},\r\n\tTextField: {\r\n\t\tdisplay: \"flex\",\r\n\t\tmargin: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(4)\r\n\t}\r\n}))\r\n\r\nfunction SignIn(props) {\r\n\tconst classes = useStyles();\r\n\tconst [error] = useState();\r\n\tconst [email, setEmail] = useState();\r\n\tconst [password, setPassword] = useState();\r\n\r\n\tconst { onSignIn } = props;\r\n\r\n\tconst submitHanlder = event => {\r\n\t\tevent.preventDefault()\r\n\t\tonSignIn(email, password)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper elevation={3} style={{ width: \"100%\"}}>\r\n\t\t\t\t<List subheader={<ListSubheader>Sign In</ListSubheader>}>\r\n\t\t\t\t\t<form onSubmit={submitHanlder} style={{ marginTop: '24px' }}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Email\"\r\n                                value={email}\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 1 || error === 3 ? \"E-mail is required\" : error === 4 ? 'E-mail does not contain \"@\" symbol' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Password\"\r\n                                value={password}\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 2 || error === 3 ? 'Password is required' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tstartIcon={<ActionLock />}\r\n\t\t\t\t\t\t\t\tonClick={submitHanlder}\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t>Sign In</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"submit\" style={{ display: \"none\" }} />\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</List>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSignIn: (email, password) => {\r\n\t\t\tif (email.length === 0 && password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail and password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(3) }\r\n\t\t\t}\r\n\t\t\tif (email.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(1) }\r\n\t\t\t}\r\n\t\t\tif (email.indexOf('@') === -1) {\r\n\t\t\t\tdispatch(setMessage('E-mail does not contain \"@\" symbol'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(4) }\r\n\t\t\t}\r\n\t\t\tif (password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('Password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(2) }\r\n\t\t\t}\r\n\t\t\tdispatch(setMessage('Signing in...'))\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign in.'))\r\n\t\t\t}, 5000)\r\n\t\t\treturn users.signIn(email, password)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed in.'));\r\n\t\t\t\t\tdispatch(authUser(result.user));\r\n\t\t\t\t\tbrowserHistory.push('/home')\r\n\t\t\t\t\treturn { user: result.user, error: null }\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tif (err.name === 'MongoError') {\r\n\t\t\t\t\t\tdispatch(setMessage('Server error. Try again later.'))\r\n\t\t\t\t\t} else if (err.name === 'NotAuthenticated') {\r\n\t\t\t\t\t\tdispatch(setMessage('Unable to sign in. Invalid e-mail or password.'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatch(setError('Error: ' + err.name + err.message))\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbrowserHistory.push('/')\r\n\t\t\t\t\tsetTimeout(() => browserHistory.push('/signin'), 10)\r\n\t\t\t\t\treturn { user: null, error: err };\r\n\t\t\t\t})\r\n\t\t},\r\n\t\tonSignInGoogle: () => {\r\n\t\t\t//   dispatch(setMessage('Signing in...'))\r\n\t\t\t//   return users.signInGoogle()\r\n\t\t},\r\n\t\tonResetPassword: () => {\r\n\t\t\t//   browserHistory.push('/passwordreset')\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\r\n","import React from 'react'\r\n\r\nimport List from '@material-ui/core/List';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { closeDrawer } from '../App/AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\tmarginTop: \"10rem\",\r\n\t\tmarginLeft: \"1rem\",\r\n\t\tmarginRight: \"1rem\"\r\n\t}\r\n}))\r\n\r\nconst Home = (props) => {\r\n\tconst classes = useStyles()\r\n\tconst { user } = props;\r\n\tlet menuItems = []\r\n\r\n\tmenuItems.push(<NavItem key={0} path=\"foods\" icon={<FastfoodIcon />} />)\r\n\tmenuItems.push(<NavItem key={1} path=\"shoplist\" icon={<ShoppingCartIcon />} />)\r\n\tif (user.role === \"admin\") {\r\n        menuItems.push(<NavItem key={2} path=\"payments\" icon={<PaymentIcon />} />)\r\n        menuItems.push(<NavItem key={3} path=\"minermonitor\" icon={<TimelineIcon />} />)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<List className={classes.paper}>\r\n\t\t\t\t{menuItems}\r\n\t\t\t</List>\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)","import React from 'react'\r\n\r\nimport { Box, Typography } from '@material-ui/core';\r\n\r\nconst TabContent = (props) => {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<Typography\r\n\t\t\tcomponent=\"div\"\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`simple-tabpanel-${index}`}\r\n\t\t\taria-labelledby={`simple-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && <Box p={3}>{children}</Box>}\r\n\t\t</Typography>\r\n\t);\r\n}\r\n\r\nexport default TabContent;","import React, { useState } from 'react'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { Tabs, Tab, Button, Slider, Grid } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport TabContent from '../core/TabContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfilterSectionRoot: {\r\n\t\tflexGrow: 1,\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tdisplay: 'flex',\r\n\t\theight: 224,\r\n\t\t// marginLeft: \"-20px\"\r\n\t},\r\n\ttabs: {\r\n\t\tborderRight: `1px solid ${theme.palette.divider}`,\r\n\t\tbackgroundColor: theme.palette.primary,\r\n\t},\r\n\tverticalTab: {\r\n\t\talignItems: \"start\",\r\n\t\tmaxWidth: \"10px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\ttabContainer: {\r\n\t\tflexGrow: 1,\r\n\t\tmaxWidth: \"250px\",\r\n\t\tmarginLeft: \"-56px\",\r\n\t\tmarginTop: \"-40px\",\r\n\t\tpaddingTop: \"2px\"\r\n\t},\r\n\tspeedContainer: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmarginLeft: \"5px\"\r\n\t},\r\n\tspeedText: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspeedBtn: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tmargin: \"10px\"\r\n\t},\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(1),\r\n\t\ttextAlign: 'center',\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t},\r\n\tfilterButton: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\"\r\n\t},\r\n\tfilterButtonDisabled: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\",\r\n\t\tcolor: \"#d3d3d3\"\r\n\t},\r\n\theader: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\",\r\n\t\topacity: 1,\r\n\t\t// border: `1px solid ${theme.palette.primary.main}`,\r\n\t\t// color: theme.palette.primary.main\r\n\t},\r\n\tfilterTab: {\r\n\t\tminWidth: \"80px\"\r\n\t},\r\n}));\r\n\r\nconst getSpeedLabel = (value) => {\r\n\tconst hours = Math.floor(value / 60)\r\n\tconst mins = Math.floor((value % 60) / 6);\r\n\tif (mins === 0) return hours\r\n\treturn `${hours}.${mins}`\r\n}\r\n\r\nconst getSpeedText = (value) => {\r\n\tconst hours = Math.floor(value / 60)\r\n\tconst mins = Math.floor(value % 60);\r\n\tif (hours === 0) return `    ${mins} min`\r\n\tif (mins === 0) return `${hours} h       `\r\n\treturn `${hours}h ${mins} min`\r\n}\r\n\r\nconst inSpread = 2;\r\nconst outSpread = 12;\r\nconst gridSpacing = 3;\r\n\r\nconst FilterSection = ({ filters, setFilters }) => {\r\n\tconst classes = useStyles()\r\n\tconst [tabValue, setTabValue] = useState(0)\r\n\r\n\tconst onFilterClick = (f) => {\r\n\t\tvar selected;\r\n\t\tif (f in filters.main) selected = filters.main\r\n\t\telse if (f in filters.side) selected = filters.side\r\n\t\telse if (f in filters.day) selected = filters.day\r\n\t\tconst newValue = selected[f] === \"$in\" ? \"$nin\" : \"$in\"\r\n\t\tselected[f] = newValue\r\n\t\tsetFilters(filters)\r\n\t}\r\n\t\r\n\tconst forceColumn = (type, filter) => {\r\n\t\tconst first = Object.keys(type.type)[0]\r\n\r\n\t\tvar selected;\r\n\t\tif (first in filters.main) selected = filters.main\r\n\t\telse if (first in filters.side) selected = filters.side\r\n\t\telse if (first in filters.day) selected = filters.day\r\n\r\n\t\tObject.keys(selected).forEach(f => {\r\n\t\t\tselected[f] = filter\r\n\t\t})\r\n\t\tsetFilters(filters)\r\n\t}\r\n\r\n\tconst GridHeader = (type) => (\r\n\t\t<React.Fragment>\r\n\t\t\t<Grid item xs={inSpread}>\r\n\t\t\t\t<Button color=\"primary\" className={classes.header} onClick={() => forceColumn(type, \"$in\")}>Include</Button>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={inSpread}>\r\n\t\t\t\t<Button color=\"primary\" className={classes.header} onClick={() => forceColumn(type, \"$nin\")}>Exclude</Button>\r\n\t\t\t</Grid>\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst onOffBtn = (on, label, onClick) => (\r\n\t\t<Button\r\n\t\t\tvariant={on ? \"contained\" : \"outlined\"}\r\n\t\t\tcolor={on ? \"primary\" : \"default\"}\r\n\t\t\tonClick={() => onClick(label)}\r\n\t\t\tclassName={on ? classes.filterButton : classes.filterButtonDisabled}\r\n\t\t>{label}</Button>\r\n\t)\r\n\r\n\tconst buttonFilters = (type) => {\r\n\t\tconst arr = Object.keys(type)\r\n\t\treturn (\r\n\t\t\t<div className={classes.tabContainer}>\r\n\t\t\t\t<Grid container spacing={1} directon=\"row\" justify=\"space-evenly\" alignItems=\"flex-start\">\r\n\t\t\t\t\t<Grid container item xs={outSpread} spacing={gridSpacing}>\r\n\t\t\t\t\t\t<GridHeader type={type} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{arr.map(f => {\r\n\t\t\t\t\t\tconst left = type[f] === \"$in\"\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<React.Fragment key={f}>\r\n\t\t\t\t\t\t\t\t<Grid container item xs={outSpread} spacing={gridSpacing} >\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={inSpread} >\r\n\t\t\t\t\t\t\t\t\t\t{onOffBtn(left, f, onFilterClick)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={inSpread} >\r\n\t\t\t\t\t\t\t\t\t\t{onOffBtn(!left, f, onFilterClick)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst mainContent = buttonFilters(filters.main)\r\n\tconst sideContent = buttonFilters(filters.side)\r\n\tconst dayContent = buttonFilters(filters.day)\r\n\r\n\tconst speedFilter = Object.keys(filters.speed)[0]\r\n\tconst speedValue = filters.speed[speedFilter]\r\n\tconst timeIsLess = speedFilter === \"$lt\"\r\n\tconst speedFilterText = timeIsLess ? \"less\" : \"more\";\r\n\r\n\tconst handleSpeedClick = (value) => {\r\n\t\tfilters.speed = timeIsLess ? {\"$gt\": speedValue} : {\"$lt\": speedValue}\r\n\t\tsetFilters(filters)\r\n\t}\r\n\r\n\tconst speedContent = (\r\n\t\t<div className={classes.speedContainer}>\r\n\t\t\t<div className={classes.speedBtn}>\r\n\t\t\t\t{onOffBtn(timeIsLess, \"<\", handleSpeedClick)}\r\n\t\t\t\t{onOffBtn(!timeIsLess, \">\", handleSpeedClick)}\r\n\t\t\t</div>\r\n\t\t\t<Slider\r\n\t\t\t\tvalue={speedValue}\r\n\t\t\t\tdefaultValue={180}\r\n\t\t\t\ttrack={timeIsLess ? \"normal\" : \"inverted\"}\r\n\t\t\t\tgetAriaValueText={value => `${value}`}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tvalueLabelFormat={value => getSpeedLabel(value)}\r\n\t\t\t\tonChange={(e, value) => {\r\n\t\t\t\t\tif (value !== speedValue) {\r\n\t\t\t\t\t\tfilters.speed[speedFilter] = value\r\n\t\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tstep={30}\r\n\t\t\t\tmin={0}\r\n\t\t\t\tmax={180}\r\n\t\t\t/>\r\n\t\t\t{/* <Typography id=\"discrete-slider-restrict\" gutterBottom> */}\r\n\t\t\t\t<div className={classes.speedText}>\r\n\t\t\t\t\t<div>{`Takes ${speedFilterText} than `}</div>\r\n\t\t\t\t\t<div>{`${getSpeedText(speedValue)}`}</div>\r\n\t\t\t\t\t<div>{` to make`}</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/* </Typography> */}\r\n\t\t</div>\r\n\t);\r\n\t\r\n\treturn (\r\n\t\t<div className={classes.filterSectionRoot}>\r\n\t\t\t<Tabs\r\n\t\t\t\torientation=\"vertical\"\r\n\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\tvalue={tabValue}\r\n\t\t\t\tonChange={(e, value) => setTabValue(value)}\r\n\t\t\t>\r\n\t\t\t\t<Tab label=\"Main\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Side\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Speed\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Day\" className={classes.filterTab} />\r\n\t\t\t</Tabs>\r\n\t\t\t<TabContent value={tabValue} index={0} >\r\n\t\t\t\t{mainContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={1} >\r\n\t\t\t\t{sideContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={2} >\r\n\t\t\t\t{speedContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={3} >\r\n\t\t\t\t{dayContent}\r\n\t\t\t</TabContent>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FilterSection)","import React from 'react'\r\n\r\nimport { Button, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfilterSectionRoot: {\r\n\t\tflexGrow: 1,\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tdisplay: 'flex',\r\n\t\theight: 224,\r\n\t\twidth: \"325px\"\r\n\t},\r\n\tbuttonContainer: {\r\n\t\twidth: \"33%\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tdescriptionContainer: {\r\n\t\theight: \"40%\",\r\n\t\tcolor: \"rgba(0, 0, 0, 0.54)\"\r\n\t},\r\n\tupperdescriptionContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"flex-end\"\r\n\t},\r\n\ttextContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t}\r\n}));\r\n\r\nexport default ({ sort, setSort }) => {\r\n\tconst classes = useStyles()\r\n\r\n\tconst handleChange = (name) => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) sort[name] = 1\r\n\t\telse if (value > 0) sort[name] = -1\r\n\t\telse delete sort[name]\r\n\t\tsetSort(sort)\r\n\t}\r\n\r\n\tconst getSortDescriptionUp = name => {\r\n\t\tif (!sort[name] || sort[name] < 0) return null\r\n\t\tconst icon = <ArrowUpwardIcon />\r\n\t\tconst text = name === \"Food Amount\" ? \"Less first\" : (name === \"Cooking Time\" ? \"Fastest first\" : \"Oldest first\")\r\n\t\treturn (\r\n\t\t\t<div className={classes.textContainer}>\r\n\t\t\t\t{icon}\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</Typography>\r\n\t\t\t</ div>\r\n\t\t)\r\n\t}\r\n\t\r\n\tconst getSortDescriptionDown = name => {\r\n\t\tif (!sort[name] || sort[name] > 0) return  null\r\n\t\tconst icon = <ArrowDownwardIcon />\r\n\t\tconst text = name === \"Food Amount\" ? \"Multiple first\" : (name === \"Cooking Time\" ? \"Slowest first\" : \"Latest first\")\r\n\t\treturn (\r\n\t\t\t<div className={classes.textContainer}>\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t{icon}\r\n\t\t\t</ div>\r\n\t\t)\r\n\t}\r\n\t\r\n\r\n\tconst SortButton = (name) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.buttonContainer}>\r\n\t\t\t\t<div className={`${classes.descriptionContainer} ${classes.upperdescriptionContainer}`}>\r\n\t\t\t\t\t{getSortDescriptionUp(name)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={() => handleChange(name)}>\r\n\t\t\t\t\t{name}\r\n\t\t\t\t</Button>\r\n\t\t\t\t<div className={classes.descriptionContainer}>\r\n\t\t\t\t\t{getSortDescriptionDown(name)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.filterSectionRoot}>\r\n\t\t\t{SortButton(\"Food Amount\")}\r\n\t\t\t{SortButton(\"Cooking Time\")}\r\n\t\t\t{SortButton(\"Last Eaten\")}\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, Tabs, Tab } from '@material-ui/core';\r\n\r\nimport FilterSection from './FilterSection'\r\nimport FilterSorting from './FilterSorting'\r\nimport TabContent from '../core/TabContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttabs: {\r\n\t\twidth: \"100%\",\r\n\t},\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tactionContent: {\r\n\t\talignItems: \"stretch\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t},\r\n}))\r\n\r\nconst copyObj = filters => {\r\n\treturn JSON.parse(JSON.stringify(filters))\r\n}\r\n\r\n\r\nconst Filters = ({ onApply, filtersOpen, setOpenFilter, currentFilters, currentSort, clearFilters }) => {\r\n\tconst classes = useStyles()\r\n\tconst [tabValue, setTabValue] = useState(0)\r\n\tconst [filters, setFilters] = useState(copyObj(currentFilters))\r\n\tconst [sort, setSort] = useState(copyObj(currentSort))\r\n\r\n\tif (!filters.main.liha && currentFilters.main.liha) {\r\n\t\tsetFilters(copyObj(currentFilters))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={filtersOpen} onClose={() => {\r\n\t\t\t\tsetFilters(copyObj(currentFilters))\r\n\t\t\t\tsetSort(copyObj(currentSort))\r\n\t\t\t\tsetOpenFilter()\r\n\t\t\t}} >\r\n\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvariant=\"fullWidth\"\r\n\t\t\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\tvalue={tabValue}\r\n\t\t\t\t\t\tonChange={(e, value) => setTabValue(value)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tab label=\"Filters\" />\r\n\t\t\t\t\t\t<Tab label=\"Sort\" />\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t<TabContent value={tabValue} index={0} >\r\n\t\t\t\t\t\t<FilterSection\r\n\t\t\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\t\t\tsetFilters={f => setFilters(copyObj(f))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabContent>\r\n\t\t\t\t\t<TabContent value={tabValue} index={1} >\r\n\t\t\t\t\t\t<FilterSorting \r\n\t\t\t\t\t\t\tsort={sort}\r\n\t\t\t\t\t\t\tsetSort={s => setSort(copyObj(s))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabContent>\r\n\t\t\t\t</div>\r\n\t\t\t\t<DialogActions className={classes.actionContent}>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tfilters.main.liha = null;\r\n\t\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t\t\tsetSort({})\r\n\t\t\t\t\t\tclearFilters()\r\n\t\t\t\t\t}} color=\"primary\" >\r\n\t\t\t\t\t\tClear Filters\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tsetOpenFilter()\r\n\t\t\t\t\t\tonApply(filters, sort)\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\tApply\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tcurrentFilters: state.food.filters,\r\n\t\tfiltersOpen: state.food.filtersOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Filters)","import React from 'react'\r\n\r\nexport const boldSearch = (text, search) => {\r\n\tif (!text || !search) return text;\r\n\tsearch = search.toLowerCase()\r\n\ttext = text.toLowerCase()\r\n\tconst split = text.split(search);\r\n\tconst bolded = split.map((x, i) => {\r\n\t\tif (i === split.length - 1) return x;\r\n\t\treturn (<span key={i}>{x}<b>{search}</b></span>)\r\n\t})\r\n\treturn (\r\n\t\t<span>\r\n\t\t\t{bolded.map(x => x)}\r\n\t\t</span>\r\n\t)\r\n}","export const setFilters = (filters) => {\r\n\treturn { type: \"SET_FILTERS\", filters }\r\n}\r\n\r\nexport const selectFood = (food) => {\r\n\treturn { type: \"SELECT_FOOD\", food}\r\n}\r\n\r\nexport const setFoods = (foods) => {\r\n\treturn { type: \"SET_FOODS\", foods}\r\n}\r\n\r\nexport const onSetOpenFilters = () => {\r\n\treturn { type: \"SET_OPEN_FILTERS\"}\r\n}\r\n\r\nexport const distincts = (res) => {\r\n\treturn { type: \"SET_DISTINCTS\", res}\r\n}\r\n\r\nexport const setEditFood = (food) => {\r\n\treturn { type: \"EDIT_FOOD\", food}\r\n}\r\n\r\nexport const setErrors = (errors) => {\r\n\treturn { type: \"SET_ERRORS\", errors}\r\n}\r\n\r\nexport const setLatestFood = (food) => {\r\n\treturn { type: \"SET_LATEST_FOOD\", food}\r\n}\r\n\r\nexport const setOptions = (options) => {\r\n\treturn { type: \"SET_SEARCH_OPTIONS\", options }\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport Box from '@material-ui/core/Box';\r\nimport { boldSearch } from '../core/BoldSearch'\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setOptions } from './foodAction'\r\nimport { foods } from '../api'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tmaxWidth: \"300px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\",\r\n\t\twidth: \"100%\"\r\n\t},\r\n\tsearchDiv: {\r\n\t\twidth: \"60%\"\r\n\t},\r\n\tbtnDiv: {\r\n\t\twidth: \"40%\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tpadding: {\r\n\t\tpadding: theme.spacing(2)\r\n\t}\r\n}))\r\n\r\nfunction Search(props) {\r\n\tconst classes = useStyles()\r\n\tconst { search, onSelectFood, options, onSetOptions } = props\r\n\tconst [searchState, setSearchState] = useState(search)\r\n\r\n\tconst setSearch = search => {\r\n\t\tsetSearchState(search)\r\n\t\tonSetOptions(search)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box display=\"block\" justifyContent=\"center\" className={classes.padding}>\r\n\t\t\t<Autocomplete\r\n\t\t\t\toptions={options}\r\n\t\t\t\tgetOptionLabel={option => option.name}\r\n\t\t\t\trenderOption={option => boldSearch(option.name, searchState)}\r\n\t\t\t\trenderInput={params => {\r\n\t\t\t\t\tvar { InputProps, ...rest } = params;\r\n\t\t\t\t\tInputProps.startAdornment = (\r\n\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t\t\t</InputAdornment >)\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\tplaceholder=\"Search...\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tvalue={searchState}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tonChange={e => setSearch(e.target.value)}\r\n\t\t\t\t\t\t\tInputProps={InputProps}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t\tonChange={(e, value) => {\r\n\t\t\t\t\tonSelectFood(value)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t</ Box>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\toptions: state.food.searchOptions\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetOptions: search => {\r\n\t\t\tif (!search.length)\r\n\t\t\t\treturn dispatch(setOptions([]))\r\n\t\t\tconst query = { $regex: search }\r\n\t\t\tfoods.find(query)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setOptions(res.data))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Search)","const dayMs = 24 * 60 * 60 * 1000\r\n\r\nconst getShortTime = (date, short) => {\r\n\tconst d = date.getDate()\r\n\tconst m = date.getMonth() + 1\r\n\tif (short) return `${d}.${m}`\r\n\tconst year = date.getFullYear().toString().substr(2)\r\n\treturn `${d}.${m}.${year}`\r\n}\r\n\r\nconst getDateText = (start, end) => {\r\n\tconst numDays = Math.floor((end - start) / dayMs)\r\n\tconst days = numDays < 2 ? \"day\" : \"days\"\r\n\tconst today = new Date()\r\n\tconst diff = Math.round((today - end) / dayMs)\r\n\tvar ago;\r\n\tif (diff > 356) {\r\n\t\tago = \"Over a Year ago\"\r\n\t} else if (diff > 30) {\r\n\t\tconst m = Math.round(diff / 30)\r\n\t\tago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff > 7) {\r\n\t\tconst w = Math.round(diff / 7)\r\n\t\tago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff > 0) {\r\n\t\tago = `${diff} day${diff > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff === 0) {\r\n\t\tago = \"today\"\r\n\t} else if (diff === -1) {\r\n\t\tago = \"tomorrow\"\r\n\t} else if (diff < -1) {\r\n\t\tago = `in ${diff * (-1)} days`\r\n\t}\r\n\treturn `${ago} - ${getShortTime(start, true)}-${getShortTime(end)} (${numDays} ${days} food)`\r\n}\r\n\r\n/**\r\n * dates = Array of date objects\r\n * return Array of strings\r\n * @param {Array} dates \r\n */\r\nexport default (dates, maxLength = 10) => {\r\n\tif (!dates.length) return []\r\n\tdates = dates.sort((a, b) => b - a)\r\n\tconst arr = []\r\n\tvar firstDate = dates[0]\r\n\tvar latestDate = dates[0]\r\n\tdates.forEach((date, i) => {\r\n\t\tif (arr.length >= maxLength) return arr\r\n\t\t// start of new date clamp\r\n\t\tif (latestDate - date > 2 * dayMs ) {\r\n\t\t\tarr.push(getDateText(firstDate, latestDate))\r\n\t\t\tfirstDate = date;\r\n\t\t\tlatestDate = date;\r\n\t\t\treturn\r\n\t\t}\r\n\t\tfirstDate = date\r\n\t\tif (i === dates.length - 1) {\r\n\t\t\tarr.push(getDateText(firstDate, latestDate))\r\n\t\t}\r\n\t});\r\n\treturn arr\r\n}","import React from 'react';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport combineDates from './combineDates';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t},\r\n\thighlight:\r\n\t\ttheme.palette.type === 'light'\r\n\t\t\t? {\r\n\t\t\t\tcolor: theme.palette.secondary.main,\r\n\t\t\t\tbackgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n\t\t\t}\r\n\t\t\t: {\r\n\t\t\t\tcolor: theme.palette.text.primary,\r\n\t\t\t\tbackgroundColor: theme.palette.secondary.dark,\r\n\t\t\t},\r\n\ttitle: {\r\n\t\tflex: '1 1 100%',\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1,\r\n\t},\r\n\tbutton: {\r\n\t\tmarginRight: theme.spacing(2),\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tminWidth: \"133px\",\r\n\t}\r\n}));\r\n\r\n\r\nexport default (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { columns, data, sort, setSort, limit, setLimit, onSelectFood, onAddFood, page, setPage, setOpenFilter } = props;\r\n\tif (!data) return (\r\n\t\t<div />\r\n\t)\r\n\r\n\tconst foods = data.data\r\n\tconst count = data.total || 0;\r\n\tconst pager = count === 0 ? 0 : page;\r\n\r\n\tconst handleChange = (name) => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) sort[name] = 1\r\n\t\telse if (value > 0) sort[name] = -1\r\n\t\telse delete sort[name]\r\n\t\tsetSort(sort)\r\n\t}\r\n\r\n\tconst tableToolbar = (\r\n\t\t<Toolbar >\r\n\t\t\t<Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t\tFoods\r\n\t\t  \t\t</Typography>\r\n\t\t\t<Tooltip title=\"Add New Food\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={onAddFood}\r\n\t\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.button}\r\n\t\t\t\t\tsize=\"small\" >\r\n\t\t\t\t\tAdd Food\r\n\t\t\t\t</Button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"Filter list\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tendIcon={<FilterListIcon />}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tclassName={classes.button}\r\n\t\t\t\t\tonClick={() => { setOpenFilter() }}>\r\n\t\t\t\t\tFilter\r\n\t\t\t\t\t</Button>\r\n\t\t\t</Tooltip>\r\n\t\t</Toolbar>\r\n\t)\r\n\r\n\tconst getSortDirection = name => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) return false;\r\n\t\tif (value > 0) return \"asc\"\r\n\t\treturn \"desc\"\r\n\t}\r\n\r\n\tconst tableHeaders = (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t{columns.map((name, i) => (\r\n\t\t\t\t\t<TableCell key={i}\r\n\t\t\t\t\t\tclassName={classes.root}\r\n\t\t\t\t\t\talign={\"left\"}\r\n\t\t\t\t\t\tpadding=\"none\"\r\n\t\t\t\t\t\tsortDirection={getSortDirection(name)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\tactive={Boolean(sort[name])}\r\n\t\t\t\t\t\t\tdirection={getSortDirection(name) || \"asc\"}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\thandleChange(name)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t)\r\n\r\n\tconst tableBody = (\r\n\t\t<TableBody>\r\n\t\t\t{foods.map((d, i) => (\r\n\t\t\t\t<TableRow\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\thover\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\tonSelectFood(d)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.maintype}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.sidetype.join(\", \")}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.name}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.timeseaten}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.lasteaten && d.lasteaten.length ? \r\n\t\t\t\t\t\tcombineDates(d.lasteaten.map(x => new Date(x)), 1)[0].split(\" - \")[0]\r\n\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.time}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.foodamount}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t</TableRow>\r\n\t\t\t))}\r\n\t\t</TableBody>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{tableToolbar}\r\n\t\t\t<TableContainer>\r\n\t\t\t\t<Table size={'medium'} >\r\n\t\t\t\t\t{tableHeaders}\r\n\t\t\t\t\t{tableBody}\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={count}\r\n\t\t\t\trowsPerPage={limit}\r\n\t\t\t\tonChangeRowsPerPage={e => setLimit(e.target.value)}\r\n\t\t\t\trowsPerPageOptions={[10,20,40,50]}\r\n\t\t\t\tpage={pager}\r\n\t\t\t\tonChangePage={(e, newPage) => {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\tsetPage(newPage)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, Button, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n}))\r\n\r\nexport default ({ open, onCancel, onOk, title, text, cancelText, okText }) => {\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={oncancel} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={onCancel} color=\"primary\">\r\n\t\t\t\t\t\t{cancelText || \"Cancel\"}\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={onOk} color=\"primary\">\r\n\t\t\t\t\t\t{okText || \"Apply\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, OutlinedInput, DialogTitle, DialogContent, TextField, MenuItem, FormControl, InputLabel, Select, Checkbox, ListItemText, FormHelperText } from '@material-ui/core';\r\n\r\nimport { setEditFood, setErrors, selectFood } from './foodAction'\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\twidth: \"250px\",\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\taddButton: {\r\n\t\tminWidth: \"100px\",\r\n\t\tmaxWidth: \"150px\",\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t\tcolor: theme.palette.primary.main\r\n\t},\r\n\tsideType: {\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tdialogContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tmargin: \"auto\",\r\n\t\twidth: \"fit-content\"\r\n\t}\r\n}))\r\n\r\nconst distDayTypes = [\r\n\t{ label: \"1 day\", value: 1 },\r\n\t{ label: \"2 days\", value: 2 },\r\n\t{ label: \"3 days\", value: 3 },\r\n\t{ label: \"4 days\", value: 4 },\r\n\t{ label: \"5 days\", value: 5 },\r\n]\r\n\r\nconst FoodEdit = ({ user, foodEdit, open, onSetEditFood, distMainTypes, distSideTypes, onSaveFood, onDeleteFood, errors, onUpdate }) => {\r\n\tconst classes = useStyles()\r\n\tvar food = Object.assign({}, foodEdit);\r\n\r\n\tconst [mainType, setMainType] = useState(food.maintype)\r\n\tconst [foodAmount, setFoodAmount] = useState(food.foodamount.toString())\r\n\tconst [sideTypes, setSideTypes] = useState(food.sidetype)\r\n\tconst [name, setName] = useState(food.name)\r\n\tconst [recipe, setRecipe] = useState(food.link)\r\n\tconst [eaten, setEaten] = useState(food.timeseaten)\r\n\tconst [cookTime, setCookTime] = useState(food.time)\r\n\tconst [deleteOpen, setDeleteOpen] = useState(false)\r\n\r\n\tconst constructFood = () => {\r\n\t\treturn {\r\n\t\t\t_id: food._id,\r\n\t\t\tname: name,\r\n\t\t\tlink: recipe,\r\n\t\t\tmaintype: mainType,\r\n\t\t\tsidetype: sideTypes,\r\n\t\t\tfoodamount: foodAmount,\r\n\t\t\ttime: cookTime,\r\n\t\t\ttimeseaten: eaten\r\n\t\t}\r\n\t}\r\n\r\n\tconst validateTime = (value) => {\r\n\t\tconst regex = new RegExp(\"[^0-9]\")\r\n\t\tif (regex.test(value)) return\r\n\t\tsetCookTime(value)\r\n\t}\r\n\r\n\tconst SelectField = ({ label, value, onChange, types }) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.selectFieldContainer}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tselect\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e => onChange(e.target.value)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{types.map((x, i) => (\r\n\t\t\t\t\t\t<MenuItem key={i} value={x.value || x}>\r\n\t\t\t\t\t\t\t{x.label || x}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</TextField>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst sideTypeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<FormControl className={classes.selectField} variant=\"outlined\"\r\n\t\t\t\terror={errors.includes(\"side\")}\r\n\t\t\t>\r\n\t\t\t\t<InputLabel className={classes.sideType}>Side Types</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tmultiline={true}\r\n\t\t\t\t\tvalue={sideTypes}\r\n\t\t\t\t\tonChange={e => setSideTypes(e.target.value)}\r\n\t\t\t\t\tinput={<OutlinedInput />}\r\n\t\t\t\t\trenderValue={sideTypes => sideTypes.join(\", \")}\r\n\t\t\t\t>\r\n\t\t\t\t\t{distSideTypes.map(type => (\r\n\t\t\t\t\t\t<MenuItem key={type} value={type}>\r\n\t\t\t\t\t\t\t<Checkbox checked={sideTypes.includes(type)} color=\"primary\" />\r\n\t\t\t\t\t\t\t<ListItemText primary={type} />\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t\t<FormHelperText>{errors.includes(\"side\") ? \"Must have at least one side type\" : \"\"}</FormHelperText>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst nameElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Name\"}\r\n\t\t\t\tvalue={name}\r\n\t\t\t\tmultiline={true}\r\n\t\t\t\tonChange={value => setName(value.target.value)}\r\n\t\t\t\terror={errors.includes(\"name\")}\r\n\t\t\t\thelperText={errors.includes(\"name\") ? \"Name can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst speedElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Cooking Time\"\r\n\t\t\t\tvalue={cookTime}\r\n\t\t\t\tonChange={e => validateTime(e.target.value)}\r\n\t\t\t\terror={errors.includes(\"time\")}\r\n\t\t\t\thelperText={errors.includes(\"time\") ? \"Cooking time can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst recipeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Recipe\"}\r\n\t\t\t\tvalue={recipe}\r\n\t\t\t\tmultiline={!recipe.includes(\"http\")}\r\n\t\t\t\tonChange={e => setRecipe(e.target.value)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst eatenElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Times Eaten\"\r\n\t\t\t\tvalue={eaten}\r\n\t\t\t\tonChange={e => setEaten(e.target.value)}\r\n\t\t\t\tdisabled={user.role !== \"admin\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst editContent = (\r\n\t\t<React.Fragment>\r\n\t\t\t{nameElement}\r\n\t\t\t<SelectField label={\"Main Type\"} value={mainType} onChange={(value) => setMainType(value)} types={distMainTypes} />\r\n\t\t\t{sideTypeElement}\r\n\t\t\t<SelectField label={\"Food Amount\"} value={foodAmount} onChange={(value) => setFoodAmount(value)} types={distDayTypes} />\r\n\t\t\t{speedElement}\r\n\t\t\t{recipeElement}\r\n\t\t\t{eatenElement}\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst deleteFood = (\r\n\t\t<Button startIcon={<DeleteForeverIcon />} onClick={() => setDeleteOpen(true)}>\r\n\t\t\tDelete\r\n\t\t</Button>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={() => onSetEditFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t<div className={classes.center}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t<div className={classes.div} />\r\n\t\t\t\t\t\t{food._id ? deleteFood : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent >\r\n\t\t\t\t\t<form className={classes.dialogContainer} noValidate>\r\n\t\t\t\t\t\t{editContent}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSetEditFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tonUpdate()\r\n\t\t\t\t\t\tonSaveFood(constructFood())\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\t{food.id ? \"Apply\" : \"Add\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<BackDialog\r\n\t\t\t\topen={deleteOpen}\r\n\t\t\t\tonCancel={() => setDeleteOpen(false)}\r\n\t\t\t\tonOk={() => {\r\n\t\t\t\t\tsetDeleteOpen(false)\r\n\t\t\t\t\tonDeleteFood(food._id)\r\n\t\t\t\t\tonUpdate()\r\n\t\t\t\t}}\r\n\t\t\t\ttitle=\"Delete Food\"\r\n\t\t\t\ttext=\"Are you sure?\"\r\n\t\t\t\tokText=\"Delete\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\tconst d = state.food.distincts\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\topen: state.food.foodEditOpen,\r\n\t\tdistMainTypes: d.main || [],\r\n\t\tdistSideTypes: d.side || [],\r\n\t\terrors: state.food.errors\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t\tdispatch(setErrors([]))\r\n\t\t},\r\n\t\tonDeleteFood: (id) => {\r\n\t\t\tif (!id) return\r\n\t\t\tfoods.remove(id)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch(setMessage(\"Food Deleted\"))\r\n\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tonSaveFood: (food) => {\r\n\t\t\tvar errors = []\r\n\t\t\tif (!food.name) errors.push(\"name\")\r\n\t\t\tif (!food.sidetype.length) errors.push(\"side\")\r\n\t\t\tif (!food.time) errors.push(\"time\")\r\n\t\t\tif (errors.length) {\r\n\t\t\t\treturn dispatch(setErrors(errors))\r\n\t\t\t} else {\r\n\t\t\t\tif (food._id) {\r\n\t\t\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('Food Updated'))\r\n\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfoods.create(food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('New Food Added'))\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FoodEdit)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Dialog, DialogActions, TextField, Button, DialogTitle, DialogContent, IconButton, Table, TableRow, TableCell, TableBody, Link, TableHead, Typography } from '@material-ui/core';\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport moment from 'moment-timezone'\r\nimport { selectFood, setEditFood } from './foodAction'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport combineDates from '../core/combineDates';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tspread: theme.spreadDivColumn,\r\n\tcenterColumns: theme.centerDivColumn,\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(3)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\tdatePickerTextfield: {\r\n\t\twidth: \"110px\"\r\n\t},\r\n\tbutton: {\r\n\t\twidth: \"180px\",\r\n\t\theight: \"60px\"\r\n\t}\r\n}))\r\n\r\nmoment.locale(\"en\")\r\nmoment.updateLocale(\"en\", {\r\n\tweek: { dow: 1, doy: 0 }\r\n})\r\n\r\n\r\n// const toFineTime = (time) => {\r\n// \tconst today = new Date()\r\n// \tconst diff = Math.round((today - time) / (24 * 60 * 60 * 1000))\r\n// \tvar ago;\r\n// \tif (diff > 356) {\r\n// \t\tago = \"Over a Year ago\"\r\n// \t} else if (diff > 30) {\r\n// \t\tconst m = Math.round(diff / 30)\r\n// \t\tago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n// \t} else if (diff > 7) {\r\n// \t\tconst w = Math.round(diff / 7)\r\n// \t\tago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n// \t} else if (diff === 0) {\r\n// \t\tago = \"today\"\r\n// \t} else if (diff === -1) {\r\n// \t\tago = \"tomorrow\"\r\n// \t} else if (diff < -1) {\r\n// \t\tago = `in ${diff * (-1)} days`\r\n// \t}\r\n// \treturn `${time.getDate()}.${time.getMonth() + 1}.${time.getFullYear()} - ${ago}`\r\n// }\r\n\r\nconst getLatestFoodInfo = food => {\r\n\tvar lastDate = new Date(food.lasteaten.sort((a, b) => new Date(b) - new Date(a))[0])\r\n\tif (lastDate < new Date()) lastDate = new Date()\r\n\tconst startDate = new Date(lastDate.valueOf() + 24 * 60 * 60 * 1000)\r\n\tconst endDate = new Date(startDate.valueOf() + food.foodamount * 24 * 60 * 60 * 1000)\r\n\treturn {\r\n\t\tstartDate: startDate,\r\n\t\tendDate: endDate\r\n\t}\r\n}\r\n\r\nconst SelectedFood = ({ food, latestFood, onSelectFood, onSetEditFood, onUpdate, onFoodSelection }) => {\r\n\tconst classes = useStyles()\r\n\tconst latestFoodInfo = getLatestFoodInfo(latestFood)\r\n\tconst [startDate, setStartDate] = useState(latestFoodInfo.startDate)\r\n\tconst [endDate, setEndDate] = useState(latestFoodInfo.endDate)\r\n\r\n\tif (!food) return null;\r\n\r\n\tconst handleSelect = () => {\r\n\t\tvar days = [startDate.toDateString()]\r\n\t\tvar currDay = startDate\r\n\t\twhile (true) {\r\n\t\t\tvar newDay = new Date(currDay.valueOf() + 24 * 60 * 60 * 1000)\r\n\t\t\tif (newDay > endDate) break\r\n\t\t\tdays.push(newDay.toDateString())\r\n\t\t\tcurrDay = newDay\r\n\t\t}\r\n\t\tif (!food.lasteaten) food.lasteaten = [];\r\n\t\tfood.lasteaten = food.lasteaten.concat(days)\r\n\t\tfood.timeseaten = food.timeseaten + 1\r\n\t\tonFoodSelection(food)\r\n\t\tonUpdate()\r\n\t}\r\n\r\n\r\n\tconst historyContent = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<Table size=\"small\">\r\n\t\t\t\t<TableHead>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>History</TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t\t{food.lasteaten ? combineDates(food.lasteaten.map(x => new Date(x))).map((f, i) => (\r\n\t\t\t\t\t\t<TableRow key={i}>\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t{f}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t)) : <TableRow><TableCell>No recordings</TableCell></TableRow>}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst selectContent = (\r\n\t\t<div className={classes.centerColumns}>\r\n\t\t\t<div>\r\n\t\t\t\t{food.link.includes(\"http\") || food.link.includes(\"www\") ?\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t<Link href={food.link}>\r\n\t\t\t\t\t\t\tLink To Recipe\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t: null}\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.spread}>\r\n\t\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={startDate}\r\n\t\t\t\t\t\tonChange={date => setStartDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"Start Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={endDate}\r\n\t\t\t\t\t\tonChange={date => setEndDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"End Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tstartIcon={<CheckIcon />}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t\tonClick={handleSelect}\r\n\t\t\t>Select Food</Button>\r\n\t\t\t{historyContent}\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={true} onClose={() => onSelectFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle >\r\n\t\t\t\t\t<div className={classes.spread}>\r\n\t\t\t\t\t\t{food.name}\r\n\t\t\t\t\t\t<IconButton onClick={() => onSetEditFood(food)}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{selectContent}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSelectFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfood: state.food.selectedFood,\r\n\t\tlatestFood: state.food.latestFood,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t},\r\n\t\tonFoodSelection: (food) => {\r\n\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setMessage(`Going to eat ${food.name}`))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tdispatch(setError(err.message))\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectedFood)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { foods } from '../api'\r\nimport Filters from './Filters'\r\nimport Search from './Search'\r\nimport Table from '../core/Table'\r\nimport FoodEdit from './foodEdit'\r\nimport SelectedFood from './SelectedFood'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setFilters, selectFood, setFoods, onSetOpenFilters, distincts, setEditFood, setLatestFood } from './foodAction'\r\nimport { setError } from '../App/AppActions';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: theme.root,\r\n}))\r\n\r\nconst columns = [\"Main\", \"Side\", \"Food\", \"Count\", \"LastEaten\", \"Cooking Time\", \"Food Amount\"]\r\n\r\nconst defaultFood = {\r\n\tname: \"Name\",\r\n\tmaintype: \"liha\",\r\n\tsidetype: [\"pasta\"],\r\n\tfoodamount: 1,\r\n\tlink: \"\",\r\n\ttime: 60,\r\n\ttimeseaten: 0\r\n}\r\n\r\nconst Foods = ({ foods, sort, onSelectFood, onRefresh, filters, search, setOpenFilter, page, limit, selectedFood, foodEdit, initFilters, onSetEditFood }) => {\r\n\tconst classes = useStyles()\r\n\r\n\tif (!foods.limit) {  // Init fetching\r\n\t\tinitFilters()\r\n\t\tonRefresh(page, filters, sort, search, limit)\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<Search search={search} onSelectFood={onSelectFood} />\r\n\t\t\t<Filters\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tcurrentFilters={filters}\r\n\t\t\t\tcurrentSort={sort}\r\n\t\t\t\tonApply={(f, s) => onRefresh(page, f, s, search, limit)}\r\n\t\t\t\tclearFilters={() => initFilters()}\r\n\t\t\t/>\r\n\t\t\t<Table\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tdata={foods}\r\n\t\t\t\tsort={sort}\r\n\t\t\t\tlimit={limit}\r\n\t\t\t\tsetSort={sort => onRefresh(page, filters, sort, search, limit)}\r\n\t\t\t\tsetLimit={limit => onRefresh(page, filters, sort, search, limit)}\r\n\t\t\t\tonSelectFood={onSelectFood}\r\n\t\t\t\tonAddFood={() => onSetEditFood(defaultFood)}\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tsetPage={p => onRefresh(p, filters, sort, search, limit)}\r\n\t\t\t/>\r\n\t\t\t{selectedFood ? <SelectedFood onUpdate={() => onRefresh(page, filters, sort, search, limit)} /> : null}\r\n\t\t\t{foodEdit ? <FoodEdit foodEdit={foodEdit} onUpdate={() => onRefresh(page, filters, sort, search, limit)} /> : null}\r\n\t\t</Paper>\r\n\t)\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfoods: state.food.foods,\r\n\t\tsort: state.food.sort,\r\n\t\tfilters: state.food.filters,\r\n\t\tsearch: state.food.search,\r\n\t\tpage: state.food.page,\r\n\t\tlimit: state.food.limit,\r\n\t\tselectedFood: state.food.selectedFood,\r\n\t\tfoodEdit: state.food.foodEdit,\r\n\t}\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonRefresh: (page, filters, sort, search, limit) => {\r\n\t\t\tfoods.list(filters, page, sort, search, limit)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tdispatch(setFoods({\r\n\t\t\t\t\t\tfoods: result,\r\n\t\t\t\t\t\tfilters: filters,\r\n\t\t\t\t\t\tsort: sort,\r\n\t\t\t\t\t\tpage: page,\r\n\t\t\t\t\t\tlimit: limit,\r\n\t\t\t\t\t\tsearch: search\r\n\t\t\t\t\t}))\r\n\t\t\t\t\tfoods.lastEaten()\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tdispatch(setLatestFood(res))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tsetOpenFilter: () => {\r\n\t\t\tdispatch(onSetOpenFilters())\r\n\t\t},\r\n\t\tinitFilters: () => {\r\n\t\t\tvar filters = {\r\n\t\t\t\tmain: {},\r\n\t\t\t\tside: {},\r\n\t\t\t\tspeed: {$lt: 180},\r\n\t\t\t\tday: {}\r\n\t\t\t}\r\n\t\t\tfoods.distincts()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(distincts(res))\r\n\t\t\t\t\tres.main.forEach(m => {\r\n\t\t\t\t\t\tfilters.main[m] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.side.forEach(s => {\r\n\t\t\t\t\t\tfilters.side[s] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.day.forEach(d => {\r\n\t\t\t\t\t\tfilters.day[d] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tdispatch(setFilters(filters))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => setError(err.message))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Foods)","import React from 'react'\r\n\r\nfunction Shoplist(props) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tshoplist\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Shoplist","export const setData = (data) => {\r\n\treturn { type: \"SET_DATA\", data }\r\n}\r\n\r\nexport const setDeleteId = (id) => {\r\n\treturn { type: \"SET_DELETE_ID\", id}\r\n} \r\n\r\nexport const setDistinctNotes = (notes) => {\r\n    return { type: \"SET_DISTINCT_NOTES\", notes}\r\n}","const formatDate = oDate => {\r\n    let date = new Date(oDate)\r\n    const month = date.getMonth() + 1\r\n    const day = date.getDate()\r\n    return `${day}.${month}`\r\n}\r\n\r\nconst createDefaultContent = (payments, markPaidId) => {\r\n    let paymentText = \"\";\r\n    payments.forEach(p => {\r\n        paymentText += `${p.notes}, ${p.amount}, erpiv: ${formatDate(p.date)} (${p.imageName})\\n`;\r\n    })\r\n    const url = `${process.env.REACT_APP_MAIL_SERVICE_URL}/${markPaidId}`;\r\n    return `Hei,\\n\\nLiitteen taas laskuja:\\n\\n${paymentText}\\n\\n${url}\\n\\nTerveisin,\\nKimi Heinonen\\n`\r\n}\r\n\r\nexport const openOnMail = (payments, markPaidId) => {\r\n    let from = process.env.REACT_APP_MAIL_FROM;\r\n    let to = process.env.REACT_APP_MAIL_TO;\r\n    let title = \"Laskuja\";\r\n    let content = createDefaultContent(payments, markPaidId);\r\n    window.open(`mailto:${to}?subject=${title}&body=${encodeURIComponent(content)}`);\r\n}","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Checkbox, FormControlLabel, Tooltip } from '@material-ui/core';\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty';\r\nimport HourglassFullIcon from '@material-ui/icons/HourglassFull';\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n}))\r\n\r\n// mailed and paid --> Disabled and checked\r\n// mailed but pending --> Custom icon\r\n// not mailed and no pdf --> disabled\r\n// not mailed and pdf --> normal \r\n\r\nconst TableRowCheckBox = props => {\r\n    const classes = useStyles()\r\n    const { rowData, onChange, toMailList } = props;\r\n\r\n    const mailedAndPaid = rowData.mailed && rowData.paid;\r\n    const mailedAndPending = rowData.mailed && rowData.paid === false;\r\n    const notMailedNoPDF = !rowData.mailed && rowData.imageData == null;\r\n\r\n    let component, toolTipText;\r\n    if (mailedAndPaid) {\r\n        toolTipText = \"Mailed and paid\";\r\n        component = <Checkbox disabled checked icon={<DoneAllIcon />} color=\"primary\" />\r\n    }\r\n    else if (mailedAndPending) {\r\n        toolTipText = \"Mailed and pending\";\r\n        component = <Checkbox\r\n            icon={<HourglassEmptyIcon />}\r\n            checkedIcon={<HourglassFullIcon />}\r\n            checked={toMailList.find(x => x._id === rowData._id) != null}\r\n            color=\"primary\"\r\n            onChange={onChange}\r\n        />\r\n    }\r\n    else if (notMailedNoPDF) {\r\n        toolTipText = \"Missing pdf - cant mail\";\r\n        component = <Checkbox disabled checked={false} color=\"primary\" />\r\n    } else {\r\n        toolTipText = \"Not mailed\";\r\n        component = <Checkbox\r\n            color=\"primary\"\r\n            onChange={onChange}\r\n            checked={toMailList.find(x => x._id === rowData._id) != null}\r\n        />\r\n    }\r\n\r\n    return (\r\n        <Tooltip title={toolTipText}>\r\n            <span>\r\n                {component}\r\n            </span>\r\n        </Tooltip>\r\n    )\r\n}\r\n\r\nexport default TableRowCheckBox","import React, { useState, useEffect } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper, Button, TextField, Table, TableContainer, TableRow, TableCell, TableBody, TableHead, InputAdornment, IconButton, Checkbox, Tooltip } from '@material-ui/core'\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport { connect } from 'react-redux'\r\n\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\r\n\r\nimport { boldSearch } from '../core/BoldSearch'\r\nimport { payments, pendingPayments } from '../api'\r\nimport { setError, setMessage } from '../App/AppActions';\r\nimport { setData, setDeleteId, setDistinctNotes } from './paymentAction'\r\nimport { openOnMail } from './MailDialog'\r\nimport TableRowCheckBox from './TableRowCheckBox'\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: theme.root,\r\n    centerDivColumn: theme.centerDivColumn,\r\n    spacings: {\r\n        padding: theme.spacing(2),\r\n        width: \"10px\"\r\n    },\r\n    datePickerTextfieldWide: {\r\n        width: \"110px\"\r\n    },\r\n    datePickerTextfieldSmall: {\r\n        width: \"70px\"\r\n    },\r\n    tableIcon: {\r\n        width: \"5px\"\r\n    },\r\n    spacing: {\r\n        margin: theme.spacing(2),\r\n        width: \"200px\"\r\n    },\r\n    sendMailButton: {\r\n        marginLeft: \"-30px\",\r\n        marginRight: \"-30px\"\r\n    }\r\n}))\r\n\r\n// const MONHTLY_ALLOWANCE = 700\r\n\r\nconst formatDate = date => {\r\n    if (typeof date === \"string\") date = new Date(date)\r\n    const year = date.getFullYear()\r\n    const month = date.getMonth() + 1\r\n    const day = date.getDate()\r\n    return `${day}.${month}.${year}`\r\n}\r\n\r\nconst formatNotes = note => {\r\n    if (!note) return \"\"\r\n    if (note.length < 50) return note;\r\n    return `${note.substr(0, 50)}...`\r\n}\r\n\r\nconst firstDate = new Date(2020, 0, 1)\r\nconst yearStart = new Date(new Date().getUTCFullYear(), 0, 1)\r\nconst yearEnd = new Date(new Date().getUTCFullYear(), 11, 31)\r\n\r\nfunction Payments(props) {\r\n    const classes = useStyles()\r\n    const { data, deleteId, distinctNotes } = props;\r\n    const { onGetData, onAddPayment, onSetDeleteId, onDeletePayment, onGetDistinctNotes, onSendMail } = props;\r\n\r\n    const [date, setDate] = useState(new Date())\r\n    const [amount, setAmount] = useState(\"\")\r\n    const [note, setNote] = useState(\"\")\r\n    const [autoCompleteKey, setAutoCompleteKey] = useState(true)\r\n    const [startDate, setStartDate] = useState(yearStart)\r\n    const [endDate, setEndDate] = useState(yearEnd)\r\n    const [image, setImage] = useState({});\r\n    const [inputRef, setInputRef] = useState(null);\r\n    const [toMailList, setToMailList] = useState([])\r\n\r\n    var total, perMonth;\r\n    useEffect(() => {\r\n        onGetData(startDate, endDate);\r\n    }, [startDate, endDate, onGetData])\r\n\r\n    useEffect(() => {\r\n        if (distinctNotes.length === 0)\r\n            onGetDistinctNotes();\r\n    }, [onGetDistinctNotes, distinctNotes])\r\n\r\n    if (data) {\r\n        total = data.reduce((total, x) => total + x.amount, 0).toFixed(1)\r\n        const months = data.length ? (new Date(data[0].date).getMonth() - startDate.getMonth()) : 1;\r\n\r\n        perMonth = (total / months).toFixed(1);\r\n    }\r\n    const handleAddPayment = () => {\r\n        if (parseFloat(amount) <= 0) return\r\n        let payment = { date: date, amount: amount, notes: note }\r\n        if (image.name || image.data)\r\n            payment = { ...payment, imageName: image.name, imageData: image.data }\r\n        onAddPayment(payment, startDate, endDate)\r\n        setDate(new Date())\r\n        setAmount(\"\")\r\n        setNote(\"\")\r\n        setAutoCompleteKey(!autoCompleteKey) // To re-render cleared autoComplete\r\n        setImage({})\r\n    }\r\n\r\n    const AddImage = () => {\r\n        if ((image.name || image.data) && !window.confirm(\"Replace current image?\")) {\r\n            return;\r\n        }\r\n        if (!inputRef) {\r\n            console.error(\"No input Ref!!\")\r\n        } else {\r\n            inputRef.click();\r\n        }\r\n    }\r\n\r\n    const loadFile = () => {\r\n        if (typeof window.FileReader !== 'function') {\r\n            alert(\"The file API isn't supported on this browser yet.\");\r\n            return;\r\n        }\r\n        let input = document.getElementById('fileinput');\r\n        if (!input) {\r\n            alert(\"Um, couldn't find the fileinput element.\");\r\n        }\r\n        else if (!input.files) {\r\n            alert(\"This browser doesn't seem to support the 'files' property of file inputs.\");\r\n        }\r\n        else if (!input.files[0]) {\r\n            alert(\"Please select an Excel file before clicking 'Process'\");\r\n        }\r\n        else {\r\n            const selectedFile = input.files[0]\r\n\r\n            input.files = null // Without these the second upload try won't fire the onChange event\r\n            input.value = ''\r\n\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = e => {\r\n                setImage({\r\n                    name: selectedFile.name,\r\n                    data: e.target.result\r\n                })\r\n            }\r\n            fileReader.readAsDataURL(selectedFile);\r\n        }\r\n    }\r\n\r\n    const downloadImage = (image) => {\r\n        var a = document.createElement(\"a\");\r\n        a.href = image.data;\r\n        a.download = image.name;\r\n        a.click();\r\n    }\r\n\r\n    const handleMailList = (data) => {\r\n        // Already in the list -> remove it\r\n        if (toMailList.find(d => d._id === data._id) != null) {\r\n            setToMailList(toMailList.filter(x => x._id !== data._id));\r\n        } else {\r\n            toMailList.push(data);\r\n            setToMailList([...toMailList]);\r\n        }\r\n    }\r\n\r\n    const openMailAndMarkSend = () => {\r\n        const pending = {\r\n            isMarked: false,\r\n            ids: toMailList.map(x => x._id)\r\n        }\r\n        pendingPayments.create(pending)\r\n            .then(pendingEntity => {\r\n                openOnMail(toMailList, pendingEntity._id);\r\n                onSendMail(startDate, endDate, toMailList);\r\n                setToMailList([])\r\n            })\r\n            .catch(err => console.error(err))\r\n    }\r\n\r\n    const datePicker = (label, value, setValue, views, format, minDate = new Date(2020, 0, 1), maxDate = yearEnd) => (\r\n        <MuiPickersUtilsProvider utils={MomentUtils}>\r\n            <DatePicker\r\n                label={label}\r\n                format={format}\r\n                views={views}\r\n                minDate={minDate}\r\n                maxDate={maxDate}\r\n                showTodayButton={true}\r\n                value={value}\r\n                onChange={date => setValue(date._d)}\r\n                animateYearScrolling\r\n                TextFieldComponent={(props) => (\r\n                    <TextField\r\n                        label={label}\r\n                        onClick={props.onClick}\r\n                        value={props.value}\r\n                        InputProps={{\r\n                            endAdornment: <TodayIcon />\r\n                        }}\r\n                        size=\"small\"\r\n                        className={format.split(\".\").length > 2 ? classes.datePickerTextfieldWide : classes.datePickerTextfieldSmall}\r\n                    />\r\n                )}\r\n            />\r\n        </MuiPickersUtilsProvider>\r\n    )\r\n\r\n    const addPayment = (\r\n        <div className={classes.centerDivColumn}>\r\n            <div className={`${classes.spacing} ${classes.centerDivColumn}`}>\r\n                {datePicker(\"Date\", date, setDate, [\"year\", \"month\", \"date\"], \"DD.MM.YYYY\")}\r\n            </div>\r\n            <div className={classes.spacing}>\r\n                <TextField\r\n                    value={amount}\r\n                    type=\"number\"\r\n                    variant=\"outlined\"\r\n                    onChange={e => setAmount(e.target.value.replace(\",\", \".\"))}\r\n                    InputProps={{\r\n                        endAdornment: <InputAdornment position=\"end\"></InputAdornment>,\r\n                    }}\r\n                />\r\n            </div>\r\n            <div className={classes.spacing}>\r\n                <Autocomplete\r\n                    key={autoCompleteKey}\r\n                    freeSolo\r\n                    options={distinctNotes}\r\n                    renderOption={option => boldSearch(option, note)}\r\n                    renderInput={props =>\r\n                        <TextField\r\n                            {...props}\r\n                            label=\"Note\"\r\n                            value={note}\r\n                            fullWidth\r\n                            onChange={e => setNote(e.target.value)} />\r\n                    }\r\n                    onChange={(e, value) => setNote(value || \"\")}\r\n                />\r\n            </div>\r\n            <Button\r\n                className={classes.spacing}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => AddImage()}>\r\n                Add Image\r\n            </Button>\r\n            {image.name &&\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Button onClick={() => downloadImage(image)}>\r\n                        {image.name}\r\n                    </Button>\r\n                    <IconButton onClick={() => setImage({})}>\r\n                        <DeleteForeverIcon />\r\n                    </IconButton>\r\n                </div>}\r\n            <Button\r\n                className={classes.spacing}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<AddIcon />}\r\n                onClick={() => handleAddPayment()}>\r\n                Add Payment\r\n\t\t\t</Button>\r\n        </div>\r\n    )\r\n\r\n    const table = (\r\n        <TableContainer component={Paper}>\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>\r\n                            {datePicker(\"from\", startDate, setStartDate, [\"year\", \"month\"], \"MM.YY\", firstDate, endDate)}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            {datePicker(\"to\", endDate, setEndDate, [\"year\", \"month\"], \"MM.YY\", startDate, yearEnd)}\r\n                        </TableCell>\r\n                        <TableCell>{`Total: ${total} `}</TableCell>\r\n                        <TableCell>{`PerMonth: ${perMonth} `}</TableCell>\r\n                        <TableCell />\r\n                        <TableCell />\r\n                        <TableCell />\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>Created</TableCell>\r\n                        <TableCell>Bill Due</TableCell>\r\n                        <TableCell>Amount</TableCell>\r\n                        <TableCell>Notes</TableCell>\r\n                        <TableCell>Pdf</TableCell>\r\n                        <TableCell>\r\n                            {toMailList.length > 0 ?\r\n                                <Button variant=\"contained\" color=\"primary\"\r\n                                    className={classes.sendMailButton}\r\n                                    onClick={openMailAndMarkSend}\r\n                                    endIcon={<MailIcon />}>\r\n                                    Send\r\n                                </Button>\r\n                                : <IconButton disabled ><MailIcon /></IconButton>}\r\n                        </TableCell>\r\n                        <TableCell className={classes.tableIcon}></TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {data ? data.map(d => (\r\n                        <TableRow key={d.date}>\r\n                            <TableCell>{formatDate(d.createdAt)}</TableCell>\r\n                            <TableCell>{formatDate(d.date)}</TableCell>\r\n                            <TableCell>{d.amount} </TableCell>\r\n                            <TableCell>{formatNotes(d.notes)}</TableCell>\r\n                            <TableCell>\r\n                                {d.imageName &&\r\n                                    <Button onClick={() => downloadImage({ name: d.imageName, data: d.imageData })}>\r\n                                        {d.imageName}\r\n                                    </Button>\r\n                                }\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <TableRowCheckBox\r\n                                    rowData={d}\r\n                                    onChange={() => handleMailList(d)}\r\n                                    toMailList={toMailList}\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell className={classes.tableIcon}>\r\n                                <IconButton onClick={() => onSetDeleteId(d._id)}>\r\n                                    <DeleteForeverIcon />\r\n                                </IconButton>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    )) : null}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n    return (\r\n        <React.Fragment>\r\n            <Paper className={classes.root}>\r\n                {addPayment}\r\n            </Paper>\r\n            {table}\r\n            <BackDialog\r\n                open={Boolean(deleteId)}\r\n                onClose={() => onSetDeleteId(null)}\r\n                title=\"Delete payment\"\r\n                text=\"Are you sure?\"\r\n                okText={\"Delete\"}\r\n                onOk={() => onDeletePayment(deleteId, startDate, endDate)}\r\n            />\r\n            <input type=\"file\"\r\n                id=\"fileinput\"\r\n                style={{ display: \"none\" }}\r\n                accept=\".pdf\"\r\n                ref={elem => setInputRef(elem)}\r\n                onChange={() => loadFile()} />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        data: state.payment.data,\r\n        deleteId: state.payment.deleteId,\r\n        distinctNotes: state.payment.distinctNotes,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    const getData = (start, end) => {\r\n        payments.list({\r\n            date: {\r\n                $gt: start,\r\n                $lt: end\r\n            },\r\n            $sort: {\r\n                createdAt: -1\r\n            }\r\n        }).then(res => dispatch(setData(res.data)))\r\n            .catch(err => dispatch(setError(err.message)))\r\n    }\r\n    return {\r\n        onGetData: (start, end) => getData(start, end),\r\n        onAddPayment: (payment, start, end) => {\r\n            payments.create(payment)\r\n                .then(res => {\r\n                    dispatch(setMessage(\"Payment Added\"))\r\n                    getData(start, end)\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onSetDeleteId: (id) => {\r\n            dispatch(setDeleteId(id))\r\n        },\r\n        onDeletePayment: (id, start, end) => {\r\n            payments.remove(id)\r\n                .then(res => {\r\n                    dispatch(setMessage(\"Payment Deleted\"))\r\n                    dispatch(setDeleteId(null))\r\n                    getData(start, end)\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onGetDistinctNotes: () => {\r\n            payments.list({})\r\n                .then(res => {\r\n                    const allNotes = res.data.map(x => x.notes)\r\n                    const distinctNotes = [...new Set(allNotes)]\r\n                    if (distinctNotes.length === 0)\r\n                        distinctNotes.push(\"...\")\r\n                    dispatch(setDistinctNotes(distinctNotes))\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onSendMail: async (start, end, paymentList) => {\r\n            for (let index = 0; index < paymentList.length; index++) {\r\n                const payment = paymentList[index];\r\n                await payments.patch(payment._id, { mailed: true });\r\n            }\r\n            getData(start, end);\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Payments)","import React, { useEffect, useState } from 'react'\r\n\r\nimport { pendingPayments } from '../api'\r\nimport { Button, Dialog, DialogActions, DialogContent } from '@material-ui/core';\r\n\r\nconst MarkPendingPayments = props => {\r\n    const [state, setState] = useState({\r\n        dialogOpen: false,\r\n        seconds: 0\r\n    })\r\n    const id = props.params.id;\r\n\r\n    useEffect(() => {\r\n        let timer;\r\n        if (!state.dialogOpen)\r\n            return;\r\n\r\n        if (state.seconds === 0) {\r\n            closeAndRedirect();\r\n        } else {\r\n            let newSeconds = state.seconds - 1;\r\n            timer = setTimeout(() => setState({ ...state, seconds: newSeconds }), 1000);\r\n        }\r\n        return () => clearTimeout(timer);\r\n    }, [state.seconds])\r\n\r\n    const closeAndRedirect = () => {\r\n        setState({ dialogOpen: false, seconds: 0 })\r\n        window.close();\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            pendingPayments.get(id.replace(\":\", \"\"))\r\n                .then(res => {\r\n                    if (res && res.alreadyMarked) {\r\n                        window.close();\r\n                    } else {\r\n                        setState({ dialogOpen: true, seconds: 5 })\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                    window.close();\r\n                })\r\n        } else {\r\n            window.close();\r\n        }\r\n    }, [])\r\n\r\n    console.log(\"FOOBAR\")\r\n\r\n    return (\r\n        <Dialog open={state.dialogOpen}>\r\n            <DialogContent>\r\n                {`Laskut merkattu maksetuksi\\n\\n\r\n\r\n    Tm sulkeutuu automaattisesti ${state.seconds} sekunnin kuluttua...`}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={() => closeAndRedirect()}>\r\n                    Close\r\n        </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default MarkPendingPayments","import React, { useEffect, useCallback } from 'react'\r\n\r\nimport { Paper, IconButton } from '@material-ui/core'\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport { binanceApi } from '../api';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: theme.monitor.paper,\r\n    floatRight: theme.monitor.floatRight,\r\n    horizontal: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\"\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    up: {\r\n        color: \"green\"\r\n    },\r\n    down: {\r\n        color: \"red\"\r\n    }\r\n}))\r\n\r\nconst binanceFoo = [{\r\n    askPrice: 28194.14000000,\r\n    askQty: 0.00071100,\r\n    bidPrice: 28190.56000000,\r\n    bidQty: 0.01496000,\r\n    closeTime: 1625943213703,\r\n    count: 57461,\r\n    firstId: 56346219,\r\n    highPrice: 28873.33000000,\r\n    lastId: 56403679,\r\n    lastPrice: 28189.23000000,\r\n    lastQty: 0.00206800,\r\n    lowPrice: 28019.55000000,\r\n    openPrice: 28140.19000000,\r\n    openTime: 1625856813703,\r\n    prevClosePrice: 28144.97000000,\r\n    priceChange: 49.04000000,\r\n    priceChangePercent: 0.174,\r\n    quoteVolume: 41071006.63447189,\r\n    symbol: \"BTCEUR\",\r\n    volume: 1443.29207600,\r\n    weightedAvgPrice: 28456.47621672,\r\n},\r\n{\r\n    askPrice: 0.06256900,\r\n    askQty: 32.42100000,\r\n    bidPrice: 0.06256800,\r\n    bidQty: 0.32000000,\r\n    closeTime: 1625943213687,\r\n    count: 146086,\r\n    firstId: 282229466,\r\n    highPrice: 0.06410600,\r\n    lastId: 282375551,\r\n    lastPrice: 0.06256900,\r\n    lastQty: 0.31900000,\r\n    lowPrice: 0.06202100,\r\n    openPrice: 0.06386800,\r\n    openTime: 1625856813687,\r\n    prevClosePrice: 0.06387300,\r\n    priceChange: -0.00129900,\r\n    priceChangePercent: -2.034,\r\n    quoteVolume: 6506.87270971,\r\n    symbol: \"ETHBTC\",\r\n    volume: 103275.20500000,\r\n    weightedAvgPrice: 0.06300518,\r\n}]\r\n\r\nconst parseBinanceData = data => {\r\n    let parsed = []\r\n\r\n    let btc = data.find(x => x.symbol === \"BTCEUR\");\r\n    if (btc) {\r\n        parsed.push({\r\n            symbol: \"BTC\",\r\n            icon: 'BTC.png',\r\n            price: parseFloat(btc.lastPrice),\r\n            changePrice: parseFloat(btc.priceChange),\r\n            changePercent: parseFloat(btc.priceChangePercent),\r\n        })\r\n    } else {\r\n        return parsed\r\n    }\r\n\r\n    let eth = data.find(x => x.symbol === \"ETHBTC\");\r\n    if (eth) {\r\n        parsed.push({\r\n            symbol: \"ETH\",\r\n            icon: 'ETH.png',\r\n            price: parseFloat(eth.lastPrice) * parseFloat(btc.lastPrice),\r\n            changePrice: parseFloat(eth.priceChange),\r\n            changePercent: parseFloat(eth.priceChangePercent),\r\n        })\r\n    }\r\n\r\n    return parsed;\r\n}\r\n\r\nconst BinanceMonitor = ({ refresh, data, setData }) => {\r\n    const fetchBinance = process.env.NODE_ENV == 'production';\r\n    const classes = useStyles()\r\n\r\n    const fetchData = useCallback(() => {\r\n        if (fetchBinance) {\r\n            binanceApi.find({ symbols: [\"BTCEUR\", \"ETHBTC\"] })\r\n                .then(res => {\r\n                    console.log(\"GOT BINANCE DATA: \", res)\r\n                    setData(parseBinanceData(res))\r\n                })\r\n                .catch(err => {\r\n                    console.log(\"Binance ERROR: \", err)\r\n                })\r\n        } else {\r\n            setData(parseBinanceData(binanceFoo))\r\n        }\r\n    }, [fetchBinance, setData])\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [refresh])\r\n\r\n    if (!data) {\r\n        return <></>\r\n    }\r\n\r\n    return (\r\n        <Paper elevation={4} className={classes.paper}>\r\n            <IconButton className={classes.floatRight} onClick={() => fetchData()}>\r\n                <RefreshIcon color=\"primary\" />\r\n            </IconButton>\r\n            {data.map(x => (\r\n                <div className={classes.horizontal} key={x.symbol}>\r\n                    {/* <img source={`./public/${x.icon}`} alt={x.name} /> */}\r\n                    <p className={classes.margin} >{x.symbol}</p>\r\n                    <p className={classes.margin} >{x.price?.toFixed(0)} </p>\r\n                    <div style={{ display: \"contents\" }}>\r\n                        <p className={classes.margin}>{x.changePercent?.toFixed(1)} %</p>\r\n                        {x.changePrice > 0 ?\r\n                            <ArrowDropUpIcon className={classes.up} /> :\r\n                            <ArrowDropDownIcon className={classes.down} />\r\n                        }\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default BinanceMonitor","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useCustomCompareEffect } from \"use-custom-compare\";\r\n\r\nimport { XYPlot, ArcSeries } from 'react-vis'\r\nimport { Paper, IconButton } from '@material-ui/core'\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport { nhApi } from '../api';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport isEqual from 'lodash/isEqual'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: theme.monitor.paper,\r\n    floatRight: theme.monitor.floatRight,\r\n    background: theme.monitor.lightBackground,\r\n    labelContainer: {\r\n        position: \"absolute\",\r\n        top: \"72px\",\r\n        left: \"calc(50% - 80px)\",\r\n        height: \"100px\",\r\n        width: \"150px\",\r\n        textAlign: \"center\"\r\n    },\r\n    labelStyle: {\r\n        lineHeight: \"8px\"\r\n    },\r\n    arcplotStyle: {\r\n        position: \"absolute\"\r\n    },\r\n}))\r\n\r\nconst nhFoo = {\r\n    devicesStatuses: { MINING: 2, DISABLED: 1 },\r\n    minerStatuses: { MINING: 1 },\r\n    miningRigs: [{\r\n        devices: [\r\n            { name: \"cpu\", deviceType: { enumName: \"CPU\", description: \"cpu\" } },\r\n            {\r\n                deviceType: { enumName: \"NVIDIA\", description: \"Nvidia\" },\r\n                id: \"2-GSrqi-ksfl+Woiv9mQxH-Q\",\r\n                intensity: { enumName: \"LOW\", description: \"Low power mode\" },\r\n                load: 100,\r\n                name: \"ASUS NVIDIA GeForce RTX 2070\",\r\n                nhqm: \"\",\r\n                powerMode: { enumName: \"HIGH\", description: \"High power mode\" },\r\n                powerUsage: 121,\r\n                revolutionsPerMinute: -1,\r\n                revolutionsPerMinutePercentage: 73,\r\n                speeds: [\r\n                    {\r\n                        algorithm: \"DAGGERHASHIMOTO\",\r\n                        displaySuffix: \"MH\",\r\n                        speed: \"42.44745200\",\r\n                        title: \"DaggerHashimoto\",\r\n                    }\r\n                ],\r\n                status: { enumName: \"MINING\", description: \"Mining\" },\r\n            },\r\n            {\r\n                deviceType: { enumName: \"NVIDIA\", description: \"Nvidia\" },\r\n                id: \"2-GSrqi-ksfl+Woiv9mQxH-Q\",\r\n                intensity: { enumName: \"LOW\", description: \"Low power mode\" },\r\n                load: 100,\r\n                name: \"ASUS NVIDIA GeForce RTX 3090\",\r\n                nhqm: \"\",\r\n                powerMode: { enumName: \"HIGH\", description: \"High power mode\" },\r\n                powerUsage: 270,\r\n                revolutionsPerMinute: -1,\r\n                revolutionsPerMinutePercentage: 73,\r\n                speeds: [\r\n                    {\r\n                        algorithm: \"DAGGERHASHIMOTO\",\r\n                        displaySuffix: \"MH\",\r\n                        speed: \"100.44745200\",\r\n                        title: \"DaggerHashimoto\",\r\n                    }\r\n                ],\r\n                status: { enumName: \"MINING\", description: \"Mining\" },\r\n            }\r\n        ],\r\n        joinTime: 1625902469,\r\n        localProfitability: 0.0002364248037036576,\r\n        minerStatus: \"MINING\",\r\n        name: \"worker1\",\r\n        profitability: 0.00019872000000000002,\r\n        rigId: \"0-UhsRoOB50F6xOsjWpruBIg\",\r\n        rigPowerMode: \"HIGH\",\r\n        softwareVersions: \"NHM/3.0.6.5\",\r\n        stats: [{\r\n            algorithm: { enumName: \"DAGGERHASHIMOTO\", description: \"DaggerHashimoto\" },\r\n            difficulty: 0.05466773208073769,\r\n            market: \"EU\",\r\n            profitability: 0.00019872000000000002,\r\n            proxyId: 1,\r\n            speedAccepted: 120.22248971989666,\r\n            speedRejectedR1Target: 0.7826537381108614,\r\n            speedRejectedR2Stale: 1.5653074762217227,\r\n            speedRejectedR3Duplicate: 0,\r\n            speedRejectedR4NTime: 0,\r\n            speedRejectedR5Other: 1.5653074762217227,\r\n            speedRejectedTotal: 3.9132686905543066,\r\n            statsTime: 1625924868000,\r\n            timeConnected: 1625902483796,\r\n            unpaidAmount: \"0.00001701\",\r\n            xnsub: true\r\n        }]\r\n    }],\r\n    totalDevices: 2,\r\n    totalProfitability: 0.00019872000000000002,\r\n    totalProfitabilityLocal: 0.0002364248037036576,\r\n    totalRigs: 1,\r\n    unpaidAmount: \"0.00001701\",\r\n}\r\n\r\nconst PI = Math.PI\r\n\r\nconst parseData = data => {\r\n    var devices = data.miningRigs[0].devices\r\n        .filter(x => x.deviceType.enumName !== \"CPU\")\r\n        .map(x => ({\r\n            name: x.name,\r\n            powerUsage: x.powerUsage,\r\n            status: x.status.description,\r\n            speed: x.speeds\r\n        }))\r\n\r\n    var totalSpeed = devices.reduce((a, b) => a + b.speed.reduce((c, d) => c + Number(d.speed), 0), 0);\r\n    return {\r\n        status: data.devicesStatuses,\r\n        profitabilityBTC: data.totalProfitability,\r\n        totalSpeed: totalSpeed,\r\n        devices: devices\r\n    }\r\n}\r\n\r\nconst combineDatas = (nhData, hwinfoData) => {\r\n    if (!nhData || !nhData.devices)\r\n        return nhData;\r\n\r\n    if (hwinfoData && hwinfoData[0]) {\r\n        Object.keys(hwinfoData[0])\r\n            .forEach(x => {\r\n                var device = nhData.devices.find(d => d.name.includes(x))\r\n                if (device) {\r\n                    Object.keys(hwinfoData[0][x]).forEach(n => {\r\n                        device[n.replace(\"GPU\", \"\")] = hwinfoData[0][x][n];;\r\n                    })\r\n                }\r\n            })\r\n        nhData.totalGPUPower = nhData.devices.reduce((a, b) => a + b.Power, 0);\r\n        nhData.totalPower = nhData.totalGPUPower + hwinfoData[0].CPUPower + 50; // Constant 50 for basic PC power consumption\r\n    }\r\n\r\n    return nhData\r\n}\r\n\r\nconst getColor = (value, idealMin, idealMax, absMin, absMAx) => {\r\n    if (value <= absMin)\r\n        return \"#00ffff\"; // Cyan\r\n    if (value <= idealMin)\r\n        return \"#00dba4\"; // Green-Cyan\r\n    if (value <= idealMax)\r\n        return \"#00bd00\"; // Green\r\n    if (value <= absMAx)\r\n        return \"#FF8C00\"; // Dark Orange\r\n    return \"#FF0000\"; // Red\r\n}\r\n\r\nconst GenerateData = (value, radiusStart, height, idealMin, idealMax, absMin, absMax, label) => {\r\n    // Angle is half circle => [-pi /2, pi / 2]\r\n    let angle = - PI * (0.5) + (value / absMax) * PI\r\n    let color = getColor(value, idealMin, idealMax, absMin, absMax);\r\n    return { angle0: -PI * (0.5), angle: angle, radius0: radiusStart, radius: height, color: color, label: label }\r\n}\r\n\r\nconst CustomCompare = (prevDeps, nextDeps) => {\r\n    // nhData = [0], hwinfoData = [1]\r\n    if (!nextDeps[0] || !nextDeps[0].devices || !(nextDeps[1] && nextDeps[1][0]))\r\n        return true;\r\n\r\n    // Currentyl woudld onyl need memJuncTemp, totalGPUpower and totalSpeed\r\n    return isEqual(prevDeps, nextDeps)\r\n}\r\n\r\nconst NHMonitor = ({ data, setData, setCombData, hwinfoData, refresh }) => {\r\n    const fetchNH = process.env.NODE_ENV == 'production';\r\n    const classes = useStyles()\r\n    const [generatedData, setGeneratedData] = useState({\r\n        data: [],\r\n        labels: []\r\n    })\r\n\r\n    const fetchData = useCallback(() => {\r\n        if (fetchNH) {\r\n            nhApi.get()\r\n                .then(res => {\r\n                    setData(parseData(res))\r\n                    // res.deviceStatuses.INACTIVE = 2 // When offline TODO IMPLEMENT\r\n                })\r\n                .catch(err => {\r\n                    console.log(\"NH ERROR: \", err)\r\n                })\r\n        } else {\r\n            setData(parseData(nhFoo))\r\n        }\r\n    }, [fetchNH])\r\n\r\n    useEffect(fetchData, [refresh])\r\n    useCustomCompareEffect(\r\n        () => {\r\n            const combinedData = combineDatas(data, hwinfoData);\r\n            console.log(\"Combined data: \", combinedData)\r\n            if (!Object.keys(combinedData).length)\r\n                return;\r\n            setCombData(combinedData)\r\n            setGeneratedData({\r\n                data: [\r\n                    combinedData.devices?.length > 1 && GenerateData(combinedData.devices[1].MemJunctTemp, 2.30, 2.75, 90, 98, 80, 102, \"MemJunc\"),\r\n                    GenerateData(combinedData.totalGPUPower, 2.15, 2.25, 390, 410, 150, 500, \"Power\"),\r\n                    GenerateData(combinedData.totalSpeed, 2.00, 2.10, 135, 150, 50, 160, \"Speed\"),\r\n                ],\r\n                labels: [\r\n                    combinedData.devices.length > 1 && <div key={\"MemJuncLabel\"}><p className={classes.labelStyle}>Mem: {combinedData.devices[1].MemJunctTemp?.toFixed(0)} &deg;</p></div>,\r\n                    <div key={\"PowerLabel\"}><p className={classes.labelStyle}>Power: {combinedData.totalSpeed?.toFixed(0)} W</p></div>,\r\n                    <div key={\"SpeedLabel\"}><p className={classes.labelStyle}>Speed: {combinedData.totalSpeed?.toFixed(1)} MH/s</p></div>\r\n                ]\r\n            })\r\n        },\r\n        [data, hwinfoData],\r\n        (prevDeps, nextDeps) => CustomCompare(prevDeps, nextDeps)\r\n    )\r\n\r\n    // TODO Add layouts for more spefici info per gpu!\r\n    return (\r\n        <>\r\n            <Paper elevation={4} className={classes.paper} style={{ position: \"relative\", height: \"200px\" }}>\r\n                <IconButton className={classes.floatRight} onClick={() => fetchData()}>\r\n                    <RefreshIcon color=\"primary\" />\r\n                </IconButton>\r\n                <XYPlot\r\n                    className={classes.arcplotStyle}\r\n                    xDomain={[-3, 3]}\r\n                    yDomain={[-3, 3]}\r\n                    width={300}\r\n                    height={300}>\r\n                    <ArcSeries\r\n                        colorType=\"literal\"\r\n                        animation={{\r\n                            damping: 9,\r\n                            stiffness: 300\r\n                        }}\r\n                        radiusDomain={[0, 3]}\r\n                        data={generatedData.data}\r\n                        getLabel={d => d.name}\r\n                    />\r\n                </XYPlot>\r\n                {<div className={classes.labelContainer}>\r\n                    {generatedData.labels}\r\n                </div>\r\n                }\r\n            </Paper>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default NHMonitor","import React, { useState } from 'react'\r\nimport { useCustomCompareEffect } from \"use-custom-compare\";\r\n\r\nimport { Paper, Button, Tabs, Tab, TextField } from '@material-ui/core'\r\nimport FlashOnIcon from '@material-ui/icons/FlashOn';\r\nimport FlashOffIcon from '@material-ui/icons/FlashOff';\r\nimport SwipeableViews from 'react-swipeable-views';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        ...theme.monitor.paper,\r\n        marginTop: \"0px\",\r\n        marginBottom: \"0px\"\r\n    },\r\n    profitabilityContainer: {\r\n        textAlign: \"center\"\r\n    },\r\n    profitabilityProjectorContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-around\"\r\n    },\r\n    labelStyle: {\r\n        lineHeight: \"8px\"\r\n    },\r\n    profitLabelStyle: {\r\n        color: \"#00bd00\",\r\n        fontSize: \"18px\"\r\n    },\r\n    centered: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\"\r\n    },\r\n    tabRoot: {\r\n        visibility: \"collapse\",\r\n        minHeight: \"0px\",\r\n        height: \"0px\"\r\n    },\r\n    whiteLabel: {\r\n        color: theme.monitor.paper.color\r\n    }\r\n}))\r\n\r\n// TODO Change to comewhere correct\r\nconst TabPanel = (props) => {\r\n    const { children, value, index, ...other } = props;\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`simple-tabpanel-${index}`}\r\n            aria-labelledby={`simple-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && children}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst TabProps = index => ({\r\n    id: `full-width-tab-${index}`,\r\n    'aria-controls': `full-width-tabpanel-${index}`,\r\n})\r\n\r\nconst tryGetBinancePrice = binanceData => binanceData.find(x => x.symbol === \"BTC\")?.price\r\n\r\nconst CustomCompare = (prevDeps, nextDeps) => {\r\n    // False triggers, True doesn't\r\n\r\n    // Cannot produce the data\r\n    if (!nextDeps[2]?.profitabilityBTC || !nextDeps[2]?.totalPower || !Array.isArray(nextDeps[3]))\r\n        return true;\r\n\r\n    // Cannot produce the data\r\n    const nextPrice = tryGetBinancePrice(nextDeps[3])\r\n    if (!Boolean(nextPrice))\r\n        return true;\r\n\r\n    const prevPrice = tryGetBinancePrice(prevDeps[3])\r\n\r\n    return prevDeps[0] === nextDeps[0] &&                                       // do negate power cost\r\n        prevDeps[1] === nextDeps[1] &&                                          // powerCost amount\r\n        prevDeps[2]?.profitabilityBTC === nextDeps[2].profitabilityBTC &&       // nhData profitability\r\n        prevDeps[2]?.totalPower === nextDeps[2].totalPower &&                   // nhData power\r\n        prevPrice === nextPrice                                                 // BTC price\r\n}\r\n\r\nconst calculateProfitability = (profitPerDay, powerConsumptionWH, negatePower, powerCost) => {\r\n    const powerkWday = (powerConsumptionWH / 1000.0) * 24\r\n    const powerCostDaily = powerkWday * powerCost;\r\n    const dailyProfit = profitPerDay - (negatePower ? powerCostDaily : 0);\r\n    return {\r\n        profitabilityEUR: dailyProfit,\r\n        profitabilityWeek: dailyProfit * 7,\r\n        profitabilityMonth: dailyProfit * 365 / 12.0,\r\n        profitabilityYear: dailyProfit * 365,\r\n        powerCostPercentage: (powerCostDaily / profitPerDay) * 100\r\n    }\r\n}\r\n\r\nconst ProfitabilityMonitor = ({ nhData, binanceData }) => {\r\n    const classes = useStyles()\r\n    const [negatePowerCost, setNegatePowerCost] = useState(true)\r\n    const [powerCost, setPowerCost] = useState(0.136)\r\n    const [profits, setProfits] = useState({})\r\n    const [tabValue, setTabValue] = useState(0)\r\n\r\n    useCustomCompareEffect(\r\n        () => {\r\n            setProfits(\r\n                calculateProfitability(\r\n                    nhData.profitabilityBTC * tryGetBinancePrice(binanceData),\r\n                    nhData.totalPower,\r\n                    negatePowerCost,\r\n                    powerCost\r\n                )\r\n            )\r\n        },\r\n        [negatePowerCost, powerCost, nhData, binanceData],\r\n        (prevDeps, nextDeps) => CustomCompare(prevDeps, nextDeps)\r\n    );\r\n\r\n    const P = props => <p className={classes.labelStyle} {...props}>{props.children}</p>\r\n    const P2 = props => <p className={`${classes.labelStyle} ${classes.profitLabelStyle}`}>{props.children} </p>\r\n\r\n    return (\r\n        <>\r\n            <Tabs value={tabValue} onChange={(_, value) => setTabValue(value)} classes={{\r\n                root: classes.tabRoot\r\n            }}>\r\n                <Tab label=\"Foo1\" {...TabProps(0)} />\r\n                <Tab label=\"Foo2\" {...TabProps(1)} />\r\n            </Tabs>\r\n            <SwipeableViews index={tabValue} onChangeIndex={i => setTabValue(i)}>\r\n                <TabPanel value={tabValue} index={0}>\r\n                    <Paper elevation={4} className={classes.paper} >\r\n                        <Button\r\n                            style={{ float: \"right\", width: \"100px\", marginLeft: \"-100px\" }}\r\n                            className={classes.whiteLabel}\r\n                            onClick={() => setNegatePowerCost(!negatePowerCost)}\r\n                            startIcon={negatePowerCost ? <FlashOnIcon style={{ color: \"yellow\" }} /> : <FlashOffIcon />}\r\n                        >\r\n                            {profits?.powerCostPercentage?.toFixed(0)} %\r\n                        </Button>\r\n                        <div className={classes.profitabilityContainer}>\r\n                            <div style={{ dispaly: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\r\n                                <P style={{ marginRight: \"-8px\" }}>Daily profit: </P>\r\n                                <P2 > {profits.profitabilityEUR?.toFixed(2)}</P2>\r\n                            </div>\r\n                            <div className={classes.profitabilityProjectorContainer}>\r\n                                <div>\r\n                                    <P>Week</P>\r\n                                    <P2 >{profits.profitabilityWeek?.toFixed(0)}</P2>\r\n                                </div>\r\n                                <div>\r\n                                    <P>Month</P>\r\n                                    <P2>{profits.profitabilityMonth?.toFixed(0)}</P2>\r\n                                </div>\r\n                                <div>\r\n                                    <P>Year</P>\r\n                                    <P2>{profits.profitabilityYear?.toFixed(0)}</P2>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Paper>\r\n                </TabPanel>\r\n                <TabPanel value={tabValue} index={1}>\r\n                    <Paper elevation={4} className={`${classes.paper} ${classes.centered}`} style={{ height: \"148px\" }}>\r\n                        <TextField\r\n                            label={<><FlashOnIcon style={{ color: \"yellow\" }} />Power Cost per kW/h</>}\r\n                            type=\"number\"\r\n                            value={powerCost}\r\n                            className={classes.powerCostLabel}\r\n                            onChange={e => setPowerCost(e.target.value)}\r\n                            InputLabelProps={{ className: `${classes.whiteLabel} ${classes.centered}` }}\r\n                            InputProps={{ className: classes.whiteLabel, style: { textAlign: \"right\" } }}\r\n                        />\r\n                    </ Paper>\r\n                </TabPanel>\r\n            </SwipeableViews>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProfitabilityMonitor","import React, { useEffect, useState } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport { hwinfoApi, nhApi } from '../api';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport BinanceMonitor from './BinanceMonitor';\r\nimport NHMonitor from './NHMonitor';\r\nimport ProfitabilityMonitor from './ProfitabilityMonitor';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        paddingTop: theme.spacing(1),\r\n        width: \"100%\",\r\n        height: \"100vh\"\r\n    },\r\n    background: theme.monitor.background\r\n}))\r\n\r\nconst MinerMonitor = props => {\r\n    const [state, setState] = useState({\r\n        refresh: false,\r\n    })\r\n    const [hwinfoData, setHWinfoData] = useState([])\r\n    const [binanceData, setBinanceData] = useState([])\r\n    const [nhData, setNHData] = useState({ data: {}, combinedData: {}})\r\n    const classes = useStyles()\r\n\r\n    // TODO avg of the fee's -> reduce from profitability\r\n    // TODO create nice default one-clance view with \"openable\" cards (HWINFO)\r\n\r\n    useEffect(() => {\r\n        hwinfoApi.list({ $limit: 1, $sort: { \"time\": -1 } })\r\n            .then(res => \r\n                setHWinfoData(res.data)\r\n            )\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n\r\n    }, [state.refresh])\r\n\r\n    console.log(\"Dastboard nhData: \", nhData)\r\n\r\n    return (\r\n        <div className={`${classes.root} ${classes.background}`}>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={() => setState({ ...state, dummyRefresh: !state.dummyRefresh })}>Refresh</Button>\r\n            <NHMonitor refresh={state.refresh} data={nhData.data} combData={nhData.combinedData} setData={data => setNHData({ ...nhData, data: data})} setCombData={data => setNHData({ ...nhData, combinedData: data})} hwinfoData={hwinfoData} />\r\n            <ProfitabilityMonitor nhData={nhData.combinedData} binanceData={binanceData} />\r\n            <BinanceMonitor refresh={state.refresh} data={binanceData} setData={data => setBinanceData(data)} />\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default MinerMonitor","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport { Button } from '@material-ui/core'\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: theme.root,\r\n    floatRightBtn: {\r\n        float: \"right\",\r\n        margin: theme.spacing(2)\r\n    }\r\n}))\r\n\r\nconst Transactions = props => {\r\n    const classes = useStyles()\r\n    const [state, setState] = useState({\r\n        labelManagerOpen: true,\r\n    })\r\n    const imageLoadRef = useRef(null);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n    }, [])\r\n\r\n    const loadFile = () => {\r\n        if (typeof window.FileReader !== 'function') {\r\n            alert(\"The file API isn't supported on this browser yet.\")\r\n            return;\r\n        }\r\n        let input = document.getElementById(\"fileinput\");\r\n        if (!input)\r\n            console.error(\"Couldn't find the input element\");\r\n        else if (!input.files)\r\n            console.error(\"Input files error\");\r\n        else if (!input.files[0])\r\n            alert(\"Please select file first\")\r\n        else {\r\n            const selectedFile = input.files[0];\r\n\r\n            input.files = null; // Enables the onChange event to fire next time\r\n            input.value = '';\r\n\r\n            console.log(\"Selected file: \", selectedFile)\r\n\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = e => {\r\n                const foo = async () => {\r\n                    \r\n                }\r\n\r\n\r\n                foo()\r\n                // imageParser.create({ data: e.target.result })\r\n                //     .then(res => {\r\n                //         console.log(\"Got result: \", res)\r\n                //     })\r\n                //     .catch(err => {\r\n                //         console.log(\"ERROR: \", err)\r\n                //     })\r\n            }\r\n            fileReader.readAsDataURL(selectedFile);\r\n        }\r\n    }\r\n\r\n\r\n    return <div className={classes.root}>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={() => {\r\n            if (!imageLoadRef) {\r\n                console.log(\"No ref\")\r\n                return;\r\n            }\r\n            if (!imageLoadRef.current) {\r\n                console.log(\"No current\")\r\n                return;\r\n            }\r\n            console.log(\"Clicking ref\")\r\n            imageLoadRef.current.click();\r\n        }}>\r\n            Load image\r\n        </Button>\r\n        <Button\r\n            className={classes.floatRightBtn}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => {\r\n                browserHistory.push('/categories')\r\n            }}>\r\n            Manage categories\r\n            </Button>\r\n        <input type='file' id='fileinput' style={{ display: 'none' }}\r\n            accept=\".bmp, .jpg, .png, .pbm\"\r\n            ref={imageLoadRef} onChange={() => loadFile()} />\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        transactions: state.transactions\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Transactions)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n}))\r\n\r\nconst CategoriesContent = props => {\r\n    const classes = useStyles()\r\n\r\n    return (\r\n        <div>\r\n            CategoriesContent\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    \r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CategoriesContent)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    \r\n}))\r\n\r\nconst CategoryTypeContent = props => {\r\n    const classes = useStyles()\r\n    \r\n    return <div>\r\n        CategoryTypeContent\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    \r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CategoryTypeContent)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n}))\r\n\r\nconst UnlabeledContent = props => {\r\n    const classes = useStyles()\r\n    const { transactions } = props;\r\n\r\n    console.log(transactions)\r\n\r\n    return (\r\n        <div>\r\n            {transactions && transactions.map(t => (\r\n                <div>\r\n                    {t.saaja}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    \r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UnlabeledContent)","import React, { useState, useEffect } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport CategoriesContent from './CategoriesContent'\r\nimport CategoryTypeContent from './CategoryTypeContent'\r\nimport UnlabeledContent from './UnlabeledContent'\r\nimport TabContent from '../core/TabContent'\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { setTransactions } from '../transactions/transactionActions'\r\nimport { categoriesApi, categoryTypeApi, transactionsApi } from '../api'\r\nimport { setError, setMessage } from '../App/AppActions';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: theme.root,\r\n    marginBtn: { margin: theme.spacing(2) },\r\n    paper: {\r\n        padding: theme.spacing(1),\r\n        margin: theme.spacing(2),\r\n        height: \"100%\"\r\n    }\r\n}))\r\n\r\nconst Categories = props => {\r\n    const classes = useStyles()\r\n    const [state, setState] = useState({\r\n        tabValue: 0\r\n    })\r\n    const { tabValue } = state;\r\n    const { onListTransactions, transactions, categories, categoryTypes } = props;\r\n\r\n    console.log(\"foo\", transactions)\r\n\r\n    useEffect(() => {\r\n        onListTransactions()\r\n    }, [])\r\n\r\n    return (\r\n        <div className={classes.root} style={{ height: \"100%\" }}>\r\n            <Button\r\n                className={classes.marginBtn}\r\n                startIcon={<ArrowBackIcon />}\r\n                onClick={() => {\r\n                    browserHistory.push('/transactions')\r\n                }}>\r\n                Back\r\n            </Button>\r\n            <Paper className={classes.paper} elevation={4}>\r\n                <Tabs\r\n                    variant=\"fullWidth\"\r\n                    className={classes.tabs}\r\n                    indicatorColor=\"primary\"\r\n                    textColor=\"primary\"\r\n                    value={tabValue}\r\n                    onChange={(e, value) => setState({ ...state, tabValue: value })}\r\n                >\r\n                    <Tab label=\"Categories\" />\r\n                    <Tab label=\"Category types\" />\r\n                    <Tab label=\"Unlabeled\" />\r\n                </Tabs>\r\n                <TabContent value={tabValue} index={0} >\r\n                    <CategoriesContent />\r\n                </TabContent>\r\n                <TabContent value={tabValue} index={1} >\r\n                    <CategoryTypeContent />\r\n                </TabContent>\r\n                <TabContent value={tabValue} index={2} >\r\n                    <UnlabeledContent \r\n                        transactions={transactions}\r\n                    />\r\n                </TabContent>\r\n            </Paper>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        transactions: state.transactions.transactions.data,\r\n        categories: state.categories.categories,\r\n        categoryTypes: state.categories.categoryTypes\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onAddCategory: (name, main, sub, sub2) => {\r\n\r\n        },\r\n        onEditCategory: (id, name, main, sub, sub2) => {\r\n\r\n        },\r\n        onListCategories: () => {\r\n\r\n        },\r\n        onListTransactions: () => {\r\n            transactionsApi.list({ $limit: 10 })\r\n                .then(res => dispatch(setTransactions(res)))\r\n                .catch(err => dispatch(setError(err.message)))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Categories)","export const setTransactions = transactions => {\r\n    return { type: \"SET_TRANSACTION\", transactions}\r\n}","\r\nconst FIND_MAP = {\r\n    \"viitenumero\": \"viite\",\r\n    \"viite\": \"viite\",\r\n    \"fi01\": \"iban\"\r\n}\r\n\r\n\r\nexport const parseImageResult = data => {\r\n    const result = {\r\n        viite: { result: \"\", confidence: 0},\r\n        iban: { result: \"\", confidence: 0},\r\n        saaja: { result: \"\", confidence: 0},\r\n        euro: { result: 0, confidence: 0},\r\n        dueDate: { result: new Date, confidence: 0},\r\n    };\r\n\r\n    const tryFindViite = line => {\r\n        \r\n    }\r\n    \r\n    const tryFindIBAN = line => {\r\n        \r\n    }\r\n\r\n    const tryFindSaaja = line => {\r\n\r\n    }\r\n\r\n    const tryFindAmount = line => {\r\n\r\n    }\r\n\r\n    const tryFindDueDate = line => {\r\n\r\n    }\r\n\r\n    data.lines.forEach(line => {\r\n        line = line.toLowerCase()\r\n        tryFindViite(line);\r\n    });\r\n\r\n    const res = {}\r\n    Object.keys(result).forEach(k => res[k] = result[k].result)\r\n    return res\r\n}","import React, { useState, useRef } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, Dialog, DialogActions, DialogContent, TextField, CircularProgress, LinearProgress } from '@material-ui/core'\r\n\r\nimport { parseImageResult } from './textParser';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    progressDiv: {\r\n        position: \"absolute\",\r\n        bottom: \"5rem\",\r\n        width: \"100%\"\r\n    }\r\n}))\r\n\r\nconst SessionModal = props => {\r\n    const classes = useStyles()\r\n\r\n    const { worker, workerLoadProgress, modalOpen, onClose, onAdd } = props;\r\n    const [state, setState] = useState({\r\n        viite: \"\",\r\n        iban: \"\",\r\n        saaja: \"\",\r\n        euro: 0,\r\n        dueDate: new Date(),\r\n        image: null,\r\n    })\r\n    const imageLoadRef = useRef(null);\r\n\r\n    const handleChange = e => {\r\n        setState({ ...state, [e.target.name]: e.target.value })\r\n    }\r\n\r\n    const loadFile = () => {\r\n        if (typeof window.FileReader !== 'function') {\r\n            alert(\"The file API isn't supported on this browser yet.\")\r\n            return;\r\n        }\r\n        let input = document.getElementById(\"fileinput\");\r\n        if (!input)\r\n            console.error(\"Couldn't find the input element\");\r\n        else if (!input.files)\r\n            console.error(\"Input files error\");\r\n        else if (!input.files[0])\r\n            alert(\"Please select file first\")\r\n        else {\r\n            const selectedFile = input.files[0];\r\n\r\n            input.files = null; // Enables the onChange event to fire next time\r\n            input.value = '';\r\n\r\n            console.log(\"Selected file: \", selectedFile)\r\n\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = e => {\r\n                const parseImage = async () => {\r\n                    const result = await worker.recognize(e.target.result);\r\n                    console.log(\"Got result: \", result)\r\n                    const parsedResult = parseImageResult(result.data)\r\n                    setState({ parsedResult, image: e.target.result })\r\n                }\r\n\r\n                parseImage()\r\n                // imageParser.create({ data: e.target.result })\r\n                //     .then(res => {\r\n                //         console.log(\"Got result: \", res)\r\n                //     })\r\n                //     .catch(err => {\r\n                //         console.log(\"ERROR: \", err)\r\n                //     })\r\n            }\r\n            fileReader.readAsDataURL(selectedFile);\r\n        }\r\n    }\r\n\r\n    let loaderIndicator;\r\n    if (workerLoadProgress !== 0 && workerLoadProgress < 1) {\r\n        loaderIndicator = (\r\n            <div className={classes.progressDiv}>\r\n                <CircularProgress color=\"primary\" variant=\"indeterminate\" />\r\n                <LinearProgress color=\"primary\" variant=\"determinate\" value={workerLoadProgress * 100} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Dialog open={modalOpen} onClose={onClose}>\r\n            <DialogContent>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={() => {\r\n                    if (imageLoadRef && imageLoadRef.current)\r\n                        imageLoadRef.current.click()\r\n                }}\r\n                    disabled={!Boolean(worker)}>\r\n                    Load image\r\n            </Button>\r\n                <div>\r\n                    <TextField label=\"IBAN\" name=\"iban\" value={state.iban} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Saaja\" name=\"saaja\" value={state.saaja} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Euro\" name=\"euro\" value={state.euro} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Viite\" name=\"viite\" value={state.viite} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Erpiv\" name=\"dueDate\" value={state.dueDate} onChange={handleChange} />\r\n                </div>\r\n                {loaderIndicator}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={onClose}>Cancel</Button>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={onAdd}>Add</Button>\r\n                <input type='file' id='fileinput' style={{ display: 'none' }}\r\n                    accept=\".bmp, .jpg, .png, .pbm, .pdf\"\r\n                    ref={imageLoadRef} onChange={() => loadFile()} />\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default SessionModal","import React, { useState, useEffect } from 'react'\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, CircularProgress, Slide, Typography } from '@material-ui/core'\r\n\r\nimport SessionModal from './SessionModal'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { createWorker } from 'tesseract.js'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        ...theme.root,\r\n    },\r\n    loaderDiv: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        marginTop: \"5rem\",\r\n        position: \"absolute\",\r\n        width: \"100%\"\r\n    },\r\n    actionButtons: {\r\n        position: \"absolute\",\r\n        bottom: \"3rem\",\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        width: \"100%\",\r\n        margin: theme.spacing(2)\r\n    },\r\n    addBillButton: {\r\n        margin: theme.spacing(2)\r\n    }\r\n}))\r\n\r\nconst Session = props => {\r\n    const classes = useStyles()\r\n    const [state, setState] = useState({\r\n        worker: null,\r\n        workerLoadProgress: 0,\r\n        modalOpen: false,\r\n    })\r\n\r\n    useEffect(() => {\r\n        const initWorker = async () => {\r\n            const worker = createWorker({\r\n                logger: m => {\r\n                    if (m.status === \"recognizing text\") {\r\n                        setState({ ...state, workerLoadProgress: m.progress })\r\n                    }\r\n                    console.log(\"Worker: \", m)\r\n                }\r\n            })\r\n\r\n            await worker.load();\r\n            await worker.loadLanguage(\"fin\");\r\n            await worker.initialize(\"fin\");\r\n\r\n            setState({ ...state, worker: worker })\r\n        }\r\n        if (!state.worker)\r\n            initWorker()\r\n\r\n        return () => {\r\n            const kill = async () => {\r\n                console.log(\"killing worker\")\r\n                await state.worker.terminate();\r\n                console.log(\"Worker terminated\")\r\n            }\r\n            if (state.worker)\r\n                kill()\r\n        }\r\n    }, [])\r\n\r\n    const redirBack = () => browserHistory.push(\"/payments\");\r\n    const addPayments = () => {\r\n        // TODO\r\n        console.log(\"Fake adding payments!\")\r\n        // browserHistory.push(\"/payments\")\r\n    }\r\n\r\n    return <div className={classes.root}>\r\n        <Button className={classes.addBillButton} variant=\"contained\" color=\"primary\" onClick={() => setState({ ...state, modalOpen: true })}>\r\n            Add bill\r\n        </Button>\r\n        <SessionModal {...state} onClose={() => setState({ ...state, modalOpen: false })}\r\n            onAdd={props => {\r\n                console.log(\"Adding payment with: \", props)\r\n                // TODO\r\n            }} />\r\n        <div className={classes.actionButtons}>\r\n            <Button variant=\"contained\" color=\"secondary\" onClick={() => redirBack()}>Back</Button>\r\n            <Button variant=\"contained\" color=\"secondary\" onClick={() => addPayments()}>Cancel</Button>\r\n        </div>\r\n\r\n        <Slide direction=\"up\" in={!Boolean(state.worker)} mountOnEnter unmountOnExit>\r\n            <div className={classes.loaderDiv}>\r\n                <CircularProgress color=\"primary\" variant=\"indeterminate\" />\r\n                <Typography color=\"primary\">Worker loading...</Typography>\r\n            </div>\r\n        </Slide>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Session)","const drawerState = { open: false }\r\n\r\nexport default (state = drawerState, action) => {\r\n  switch (action.type) {\r\n    case 'OPEN_DRAWER':\r\n      return { open: true }\r\n    case 'CLOSE_DRAWER':\r\n      return { open: false }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","const profileMenuState = { open: false, anchor: null }\r\n\r\nexport default (state = profileMenuState, action) => {\r\n    switch (action.type) {\r\n        case 'OPEN_PROFILE_MENU':\r\n            return { open: true, anchor: action.target}\r\n        case 'CLOSE_PROFILE_MENU':\r\n            return { open: false, anchor: null }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","// import { foodService } from '../api'\r\n\r\n// TODO implement auto filtering on main types based on last eaten\r\n\r\nconst foodState = {\r\n\tfilters: {\r\n\t\tmain: {},\r\n\t\tside: {},\r\n\t\tspeed: {$lt: 180},\r\n\t\tday: {}\r\n\t},\r\n\tsearch: \"\",\r\n\tsearchOptions: [],\r\n\tsort: {},\r\n\tpage: 0,\r\n\tlimit: 10,\r\n\tselectedFood: null,\r\n\tfoodEdit: null,\r\n\tfoodEditOpen: false,\r\n\tfoods: {\r\n\t\tdata: []\r\n\t},\r\n\tfiltersOpen: false,\r\n\tdistincts: {},\r\n\terrors: [],\r\n\tlatestFood: null,\r\n}\r\n\r\nexport default (state = foodState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_FILTERS\":\r\n\t\t\treturn Object.assign({}, state, { filters: action.filters })\r\n\t\tcase \"SELECT_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { selectedFood: action.food })\r\n\t\tcase \"EDIT_FOOD\":\r\n\t\t\tconst isOpen = state.foodEditOpen;\r\n\t\t\tif (isOpen) return Object.assign({}, state, { foodEdit: null, foodEditOpen: false })\r\n\t\t\treturn Object.assign({}, state, { foodEdit: action.food, foodEditOpen: true })\r\n\t\tcase \"SET_FOODS\":\r\n\t\t\tconst newState = action.foods\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfoods: newState.foods,\r\n\t\t\t\tfilters: newState.filters,\r\n\t\t\t\tsort: newState.sort,\r\n\t\t\t\tsearch: newState.search,\r\n\t\t\t\tpage: newState.page,\r\n\t\t\t\tlimit: newState.limit\r\n\t\t\t})\r\n\t\tcase \"SET_OPEN_FILTERS\":\r\n\t\t\tconst open = state.filtersOpen;\r\n\t\t\treturn Object.assign({}, state, { filtersOpen: !open })\r\n\t\tcase \"SET_DISTINCTS\":\r\n\t\t\treturn Object.assign({}, state, { distincts: action.res })\r\n\t\tcase \"SET_ERRORS\":\r\n\t\t\treturn Object.assign({}, state, { errors: action.errors })\r\n\t\tcase \"SET_LATEST_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { latestFood: action.food })\r\n\t\tcase \"SET_SEARCH_OPTIONS\":\r\n\t\t\treturn Object.assign({}, state, { searchOptions: action.options})\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","const paymentState = {\r\n\tdata: null,\r\n\tdeleteId: null,\r\n    distinctNotes: []\r\n}\r\n\r\nexport default (state = paymentState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_DATA\":\r\n\t\t\treturn Object.assign({}, state, { data: action.data })\r\n\t\tcase \"SET_DELETE_ID\":\r\n\t\t\treturn Object.assign({}, state, { deleteId: action.id })\r\n        case \"SET_DISTINCT_NOTES\":\r\n            return Object.assign({}, state, { distinctNotes: action.notes })\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n","const transactionState = {\r\n    transactions: {\r\n        page: 0,\r\n        skip: 0,\r\n        limit: 100,\r\n        data: []\r\n    }\r\n}\r\n\r\nexport default (state = transactionState, action) => {\r\n    switch (action.type) {\r\n        case \"SET_TRANSACTION\":\r\n            return Object.assign({}, state, { transactions: action.transactions })\r\n        default:\r\n            return state;\r\n    }\r\n}","const transactionState = {\r\n    categories: [],\r\n    categoryTypes: []\r\n}\r\n\r\nexport default (state = transactionState, action) => {\r\n    switch (action.type) {\r\n        \r\n        default:\r\n            return state;\r\n    }\r\n}","import { combineReducers } from 'redux'\r\nimport app from './App/AppReducer'\r\nimport user from './App/userReducer'\r\nimport drawer from './App/drawerReducer'\r\nimport profile from './App/profileReducer'\r\nimport food from './foods/foodReducers'\r\nimport payment from './payments/paymentReducer'\r\nimport transactions from './transactions/transactionReducer'\r\nimport categories from './categories/categoriesReducer'\r\n\r\nexport default combineReducers({\r\n    app,\r\n    user,\r\n    drawer,\r\n    profile,\r\n    food,\r\n    payment,\r\n    transactions,\r\n    categories,\r\n})\r\n","export default (state = {message: \"\", err: \"\"}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_MESSAGE\":\r\n\t\t\treturn {message: action.message, err: \"\"}\r\n\t\tcase \"SET_ERROR\":\r\n\t\t\treturn {message: \"\", err: action.message}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","export default (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t  case 'AUTH':\r\n\t\treturn action.user\r\n\t  case 'DEAUTH':\r\n\t\treturn {}\r\n\t  default:\r\n\t\treturn state\r\n\t}\r\n  }\r\n  ","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Router, Route, browserHistory } from 'react-router'\r\nimport { createStore } from 'redux'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport feathers from '@feathersjs/client'\r\nimport rest from '@feathersjs/rest-client'\r\nimport authentication from '@feathersjs/authentication-client'\r\nimport superagent from 'superagent'\r\n\r\nimport App from './App/App'\r\nimport SignIn from './signin/SignIn'\r\nimport Home from './home/home'\r\nimport Foods from './foods/Foods'\r\nimport ShopList from './shoplist/Shoplist'\r\nimport Payments from './payments/payments'\r\nimport MarkPendingPayment from './pending-payments/MarkPendingPayment'\r\nimport MinerMonitor from './minermonitor/MonitorDashboard'\r\nimport Transactions from './transactions/Transactions'\r\nimport Categories from './categories/Categories'\r\nimport Session from './payments/Session/Session'\r\n\r\nimport reducers from './reducers'\r\nimport { authUser } from './App/AppActions'\r\n\r\nconst store = createStore(reducers)\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n\tconsole.log('This app is using DEVELOPMENT environment');\r\n\tconsole.log('REACT_APP_API_URL = ' + process.env.REACT_APP_API_URL);\r\n\tconsole.log('REACT_APP_OAUTH_URL = ' + process.env.REACT_APP_OAUTH_URL);\r\n}\r\nif (process.env.NODE_ENV === \"production\") {\r\n\tif (!process.env.REACT_APP_API_URL)\r\n\t\tconsole.error('REACT_APP_API_URL is not set!')\r\n\tif (!process.env.REACT_APP_OAUTH_URL)\r\n\t\tconsole.error('REACT_APP_OAUTH_URL is not set!')\r\n}\r\n\r\nconst app = feathers()\r\n\t.configure(rest(process.env.REACT_APP_API_URL).superagent(superagent))\r\n\t.configure(authentication({ storage: window.localStorage }))\r\n\r\nfunction handlePath(pathname) {\r\n\tif (pathname === '/signin' || pathname.includes('/pending-payments:')) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t//Get user from Redux state\r\n\tconst user = store.getState().user;\r\n\t//If we have no user, none is logged in.\r\n\tif (!user || !user._id) {\r\n\t\tbrowserHistory.push('/signin');\r\n\t\treturn;\r\n\t}\r\n\r\n\t// if (pathname !== \"/home\" || pathname !== \"/signin\" || pathname !== \"/foods\" || pathname !== \"/shoplist\") {\r\n\t// \tbrowserHistory.push(\"/home\");\r\n\t// \treturn;\r\n\t// }\r\n}\r\n\r\nfunction enterHandler() {\r\n\tconst pathname = window.location.pathname\r\n\thandlePath(pathname)\r\n}\r\n\r\n\r\napp.reAuthenticate()\r\n\t.then(r => {\r\n\t\t//Populate Redux state with user information if authenticated.\r\n\t\tstore.dispatch(authUser(r.user))\r\n\t\tinitRender()\r\n\t})\r\n\t.catch(err => {\r\n\t\tinitRender()\r\n\t})\r\n\r\n\r\nfunction initRender() {\r\n\tReactDOM.render((\r\n\t\t<Provider store={store}>\r\n\t\t\t<Router history={browserHistory}>\r\n\t\t\t\t<Route path=\"/\" component={App} onEnter={enterHandler}>\r\n\t\t\t\t\t<Route path=\"/home\" component={Home} />\r\n\t\t\t\t\t<Route path=\"/signin\" component={SignIn} />\r\n\t\t\t\t\t<Route path=\"/foods\" component={Foods} />\r\n\t\t\t\t\t<Route path=\"/shoplist\" component={ShopList} />\r\n\t\t\t\t\t<Route path=\"/payments\" component={Payments} />\r\n                    <Route path=\"/pending-payments:id\" component={MarkPendingPayment} />\r\n                    <Route path=\"/minermonitor\" component={MinerMonitor} />\r\n                    {/* <Route path=\"/payments/session\" component={Session} /> */}\r\n                    {/* <Route path=\"/transactions\" component={Transactions} />\r\n                    <Route path=\"/categories\" component={Categories} /> */}\r\n\t\t\t\t</Route>\r\n\t\t\t</Router>\r\n\t\t</Provider>\r\n\t), document.getElementById('root'))\r\n}\r\n\r\nexport default app\r\n"],"sourceRoot":""}