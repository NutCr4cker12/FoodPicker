{"version":3,"sources":["theme.js","App/AppActions.js","App/Header.js","App/Message.js","core/NavItem.js","App/Nav.js","api.js","App/profile.js","App/App.js","signin/SignIn.js","home/home.js","core/TabContent.js","foods/FilterSection.js","foods/FilterSorting.js","foods/Filters.js","core/BoldSearch.js","foods/foodAction.js","foods/Search.js","core/combineDates.js","core/Table.js","core/BackDialog.js","foods/foodEdit.js","foods/SelectedFood.js","foods/Foods.js","shoplist/Shoplist.js","payments/paymentAction.js","payments/MailDialog.js","payments/TableRowCheckBox.js","payments/payments.js","pending-payments/MarkPendingPayment.js","minermonitor/BinanceMonitor.js","core/SwibeTabs.js","minermonitor/NHMonitor.js","minermonitor/ProfitabilityMonitor.js","minermonitor/MonitorDashboard.js","transactions/Transactions.js","categories/CategoriesContent.js","categories/CategoryTypeContent.js","categories/UnlabeledContent.js","categories/Categories.js","transactions/transactionActions.js","payments/Session/textParser.js","payments/Session/SessionModal.js","payments/Session/Session.js","App/drawerReducer.js","App/profileReducer.js","foods/foodReducers.js","payments/paymentReducer.js","transactions/transactionReducer.js","categories/categoriesReducer.js","reducers.js","App/AppReducer.js","App/userReducer.js","index.js"],"names":["defaultTheme","createMuiTheme","muiTheme","palette","primary","main","green","secondary","error","red","overrides","MuiPaper","root","flexBasis","MuiTabs","vertical","maxWidth","MuiGrid","justifyContent","MuiDialogTitle","flexDirection","alignItems","separate","flexGrow","marginTop","centerDivColumn","display","spreadDivColumn","monitor","paper","width","spacing","margin","padding","backgroundColor","color","floatRight","float","background","lightBackground","AppTheme","props","ThemeProvider","theme","children","setError","message","type","setMessage","authUser","user","useStyles","makeStyles","navBar","zIndex","drawer","top","left","connect","state","drawerOpen","open","profileOpen","profile","dispatch","onOpenDrawer","onCloseDrawer","onNavigate","pathname","browserHistory","push","onOpenProfile","event","target","currentTarget","onCloseProfile","appbar","mobileNavIcon","profileButton","location","classes","_id","IconButton","onClick","style","fontSize","edge","AppBar","position","className","Toolbar","text","app","err","onClose","Snackbar","Boolean","autoHideDuration","elevation","variant","severity","path","icon","ListItem","button","key","ListItemIcon","ListItemText","capitalCase","menuItems","Divider","role","Drawer","List","isChrome","navigator","userAgent","indexOf","isSafari","isOpera","toLowerCase","users","email","password","authenticate","strategy","logout","getSorting","sort","s","Object","keys","forEach","value","name","convertName","convertFilters","filters","f","d","assign","nins","length","map","x","parseInt","split","$nin","foodService","service","foods","page","search","limit","sorting","query","$skip","$limit","$sort","$search","find","food","create","id","patch","remove","Promise","resolve","reject","then","result","mainTypes","sideTypes","dayTypes","Array","data","maintype","sidetype","Set","side","day","lasteaten","$lasteaten","res","paymentsService","payments","payment","paid","pendingPaymentsService","pendingPayments","get","pending","transactionService","transactionsApi","hwinfoApi","nhApi","binanceApi","anchorEl","anchor","onSignOut","timeout","setTimeout","clearTimeout","catch","keepMounted","disableAutoFocus","MenuItem","disabled","opacity","isQuest","App","profileMenu","this","CssBaseline","React","Component","TextField","paddingRight","onSignIn","onSignInGoogle","onResetPassword","useState","setEmail","setPassword","submitHanlder","preventDefault","Paper","subheader","ListSubheader","onSubmit","label","fullWidth","onChange","e","helperText","Button","startIcon","marginLeft","marginRight","TabContent","index","other","Typography","component","hidden","aria-labelledby","Box","p","filterSectionRoot","height","tabs","borderRight","divider","verticalTab","center","tabContainer","paddingTop","speedContainer","minWidth","speedText","speedBtn","textAlign","filterButton","filterButtonDisabled","header","filterTab","setFilters","tabValue","setTabValue","onFilterClick","selected","newValue","forceColumn","filter","first","GridHeader","Fragment","Grid","item","xs","onOffBtn","on","buttonFilters","arr","container","directon","justify","mainContent","sideContent","dayContent","speedFilter","speed","speedValue","timeIsLess","speedFilterText","handleSpeedClick","speedContent","Slider","defaultValue","track","getAriaValueText","valueLabelDisplay","valueLabelFormat","hours","Math","floor","mins","getSpeedLabel","step","min","max","getSpeedText","Tabs","orientation","indicatorColor","textColor","Tab","buttonContainer","descriptionContainer","upperdescriptionContainer","textContainer","setSort","SortButton","getSortDescriptionUp","handleChange","getSortDescriptionDown","actionContent","copyObj","JSON","parse","stringify","currentFilters","filtersOpen","onApply","setOpenFilter","currentSort","clearFilters","liha","Dialog","FilterSorting","DialogActions","autoFocus","boldSearch","bolded","i","selectFood","setEditFood","setErrors","errors","setOptions","options","searchDiv","btnDiv","div","searchOptions","onSetOptions","$regex","console","log","onSelectFood","searchState","setSearchState","Autocomplete","getOptionLabel","option","renderOption","renderInput","params","InputProps","rest","startAdornment","InputAdornment","placeholder","setSearch","dayMs","getShortTime","date","short","getDate","m","getMonth","year","getFullYear","toString","substr","getDateText","start","end","ago","numDays","days","today","Date","diff","round","w","getDateTimeDifferenceString","timestamp","diffSeconds","toFixed","slice","combineDates","dates","maxLength","a","b","firstDate","latestDate","paddingLeft","highlight","lighten","light","dark","title","flex","visuallyHidden","border","clip","overflow","MyTable","columns","setLimit","onAddFood","setPage","count","total","pager","tableToolbar","Tooltip","size","endIcon","getSortDirection","tableHeaders","TableHead","TableRow","TableCell","align","sortDirection","TableSortLabel","active","direction","tableBody","TableBody","hover","join","timeseaten","time","foodamount","TableContainer","Table","TablePagination","rowsPerPage","onChangeRowsPerPage","rowsPerPageOptions","onChangePage","newPage","onCancel","onOk","cancelText","okText","oncancel","DialogTitle","DialogContent","selectFieldContainer","selectField","addButton","common","white","sideType","dialogContainer","distDayTypes","distincts","foodEditOpen","distMainTypes","distSideTypes","onSetEditFood","onDeleteFood","onSaveFood","foodEdit","onUpdate","mainType","setMainType","foodAmount","setFoodAmount","setSideTypes","setName","link","recipe","setRecipe","eaten","setEaten","cookTime","setCookTime","deleteOpen","setDeleteOpen","SelectField","types","select","sideTypeElement","FormControl","includes","InputLabel","Select","multiple","multiline","input","OutlinedInput","renderValue","Checkbox","checked","FormHelperText","nameElement","speedElement","RegExp","test","recipeElement","eatenElement","editContent","deleteFood","noValidate","BackDialog","spread","centerColumns","datePickerTextfield","moment","locale","updateLocale","week","dow","doy","selectedFood","latestFood","onFoodSelection","latestFoodInfo","lastDate","startDate","valueOf","endDate","getLatestFoodInfo","setStartDate","setEndDate","historyContent","selectContent","Link","href","utils","MomentUtils","DatePicker","format","views","minDate","showTodayButton","_d","animateYearScrolling","TextFieldComponent","toDateString","currDay","newDay","concat","defaultFood","onRefresh","initFilters","$lt","Shoplist","setDeleteId","createDefaultContent","markPaidId","paymentText","notes","amount","oDate","month","formatDate","imageName","url","process","TableRowCheckBox","toolTipText","rowData","toMailList","mailedAndPaid","mailed","mailedAndPending","notMailedNoPDF","imageData","checkedIcon","spacings","datePickerTextfieldWide","datePickerTextfieldSmall","tableIcon","sendMailButton","yearStart","getUTCFullYear","yearEnd","deleteId","distinctNotes","getData","$gt","createdAt","onGetData","onAddPayment","onSetDeleteId","onDeletePayment","onGetDistinctNotes","allNotes","onSendMail","paymentList","perMonth","setDate","setAmount","note","setNote","autoCompleteKey","setAutoCompleteKey","image","setImage","inputRef","setInputRef","setToMailList","useEffect","reduce","downloadImage","document","createElement","download","click","datePicker","setValue","maxDate","endAdornment","addPayment","replace","freeSolo","window","confirm","parseFloat","handleAddPayment","table","isMarked","ids","pendingEntity","content","encodeURIComponent","openOnMail","formatNotes","handleMailList","accept","ref","elem","FileReader","getElementById","files","selectedFile","fileReader","onload","readAsDataURL","alert","loadFile","MarkPendingPayments","dialogOpen","seconds","setState","timer","closeAndRedirect","newSeconds","close","alreadyMarked","horizontal","up","down","parseBinanceData","symbols","parsed","symbol","price","lastPrice","changePrice","priceChange","changePercent","priceChangePercent","SYMBOLS","BinanceMonitor","refresh","setData","fetchData","useCallback","source","alt","hiddenTabRoot","visibility","minHeight","TabPanel","SwibeTabs","panels","hideTabs","tabProps","tabClasses","_","onChangeIndex","panelContent","labelContainer","statusContainer","right","labelStyle","lineHeight","arcplotStyle","timeLabelsContainer","timelabel","gpuContainer","gpuInnerContainer","gpuLabelDiv","PI","parseData","devices","miningRigs","deviceType","enumName","powerUsage","status","description","speeds","totalSpeed","c","Number","devicesStatuses","DISABLED","profitabilityBTC","totalProfitability","statusTime","GenerateData","radiusStart","idealMin","idealMax","absMin","absMax","angle","absMAx","getColor","angle0","radius0","radius","NHMonitor","combData","setCombData","hwinfoData","setRefresh","labels","generatedData","setGeneratedData","hwinfo","nh","updateTime","timeLabels","setTimeLabels","cancelled","useCustomCompareEffect","hwinfoDataTimestamp","nhTimestamp","prev","next","CustomTimeLabelCompare","combinedData","nhData","device","n","totalGPUPower","Power","totalPower","CPUPower","combineDatas","MemJunctTemp","prevDeps","nextDeps","isEqual","CustomCompare","GPULabel","PanelBase","overViewPanel","xDomain","yDomain","colorType","animation","damping","stiffness","radiusDomain","getLabel","gpuPanels","gpu","Temp","HotSpotTemp","Fan","reverse","marginBottom","profitabilityContainer","profitabilityProjectorContainer","profitLabelStyle","centered","tabRoot","whiteLabel","tryGetBinancePrice","binanceData","ProfitabilityMonitor","negatePowerCost","setNegatePowerCost","powerCost","setPowerCost","profits","setProfits","profitPerDay","powerConsumptionWH","negatePower","powerCostDaily","dailyProfit","profitabilityEUR","profitabilityWeek","profitabilityMonth","profitabilityYear","powerCostPercentage","calculateProfitability","isNaN","isArray","nextPrice","prevPrice","P","P2","profitPercentage","profitabilityPanel","isFinite","dispaly","changePowerCostPanel","powerCostLabel","InputLabelProps","refreshButtonContainer","MinerMonitor","setHWinfoData","setBinanceData","setNHData","floatRightBtn","transactions","labelManagerOpen","imageLoadRef","useRef","current","foo","t","saaja","marginBtn","categories","categoryTypes","onAddCategory","sub","sub2","onEditCategory","onListCategories","onListTransactions","parseImageResult","viite","confidence","iban","euro","dueDate","lines","line","k","progressDiv","bottom","SessionModal","loaderIndicator","worker","workerLoadProgress","modalOpen","onAdd","CircularProgress","LinearProgress","recognize","parsedResult","parseImage","loaderDiv","actionButtons","addBillButton","drawerState","initWorker","createWorker","logger","progress","load","loadLanguage","initialize","kill","terminate","Slide","in","mountOnEnter","unmountOnExit","profileMenuState","foodState","paymentState","transactionState","skip","combineReducers","action","isOpen","newState","store","createStore","reducers","feathers","configure","superagent","authentication","storage","localStorage","enterHandler","getState","handlePath","initRender","ReactDOM","render","history","onEnter","Home","SignIn","Foods","ShopList","Payments","MarkPendingPayment","reAuthenticate","r"],"mappings":"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","file":"static/js/main.8771a625.chunk.js","sourcesContent":["import React from 'react'\r\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { green, red } from '@material-ui/core/colors'\r\n\r\nconst defaultTheme = createMuiTheme({})\r\n\r\nconst muiTheme = createMuiTheme({\r\n\tpalette: {\r\n\t\t// primary: green,\r\n\t\tprimary: {\r\n\t\t\tmain: green[800]\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#fffffF\"\r\n\t\t},\r\n\t\terror: red\r\n\t},\r\n\toverrides: {\r\n\t\tMuiPaper: {\r\n\t\t\troot: {\r\n\t\t\t\t// flex: 1,\r\n\t\t\t\tflexBasis: \"auto\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiTabs: {\r\n\t\t\tvertical: {\r\n\t\t\t\tmaxWidth: \"80px\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiGrid: {\r\n\t\t\troot: {\r\n\t\t\t\tjustifyContent: \"space-evenly\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiDialogTitle: {\r\n\t\t\troot: {\r\n\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\talignItems: \"center\",\r\n\t\t\t\tjustifyContent: \"space-between\"\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tseparate: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\troot: {\r\n\t\tmarginTop: \"4rem\"\r\n\t},\r\n\tcenterDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspreadDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t},\r\n    monitor: {\r\n        paper: {\r\n            width: `calc(100% - ${defaultTheme.spacing(3)})`,\r\n            margin: defaultTheme.spacing(2),\r\n            padding: defaultTheme.spacing(1),\r\n            backgroundColor: \"#333\",\r\n            color: \"#fff\",\r\n        },\r\n        floatRight: {\r\n            float: \"right\"\r\n        },\r\n        background: {\r\n            background: \"#121212\",\r\n            color: \"#fff\",\r\n        },\r\n        lightBackground: {\r\n            backgroundColor: \"#333\",\r\n            color: \"#fff\",\r\n        }\r\n    }\r\n})\r\n\r\n\r\nexport const AppTheme = (props) => {\r\n\r\n\treturn (\r\n\t\t<ThemeProvider theme={muiTheme}>\r\n\t\t\t<div>\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t</ThemeProvider>\r\n\t)\r\n}\r\n","export const setError = message => {\r\n\treturn { type: 'SET_ERROR', message }\r\n  }\r\n\r\n  export const setMessage = message => {\r\n\treturn { type: 'SET_MESSAGE', message }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  \r\n  export const openDrawer = () => {\r\n\treturn { type: 'OPEN_DRAWER' }\r\n  }\r\n  \r\n  export const closeDrawer = () => {\r\n\treturn { type: 'CLOSE_DRAWER' }\r\n  }\r\n  \r\n  export const openProfile = (target) => {\r\n\treturn { type: \"OPEN_PROFILE_MENU\", target }\r\n  }\r\n  \r\n  export const closeProfile = () => {\r\n\treturn { type: \"CLOSE_PROFILE_MENU\" }\r\n  }\r\n  \r\n  export const authUser = user => {\r\n\treturn { type: 'AUTH', user }\r\n  }\r\n  \r\n  export const deauthUser = () => {\r\n\treturn { type: 'DEAUTH' }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  ","import React from 'react';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { connect } from 'react-redux';\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { closeDrawer, openDrawer, openProfile, closeProfile } from './AppActions'\r\n\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tnavBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\tmargin: 0,\r\n\t},\r\n\tseparate: theme.separate\r\n}))\r\n\r\nconst Header = ({ location, user, drawerOpen, onOpenDrawer, onCloseDrawer, profileOpen, onOpenProfile, onCloseProfile }) => {\r\n\tconst classes = useStyles();\r\n\tlet appbar, mobileNavIcon, profileButton\r\n\r\n\tprofileButton = (\r\n\t\tuser._id != null &&\r\n\t\t<div>\r\n\t\t\t<IconButton onClick={profileOpen ? onCloseProfile : onOpenProfile} style={{ color: 'white' }}>\r\n\t\t\t\t<AccountCircleIcon fontSize=\"large\" />\r\n\t\t\t</IconButton>\r\n\t\t</div>\r\n\t)\r\n\r\n\tif (location.pathname === '/signin') {\r\n\t\t//do nothing\r\n\t}\r\n\telse\r\n\t\tmobileNavIcon =\r\n\t\t\t<IconButton edge=\"start\" style={{ color: 'white' }} onClick={() => {drawerOpen ? onCloseDrawer() : onOpenDrawer()}} >\r\n\t\t\t\t<MenuIcon />\r\n\t\t\t</IconButton>\r\n\r\n\tappbar = (\r\n\t\t<AppBar position=\"static\" className={classes.navBar}>\r\n\t\t\t<Toolbar>\r\n\t\t\t\t{mobileNavIcon}\r\n\t\t\t\t<div className={classes.separate} />\r\n\t\t\t\t{profileButton}\r\n\t\t\t</Toolbar>\r\n\t\t</AppBar>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t{appbar}\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open,\r\n\t\tprofileOpen: state.profile.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonOpenDrawer: () => {\r\n\t\t\tdispatch(openDrawer())\r\n\t\t},\r\n\t\tonCloseDrawer: () => {\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonOpenProfile: (event) => {\r\n\t\t\tdispatch(openProfile(event.currentTarget))\r\n\t\t},\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)","import React from 'react'\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setMessage } from './AppActions'\r\n\r\nconst Message = ({ text, err, onClose }) => (\r\n\t<Snackbar\r\n\t\topen={Boolean(err || text)}\r\n\t\tautoHideDuration={3000}\r\n\t\tonClose={onClose}\r\n\t\t// anchorOrigin={{horizontal: \"center\", vertical: \"top\"}}\r\n\t>\r\n\t\t<MuiAlert\r\n\t\t\televation={6}\r\n\t\t\tvariant=\"filled\"\r\n\t\t\tonClose={onClose}\r\n\t\t\tseverity={err ? \"error\" : text ? \"success\" : \"info\"}\r\n\t\t>\r\n\t\t\t{err ? err : text ? text : \"\"}\r\n\t\t</MuiAlert>\r\n\t</Snackbar>\r\n)\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\ttext: state.app.message,\r\n\t\terr: state.app.err\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonClose: () => {\r\n\t\t\tdispatch(setMessage(\"\"))\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Message)\r\n","import React from 'react'\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { capitalCase } from \"capital-case\";\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeDrawer } from '../App/AppActions'\r\n\r\nconst NavItem = (props) => {\r\n\tconst { path, icon, onNavigate } = props;\r\n\r\n\treturn (\r\n\t\t<ListItem button key={path} onClick={() => onNavigate(`/${path}`)}>\r\n\t\t\t<ListItemIcon>{icon}</ListItemIcon>\r\n\t\t\t<ListItemText primary={capitalCase(path)} />\r\n\t\t</ListItem>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NavItem)","import React from 'react';\r\n\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\n\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { closeDrawer, openDrawer } from './AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst Nav = ({user, drawerOpen, onOpenDrawer, onCloseDrawer, onNavigate}) => {\r\n\tlet menuItems = []\r\n\r\n\r\n\tif (user._id) {\r\n\t\tmenuItems.push(<Divider key=\"div1\" />)\r\n\t\tmenuItems.push(<NavItem key={1} path={\"home\"} icon={<HomeIcon/>} />)\r\n\t\tmenuItems.push(<NavItem key={2} path=\"foods\" icon={<FastfoodIcon />} />)\r\n        menuItems.push(<NavItem key={3} path=\"shoplist\" icon={<ShoppingCartIcon />} />)\r\n\t\tif (user.role === \"admin\") {\r\n            menuItems.push(<NavItem key={4} path=\"payments\" icon={<PaymentIcon />} />)\r\n            menuItems.push(<NavItem key={3} path=\"minermonitor\" icon={<TimelineIcon />} />)\r\n\t\t}\r\n\t\tmenuItems.push(<Divider key=\"div2\" />)\r\n\r\n\t\treturn (\r\n\t\t\t<Drawer \r\n\t\t\t\topen={drawerOpen}\r\n\t\t\t\tonClose={open => open? onCloseDrawer() : onOpenDrawer()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{menuItems}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Drawer>\r\n\t\t)\r\n\t}\r\n\treturn (<div/>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t  onOpenDrawer: () => {\r\n\t\tdispatch(openDrawer())\r\n\t  },\r\n\t  onCloseDrawer: () => {\r\n\t\tdispatch(closeDrawer())\r\n\t  },\r\n\t  onNavigate: pathname => {\r\n\t\tbrowserHistory.push(pathname)\r\n\t\tdispatch(closeDrawer())\r\n\t  }    \r\n\t}\r\n  }\r\n  \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav)","import app from '.'\r\n\r\nlet isChrome = navigator.userAgent.indexOf('Chrome') > -1\r\n// let isExplorer = navigator.userAgent.indexOf('MSIE') > -1\r\n// let isFirefox = navigator.userAgent.indexOf('Firefox') > -1\r\nlet isSafari = navigator.userAgent.indexOf(\"Safari\") > -1\r\nlet isOpera = navigator.userAgent.toLowerCase().indexOf(\"op\") > -1\r\nif (isChrome && isSafari) isSafari = false\r\nif (isChrome && isOpera) isChrome = false\r\n\r\n// const passwordChangeService = () => app.service('v1/password-change')\r\n// const passwordResetRequestService = () => app.service('v1/password-requestreset')\r\n// const passwordResetRequestAdminService = () => app.service('v1/password-requestreset-admin')\r\n// const passwordResetService = () => app.service('v1/password-reset')\r\nconst userService = () => app.service('v1/users')\r\nexport const users = {\r\n\tlist: query => {\r\n\t\treturn userService().find({ query: query });\r\n\t},\r\n\tget: id => {\r\n\t\tif (!id) {\r\n\t\t\treturn app.get('authentication');\r\n\t\t}\r\n\t\treturn userService().get(id)\r\n\t},\r\n\tcreate: user => userService().create(user),\r\n\tpatch: (id, user) => userService().patch(id, user),\r\n\tremove: id => userService().remove(id),\r\n\tauthenticate: () => app.authentication.reAuthenticate(true),\r\n\tsignIn: (email, password) => app.authenticate({ strategy: 'local', email, password }),\r\n\t//   signInGoogle: () => {\r\n\t//     window.location.href = process.env.REACT_APP_OAUTH_URL + '/google';\r\n\t//     return Promise.resolve(null)\r\n\t//   },\r\n\tsignOut: () => app.logout(),\r\n\t//   changePassword: (oldPassword, newPassword) => passwordChangeService().create({ oldPassword, newPassword }),\r\n\t//   resetPassword: (id, token, password) => passwordResetService().create({ id, token, password }),\r\n\t//   requestPasswordReset: email => passwordResetRequestService().create({ email }),\r\n\t//   requestPasswordResetAdmin: email => passwordResetRequestAdminService().create({ email }),\r\n}\r\n\r\nconst getSorting = (sort) => { // desc = -1, asc = 1\r\n\tconst s = {}\r\n\tconst convertName = (name) => {\r\n\t\tswitch (name) {\r\n\t\t\tcase \"main\":\r\n\t\t\t\treturn \"maintype\"\r\n\t\t\tcase \"side\":\r\n\t\t\t\treturn \"sidetype\"\r\n\t\t\tcase \"food\":\r\n\t\t\t\treturn \"name\"\r\n\t\t\tcase \"Food Amount\":\r\n\t\t\t\treturn \"foodamount\"\r\n\t\t\tcase \"Cooking Time\":\r\n\t\t\t\treturn \"time\"\r\n\t\t\tcase \"Last Eaten\":\r\n\t\t\t\treturn \"lasteaten\"\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"timeseaten\"\r\n\t\t}\r\n\t}\r\n\tObject.keys(sort).forEach(key => {\r\n\t\tconst value = sort[key];\r\n\t\tif (value === \"asc\") {\r\n\t\t\tsort[key] = 1\r\n\t\t} else if (value === \"desc\") {\r\n\t\t\tsort[key] = -1\r\n\t\t}\r\n\t\ts[convertName(key)] = sort[key]\r\n\t})\r\n\treturn s\r\n}\r\n\r\nconst convertFilters = (filters) => {\r\n\tvar f = {}\r\n\tObject.keys(filters).forEach(type => {\r\n\t\tvar d = {}\r\n\t\tif (type === \"speed\") {\r\n\t\t\td[\"time\"] = filters[type]\r\n\t\t\tf = Object.assign(f, d)\r\n\t\t} else {\r\n\t\t\tvar nins = []\r\n\t\t\tObject.keys(filters[type]).forEach(name => {\r\n\t\t\t\tif (filters[type][name] === \"$nin\") nins.push(name)\r\n\t\t\t})\r\n\t\t\tif (nins.length) {\r\n\t\t\t\tif (type === \"day\") {\r\n\t\t\t\t\tnins = nins.map(x => parseInt(x.split(\" \")[0]))\r\n\t\t\t\t\td[\"foodamount\"] = { $nin: nins }\r\n\t\t\t\t} else {\r\n\t\t\t\t\td[`${type}type`] = { $nin: nins }\r\n\t\t\t\t}\r\n\t\t\t\tf = Object.assign(f, d)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\treturn f\r\n}\r\n\r\nconst foodService = () => app.service('v1/foods')\r\nexport const foods = {\r\n\tlist: (filters, page, sort, search = \"\", limit) => {\r\n\t\tconst f = convertFilters(filters)\r\n\t\tconst sorting = getSorting(sort)\r\n\t\tvar query = Object.assign(f, {\r\n\t\t\t$skip: ((page - 1) < 0 ? 0 : page) * 10,\r\n\t\t\t$limit: limit,\r\n\t\t\t$sort: sorting,\r\n\t\t})\r\n\t\tif (search) query = Object.assign(query, { $search: search })\r\n\t\treturn foodService().find({ query: query })\r\n\t},\r\n\tget: id => foodService().get(id),\r\n\tcreate: food => foodService().create(food),\r\n\tpatch: (id, food) => foodService().patch(id, food),\r\n\tremove: id => foodService().remove(id),\r\n\tfind: query => foodService().find({ query: query }),\r\n\tdistincts: () => {\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t\tfoodService().find({ query: { $limit: 10000 } })\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tlet mainTypes = []\r\n\t\t\t\t\tlet sideTypes = []\r\n\t\t\t\t\tconst dayTypes = [...Array(4).keys()].map(d => `${d + 1} day`)\r\n\t\t\t\t\tresult.data.forEach(f => {\r\n\t\t\t\t\t\tmainTypes.push(f.maintype)\r\n\t\t\t\t\t\tf.sidetype.forEach(s => sideTypes.push(s))\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tmain: [...new Set(mainTypes)],\r\n\t\t\t\t\t\tside: [...new Set(sideTypes)],\r\n\t\t\t\t\t\tday: dayTypes\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t)\r\n\t},\r\n\tlastEaten: () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tfoodService().find({ query: {\r\n\t\t\t\t$sort: {\r\n\t\t\t\t\tlasteaten: -1\r\n\t\t\t\t},\r\n\t\t\t\t$lasteaten: true\r\n\t\t\t}}).then(res => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\n\r\n\r\nconst shopListService = () => app.service('v1/shoplist')\r\nexport const shoplist = {\r\n\tlist: query => {\r\n\t\treturn shopListService().find({ query: query })\r\n\t},\r\n\tget: id => shopListService().get(id),\r\n\tcreate: item => shopListService().create(item),\r\n\tpatch: (id, item) => shopListService().patch(id, item),\r\n\tremove: id => shopListService().remove(id)\r\n}\r\n\r\nconst paymentsService = () => app.service('v1/payments')\r\nexport const payments = {\r\n\tlist: query => paymentsService().find({ query: query }),\r\n\tget: id => paymentsService().get(id),\r\n\tcreate: payment => paymentsService().create({ ...payment, paid: false }),\r\n\tpatch: (id, payment) => paymentsService().patch(id, payment),\r\n\tremove: id => paymentsService().remove(id)\r\n}\r\n\r\nconst pendingPaymentsService = () => app.service('v1/pending-payments')\r\nexport const pendingPayments = {\r\n\tlist: query => pendingPaymentsService().find({ query: query }),\r\n\tget: id => pendingPaymentsService().get(id),\r\n\tcreate: pending => pendingPaymentsService().create(pending),\r\n\t// patch: (id, pending) => pendingPaymentsService().patch(id, pending),\r\n\t// remove: id => pendingPaymentsService().remove(id)\r\n}\r\n\r\nconst transactionService = () => app.service('v1/transactions')\r\nexport const transactionsApi = {\r\n    list: query => transactionService().find({ query: query }),\r\n    get: id => transactionService().get(id),\r\n    patch: (id, transaction) => transactionService().patch(id, transaction)\r\n}\r\n\r\nconst categoriesService = () => app.service('v1/categories')\r\nexport const categoriesApi = {\r\n    list: query => categoriesService().find({ query: query }),\r\n    get: id => categoriesService().get(id),\r\n    create: cateogry => categoriesService().create(cateogry),\r\n\tpatch: (id, cateogry) => categoriesService().patch(id, cateogry),\r\n\tremove: id => categoriesService().remove(id)   \r\n}\r\n\r\nconst categoryTypeService = () => app.service('v1/category-type')\r\nexport const categoryTypesApi = {\r\n    list: query => categoryTypeService().find({ query: query }),\r\n    get: id => categoryTypeService().get(id),\r\n    create: type => categoryTypeService().create(type),\r\n\tpatch: (id, type) => categoryTypeService().patch(id, type),\r\n\tremove: id => categoryTypeService().remove(id)   \r\n}\r\n\r\nconst hwinfoService = () => app.service('v1/hwinfo')\r\nexport const hwinfoApi = {\r\n    list: query => hwinfoService().find({ query: query })\r\n}\r\n\r\nconst nhService = () => app.service('v1/nh')\r\nexport const nhApi = {\r\n    get: () => nhService().get({})\r\n}\r\n\r\nconst binanceService = () => app.service('v1/binance')\r\nexport const binanceApi = {\r\n    find: (query) => binanceService().find({ query: query })\r\n}","import React from 'react'\r\n\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider'\r\n\r\nimport ActionExitToApp from '@material-ui/icons/ExitToApp';\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { closeProfile, setMessage, deauthUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst profile = ({ user, profileOpen, onCloseProfile, anchorEl, onSignOut }) => {\r\n\r\n\treturn (\r\n\t\t<Menu\r\n\t\t\tanchorEl={anchorEl}\r\n\t\t\tkeepMounted\r\n\t\t\topen={profileOpen}\r\n\t\t\tonClose={onCloseProfile}\r\n\t\t\tdisableAutoFocus={true}\r\n\t\t>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={`Signed in as: ${user.isQuest ? \" Quest\" : \"\"}`} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={user.name} secondary={user.email} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<Divider />\r\n\t\t\t<MenuItem onClick={() => {\r\n\t\t\t\tonCloseProfile()\r\n\t\t\t\tonSignOut()\r\n\t\t\t}}>\r\n\t\t\t\t<ListItemIcon><ActionExitToApp /></ListItemIcon>\r\n\t\t\t\t<ListItemText primary='Sign Out' />\r\n\t\t\t</MenuItem>\r\n\t\t</Menu>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tprofileOpen: state.profile.open,\r\n\t\tanchorEl: state.profile.anchor\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t},\r\n\t\tonSignOut: () => {\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign out.'))\r\n\t\t\t}, 5000)\r\n\t\t\tusers.signOut()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed out.'))\r\n\t\t\t\t\tdispatch(deauthUser())\r\n\t\t\t\t\t// eslint-disable-next-line no-restricted-globals\r\n\t\t\t\t\tbrowserHistory.push('/signin');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage(err.message))\r\n\t\t\t\t})\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(profile)\r\n","import React from 'react'\r\nimport { AppTheme } from '../theme'\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Header from './Header'\r\nimport Message from './Message'\r\n\r\nimport Nav from './Nav'\r\nimport Profile from './profile'\r\n// import MediaQuery from 'react-responsive'\r\n\r\nexport default class App extends React.Component {\r\n\r\n    render() {\r\n        let navBar, profileMenu;\r\n        if (this.props.location.pathname !== \"/signin\") {\r\n            navBar = <Nav />\r\n            profileMenu = <Profile />\r\n        }\r\n        return (\r\n            <AppTheme>\r\n                <div>\r\n                    <CssBaseline />\r\n                    <Header location={this.props.location} />\r\n                    {navBar}\r\n                    {profileMenu}\r\n                    {this.props.main}\r\n                    {this.props.children}\r\n                    <Message />\r\n                </div>\r\n            </AppTheme>\r\n        )\r\n    }\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport List from '@material-ui/core/List'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ActionLock from '@material-ui/icons/Lock'\r\n\r\n// import { CookieDisclaimer } from '../home/CookieDisclaimer'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { setMessage, setError, authUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tmarginTop: \"8rem\",\r\n\t\tdisplay: 'flex',\r\n\t\tmargin: theme.spacing(2),\r\n\t},\r\n\tTextField: {\r\n\t\tdisplay: \"flex\",\r\n\t\tmargin: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(4)\r\n\t}\r\n}))\r\n\r\nfunction SignIn(props) {\r\n\tconst classes = useStyles();\r\n\tconst [error] = useState();\r\n\tconst [email, setEmail] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\r\n\tconst { onSignIn } = props;\r\n\r\n\tconst submitHanlder = event => {\r\n\t\tevent.preventDefault()\r\n\t\tonSignIn(email, password)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper elevation={3} style={{ width: \"100%\"}}>\r\n\t\t\t\t<List subheader={<ListSubheader>Sign In</ListSubheader>}>\r\n\t\t\t\t\t<form onSubmit={submitHanlder} style={{ marginTop: '24px' }}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Email\"\r\n                                value={email}\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 1 || error === 3 ? \"E-mail is required\" : error === 4 ? 'E-mail does not contain \"@\" symbol' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Password\"\r\n                                value={password}\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 2 || error === 3 ? 'Password is required' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tstartIcon={<ActionLock />}\r\n\t\t\t\t\t\t\t\tonClick={submitHanlder}\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t>Sign In</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"submit\" style={{ display: \"none\" }} />\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</List>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSignIn: (email, password) => {\r\n\t\t\tif (email.length === 0 && password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail and password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(3) }\r\n\t\t\t}\r\n\t\t\tif (email.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(1) }\r\n\t\t\t}\r\n\t\t\tif (email.indexOf('@') === -1) {\r\n\t\t\t\tdispatch(setMessage('E-mail does not contain \"@\" symbol'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(4) }\r\n\t\t\t}\r\n\t\t\tif (password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('Password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(2) }\r\n\t\t\t}\r\n\t\t\tdispatch(setMessage('Signing in...'))\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign in.'))\r\n\t\t\t}, 5000)\r\n\t\t\treturn users.signIn(email, password)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed in.'));\r\n\t\t\t\t\tdispatch(authUser(result.user));\r\n\t\t\t\t\tbrowserHistory.push('/home')\r\n\t\t\t\t\treturn { user: result.user, error: null }\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tif (err.name === 'MongoError') {\r\n\t\t\t\t\t\tdispatch(setMessage('Server error. Try again later.'))\r\n\t\t\t\t\t} else if (err.name === 'NotAuthenticated') {\r\n\t\t\t\t\t\tdispatch(setMessage('Unable to sign in. Invalid e-mail or password.'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatch(setError('Error: ' + err.name + err.message))\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbrowserHistory.push('/')\r\n\t\t\t\t\tsetTimeout(() => browserHistory.push('/signin'), 10)\r\n\t\t\t\t\treturn { user: null, error: err };\r\n\t\t\t\t})\r\n\t\t},\r\n\t\tonSignInGoogle: () => {\r\n\t\t\t//   dispatch(setMessage('Signing in...'))\r\n\t\t\t//   return users.signInGoogle()\r\n\t\t},\r\n\t\tonResetPassword: () => {\r\n\t\t\t//   browserHistory.push('/passwordreset')\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\r\n","import React from 'react'\r\n\r\nimport List from '@material-ui/core/List';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { closeDrawer } from '../App/AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\tmarginTop: \"10rem\",\r\n\t\tmarginLeft: \"1rem\",\r\n\t\tmarginRight: \"1rem\"\r\n\t}\r\n}))\r\n\r\nconst Home = (props) => {\r\n\tconst classes = useStyles()\r\n\tconst { user } = props;\r\n\tlet menuItems = []\r\n\r\n\tmenuItems.push(<NavItem key={0} path=\"foods\" icon={<FastfoodIcon />} />)\r\n\tmenuItems.push(<NavItem key={1} path=\"shoplist\" icon={<ShoppingCartIcon />} />)\r\n\tif (user.role === \"admin\") {\r\n        menuItems.push(<NavItem key={2} path=\"payments\" icon={<PaymentIcon />} />)\r\n        menuItems.push(<NavItem key={3} path=\"minermonitor\" icon={<TimelineIcon />} />)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<List className={classes.paper}>\r\n\t\t\t\t{menuItems}\r\n\t\t\t</List>\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)","import React from 'react'\r\n\r\nimport { Box, Typography } from '@material-ui/core';\r\n\r\nconst TabContent = (props) => {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<Typography\r\n\t\t\tcomponent=\"div\"\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`simple-tabpanel-${index}`}\r\n\t\t\taria-labelledby={`simple-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && <Box p={3}>{children}</Box>}\r\n\t\t</Typography>\r\n\t);\r\n}\r\n\r\nexport default TabContent;","import React, { useState } from 'react'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { Tabs, Tab, Button, Slider, Grid } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport TabContent from '../core/TabContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfilterSectionRoot: {\r\n\t\tflexGrow: 1,\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tdisplay: 'flex',\r\n\t\theight: 224,\r\n\t\t// marginLeft: \"-20px\"\r\n\t},\r\n\ttabs: {\r\n\t\tborderRight: `1px solid ${theme.palette.divider}`,\r\n\t\tbackgroundColor: theme.palette.primary,\r\n\t},\r\n\tverticalTab: {\r\n\t\talignItems: \"start\",\r\n\t\tmaxWidth: \"10px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\ttabContainer: {\r\n\t\tflexGrow: 1,\r\n\t\tmaxWidth: \"250px\",\r\n\t\tmarginLeft: \"-56px\",\r\n\t\tmarginTop: \"-40px\",\r\n\t\tpaddingTop: \"2px\"\r\n\t},\r\n\tspeedContainer: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmarginLeft: \"5px\"\r\n\t},\r\n\tspeedText: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspeedBtn: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tmargin: \"10px\"\r\n\t},\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(1),\r\n\t\ttextAlign: 'center',\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t},\r\n\tfilterButton: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\"\r\n\t},\r\n\tfilterButtonDisabled: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\",\r\n\t\tcolor: \"#d3d3d3\"\r\n\t},\r\n\theader: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\",\r\n\t\topacity: 1,\r\n\t\t// border: `1px solid ${theme.palette.primary.main}`,\r\n\t\t// color: theme.palette.primary.main\r\n\t},\r\n\tfilterTab: {\r\n\t\tminWidth: \"80px\"\r\n\t},\r\n}));\r\n\r\nconst getSpeedLabel = (value) => {\r\n\tconst hours = Math.floor(value / 60)\r\n\tconst mins = Math.floor((value % 60) / 6);\r\n\tif (mins === 0) return hours\r\n\treturn `${hours}.${mins}`\r\n}\r\n\r\nconst getSpeedText = (value) => {\r\n\tconst hours = Math.floor(value / 60)\r\n\tconst mins = Math.floor(value % 60);\r\n\tif (hours === 0) return `    ${mins} min`\r\n\tif (mins === 0) return `${hours} h       `\r\n\treturn `${hours}h ${mins} min`\r\n}\r\n\r\nconst inSpread = 2;\r\nconst outSpread = 12;\r\nconst gridSpacing = 3;\r\n\r\nconst FilterSection = ({ filters, setFilters }) => {\r\n\tconst classes = useStyles()\r\n\tconst [tabValue, setTabValue] = useState(0)\r\n\r\n\tconst onFilterClick = (f) => {\r\n\t\tvar selected;\r\n\t\tif (f in filters.main) selected = filters.main\r\n\t\telse if (f in filters.side) selected = filters.side\r\n\t\telse if (f in filters.day) selected = filters.day\r\n\t\tconst newValue = selected[f] === \"$in\" ? \"$nin\" : \"$in\"\r\n\t\tselected[f] = newValue\r\n\t\tsetFilters(filters)\r\n\t}\r\n\t\r\n\tconst forceColumn = (type, filter) => {\r\n\t\tconst first = Object.keys(type.type)[0]\r\n\r\n\t\tvar selected;\r\n\t\tif (first in filters.main) selected = filters.main\r\n\t\telse if (first in filters.side) selected = filters.side\r\n\t\telse if (first in filters.day) selected = filters.day\r\n\r\n\t\tObject.keys(selected).forEach(f => {\r\n\t\t\tselected[f] = filter\r\n\t\t})\r\n\t\tsetFilters(filters)\r\n\t}\r\n\r\n\tconst GridHeader = (type) => (\r\n\t\t<React.Fragment>\r\n\t\t\t<Grid item xs={inSpread}>\r\n\t\t\t\t<Button color=\"primary\" className={classes.header} onClick={() => forceColumn(type, \"$in\")}>Include</Button>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={inSpread}>\r\n\t\t\t\t<Button color=\"primary\" className={classes.header} onClick={() => forceColumn(type, \"$nin\")}>Exclude</Button>\r\n\t\t\t</Grid>\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst onOffBtn = (on, label, onClick) => (\r\n\t\t<Button\r\n\t\t\tvariant={on ? \"contained\" : \"outlined\"}\r\n\t\t\tcolor={on ? \"primary\" : \"default\"}\r\n\t\t\tonClick={() => onClick(label)}\r\n\t\t\tclassName={on ? classes.filterButton : classes.filterButtonDisabled}\r\n\t\t>{label}</Button>\r\n\t)\r\n\r\n\tconst buttonFilters = (type) => {\r\n\t\tconst arr = Object.keys(type)\r\n\t\treturn (\r\n\t\t\t<div className={classes.tabContainer}>\r\n\t\t\t\t<Grid container spacing={1} directon=\"row\" justify=\"space-evenly\" alignItems=\"flex-start\">\r\n\t\t\t\t\t<Grid container item xs={outSpread} spacing={gridSpacing}>\r\n\t\t\t\t\t\t<GridHeader type={type} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{arr.map(f => {\r\n\t\t\t\t\t\tconst left = type[f] === \"$in\"\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<React.Fragment key={f}>\r\n\t\t\t\t\t\t\t\t<Grid container item xs={outSpread} spacing={gridSpacing} >\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={inSpread} >\r\n\t\t\t\t\t\t\t\t\t\t{onOffBtn(left, f, onFilterClick)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={inSpread} >\r\n\t\t\t\t\t\t\t\t\t\t{onOffBtn(!left, f, onFilterClick)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst mainContent = buttonFilters(filters.main)\r\n\tconst sideContent = buttonFilters(filters.side)\r\n\tconst dayContent = buttonFilters(filters.day)\r\n\r\n\tconst speedFilter = Object.keys(filters.speed)[0]\r\n\tconst speedValue = filters.speed[speedFilter]\r\n\tconst timeIsLess = speedFilter === \"$lt\"\r\n\tconst speedFilterText = timeIsLess ? \"less\" : \"more\";\r\n\r\n\tconst handleSpeedClick = (value) => {\r\n\t\tfilters.speed = timeIsLess ? {\"$gt\": speedValue} : {\"$lt\": speedValue}\r\n\t\tsetFilters(filters)\r\n\t}\r\n\r\n\tconst speedContent = (\r\n\t\t<div className={classes.speedContainer}>\r\n\t\t\t<div className={classes.speedBtn}>\r\n\t\t\t\t{onOffBtn(timeIsLess, \"<\", handleSpeedClick)}\r\n\t\t\t\t{onOffBtn(!timeIsLess, \">\", handleSpeedClick)}\r\n\t\t\t</div>\r\n\t\t\t<Slider\r\n\t\t\t\tvalue={speedValue}\r\n\t\t\t\tdefaultValue={180}\r\n\t\t\t\ttrack={timeIsLess ? \"normal\" : \"inverted\"}\r\n\t\t\t\tgetAriaValueText={value => `${value}`}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tvalueLabelFormat={value => getSpeedLabel(value)}\r\n\t\t\t\tonChange={(e, value) => {\r\n\t\t\t\t\tif (value !== speedValue) {\r\n\t\t\t\t\t\tfilters.speed[speedFilter] = value\r\n\t\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tstep={30}\r\n\t\t\t\tmin={0}\r\n\t\t\t\tmax={180}\r\n\t\t\t/>\r\n\t\t\t{/* <Typography id=\"discrete-slider-restrict\" gutterBottom> */}\r\n\t\t\t\t<div className={classes.speedText}>\r\n\t\t\t\t\t<div>{`Takes ${speedFilterText} than `}</div>\r\n\t\t\t\t\t<div>{`${getSpeedText(speedValue)}`}</div>\r\n\t\t\t\t\t<div>{` to make`}</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/* </Typography> */}\r\n\t\t</div>\r\n\t);\r\n\t\r\n\treturn (\r\n\t\t<div className={classes.filterSectionRoot}>\r\n\t\t\t<Tabs\r\n\t\t\t\torientation=\"vertical\"\r\n\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\tvalue={tabValue}\r\n\t\t\t\tonChange={(e, value) => setTabValue(value)}\r\n\t\t\t>\r\n\t\t\t\t<Tab label=\"Main\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Side\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Speed\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Day\" className={classes.filterTab} />\r\n\t\t\t</Tabs>\r\n\t\t\t<TabContent value={tabValue} index={0} >\r\n\t\t\t\t{mainContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={1} >\r\n\t\t\t\t{sideContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={2} >\r\n\t\t\t\t{speedContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={3} >\r\n\t\t\t\t{dayContent}\r\n\t\t\t</TabContent>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FilterSection)","import React from 'react'\r\n\r\nimport { Button, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfilterSectionRoot: {\r\n\t\tflexGrow: 1,\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tdisplay: 'flex',\r\n\t\theight: 224,\r\n\t\twidth: \"325px\"\r\n\t},\r\n\tbuttonContainer: {\r\n\t\twidth: \"33%\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tdescriptionContainer: {\r\n\t\theight: \"40%\",\r\n\t\tcolor: \"rgba(0, 0, 0, 0.54)\"\r\n\t},\r\n\tupperdescriptionContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"flex-end\"\r\n\t},\r\n\ttextContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t}\r\n}));\r\n\r\nexport default ({ sort, setSort }) => {\r\n\tconst classes = useStyles()\r\n\r\n\tconst handleChange = (name) => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) sort[name] = 1\r\n\t\telse if (value > 0) sort[name] = -1\r\n\t\telse delete sort[name]\r\n\t\tsetSort(sort)\r\n\t}\r\n\r\n\tconst getSortDescriptionUp = name => {\r\n\t\tif (!sort[name] || sort[name] < 0) return null\r\n\t\tconst icon = <ArrowUpwardIcon />\r\n\t\tconst text = name === \"Food Amount\" ? \"Less first\" : (name === \"Cooking Time\" ? \"Fastest first\" : \"Oldest first\")\r\n\t\treturn (\r\n\t\t\t<div className={classes.textContainer}>\r\n\t\t\t\t{icon}\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</Typography>\r\n\t\t\t</ div>\r\n\t\t)\r\n\t}\r\n\t\r\n\tconst getSortDescriptionDown = name => {\r\n\t\tif (!sort[name] || sort[name] > 0) return  null\r\n\t\tconst icon = <ArrowDownwardIcon />\r\n\t\tconst text = name === \"Food Amount\" ? \"Multiple first\" : (name === \"Cooking Time\" ? \"Slowest first\" : \"Latest first\")\r\n\t\treturn (\r\n\t\t\t<div className={classes.textContainer}>\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t{icon}\r\n\t\t\t</ div>\r\n\t\t)\r\n\t}\r\n\t\r\n\r\n\tconst SortButton = (name) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.buttonContainer}>\r\n\t\t\t\t<div className={`${classes.descriptionContainer} ${classes.upperdescriptionContainer}`}>\r\n\t\t\t\t\t{getSortDescriptionUp(name)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={() => handleChange(name)}>\r\n\t\t\t\t\t{name}\r\n\t\t\t\t</Button>\r\n\t\t\t\t<div className={classes.descriptionContainer}>\r\n\t\t\t\t\t{getSortDescriptionDown(name)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.filterSectionRoot}>\r\n\t\t\t{SortButton(\"Food Amount\")}\r\n\t\t\t{SortButton(\"Cooking Time\")}\r\n\t\t\t{SortButton(\"Last Eaten\")}\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, Tabs, Tab } from '@material-ui/core';\r\n\r\nimport FilterSection from './FilterSection'\r\nimport FilterSorting from './FilterSorting'\r\nimport TabContent from '../core/TabContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttabs: {\r\n\t\twidth: \"100%\",\r\n\t},\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tactionContent: {\r\n\t\talignItems: \"stretch\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t},\r\n}))\r\n\r\nconst copyObj = filters => {\r\n\treturn JSON.parse(JSON.stringify(filters))\r\n}\r\n\r\n\r\nconst Filters = ({ onApply, filtersOpen, setOpenFilter, currentFilters, currentSort, clearFilters }) => {\r\n\tconst classes = useStyles()\r\n\tconst [tabValue, setTabValue] = useState(0)\r\n\tconst [filters, setFilters] = useState(copyObj(currentFilters))\r\n\tconst [sort, setSort] = useState(copyObj(currentSort))\r\n\r\n\tif (!filters.main.liha && currentFilters.main.liha) {\r\n\t\tsetFilters(copyObj(currentFilters))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={filtersOpen} onClose={() => {\r\n\t\t\t\tsetFilters(copyObj(currentFilters))\r\n\t\t\t\tsetSort(copyObj(currentSort))\r\n\t\t\t\tsetOpenFilter()\r\n\t\t\t}} >\r\n\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvariant=\"fullWidth\"\r\n\t\t\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\tvalue={tabValue}\r\n\t\t\t\t\t\tonChange={(e, value) => setTabValue(value)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tab label=\"Filters\" />\r\n\t\t\t\t\t\t<Tab label=\"Sort\" />\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t<TabContent value={tabValue} index={0} >\r\n\t\t\t\t\t\t<FilterSection\r\n\t\t\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\t\t\tsetFilters={f => setFilters(copyObj(f))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabContent>\r\n\t\t\t\t\t<TabContent value={tabValue} index={1} >\r\n\t\t\t\t\t\t<FilterSorting \r\n\t\t\t\t\t\t\tsort={sort}\r\n\t\t\t\t\t\t\tsetSort={s => setSort(copyObj(s))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabContent>\r\n\t\t\t\t</div>\r\n\t\t\t\t<DialogActions className={classes.actionContent}>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tfilters.main.liha = null;\r\n\t\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t\t\tsetSort({})\r\n\t\t\t\t\t\tclearFilters()\r\n\t\t\t\t\t}} color=\"primary\" >\r\n\t\t\t\t\t\tClear Filters\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tsetOpenFilter()\r\n\t\t\t\t\t\tonApply(filters, sort)\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\tApply\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tcurrentFilters: state.food.filters,\r\n\t\tfiltersOpen: state.food.filtersOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Filters)","import React from 'react'\r\n\r\nexport const boldSearch = (text, search) => {\r\n\tif (!text || !search) return text;\r\n\tsearch = search.toLowerCase()\r\n\ttext = text.toLowerCase()\r\n\tconst split = text.split(search);\r\n\tconst bolded = split.map((x, i) => {\r\n\t\tif (i === split.length - 1) return x;\r\n\t\treturn (<span key={i}>{x}<b>{search}</b></span>)\r\n\t})\r\n\treturn (\r\n\t\t<span>\r\n\t\t\t{bolded.map(x => x)}\r\n\t\t</span>\r\n\t)\r\n}","export const setFilters = (filters) => {\r\n\treturn { type: \"SET_FILTERS\", filters }\r\n}\r\n\r\nexport const selectFood = (food) => {\r\n\treturn { type: \"SELECT_FOOD\", food}\r\n}\r\n\r\nexport const setFoods = (foods) => {\r\n\treturn { type: \"SET_FOODS\", foods}\r\n}\r\n\r\nexport const onSetOpenFilters = () => {\r\n\treturn { type: \"SET_OPEN_FILTERS\"}\r\n}\r\n\r\nexport const distincts = (res) => {\r\n\treturn { type: \"SET_DISTINCTS\", res}\r\n}\r\n\r\nexport const setEditFood = (food) => {\r\n\treturn { type: \"EDIT_FOOD\", food}\r\n}\r\n\r\nexport const setErrors = (errors) => {\r\n\treturn { type: \"SET_ERRORS\", errors}\r\n}\r\n\r\nexport const setLatestFood = (food) => {\r\n\treturn { type: \"SET_LATEST_FOOD\", food}\r\n}\r\n\r\nexport const setOptions = (options) => {\r\n\treturn { type: \"SET_SEARCH_OPTIONS\", options }\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport Box from '@material-ui/core/Box';\r\nimport { boldSearch } from '../core/BoldSearch'\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setOptions } from './foodAction'\r\nimport { foods } from '../api'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tmaxWidth: \"300px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\",\r\n\t\twidth: \"100%\"\r\n\t},\r\n\tsearchDiv: {\r\n\t\twidth: \"60%\"\r\n\t},\r\n\tbtnDiv: {\r\n\t\twidth: \"40%\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tpadding: {\r\n\t\tpadding: theme.spacing(2)\r\n\t}\r\n}))\r\n\r\nfunction Search(props) {\r\n\tconst classes = useStyles()\r\n\tconst { search, onSelectFood, options, onSetOptions } = props\r\n\tconst [searchState, setSearchState] = useState(search)\r\n\r\n\tconst setSearch = search => {\r\n\t\tsetSearchState(search)\r\n\t\tonSetOptions(search)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box display=\"block\" justifyContent=\"center\" className={classes.padding}>\r\n\t\t\t<Autocomplete\r\n\t\t\t\toptions={options}\r\n\t\t\t\tgetOptionLabel={option => option.name}\r\n\t\t\t\trenderOption={option => boldSearch(option.name, searchState)}\r\n\t\t\t\trenderInput={params => {\r\n\t\t\t\t\tvar { InputProps, ...rest } = params;\r\n\t\t\t\t\tInputProps.startAdornment = (\r\n\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t\t\t</InputAdornment >)\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\tplaceholder=\"Search...\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tvalue={searchState}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tonChange={e => setSearch(e.target.value)}\r\n\t\t\t\t\t\t\tInputProps={InputProps}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t\tonChange={(e, value) => {\r\n\t\t\t\t\tonSelectFood(value)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t</ Box>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\toptions: state.food.searchOptions\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetOptions: search => {\r\n\t\t\tif (!search.length)\r\n\t\t\t\treturn dispatch(setOptions([]))\r\n\t\t\tconst query = { $regex: search }\r\n\t\t\tfoods.find(query)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setOptions(res.data))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Search)","const dayMs = 24 * 60 * 60 * 1000\r\n\r\nconst getShortTime = (date, short) => {\r\n    const d = date.getDate()\r\n    const m = date.getMonth() + 1\r\n    if (short) return `${d}.${m}`\r\n    const year = date.getFullYear().toString().substr(2)\r\n    return `${d}.${m}.${year}`\r\n}\r\n\r\nconst getDateText = (start, end) => {\r\n    const numDays = Math.floor((end - start) / dayMs)\r\n    const days = numDays < 2 ? \"day\" : \"days\"\r\n    const today = new Date()\r\n    const diff = Math.round((today - end) / dayMs)\r\n    var ago;\r\n    if (diff > 356) {\r\n        ago = \"Over a Year ago\"\r\n    } else if (diff > 30) {\r\n        const m = Math.round(diff / 30)\r\n        ago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n    } else if (diff > 7) {\r\n        const w = Math.round(diff / 7)\r\n        ago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n    } else if (diff > 0) {\r\n        ago = `${diff} day${diff > 1 ? \"s\" : \"\"} ago`\r\n    } else if (diff === 0) {\r\n        ago = \"today\"\r\n    } else if (diff === -1) {\r\n        ago = \"tomorrow\"\r\n    } else if (diff < -1) {\r\n        ago = `in ${diff * (-1)} days`\r\n    }\r\n    return `${ago} - ${getShortTime(start, true)}-${getShortTime(end)} (${numDays} ${days} food)`\r\n}\r\n\r\nexport const getDateTimeDifferenceString = (timestamp) => {\r\n    const now = new Date()\r\n    const diffSeconds = (now - timestamp) / 1000;\r\n    if (diffSeconds < 60)\r\n        return `${diffSeconds.toFixed(0)} s ago`\r\n    if (diffSeconds < 60 * 60)\r\n        return `${(diffSeconds / 60).toFixed(0)} min ago`\r\n    if (diffSeconds < 24 * 60 * 60)\r\n        return `${(diffSeconds / (60 * 60)).toFixed(0)} h ago`\r\n    if (diffSeconds < 7 * 24 * 60 * 60) {\r\n        const days = (diffSeconds / (24 * 60 * 60)).toFixed(0);\r\n        if (days === '1')\r\n            return `${days} day ago`\r\n        return `${days} days ago`\r\n    }\r\n    return `${timestamp.getDate()}.${timestamp.getMonth() + 1}.${timestamp.getFullYear().toString().slice(2)}`;\r\n}\r\n\r\n/**\r\n * dates = Array of date objects\r\n * return Array of strings\r\n * @param {Array} dates \r\n */\r\nconst combineDates = (dates, maxLength = 10) => {\r\n    if (!dates.length) return []\r\n    dates = dates.sort((a, b) => b - a)\r\n    const arr = []\r\n    var firstDate = dates[0]\r\n    var latestDate = dates[0]\r\n    dates.forEach((date, i) => {\r\n        if (arr.length >= maxLength) return arr\r\n        // start of new date clamp\r\n        if (latestDate - date > 2 * dayMs) {\r\n            arr.push(getDateText(firstDate, latestDate))\r\n            firstDate = date;\r\n            latestDate = date;\r\n            return\r\n        }\r\n        firstDate = date\r\n        if (i === dates.length - 1) {\r\n            arr.push(getDateText(firstDate, latestDate))\r\n        }\r\n    });\r\n    return arr\r\n}\r\nexport default combineDates","import React from 'react';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport combineDates from './combineDates';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t},\r\n\thighlight:\r\n\t\ttheme.palette.type === 'light'\r\n\t\t\t? {\r\n\t\t\t\tcolor: theme.palette.secondary.main,\r\n\t\t\t\tbackgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n\t\t\t}\r\n\t\t\t: {\r\n\t\t\t\tcolor: theme.palette.text.primary,\r\n\t\t\t\tbackgroundColor: theme.palette.secondary.dark,\r\n\t\t\t},\r\n\ttitle: {\r\n\t\tflex: '1 1 100%',\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1,\r\n\t},\r\n\tbutton: {\r\n\t\tmarginRight: theme.spacing(2),\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tminWidth: \"133px\",\r\n\t}\r\n}));\r\n\r\nconst MyTable = (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { columns, data, sort, setSort, limit, setLimit, onSelectFood, onAddFood, page, setPage, setOpenFilter } = props;\r\n\tif (!data) return (\r\n\t\t<div />\r\n\t)\r\n\r\n\tconst foods = data.data\r\n\tconst count = data.total || 0;\r\n\tconst pager = count === 0 ? 0 : page;\r\n\r\n\tconst handleChange = (name) => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) sort[name] = 1\r\n\t\telse if (value > 0) sort[name] = -1\r\n\t\telse delete sort[name]\r\n\t\tsetSort(sort)\r\n\t}\r\n\r\n\tconst tableToolbar = (\r\n\t\t<Toolbar >\r\n\t\t\t<Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t\tFoods\r\n\t\t  \t\t</Typography>\r\n\t\t\t<Tooltip title=\"Add New Food\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={onAddFood}\r\n\t\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.button}\r\n\t\t\t\t\tsize=\"small\" >\r\n\t\t\t\t\tAdd Food\r\n\t\t\t\t</Button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"Filter list\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tendIcon={<FilterListIcon />}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tclassName={classes.button}\r\n\t\t\t\t\tonClick={() => { setOpenFilter() }}>\r\n\t\t\t\t\tFilter\r\n\t\t\t\t\t</Button>\r\n\t\t\t</Tooltip>\r\n\t\t</Toolbar>\r\n\t)\r\n\r\n\tconst getSortDirection = name => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) return false;\r\n\t\tif (value > 0) return \"asc\"\r\n\t\treturn \"desc\"\r\n\t}\r\n\r\n\tconst tableHeaders = (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t{columns.map((name, i) => (\r\n\t\t\t\t\t<TableCell key={i}\r\n\t\t\t\t\t\tclassName={classes.root}\r\n\t\t\t\t\t\talign={\"left\"}\r\n\t\t\t\t\t\tpadding=\"none\"\r\n\t\t\t\t\t\tsortDirection={getSortDirection(name)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\tactive={Boolean(sort[name])}\r\n\t\t\t\t\t\t\tdirection={getSortDirection(name) || \"asc\"}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\thandleChange(name)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t)\r\n\r\n\tconst tableBody = (\r\n\t\t<TableBody>\r\n\t\t\t{foods.map((d, i) => (\r\n\t\t\t\t<TableRow\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\thover\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\tonSelectFood(d)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.maintype}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.sidetype.join(\", \")}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.name}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.timeseaten}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.lasteaten && d.lasteaten.length ? \r\n\t\t\t\t\t\tcombineDates(d.lasteaten.map(x => new Date(x)), 1)[0].split(\" - \")[0]\r\n\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.time}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.foodamount}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t</TableRow>\r\n\t\t\t))}\r\n\t\t</TableBody>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{tableToolbar}\r\n\t\t\t<TableContainer>\r\n\t\t\t\t<Table size={'medium'} >\r\n\t\t\t\t\t{tableHeaders}\r\n\t\t\t\t\t{tableBody}\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={count}\r\n\t\t\t\trowsPerPage={limit}\r\n\t\t\t\tonChangeRowsPerPage={e => setLimit(e.target.value)}\r\n\t\t\t\trowsPerPageOptions={[10,20,40,50]}\r\n\t\t\t\tpage={pager}\r\n\t\t\t\tonChangePage={(e, newPage) => {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\tsetPage(newPage)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default MyTable","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, Button, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n}))\r\n\r\nexport default ({ open, onCancel, onOk, title, text, cancelText, okText }) => {\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={oncancel} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={onCancel} color=\"primary\">\r\n\t\t\t\t\t\t{cancelText || \"Cancel\"}\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={onOk} color=\"primary\">\r\n\t\t\t\t\t\t{okText || \"Apply\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, OutlinedInput, DialogTitle, DialogContent, TextField, MenuItem, FormControl, InputLabel, Select, Checkbox, ListItemText, FormHelperText } from '@material-ui/core';\r\n\r\nimport { setEditFood, setErrors, selectFood } from './foodAction'\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\twidth: \"250px\",\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\taddButton: {\r\n\t\tminWidth: \"100px\",\r\n\t\tmaxWidth: \"150px\",\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t\tcolor: theme.palette.primary.main\r\n\t},\r\n\tsideType: {\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tdialogContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tmargin: \"auto\",\r\n\t\twidth: \"fit-content\"\r\n\t}\r\n}))\r\n\r\nconst distDayTypes = [\r\n\t{ label: \"1 day\", value: 1 },\r\n\t{ label: \"2 days\", value: 2 },\r\n\t{ label: \"3 days\", value: 3 },\r\n\t{ label: \"4 days\", value: 4 },\r\n\t{ label: \"5 days\", value: 5 },\r\n]\r\n\r\nconst FoodEdit = ({ user, foodEdit, open, onSetEditFood, distMainTypes, distSideTypes, onSaveFood, onDeleteFood, errors, onUpdate }) => {\r\n\tconst classes = useStyles()\r\n\tvar food = Object.assign({}, foodEdit);\r\n\r\n\tconst [mainType, setMainType] = useState(food.maintype)\r\n\tconst [foodAmount, setFoodAmount] = useState(food.foodamount.toString())\r\n\tconst [sideTypes, setSideTypes] = useState(food.sidetype)\r\n\tconst [name, setName] = useState(food.name)\r\n\tconst [recipe, setRecipe] = useState(food.link)\r\n\tconst [eaten, setEaten] = useState(food.timeseaten)\r\n\tconst [cookTime, setCookTime] = useState(food.time)\r\n\tconst [deleteOpen, setDeleteOpen] = useState(false)\r\n\r\n\tconst constructFood = () => {\r\n\t\treturn {\r\n\t\t\t_id: food._id,\r\n\t\t\tname: name,\r\n\t\t\tlink: recipe,\r\n\t\t\tmaintype: mainType,\r\n\t\t\tsidetype: sideTypes,\r\n\t\t\tfoodamount: foodAmount,\r\n\t\t\ttime: cookTime,\r\n\t\t\ttimeseaten: eaten\r\n\t\t}\r\n\t}\r\n\r\n\tconst validateTime = (value) => {\r\n\t\tconst regex = new RegExp(\"[^0-9]\")\r\n\t\tif (regex.test(value)) return\r\n\t\tsetCookTime(value)\r\n\t}\r\n\r\n\tconst SelectField = ({ label, value, onChange, types }) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.selectFieldContainer}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tselect\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e => onChange(e.target.value)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{types.map((x, i) => (\r\n\t\t\t\t\t\t<MenuItem key={i} value={x.value || x}>\r\n\t\t\t\t\t\t\t{x.label || x}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</TextField>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst sideTypeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<FormControl className={classes.selectField} variant=\"outlined\"\r\n\t\t\t\terror={errors.includes(\"side\")}\r\n\t\t\t>\r\n\t\t\t\t<InputLabel className={classes.sideType}>Side Types</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tmultiline={true}\r\n\t\t\t\t\tvalue={sideTypes}\r\n\t\t\t\t\tonChange={e => setSideTypes(e.target.value)}\r\n\t\t\t\t\tinput={<OutlinedInput />}\r\n\t\t\t\t\trenderValue={sideTypes => sideTypes.join(\", \")}\r\n\t\t\t\t>\r\n\t\t\t\t\t{distSideTypes.map(type => (\r\n\t\t\t\t\t\t<MenuItem key={type} value={type}>\r\n\t\t\t\t\t\t\t<Checkbox checked={sideTypes.includes(type)} color=\"primary\" />\r\n\t\t\t\t\t\t\t<ListItemText primary={type} />\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t\t<FormHelperText>{errors.includes(\"side\") ? \"Must have at least one side type\" : \"\"}</FormHelperText>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst nameElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Name\"}\r\n\t\t\t\tvalue={name}\r\n\t\t\t\tmultiline={true}\r\n\t\t\t\tonChange={value => setName(value.target.value)}\r\n\t\t\t\terror={errors.includes(\"name\")}\r\n\t\t\t\thelperText={errors.includes(\"name\") ? \"Name can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst speedElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Cooking Time\"\r\n\t\t\t\tvalue={cookTime}\r\n\t\t\t\tonChange={e => validateTime(e.target.value)}\r\n\t\t\t\terror={errors.includes(\"time\")}\r\n\t\t\t\thelperText={errors.includes(\"time\") ? \"Cooking time can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst recipeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Recipe\"}\r\n\t\t\t\tvalue={recipe}\r\n\t\t\t\tmultiline={!recipe.includes(\"http\")}\r\n\t\t\t\tonChange={e => setRecipe(e.target.value)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst eatenElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Times Eaten\"\r\n\t\t\t\tvalue={eaten}\r\n\t\t\t\tonChange={e => setEaten(e.target.value)}\r\n\t\t\t\tdisabled={user.role !== \"admin\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst editContent = (\r\n\t\t<React.Fragment>\r\n\t\t\t{nameElement}\r\n\t\t\t<SelectField label={\"Main Type\"} value={mainType} onChange={(value) => setMainType(value)} types={distMainTypes} />\r\n\t\t\t{sideTypeElement}\r\n\t\t\t<SelectField label={\"Food Amount\"} value={foodAmount} onChange={(value) => setFoodAmount(value)} types={distDayTypes} />\r\n\t\t\t{speedElement}\r\n\t\t\t{recipeElement}\r\n\t\t\t{eatenElement}\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst deleteFood = (\r\n\t\t<Button startIcon={<DeleteForeverIcon />} onClick={() => setDeleteOpen(true)}>\r\n\t\t\tDelete\r\n\t\t</Button>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={() => onSetEditFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t<div className={classes.center}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t<div className={classes.div} />\r\n\t\t\t\t\t\t{food._id ? deleteFood : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent >\r\n\t\t\t\t\t<form className={classes.dialogContainer} noValidate>\r\n\t\t\t\t\t\t{editContent}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSetEditFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tonUpdate()\r\n\t\t\t\t\t\tonSaveFood(constructFood())\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\t{food.id ? \"Apply\" : \"Add\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<BackDialog\r\n\t\t\t\topen={deleteOpen}\r\n\t\t\t\tonCancel={() => setDeleteOpen(false)}\r\n\t\t\t\tonOk={() => {\r\n\t\t\t\t\tsetDeleteOpen(false)\r\n\t\t\t\t\tonDeleteFood(food._id)\r\n\t\t\t\t\tonUpdate()\r\n\t\t\t\t}}\r\n\t\t\t\ttitle=\"Delete Food\"\r\n\t\t\t\ttext=\"Are you sure?\"\r\n\t\t\t\tokText=\"Delete\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\tconst d = state.food.distincts\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\topen: state.food.foodEditOpen,\r\n\t\tdistMainTypes: d.main || [],\r\n\t\tdistSideTypes: d.side || [],\r\n\t\terrors: state.food.errors\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t\tdispatch(setErrors([]))\r\n\t\t},\r\n\t\tonDeleteFood: (id) => {\r\n\t\t\tif (!id) return\r\n\t\t\tfoods.remove(id)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch(setMessage(\"Food Deleted\"))\r\n\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tonSaveFood: (food) => {\r\n\t\t\tvar errors = []\r\n\t\t\tif (!food.name) errors.push(\"name\")\r\n\t\t\tif (!food.sidetype.length) errors.push(\"side\")\r\n\t\t\tif (!food.time) errors.push(\"time\")\r\n\t\t\tif (errors.length) {\r\n\t\t\t\treturn dispatch(setErrors(errors))\r\n\t\t\t} else {\r\n\t\t\t\tif (food._id) {\r\n\t\t\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('Food Updated'))\r\n\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfoods.create(food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('New Food Added'))\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FoodEdit)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Dialog, DialogActions, TextField, Button, DialogTitle, DialogContent, IconButton, Table, TableRow, TableCell, TableBody, Link, TableHead, Typography } from '@material-ui/core';\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport moment from 'moment-timezone'\r\nimport { selectFood, setEditFood } from './foodAction'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport combineDates from '../core/combineDates';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tspread: theme.spreadDivColumn,\r\n\tcenterColumns: theme.centerDivColumn,\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(3)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\tdatePickerTextfield: {\r\n\t\twidth: \"110px\"\r\n\t},\r\n\tbutton: {\r\n\t\twidth: \"180px\",\r\n\t\theight: \"60px\"\r\n\t}\r\n}))\r\n\r\nmoment.locale(\"en\")\r\nmoment.updateLocale(\"en\", {\r\n\tweek: { dow: 1, doy: 0 }\r\n})\r\n\r\n\r\n// const toFineTime = (time) => {\r\n// \tconst today = new Date()\r\n// \tconst diff = Math.round((today - time) / (24 * 60 * 60 * 1000))\r\n// \tvar ago;\r\n// \tif (diff > 356) {\r\n// \t\tago = \"Over a Year ago\"\r\n// \t} else if (diff > 30) {\r\n// \t\tconst m = Math.round(diff / 30)\r\n// \t\tago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n// \t} else if (diff > 7) {\r\n// \t\tconst w = Math.round(diff / 7)\r\n// \t\tago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n// \t} else if (diff === 0) {\r\n// \t\tago = \"today\"\r\n// \t} else if (diff === -1) {\r\n// \t\tago = \"tomorrow\"\r\n// \t} else if (diff < -1) {\r\n// \t\tago = `in ${diff * (-1)} days`\r\n// \t}\r\n// \treturn `${time.getDate()}.${time.getMonth() + 1}.${time.getFullYear()} - ${ago}`\r\n// }\r\n\r\nconst getLatestFoodInfo = food => {\r\n\tvar lastDate = new Date(food.lasteaten.sort((a, b) => new Date(b) - new Date(a))[0])\r\n\tif (lastDate < new Date()) lastDate = new Date()\r\n\tconst startDate = new Date(lastDate.valueOf() + 24 * 60 * 60 * 1000)\r\n\tconst endDate = new Date(startDate.valueOf() + food.foodamount * 24 * 60 * 60 * 1000)\r\n\treturn {\r\n\t\tstartDate: startDate,\r\n\t\tendDate: endDate\r\n\t}\r\n}\r\n\r\nconst SelectedFood = ({ food, latestFood, onSelectFood, onSetEditFood, onUpdate, onFoodSelection }) => {\r\n\tconst classes = useStyles()\r\n\tconst latestFoodInfo = getLatestFoodInfo(latestFood)\r\n\tconst [startDate, setStartDate] = useState(latestFoodInfo.startDate)\r\n\tconst [endDate, setEndDate] = useState(latestFoodInfo.endDate)\r\n\r\n\tif (!food) return null;\r\n\r\n\tconst handleSelect = () => {\r\n\t\tvar days = [startDate.toDateString()]\r\n\t\tvar currDay = startDate\r\n\t\twhile (true) {\r\n\t\t\tvar newDay = new Date(currDay.valueOf() + 24 * 60 * 60 * 1000)\r\n\t\t\tif (newDay > endDate) break\r\n\t\t\tdays.push(newDay.toDateString())\r\n\t\t\tcurrDay = newDay\r\n\t\t}\r\n\t\tif (!food.lasteaten) food.lasteaten = [];\r\n\t\tfood.lasteaten = food.lasteaten.concat(days)\r\n\t\tfood.timeseaten = food.timeseaten + 1\r\n\t\tonFoodSelection(food)\r\n\t\tonUpdate()\r\n\t}\r\n\r\n\r\n\tconst historyContent = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<Table size=\"small\">\r\n\t\t\t\t<TableHead>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>History</TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t\t{food.lasteaten ? combineDates(food.lasteaten.map(x => new Date(x))).map((f, i) => (\r\n\t\t\t\t\t\t<TableRow key={i}>\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t{f}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t)) : <TableRow><TableCell>No recordings</TableCell></TableRow>}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst selectContent = (\r\n\t\t<div className={classes.centerColumns}>\r\n\t\t\t<div>\r\n\t\t\t\t{food.link.includes(\"http\") || food.link.includes(\"www\") ?\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t<Link href={food.link}>\r\n\t\t\t\t\t\t\tLink To Recipe\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t: null}\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.spread}>\r\n\t\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={startDate}\r\n\t\t\t\t\t\tonChange={date => setStartDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"Start Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={endDate}\r\n\t\t\t\t\t\tonChange={date => setEndDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"End Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tstartIcon={<CheckIcon />}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t\tonClick={handleSelect}\r\n\t\t\t>Select Food</Button>\r\n\t\t\t{historyContent}\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={true} onClose={() => onSelectFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle >\r\n\t\t\t\t\t<div className={classes.spread}>\r\n\t\t\t\t\t\t{food.name}\r\n\t\t\t\t\t\t<IconButton onClick={() => onSetEditFood(food)}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{selectContent}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSelectFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfood: state.food.selectedFood,\r\n\t\tlatestFood: state.food.latestFood,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t},\r\n\t\tonFoodSelection: (food) => {\r\n\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setMessage(`Going to eat ${food.name}`))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tdispatch(setError(err.message))\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectedFood)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { foods } from '../api'\r\nimport Filters from './Filters'\r\nimport Search from './Search'\r\nimport Table from '../core/Table'\r\nimport FoodEdit from './foodEdit'\r\nimport SelectedFood from './SelectedFood'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setFilters, selectFood, setFoods, onSetOpenFilters, distincts, setEditFood, setLatestFood } from './foodAction'\r\nimport { setError } from '../App/AppActions';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: theme.root,\r\n}))\r\n\r\nconst columns = [\"Main\", \"Side\", \"Food\", \"Count\", \"LastEaten\", \"Cooking Time\", \"Food Amount\"]\r\n\r\nconst defaultFood = {\r\n\tname: \"Name\",\r\n\tmaintype: \"liha\",\r\n\tsidetype: [\"pasta\"],\r\n\tfoodamount: 1,\r\n\tlink: \"\",\r\n\ttime: 60,\r\n\ttimeseaten: 0\r\n}\r\n\r\nconst Foods = ({ foods, sort, onSelectFood, onRefresh, filters, search, setOpenFilter, page, limit, selectedFood, foodEdit, initFilters, onSetEditFood }) => {\r\n\tconst classes = useStyles()\r\n\r\n\tif (!foods.limit) {  // Init fetching\r\n\t\tinitFilters()\r\n\t\tonRefresh(page, filters, sort, search, limit)\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<Search search={search} onSelectFood={onSelectFood} />\r\n\t\t\t<Filters\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tcurrentFilters={filters}\r\n\t\t\t\tcurrentSort={sort}\r\n\t\t\t\tonApply={(f, s) => onRefresh(page, f, s, search, limit)}\r\n\t\t\t\tclearFilters={() => initFilters()}\r\n\t\t\t/>\r\n\t\t\t<Table\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tdata={foods}\r\n\t\t\t\tsort={sort}\r\n\t\t\t\tlimit={limit}\r\n\t\t\t\tsetSort={sort => onRefresh(page, filters, sort, search, limit)}\r\n\t\t\t\tsetLimit={limit => onRefresh(page, filters, sort, search, limit)}\r\n\t\t\t\tonSelectFood={onSelectFood}\r\n\t\t\t\tonAddFood={() => onSetEditFood(defaultFood)}\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tsetPage={p => onRefresh(p, filters, sort, search, limit)}\r\n\t\t\t/>\r\n\t\t\t{selectedFood ? <SelectedFood onUpdate={() => onRefresh(page, filters, sort, search, limit)} /> : null}\r\n\t\t\t{foodEdit ? <FoodEdit foodEdit={foodEdit} onUpdate={() => onRefresh(page, filters, sort, search, limit)} /> : null}\r\n\t\t</Paper>\r\n\t)\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfoods: state.food.foods,\r\n\t\tsort: state.food.sort,\r\n\t\tfilters: state.food.filters,\r\n\t\tsearch: state.food.search,\r\n\t\tpage: state.food.page,\r\n\t\tlimit: state.food.limit,\r\n\t\tselectedFood: state.food.selectedFood,\r\n\t\tfoodEdit: state.food.foodEdit,\r\n\t}\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonRefresh: (page, filters, sort, search, limit) => {\r\n\t\t\tfoods.list(filters, page, sort, search, limit)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tdispatch(setFoods({\r\n\t\t\t\t\t\tfoods: result,\r\n\t\t\t\t\t\tfilters: filters,\r\n\t\t\t\t\t\tsort: sort,\r\n\t\t\t\t\t\tpage: page,\r\n\t\t\t\t\t\tlimit: limit,\r\n\t\t\t\t\t\tsearch: search\r\n\t\t\t\t\t}))\r\n\t\t\t\t\tfoods.lastEaten()\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tdispatch(setLatestFood(res))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tsetOpenFilter: () => {\r\n\t\t\tdispatch(onSetOpenFilters())\r\n\t\t},\r\n\t\tinitFilters: () => {\r\n\t\t\tvar filters = {\r\n\t\t\t\tmain: {},\r\n\t\t\t\tside: {},\r\n\t\t\t\tspeed: {$lt: 180},\r\n\t\t\t\tday: {}\r\n\t\t\t}\r\n\t\t\tfoods.distincts()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(distincts(res))\r\n\t\t\t\t\tres.main.forEach(m => {\r\n\t\t\t\t\t\tfilters.main[m] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.side.forEach(s => {\r\n\t\t\t\t\t\tfilters.side[s] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.day.forEach(d => {\r\n\t\t\t\t\t\tfilters.day[d] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tdispatch(setFilters(filters))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => setError(err.message))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Foods)","import React from 'react'\r\n\r\nfunction Shoplist(props) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tshoplist\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Shoplist","export const setData = (data) => {\r\n\treturn { type: \"SET_DATA\", data }\r\n}\r\n\r\nexport const setDeleteId = (id) => {\r\n\treturn { type: \"SET_DELETE_ID\", id}\r\n} \r\n\r\nexport const setDistinctNotes = (notes) => {\r\n    return { type: \"SET_DISTINCT_NOTES\", notes}\r\n}","const formatDate = oDate => {\r\n    let date = new Date(oDate)\r\n    const month = date.getMonth() + 1\r\n    const day = date.getDate()\r\n    return `${day}.${month}`\r\n}\r\n\r\nconst createDefaultContent = (payments, markPaidId) => {\r\n    let paymentText = \"\";\r\n    payments.forEach(p => {\r\n        paymentText += `${p.notes}, ${p.amount}€, eräpäivä: ${formatDate(p.date)} (${p.imageName})\\n`;\r\n    })\r\n    const url = `${process.env.REACT_APP_MAIL_SERVICE_URL}/${markPaidId}`;\r\n    return `Hei,\\n\\nLiitteenä taas laskuja:\\n\\n${paymentText}\\n\\n${url}\\n\\nTerveisin,\\nKimi Heinonen\\n`\r\n}\r\n\r\nexport const openOnMail = (payments, markPaidId) => {\r\n    let from = process.env.REACT_APP_MAIL_FROM;\r\n    let to = process.env.REACT_APP_MAIL_TO;\r\n    let title = \"Laskuja\";\r\n    let content = createDefaultContent(payments, markPaidId);\r\n    window.open(`mailto:${to}?subject=${title}&body=${encodeURIComponent(content)}`);\r\n}","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Checkbox, FormControlLabel, Tooltip } from '@material-ui/core';\r\nimport HourglassEmptyIcon from '@material-ui/icons/HourglassEmpty';\r\nimport HourglassFullIcon from '@material-ui/icons/HourglassFull';\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n}))\r\n\r\n// mailed and paid --> Disabled and checked\r\n// mailed but pending --> Custom icon\r\n// not mailed and no pdf --> disabled\r\n// not mailed and pdf --> normal \r\n\r\nconst TableRowCheckBox = props => {\r\n    const classes = useStyles()\r\n    const { rowData, onChange, toMailList } = props;\r\n\r\n    const mailedAndPaid = rowData.mailed && rowData.paid;\r\n    const mailedAndPending = rowData.mailed && rowData.paid === false;\r\n    const notMailedNoPDF = !rowData.mailed && rowData.imageData == null;\r\n\r\n    let component, toolTipText;\r\n    if (mailedAndPaid) {\r\n        toolTipText = \"Mailed and paid\";\r\n        component = <Checkbox disabled checked icon={<DoneAllIcon />} color=\"primary\" />\r\n    }\r\n    else if (mailedAndPending) {\r\n        toolTipText = \"Mailed and pending\";\r\n        component = <Checkbox\r\n            icon={<HourglassEmptyIcon />}\r\n            checkedIcon={<HourglassFullIcon />}\r\n            checked={toMailList.find(x => x._id === rowData._id) != null}\r\n            color=\"primary\"\r\n            onChange={onChange}\r\n        />\r\n    }\r\n    else if (notMailedNoPDF) {\r\n        toolTipText = \"Missing pdf - cant mail\";\r\n        component = <Checkbox disabled checked={false} color=\"primary\" />\r\n    } else {\r\n        toolTipText = \"Not mailed\";\r\n        component = <Checkbox\r\n            color=\"primary\"\r\n            onChange={onChange}\r\n            checked={toMailList.find(x => x._id === rowData._id) != null}\r\n        />\r\n    }\r\n\r\n    return (\r\n        <Tooltip title={toolTipText}>\r\n            <span>\r\n                {component}\r\n            </span>\r\n        </Tooltip>\r\n    )\r\n}\r\n\r\nexport default TableRowCheckBox","import React, { useState, useEffect } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper, Button, TextField, Table, TableContainer, TableRow, TableCell, TableBody, TableHead, InputAdornment, IconButton, Checkbox, Tooltip } from '@material-ui/core'\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport { connect } from 'react-redux'\r\n\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\r\n\r\nimport { boldSearch } from '../core/BoldSearch'\r\nimport { payments, pendingPayments } from '../api'\r\nimport { setError, setMessage } from '../App/AppActions';\r\nimport { setData, setDeleteId, setDistinctNotes } from './paymentAction'\r\nimport { openOnMail } from './MailDialog'\r\nimport TableRowCheckBox from './TableRowCheckBox'\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: theme.root,\r\n    centerDivColumn: theme.centerDivColumn,\r\n    spacings: {\r\n        padding: theme.spacing(2),\r\n        width: \"10px\"\r\n    },\r\n    datePickerTextfieldWide: {\r\n        width: \"110px\"\r\n    },\r\n    datePickerTextfieldSmall: {\r\n        width: \"70px\"\r\n    },\r\n    tableIcon: {\r\n        width: \"5px\"\r\n    },\r\n    spacing: {\r\n        margin: theme.spacing(2),\r\n        width: \"200px\"\r\n    },\r\n    sendMailButton: {\r\n        marginLeft: \"-30px\",\r\n        marginRight: \"-30px\"\r\n    }\r\n}))\r\n\r\n// const MONHTLY_ALLOWANCE = 700\r\n\r\nconst formatDate = date => {\r\n    if (typeof date === \"string\") date = new Date(date)\r\n    const year = date.getFullYear()\r\n    const month = date.getMonth() + 1\r\n    const day = date.getDate()\r\n    return `${day}.${month}.${year}`\r\n}\r\n\r\nconst formatNotes = note => {\r\n    if (!note) return \"\"\r\n    if (note.length < 50) return note;\r\n    return `${note.substr(0, 50)}...`\r\n}\r\n\r\nconst firstDate = new Date(2020, 0, 1)\r\nconst yearStart = new Date(new Date().getUTCFullYear(), 0, 1)\r\nconst yearEnd = new Date(new Date().getUTCFullYear(), 11, 31)\r\n\r\nfunction Payments(props) {\r\n    const classes = useStyles()\r\n    const { data, deleteId, distinctNotes } = props;\r\n    const { onGetData, onAddPayment, onSetDeleteId, onDeletePayment, onGetDistinctNotes, onSendMail } = props;\r\n\r\n    const [date, setDate] = useState(new Date())\r\n    const [amount, setAmount] = useState(\"\")\r\n    const [note, setNote] = useState(\"\")\r\n    const [autoCompleteKey, setAutoCompleteKey] = useState(true)\r\n    const [startDate, setStartDate] = useState(yearStart)\r\n    const [endDate, setEndDate] = useState(yearEnd)\r\n    const [image, setImage] = useState({});\r\n    const [inputRef, setInputRef] = useState(null);\r\n    const [toMailList, setToMailList] = useState([])\r\n\r\n    var total, perMonth;\r\n    useEffect(() => {\r\n        onGetData(startDate, endDate);\r\n    }, [startDate, endDate, onGetData])\r\n\r\n    useEffect(() => {\r\n        if (distinctNotes.length === 0)\r\n            onGetDistinctNotes();\r\n    }, [onGetDistinctNotes, distinctNotes])\r\n\r\n    if (data) {\r\n        total = data.reduce((total, x) => total + x.amount, 0).toFixed(1)\r\n        const months = data.length ? (new Date(data[0].date).getMonth() - startDate.getMonth()) : 1;\r\n\r\n        perMonth = (total / months).toFixed(1);\r\n    }\r\n    const handleAddPayment = () => {\r\n        if (parseFloat(amount) <= 0) return\r\n        let payment = { date: date, amount: amount, notes: note }\r\n        if (image.name || image.data)\r\n            payment = { ...payment, imageName: image.name, imageData: image.data }\r\n        onAddPayment(payment, startDate, endDate)\r\n        setDate(new Date())\r\n        setAmount(\"\")\r\n        setNote(\"\")\r\n        setAutoCompleteKey(!autoCompleteKey) // To re-render cleared autoComplete\r\n        setImage({})\r\n    }\r\n\r\n    const AddImage = () => {\r\n        if ((image.name || image.data) && !window.confirm(\"Replace current image?\")) {\r\n            return;\r\n        }\r\n        if (!inputRef) {\r\n            console.error(\"No input Ref!!\")\r\n        } else {\r\n            inputRef.click();\r\n        }\r\n    }\r\n\r\n    const loadFile = () => {\r\n        if (typeof window.FileReader !== 'function') {\r\n            alert(\"The file API isn't supported on this browser yet.\");\r\n            return;\r\n        }\r\n        let input = document.getElementById('fileinput');\r\n        if (!input) {\r\n            alert(\"Um, couldn't find the fileinput element.\");\r\n        }\r\n        else if (!input.files) {\r\n            alert(\"This browser doesn't seem to support the 'files' property of file inputs.\");\r\n        }\r\n        else if (!input.files[0]) {\r\n            alert(\"Please select an Excel file before clicking 'Process'\");\r\n        }\r\n        else {\r\n            const selectedFile = input.files[0]\r\n\r\n            input.files = null // Without these the second upload try won't fire the onChange event\r\n            input.value = ''\r\n\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = e => {\r\n                setImage({\r\n                    name: selectedFile.name,\r\n                    data: e.target.result\r\n                })\r\n            }\r\n            fileReader.readAsDataURL(selectedFile);\r\n        }\r\n    }\r\n\r\n    const downloadImage = (image) => {\r\n        var a = document.createElement(\"a\");\r\n        a.href = image.data;\r\n        a.download = image.name;\r\n        a.click();\r\n    }\r\n\r\n    const handleMailList = (data) => {\r\n        // Already in the list -> remove it\r\n        if (toMailList.find(d => d._id === data._id) != null) {\r\n            setToMailList(toMailList.filter(x => x._id !== data._id));\r\n        } else {\r\n            toMailList.push(data);\r\n            setToMailList([...toMailList]);\r\n        }\r\n    }\r\n\r\n    const openMailAndMarkSend = () => {\r\n        const pending = {\r\n            isMarked: false,\r\n            ids: toMailList.map(x => x._id)\r\n        }\r\n        pendingPayments.create(pending)\r\n            .then(pendingEntity => {\r\n                openOnMail(toMailList, pendingEntity._id);\r\n                onSendMail(startDate, endDate, toMailList);\r\n                setToMailList([])\r\n            })\r\n            .catch(err => console.error(err))\r\n    }\r\n\r\n    const datePicker = (label, value, setValue, views, format, minDate = new Date(2020, 0, 1), maxDate = yearEnd) => (\r\n        <MuiPickersUtilsProvider utils={MomentUtils}>\r\n            <DatePicker\r\n                label={label}\r\n                format={format}\r\n                views={views}\r\n                minDate={minDate}\r\n                maxDate={maxDate}\r\n                showTodayButton={true}\r\n                value={value}\r\n                onChange={date => setValue(date._d)}\r\n                animateYearScrolling\r\n                TextFieldComponent={(props) => (\r\n                    <TextField\r\n                        label={label}\r\n                        onClick={props.onClick}\r\n                        value={props.value}\r\n                        InputProps={{\r\n                            endAdornment: <TodayIcon />\r\n                        }}\r\n                        size=\"small\"\r\n                        className={format.split(\".\").length > 2 ? classes.datePickerTextfieldWide : classes.datePickerTextfieldSmall}\r\n                    />\r\n                )}\r\n            />\r\n        </MuiPickersUtilsProvider>\r\n    )\r\n\r\n    const addPayment = (\r\n        <div className={classes.centerDivColumn}>\r\n            <div className={`${classes.spacing} ${classes.centerDivColumn}`}>\r\n                {datePicker(\"Date\", date, setDate, [\"year\", \"month\", \"date\"], \"DD.MM.YYYY\")}\r\n            </div>\r\n            <div className={classes.spacing}>\r\n                <TextField\r\n                    value={amount}\r\n                    type=\"number\"\r\n                    variant=\"outlined\"\r\n                    onChange={e => setAmount(e.target.value.replace(\",\", \".\"))}\r\n                    InputProps={{\r\n                        endAdornment: <InputAdornment position=\"end\">€</InputAdornment>,\r\n                    }}\r\n                />\r\n            </div>\r\n            <div className={classes.spacing}>\r\n                <Autocomplete\r\n                    key={autoCompleteKey}\r\n                    freeSolo\r\n                    options={distinctNotes}\r\n                    renderOption={option => boldSearch(option, note)}\r\n                    renderInput={props =>\r\n                        <TextField\r\n                            {...props}\r\n                            label=\"Note\"\r\n                            value={note}\r\n                            fullWidth\r\n                            onChange={e => setNote(e.target.value)} />\r\n                    }\r\n                    onChange={(e, value) => setNote(value || \"\")}\r\n                />\r\n            </div>\r\n            <Button\r\n                className={classes.spacing}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => AddImage()}>\r\n                Add Image\r\n            </Button>\r\n            {image.name &&\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Button onClick={() => downloadImage(image)}>\r\n                        {image.name}\r\n                    </Button>\r\n                    <IconButton onClick={() => setImage({})}>\r\n                        <DeleteForeverIcon />\r\n                    </IconButton>\r\n                </div>}\r\n            <Button\r\n                className={classes.spacing}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<AddIcon />}\r\n                onClick={() => handleAddPayment()}>\r\n                Add Payment\r\n\t\t\t</Button>\r\n        </div>\r\n    )\r\n\r\n    const table = (\r\n        <TableContainer component={Paper}>\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>\r\n                            {datePicker(\"from\", startDate, setStartDate, [\"year\", \"month\"], \"MM.YY\", firstDate, endDate)}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            {datePicker(\"to\", endDate, setEndDate, [\"year\", \"month\"], \"MM.YY\", startDate, yearEnd)}\r\n                        </TableCell>\r\n                        <TableCell>{`Total: ${total} €`}</TableCell>\r\n                        <TableCell>{`PerMonth: ${perMonth} €`}</TableCell>\r\n                        <TableCell />\r\n                        <TableCell />\r\n                        <TableCell />\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>Created</TableCell>\r\n                        <TableCell>Bill Due</TableCell>\r\n                        <TableCell>Amount</TableCell>\r\n                        <TableCell>Notes</TableCell>\r\n                        <TableCell>Pdf</TableCell>\r\n                        <TableCell>\r\n                            {toMailList.length > 0 ?\r\n                                <Button variant=\"contained\" color=\"primary\"\r\n                                    className={classes.sendMailButton}\r\n                                    onClick={openMailAndMarkSend}\r\n                                    endIcon={<MailIcon />}>\r\n                                    Send\r\n                                </Button>\r\n                                : <IconButton disabled ><MailIcon /></IconButton>}\r\n                        </TableCell>\r\n                        <TableCell className={classes.tableIcon}></TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {data ? data.map(d => (\r\n                        <TableRow key={d.date}>\r\n                            <TableCell>{formatDate(d.createdAt)}</TableCell>\r\n                            <TableCell>{formatDate(d.date)}</TableCell>\r\n                            <TableCell>{d.amount} €</TableCell>\r\n                            <TableCell>{formatNotes(d.notes)}</TableCell>\r\n                            <TableCell>\r\n                                {d.imageName &&\r\n                                    <Button onClick={() => downloadImage({ name: d.imageName, data: d.imageData })}>\r\n                                        {d.imageName}\r\n                                    </Button>\r\n                                }\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <TableRowCheckBox\r\n                                    rowData={d}\r\n                                    onChange={() => handleMailList(d)}\r\n                                    toMailList={toMailList}\r\n                                />\r\n                            </TableCell>\r\n                            <TableCell className={classes.tableIcon}>\r\n                                <IconButton onClick={() => onSetDeleteId(d._id)}>\r\n                                    <DeleteForeverIcon />\r\n                                </IconButton>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    )) : null}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n    return (\r\n        <React.Fragment>\r\n            <Paper className={classes.root}>\r\n                {addPayment}\r\n            </Paper>\r\n            {table}\r\n            <BackDialog\r\n                open={Boolean(deleteId)}\r\n                onClose={() => onSetDeleteId(null)}\r\n                title=\"Delete payment\"\r\n                text=\"Are you sure?\"\r\n                okText={\"Delete\"}\r\n                onOk={() => onDeletePayment(deleteId, startDate, endDate)}\r\n            />\r\n            <input type=\"file\"\r\n                id=\"fileinput\"\r\n                style={{ display: \"none\" }}\r\n                accept=\".pdf\"\r\n                ref={elem => setInputRef(elem)}\r\n                onChange={() => loadFile()} />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        data: state.payment.data,\r\n        deleteId: state.payment.deleteId,\r\n        distinctNotes: state.payment.distinctNotes,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    const getData = (start, end) => {\r\n        payments.list({\r\n            date: {\r\n                $gt: start,\r\n                $lt: end\r\n            },\r\n            $sort: {\r\n                createdAt: -1\r\n            }\r\n        }).then(res => dispatch(setData(res.data)))\r\n            .catch(err => dispatch(setError(err.message)))\r\n    }\r\n    return {\r\n        onGetData: (start, end) => getData(start, end),\r\n        onAddPayment: (payment, start, end) => {\r\n            payments.create(payment)\r\n                .then(res => {\r\n                    dispatch(setMessage(\"Payment Added\"))\r\n                    getData(start, end)\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onSetDeleteId: (id) => {\r\n            dispatch(setDeleteId(id))\r\n        },\r\n        onDeletePayment: (id, start, end) => {\r\n            payments.remove(id)\r\n                .then(res => {\r\n                    dispatch(setMessage(\"Payment Deleted\"))\r\n                    dispatch(setDeleteId(null))\r\n                    getData(start, end)\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onGetDistinctNotes: () => {\r\n            payments.list({})\r\n                .then(res => {\r\n                    const allNotes = res.data.map(x => x.notes)\r\n                    const distinctNotes = [...new Set(allNotes)]\r\n                    if (distinctNotes.length === 0)\r\n                        distinctNotes.push(\"...\")\r\n                    dispatch(setDistinctNotes(distinctNotes))\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onSendMail: async (start, end, paymentList) => {\r\n            for (let index = 0; index < paymentList.length; index++) {\r\n                const payment = paymentList[index];\r\n                await payments.patch(payment._id, { mailed: true });\r\n            }\r\n            getData(start, end);\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Payments)","import React, { useEffect, useState } from 'react'\r\n\r\nimport { pendingPayments } from '../api'\r\nimport { Button, Dialog, DialogActions, DialogContent } from '@material-ui/core';\r\n\r\nconst MarkPendingPayments = props => {\r\n    const [state, setState] = useState({\r\n        dialogOpen: false,\r\n        seconds: 0\r\n    })\r\n    const id = props.params.id;\r\n\r\n    useEffect(() => {\r\n        let timer;\r\n        if (!state.dialogOpen)\r\n            return;\r\n\r\n        if (state.seconds === 0) {\r\n            closeAndRedirect();\r\n        } else {\r\n            let newSeconds = state.seconds - 1;\r\n            timer = setTimeout(() => setState({ ...state, seconds: newSeconds }), 1000);\r\n        }\r\n        return () => clearTimeout(timer);\r\n    }, [state.seconds])\r\n\r\n    const closeAndRedirect = () => {\r\n        setState({ dialogOpen: false, seconds: 0 })\r\n        window.close();\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            pendingPayments.get(id.replace(\":\", \"\"))\r\n                .then(res => {\r\n                    if (res && res.alreadyMarked) {\r\n                        window.close();\r\n                    } else {\r\n                        setState({ dialogOpen: true, seconds: 5 })\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    console.error(err)\r\n                    window.close();\r\n                })\r\n        } else {\r\n            window.close();\r\n        }\r\n    }, [])\r\n\r\n    console.log(\"FOOBAR\")\r\n\r\n    return (\r\n        <Dialog open={state.dialogOpen}>\r\n            <DialogContent>\r\n                {`Laskut merkattu maksetuksi\\n\\n\r\n\r\n    Tämä sulkeutuu automaattisesti ${state.seconds} sekunnin kuluttua...`}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={() => closeAndRedirect()}>\r\n                    Close\r\n        </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default MarkPendingPayments","import React, { useEffect, useCallback } from 'react'\r\n\r\nimport { Paper, IconButton } from '@material-ui/core'\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport { binanceApi } from '../api';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: theme.monitor.paper,\r\n    floatRight: theme.monitor.floatRight,\r\n    horizontal: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"space-between\",\r\n        width: \"85%\"\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    up: {\r\n        color: \"green\"\r\n    },\r\n    down: {\r\n        color: \"red\"\r\n    }\r\n}))\r\n\r\nconst binanceFoo = [{\r\n    askPrice: 28194.14000000,\r\n    askQty: 0.00071100,\r\n    bidPrice: 28190.56000000,\r\n    bidQty: 0.01496000,\r\n    closeTime: 1625943213703,\r\n    count: 57461,\r\n    firstId: 56346219,\r\n    highPrice: 28873.33000000,\r\n    lastId: 56403679,\r\n    lastPrice: \"29755.55000000\",\r\n    lastQty: 0.00206800,\r\n    lowPrice: 28019.55000000,\r\n    openPrice: 28140.19000000,\r\n    openTime: 1625856813703,\r\n    prevClosePrice: 28144.97000000,\r\n    priceChange: \"-1488.48000000\",\r\n    priceChangePercent: \"-4.764\",\r\n    quoteVolume: 41071006.63447189,\r\n    symbol: \"BTCUSDT\",\r\n    volume: 1443.29207600,\r\n    weightedAvgPrice: 28456.47621672,\r\n},\r\n{\r\n    askPrice: 0.06256900,\r\n    askQty: 32.42100000,\r\n    bidPrice: 0.06256800,\r\n    bidQty: 0.32000000,\r\n    closeTime: 1625943213687,\r\n    count: 146086,\r\n    firstId: 282229466,\r\n    highPrice: 0.06410600,\r\n    lastId: 282375551,\r\n    lastPrice: \"1749.66000000\",\r\n    lastQty: 0.31900000,\r\n    lowPrice: 0.06202100,\r\n    openPrice: 0.06386800,\r\n    openTime: 1625856813687,\r\n    prevClosePrice: 0.06387300,\r\n    priceChange: \"-122.63000000\",\r\n    priceChangePercent: \"-6.550\",\r\n    quoteVolume: 6506.87270971,\r\n    symbol: \"ETHUSDT\",\r\n    volume: 103275.20500000,\r\n    weightedAvgPrice: 0.06300518,\r\n}]\r\n\r\nconst parseBinanceData = (data, symbols) => {\r\n    let parsed = []\r\n\r\n    symbols.forEach(symbol => {\r\n        let s = data.find(x => x.symbol === symbol);\r\n        if (s) {\r\n            parsed.push({\r\n                symbol: symbol.slice(0, 3),\r\n                icon: `${symbol.slice(0, 3)}.png`,\r\n                price: parseFloat(s.lastPrice),\r\n                changePrice: parseFloat(s.priceChange),\r\n                changePercent: parseFloat(s.priceChangePercent),\r\n            })\r\n        }\r\n    })\r\n\r\n    return parsed;\r\n}\r\n\r\nconst SYMBOLS = [\"BTCUSDT\", \"ETHUSDT\"]\r\n\r\nconst BinanceMonitor = ({ refresh, data, setData }) => {\r\n    const fetchBinance = process.env.NODE_ENV === 'production' // || true;\r\n    const classes = useStyles()\r\n\r\n    const fetchData = useCallback(() => {\r\n        if (fetchBinance) {\r\n            binanceApi.find({ symbols: SYMBOLS })\r\n                .then(res => {\r\n                    setData(parseBinanceData(res, SYMBOLS))\r\n                })\r\n                .catch(err => {\r\n                    console.log(\"Binance ERROR: \", err)\r\n                })\r\n        } else {\r\n            setData(parseBinanceData(binanceFoo, SYMBOLS))\r\n        }\r\n    }, [fetchBinance, setData])\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [refresh])\r\n\r\n    return (\r\n        <Paper elevation={4} className={classes.paper} >\r\n            <IconButton className={classes.floatRight} onClick={() => fetchData()}>\r\n                <RefreshIcon color=\"primary\" />\r\n            </IconButton>\r\n            {data.map(x => (\r\n                <div className={classes.horizontal} key={x.symbol}>\r\n                    <img source={`/${x.icon}`} alt={x.name} style={{ height: \"50px\", width: \"50px\" }} />\r\n                    <p className={classes.margin} style={{ width: \"28px\"}} >{x.symbol}</p>\r\n                    <p className={classes.margin} style={{ width: \"252x\"}} >$ {x.price?.toFixed(0)}</p>\r\n                    <div style={{ display: \"contents\", width: \"66px\" }}>\r\n                        <p className={classes.margin}>{x.changePercent?.toFixed(1)} %</p>\r\n                        {x.changePrice > 0 ?\r\n                            <ArrowDropUpIcon className={classes.up} /> :\r\n                            <ArrowDropDownIcon className={classes.down} />\r\n                        }\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default BinanceMonitor","import React, { useState } from 'react'\r\n\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport { Tab, Tabs } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    hiddenTabRoot: {\r\n        visibility: \"collapse\",\r\n        minHeight: \"0px\",\r\n        height: \"0px\"\r\n    },\r\n}))\r\n\r\nconst TabPanel = (props) => {\r\n    const { children, value, index, ...other } = props;\r\n\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`simple-tabpanel-${index}`}\r\n            aria-labelledby={`simple-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && children}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst TabProps = index => ({\r\n    id: `full-width-tab-${index}`,\r\n    'aria-controls': `full-width-tabpanel-${index}`,\r\n})\r\n\r\nconst SwibeTabs = props => {\r\n    const classes = useStyles()\r\n    const { panels, hideTabs, tabProps } = props;\r\n    const [tabValue, setTabValue] = useState(0)\r\n\r\n\r\n    const tabClasses = hideTabs ? { classes: { root: classes.hiddenTabRoot } } : {};\r\n    return (\r\n        <>\r\n            <Tabs value={tabValue} onChange={(_, value) => setTabValue(value)}\r\n                {...tabClasses} {...tabProps}>\r\n                {[...Array(panels.length).keys()].map(i => (\r\n                    <Tab label={`Tab-${i}`} {...TabProps(0)} />\r\n                ))}\r\n            </Tabs>\r\n            <SwipeableViews index={tabValue} onChangeIndex={i => setTabValue(i)}>\r\n                {panels.map((panelContent, index) => (\r\n                    <TabPanel value={tabValue} index={index}>\r\n                        {panelContent}\r\n                    </TabPanel>\r\n                ))}\r\n            </SwipeableViews>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SwibeTabs","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useCustomCompareEffect } from \"use-custom-compare\";\r\n\r\nimport { XYPlot, ArcSeries } from 'react-vis'\r\nimport { Paper, IconButton } from '@material-ui/core'\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport { nhApi } from '../api';\r\nimport { getDateTimeDifferenceString } from '../core/combineDates';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport SwibeTabs from '../core/SwibeTabs';\r\nimport isEqual from 'lodash/isEqual'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: theme.monitor.paper,\r\n    floatRight: theme.monitor.floatRight,\r\n    background: theme.monitor.lightBackground,\r\n    labelContainer: {\r\n        position: \"absolute\",\r\n        top: \"72px\",\r\n        left: \"calc(50% - 80px)\",\r\n        height: \"100px\",\r\n        width: \"150px\",\r\n        textAlign: \"center\"\r\n    },\r\n    statusContainer: {\r\n        position: \"absolute\",\r\n        top: \"91%\",\r\n        right: \"16px\"\r\n    },\r\n    labelStyle: {\r\n        lineHeight: \"8px\"\r\n    },\r\n    arcplotStyle: {\r\n        position: \"absolute\",\r\n        left: \"calc(50% - 170px)\",\r\n        top: \"8px\"\r\n    },\r\n    timeLabelsContainer: {\r\n        position: \"absolute\",\r\n        height: \"100%\",\r\n        top: \"calc(100% - 28px)\"\r\n    },\r\n    timelabel: {\r\n        lineHeight: \"0px\",\r\n        marginTop: \"4px\",\r\n        fontSize: \"0.705rem\",\r\n        color: \"#ffffff70\"\r\n    },\r\n    gpuContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\"\r\n    },\r\n    gpuInnerContainer: { width: \"45%\" },\r\n    gpuLabelDiv: { display: \"flex\", justifyContent: \"space-between\", height: \"22px\" }\r\n}))\r\n\r\nconst nhFoo = {\r\n    devicesStatuses: { MINING: 2, DISABLED: 1 },\r\n    minerStatuses: { MINING: 1, STOPPED: 1 },\r\n    miningRigs: [{\r\n        devices: [\r\n            { name: \"cpu\", deviceType: { enumName: \"CPU\", description: \"cpu\" } },\r\n            {\r\n                deviceType: { enumName: \"NVIDIA\", description: \"Nvidia\" },\r\n                id: \"2-GSrqi-ksfl+Woiv9mQxH-Q\",\r\n                intensity: { enumName: \"LOW\", description: \"Low power mode\" },\r\n                load: 100,\r\n                name: \"ASUS NVIDIA GeForce RTX 2070\",\r\n                nhqm: \"\",\r\n                powerMode: { enumName: \"HIGH\", description: \"High power mode\" },\r\n                powerUsage: 121,\r\n                revolutionsPerMinute: -1,\r\n                revolutionsPerMinutePercentage: 73,\r\n                speeds: [\r\n                    {\r\n                        algorithm: \"DAGGERHASHIMOTO\",\r\n                        displaySuffix: \"MH\",\r\n                        speed: \"42.44745200\",\r\n                        title: \"DaggerHashimoto\",\r\n                    }\r\n                ],\r\n                status: { enumName: \"MINING\", description: \"Mining\" },\r\n            },\r\n            {\r\n                deviceType: { enumName: \"NVIDIA\", description: \"Nvidia\" },\r\n                id: \"2-GSrqi-ksfl+Woiv9mQxH-Q\",\r\n                intensity: { enumName: \"LOW\", description: \"Low power mode\" },\r\n                load: 100,\r\n                name: \"ASUS NVIDIA GeForce RTX 3090\",\r\n                nhqm: \"\",\r\n                powerMode: { enumName: \"HIGH\", description: \"High power mode\" },\r\n                powerUsage: 270,\r\n                revolutionsPerMinute: -1,\r\n                revolutionsPerMinutePercentage: 73,\r\n                speeds: [\r\n                    {\r\n                        algorithm: \"DAGGERHASHIMOTO\",\r\n                        displaySuffix: \"MH\",\r\n                        speed: \"100.44745200\",\r\n                        title: \"DaggerHashimoto\",\r\n                    }\r\n                ],\r\n                status: { enumName: \"MINING\", description: \"Mining\" },\r\n            }\r\n        ],\r\n        statusTime: \"1626271434009\",\r\n        joinTime: 1625902469,\r\n        localProfitability: 0.0002364248037036576,\r\n        minerStatus: \"MINING\",\r\n        name: \"worker1\",\r\n        profitability: 0.00019872000000000002,\r\n        rigId: \"0-UhsRoOB50F6xOsjWpruBIg\",\r\n        rigPowerMode: \"HIGH\",\r\n        softwareVersions: \"NHM/3.0.6.5\",\r\n        stats: [{\r\n            algorithm: { enumName: \"DAGGERHASHIMOTO\", description: \"DaggerHashimoto\" },\r\n            difficulty: 0.05466773208073769,\r\n            market: \"EU\",\r\n            profitability: 0.00019872000000000002,\r\n            proxyId: 1,\r\n            speedAccepted: 120.22248971989666,\r\n            speedRejectedR1Target: 0.7826537381108614,\r\n            speedRejectedR2Stale: 1.5653074762217227,\r\n            speedRejectedR3Duplicate: 0,\r\n            speedRejectedR4NTime: 0,\r\n            speedRejectedR5Other: 1.5653074762217227,\r\n            speedRejectedTotal: 3.9132686905543066,\r\n            statsTime: 1625924868000,\r\n            timeConnected: 1625902483796,\r\n            unpaidAmount: \"0.00001701\",\r\n            xnsub: true\r\n        }]\r\n    }],\r\n    totalDevices: 2,\r\n    totalProfitability: 0.00019872000000000002,\r\n    totalProfitabilityLocal: 0.0002364248037036576,\r\n    totalRigs: 1,\r\n    unpaidAmount: \"0.00001701\",\r\n}\r\n\r\nconst PI = Math.PI\r\n\r\nconst parseData = data => {\r\n    var devices = data.miningRigs[0].devices\r\n        .filter(x => x.deviceType.enumName !== \"CPU\")\r\n        .map(x => ({\r\n            name: x.name,\r\n            powerUsage: x.powerUsage,\r\n            status: x.status.description,\r\n            speed: x.speeds\r\n        }))\r\n\r\n    var totalSpeed = devices.reduce((a, b) => a + b.speed.reduce((c, d) => c + Number(d.speed), 0), 0);\r\n    if (data.devicesStatuses?.DISABLED)\r\n        delete data.devicesStatuses.DISABLED\r\n\r\n    return {\r\n        status: data.devicesStatuses,\r\n        profitabilityBTC: data.totalProfitability,\r\n        totalSpeed: totalSpeed,\r\n        devices: devices,\r\n        time: new Date(parseInt(data.miningRigs[0].statusTime))\r\n    }\r\n}\r\n\r\nconst combineDatas = (nhData, hwinfoData) => {\r\n    if (!nhData || !nhData.devices)\r\n        return nhData;\r\n\r\n    if (hwinfoData && hwinfoData[0]) {\r\n        Object.keys(hwinfoData[0])\r\n            .forEach(x => {\r\n                var device = nhData.devices.find(d => d.name.includes(x))\r\n                if (device) {\r\n                    Object.keys(hwinfoData[0][x]).forEach(n => {\r\n                        device[n.replace(\"GPU\", \"\")] = hwinfoData[0][x][n];;\r\n                    })\r\n                }\r\n            })\r\n        nhData.totalGPUPower = nhData.devices.reduce((a, b) => a + b.Power, 0);\r\n        nhData.totalPower = nhData.totalGPUPower + hwinfoData[0].CPUPower + 50; // Constant 50 for basic PC power consumption\r\n    }\r\n\r\n    return nhData\r\n}\r\n\r\nconst getColor = (value, idealMin, idealMax, absMin, absMAx) => {\r\n    if (value <= absMin)\r\n        return \"#00ffff\"; // Cyan\r\n    if (value <= idealMin)\r\n        return \"#00dba4\"; // Green-Cyan\r\n    if (value <= idealMax)\r\n        return \"#00bd00\"; // Green\r\n    if (value <= absMAx)\r\n        return \"#FF8C00\"; // Dark Orange\r\n    return \"#FF0000\"; // Red\r\n}\r\n\r\nconst GenerateData = (value, radiusStart, height, idealMin, idealMax, absMin, absMax, label) => {\r\n    // Angle is half circle => [-pi /2, pi / 2]\r\n    let angle = - PI * (0.5) + (value / absMax) * PI\r\n    let color = getColor(value, idealMin, idealMax, absMin, absMax);\r\n    return { angle0: -PI * (0.5), angle: angle, radius0: radiusStart, radius: height, color: color, label: label }\r\n}\r\n\r\nconst CustomCompare = (prevDeps, nextDeps) => {\r\n    // nhData = [0], hwinfoData = [1]\r\n    if (!nextDeps[0] || !nextDeps[0].devices || !(nextDeps[1] && nextDeps[1][0]))\r\n        return true;\r\n\r\n    // Currentyl woudld onyl need memJuncTemp, totalGPUpower and totalSpeed\r\n    return isEqual(prevDeps, nextDeps)\r\n}\r\n\r\nconst CustomTimeLabelCompare = (prev, next) => {\r\n    for (let index = 0; index < prev.length; index++) {\r\n        if (prev[index] !== next[index])\r\n            return false;\r\n    }\r\n    return true;\r\n    // let prevHWTime = prev[prev.length - 1].length > 0 ? prev[prev.length - 1][0].time : null;\r\n    // let nextHWTime = next[next.length - 1].length > 0 ? next[next.length - 1][0].time : null;\r\n    // return prevHWTime === nextHWTime;\r\n}\r\n\r\nconst NHMonitor = ({ data, setData, combData, setCombData, hwinfoData, refresh, setRefresh }) => {\r\n    const fetchNH = process.env.NODE_ENV === 'production' // || true;\r\n    const classes = useStyles()\r\n    const [generatedData, setGeneratedData] = useState({ data: [], labels: [] })\r\n    const [timeLabels, setTimeLabels] = useState({ hwinfo: \"--\", nh: \"--\", updateTime: false })\r\n\r\n    const fetchData = useCallback(() => {\r\n        let cancelled = false;\r\n        if (fetchNH) {\r\n            nhApi.get()\r\n                .then(res => {\r\n                    if (cancelled)\r\n                        return;\r\n                    setData(parseData(res))\r\n                })\r\n                .catch(err => {\r\n                    console.log(\"NH ERROR: \", err)\r\n                })\r\n        } else {\r\n            setData(parseData(nhFoo))\r\n        }\r\n        return () => {\r\n            cancelled = true;\r\n        }\r\n    }, [fetchNH])\r\n\r\n    useEffect(fetchData, [refresh])\r\n\r\n    useCustomCompareEffect(\r\n        () => {\r\n            const hwinfoDataTimestamp = hwinfoData.length > 0 ? getDateTimeDifferenceString(new Date(hwinfoData[0].time)) : \"--\";\r\n            const nhTimestamp = data?.time ? getDateTimeDifferenceString(data.time) : \"--\";\r\n            setTimeLabels({ hwinfo: hwinfoDataTimestamp, nh: nhTimestamp, updateTime: timeLabels.updateTime })\r\n\r\n            let timeout = setTimeout(() => {\r\n                setTimeLabels({ ...timeLabels, updateTime: !timeLabels.updateTime })\r\n            }, 5000)\r\n\r\n            return () => {\r\n                clearTimeout(timeout)\r\n            }\r\n        },\r\n        [timeLabels.updateTime, data?.time, hwinfoData.length > 0 ? hwinfoData[0].time : null],\r\n        (prev, next) => CustomTimeLabelCompare(prev, next)\r\n    )\r\n\r\n    useCustomCompareEffect(\r\n        () => {\r\n            const combinedData = combineDatas(data, hwinfoData);\r\n            if (!Object.keys(combinedData).length)\r\n                return;\r\n            setCombData(combinedData)\r\n            setGeneratedData({\r\n                data: [\r\n                    combinedData.devices?.length > 1 && GenerateData(combinedData.devices[1].MemJunctTemp, 2.30, 2.75, 90, 98, 80, 102, \"MemJunc\"),\r\n                    GenerateData(combinedData.totalGPUPower, 2.15, 2.25, 390, 410, 150, 500, \"Power\"),\r\n                    GenerateData(combinedData.totalSpeed, 2.00, 2.10, 135, 150, 50, 160, \"Speed\"),\r\n                ],\r\n                labels: [\r\n                    combinedData.devices.length > 1 && <div key={\"MemJuncLabel\"}><p className={classes.labelStyle}>Mem: {combinedData.devices[1].MemJunctTemp?.toFixed(0)} &deg;</p></div>,\r\n                    <div key={\"PowerLabel\"}><p className={classes.labelStyle}>Power: {combinedData.totalGPUPower?.toFixed(0)} W</p></div>,\r\n                    <div key={\"SpeedLabel\"}><p className={classes.labelStyle}>Speed: {combinedData.totalSpeed?.toFixed(1)} MH/s</p></div>\r\n                ]\r\n            })\r\n        },\r\n        [data, hwinfoData],\r\n        (prevDeps, nextDeps) => CustomCompare(prevDeps, nextDeps)\r\n    )\r\n\r\n\r\n    const GPULabel = ({ title, value, alert }) => (\r\n        <div className={classes.gpuLabelDiv}>\r\n            <p className={classes.labelStyle}>{title}</p>\r\n            <p className={classes.labelStyle} style={alert ? { color: \"red\" } : {}}>{value}</p>\r\n        </div>\r\n    )\r\n    // Labels for GPU Panels\r\n    const createGPULabel = (title, value, valueIsRed) => <div className={classes.gpuLabelDiv}>\r\n        <p className={classes.labelStyle}>{title}</p>\r\n        <p className={classes.labelStyle} style={valueIsRed ? { color: \"red\" } : {}}>{value}</p>\r\n    </div>\r\n\r\n    // Base Panel wrapper for all panels\r\n    const PanelBase = props => (\r\n        <Paper elevation={4} className={classes.paper} style={{ position: \"relative\", height: \"200px\", overflow: \"hidden\" }}>\r\n            <IconButton className={classes.floatRight} onClick={() => setRefresh()}>\r\n                <RefreshIcon color=\"primary\" />\r\n            </IconButton>\r\n            <p style={{ marginLeft: \"8px\" }}>{props.title}</p>\r\n            {props.children}\r\n            <div className={classes.timeLabelsContainer}>\r\n                <p className={classes.timelabel}>HWinfo: {timeLabels.hwinfo}</p>\r\n                <p className={classes.timelabel}>NH: {timeLabels.nh}</p>\r\n            </div>\r\n        </Paper>\r\n    )\r\n\r\n    const overViewPanel = (\r\n        <PanelBase title=\"OverView\">\r\n            <XYPlot\r\n                className={classes.arcplotStyle}\r\n                xDomain={[-3, 3]}\r\n                yDomain={[-3, 3]}\r\n                width={300}\r\n                height={300}>\r\n                <ArcSeries\r\n                    colorType=\"literal\"\r\n                    animation={{\r\n                        damping: 9,\r\n                        stiffness: 300\r\n                    }}\r\n                    radiusDomain={[0, 3]}\r\n                    data={generatedData.data}\r\n                    getLabel={d => d.name}\r\n                />\r\n            </XYPlot>\r\n            {<div className={classes.labelContainer}>\r\n                {generatedData.labels}\r\n            </div>}\r\n            {combData?.status && <div className={classes.statusContainer}>\r\n                <p className={`${classes.labelStyle} ${classes.timelabel}`}>\r\n                    {JSON.stringify(combData.status)\r\n                        .split(\"{\").join(\"\")\r\n                        .split(\"}\").join(\"\")\r\n                        .split('\"').join(\"\")\r\n                        .split(\":\").join(\": \")\r\n                    }\r\n                </p>\r\n            </div>\r\n            }\r\n        </PanelBase>\r\n    )\r\n\r\n    const gpuPanels = combData?.devices?.map(gpu => (\r\n        <PanelBase key={gpu.name} title={gpu.name.split(\" \").slice(-1)[0]}>\r\n            <div className={classes.gpuContainer}>\r\n                <div className={classes.gpuInnerContainer}>\r\n                    <GPULabel title=\"GPU Temp: \" value={<>{gpu.Temp?.toFixed(1)} &deg;</>} />\r\n                    <GPULabel title=\"HotSpot: \" value={<>{gpu.HotSpotTemp?.toFixed(1)} &deg;</>} />\r\n                    {\"MemJunctTemp\" in gpu && <GPULabel title=\"MemJunc: \" value={<>{gpu.MemJunctTemp?.toFixed(1)} &deg;</>} alert={gpu.MemJunctTemp > 100} />}\r\n                    <GPULabel title=\"Fans: \" value={<>{gpu.Fan?.toFixed(1)} %</>} alert={gpu.Fan > 94} />\r\n                </div>\r\n                <div className={classes.gpuInnerContainer}>\r\n                    <GPULabel title=\"Power: \" value={<>{gpu.Power?.toFixed(1)} W</>} />\r\n                    <GPULabel title=\"Speed: \" value={<>{gpu.speed?.length > 0 ? parseFloat(gpu.speed[0]?.speed).toFixed(1) : 0} MH/s</>} />\r\n                    <GPULabel title=\"Algo: \" value={gpu.speed?.length > 0 ? gpu.speed[0]?.title : \"--\"} />\r\n                    <GPULabel title=\"Status: \" value={gpu.status.includes(\"OFFLINE\") ? \"OFFLINE\" : gpu.status} alert={gpu.status.includes(\"OFFLINE\")} />\r\n                </div>\r\n            </div>\r\n        </PanelBase>\r\n    ))\r\n\r\n    gpuPanels?.reverse()\r\n\r\n    // TODO time update interval\r\n\r\n    return <SwibeTabs hideTabs panels={gpuPanels ? [overViewPanel, ...gpuPanels] : [overViewPanel]} />\r\n}\r\n\r\nexport default NHMonitor","import React, { useState } from 'react'\r\nimport { useCustomCompareEffect } from \"use-custom-compare\";\r\n\r\nimport { Paper, Button, TextField } from '@material-ui/core'\r\nimport FlashOnIcon from '@material-ui/icons/FlashOn';\r\nimport FlashOffIcon from '@material-ui/icons/FlashOff';\r\nimport SwibeTabs from '../core/SwibeTabs';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        ...theme.monitor.paper,\r\n        marginTop: \"0px\",\r\n        marginBottom: \"0px\"\r\n    },\r\n    profitabilityContainer: {\r\n        textAlign: \"center\"\r\n    },\r\n    profitabilityProjectorContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-around\"\r\n    },\r\n    labelStyle: {\r\n        lineHeight: \"8px\"\r\n    },\r\n    profitLabelStyle: {\r\n        color: \"#00bd00\",\r\n        fontSize: \"18px\"\r\n    },\r\n    centered: {\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\"\r\n    },\r\n    tabRoot: {\r\n        visibility: \"collapse\",\r\n        minHeight: \"0px\",\r\n        height: \"0px\"\r\n    },\r\n    whiteLabel: {\r\n        color: theme.monitor.paper.color\r\n    }\r\n}))\r\n\r\nconst tryGetBinancePrice = binanceData => binanceData.find(x => x.symbol === \"BTC\")?.price\r\n\r\nconst CustomCompare = (prevDeps, nextDeps) => {\r\n    // False triggers, True doesn't\r\n\r\n    // Cannot produce the data\r\n    if (Number.isNaN(nextDeps[2]?.profitabilityBTC) || Number.isNaN(nextDeps[2]?.totalPower) || !Array.isArray(nextDeps[3]))\r\n        return true;\r\n\r\n    // Cannot produce the data\r\n    const nextPrice = tryGetBinancePrice(nextDeps[3])\r\n    if (!Boolean(nextPrice))\r\n        return true;\r\n\r\n    const prevPrice = tryGetBinancePrice(prevDeps[3])\r\n\r\n    return prevDeps[0] === nextDeps[0] &&                                       // do negate power cost\r\n        prevDeps[1] === nextDeps[1] &&                                          // powerCost amount\r\n        prevDeps[2]?.profitabilityBTC === nextDeps[2].profitabilityBTC &&       // nhData profitability\r\n        prevDeps[2]?.totalPower === nextDeps[2].totalPower &&                   // nhData power\r\n        prevPrice === nextPrice                                                 // BTC price\r\n}\r\n\r\nconst calculateProfitability = (profitPerDay, powerConsumptionWH, negatePower, powerCost) => {\r\n    const powerkWday = (powerConsumptionWH / 1000.0) * 24\r\n    const powerCostDaily = powerkWday * powerCost;\r\n    const dailyProfit = profitPerDay - (negatePower ? powerCostDaily : 0);\r\n    return {\r\n        profitabilityEUR: dailyProfit,\r\n        profitabilityWeek: dailyProfit * 7,\r\n        profitabilityMonth: dailyProfit * 365 / 12.0,\r\n        profitabilityYear: dailyProfit * 365,\r\n        powerCostPercentage: (powerCostDaily / profitPerDay) * 100\r\n    }\r\n}\r\n\r\nconst ProfitabilityMonitor = ({ nhData, binanceData }) => {\r\n    const classes = useStyles()\r\n    const [negatePowerCost, setNegatePowerCost] = useState(true)\r\n    const [powerCost, setPowerCost] = useState(0.158)\r\n    const [profits, setProfits] = useState({})\r\n\r\n    useCustomCompareEffect(\r\n        () => {\r\n            setProfits(\r\n                calculateProfitability(\r\n                    nhData.profitabilityBTC * tryGetBinancePrice(binanceData),\r\n                    nhData.totalPower,\r\n                    negatePowerCost,\r\n                    powerCost\r\n                )\r\n            )\r\n        },\r\n        [negatePowerCost, powerCost, nhData, binanceData],\r\n        (prevDeps, nextDeps) => CustomCompare(prevDeps, nextDeps)\r\n    );\r\n\r\n    const P = props => <p className={classes.labelStyle} {...props}>{props.children}</p>\r\n    const P2 = props => <p className={`${classes.labelStyle} ${classes.profitLabelStyle}`}>{props.children} €</p>\r\n\r\n    const profitPercentage = profits?.powerCostPercentage;\r\n    const profitabilityPanel = (\r\n        <Paper elevation={4} className={classes.paper} >\r\n            <Button\r\n                style={{ float: \"right\", width: \"100px\", marginLeft: \"-100px\" }}\r\n                className={classes.whiteLabel}\r\n                onClick={() => setNegatePowerCost(!negatePowerCost)}\r\n                startIcon={negatePowerCost ? <FlashOnIcon style={{ color: \"yellow\" }} /> : <FlashOffIcon />}\r\n            >\r\n                {!Number.isFinite(profitPercentage) ? \"--\" : profitPercentage.toFixed(0)} %\r\n            </Button>\r\n            <div className={classes.profitabilityContainer}>\r\n                <div style={{ dispaly: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\r\n                    <P style={{ marginRight: \"-8px\" }}>Daily profit: </P>\r\n                    <P2 > {profits.profitabilityEUR?.toFixed(2)}</P2>\r\n                </div>\r\n                <div className={classes.profitabilityProjectorContainer}>\r\n                    <div>\r\n                        <P>Week</P>\r\n                        <P2 >{profits.profitabilityWeek?.toFixed(0)}</P2>\r\n                    </div>\r\n                    <div>\r\n                        <P>Month</P>\r\n                        <P2>{profits.profitabilityMonth?.toFixed(0)}</P2>\r\n                    </div>\r\n                    <div>\r\n                        <P>Year</P>\r\n                        <P2>{profits.profitabilityYear?.toFixed(0)}</P2>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Paper>\r\n    )\r\n\r\n    const changePowerCostPanel = (\r\n        <Paper elevation={4} className={`${classes.paper} ${classes.centered}`} style={{ height: \"148px\" }}>\r\n            <TextField\r\n                label={<><FlashOnIcon style={{ color: \"yellow\" }} />Power Cost per kW/h</>}\r\n                type=\"number\"\r\n                value={powerCost}\r\n                className={classes.powerCostLabel}\r\n                onChange={e => setPowerCost(e.target.value)}\r\n                InputLabelProps={{ className: `${classes.whiteLabel} ${classes.centered}` }}\r\n                InputProps={{ className: classes.whiteLabel, style: { textAlign: \"right\" } }}\r\n            />\r\n        </ Paper>\r\n    )\r\n\r\n    return (\r\n        <SwibeTabs hideTabs panels={[profitabilityPanel, changePowerCostPanel]} />\r\n    )\r\n}\r\n\r\nexport default ProfitabilityMonitor","import React, { useEffect, useState } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\n\r\nimport { hwinfoApi } from '../api';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport BinanceMonitor from './BinanceMonitor';\r\nimport NHMonitor from './NHMonitor';\r\nimport ProfitabilityMonitor from './ProfitabilityMonitor';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        paddingTop: theme.spacing(1),\r\n        width: \"100%\",\r\n        height: \"100vh\"\r\n    },\r\n    background: theme.monitor.background,\r\n    refreshButtonContainer: {\r\n        display: \"flex\",\r\n        justifyContent: \"center\"\r\n    }\r\n}))\r\n\r\nconst MinerMonitor = props => {\r\n    const [state, setState] = useState({\r\n        refresh: false,\r\n    })\r\n    const [hwinfoData, setHWinfoData] = useState([])\r\n    const [binanceData, setBinanceData] = useState([])\r\n    const [nhData, setNHData] = useState({ data: {}, combinedData: {} })\r\n    const classes = useStyles()\r\n\r\n    // TODO avg of the fee's -> reduce from profitability\r\n    // TODO create nice default one-clance view with \"openable\" cards (HWINFO)\r\n\r\n    useEffect(() => {\r\n        hwinfoApi.list({ $limit: 1, $sort: { \"time\": -1 } })\r\n            .then(res => setHWinfoData(res.data))\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n\r\n    }, [state.refresh])\r\n\r\n    return (\r\n        <div className={`${classes.root} ${classes.background}`}>\r\n            <NHMonitor\r\n                refresh={state.refresh}\r\n                setRefresh={() => setState({ refresh: !state.refresh })}\r\n                data={nhData.data}\r\n                combData={nhData.combinedData}\r\n                setData={data => setNHData({ ...nhData, data: data })}\r\n                setCombData={data => setNHData({ ...nhData, combinedData: data })}\r\n                hwinfoData={hwinfoData}\r\n            />\r\n            <ProfitabilityMonitor\r\n                nhData={nhData.combinedData}\r\n                binanceData={binanceData}\r\n            />\r\n            <BinanceMonitor\r\n                refresh={state.refresh}\r\n                data={binanceData}\r\n                setData={data => setBinanceData(data)}\r\n            />\r\n            <div className={classes.refreshButtonContainer}>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    startIcon={<RefreshIcon />}\r\n                    onClick={() => setState({ ...state, refresh: !state.refresh })}\r\n                >\r\n                    Refresh\r\n                </Button>\r\n            </div>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default MinerMonitor","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport { Button } from '@material-ui/core'\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: theme.root,\r\n    floatRightBtn: {\r\n        float: \"right\",\r\n        margin: theme.spacing(2)\r\n    }\r\n}))\r\n\r\nconst Transactions = props => {\r\n    const classes = useStyles()\r\n    const [state, setState] = useState({\r\n        labelManagerOpen: true,\r\n    })\r\n    const imageLoadRef = useRef(null);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n    }, [])\r\n\r\n    const loadFile = () => {\r\n        if (typeof window.FileReader !== 'function') {\r\n            alert(\"The file API isn't supported on this browser yet.\")\r\n            return;\r\n        }\r\n        let input = document.getElementById(\"fileinput\");\r\n        if (!input)\r\n            console.error(\"Couldn't find the input element\");\r\n        else if (!input.files)\r\n            console.error(\"Input files error\");\r\n        else if (!input.files[0])\r\n            alert(\"Please select file first\")\r\n        else {\r\n            const selectedFile = input.files[0];\r\n\r\n            input.files = null; // Enables the onChange event to fire next time\r\n            input.value = '';\r\n\r\n            console.log(\"Selected file: \", selectedFile)\r\n\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = e => {\r\n                const foo = async () => {\r\n                    \r\n                }\r\n\r\n\r\n                foo()\r\n                // imageParser.create({ data: e.target.result })\r\n                //     .then(res => {\r\n                //         console.log(\"Got result: \", res)\r\n                //     })\r\n                //     .catch(err => {\r\n                //         console.log(\"ERROR: \", err)\r\n                //     })\r\n            }\r\n            fileReader.readAsDataURL(selectedFile);\r\n        }\r\n    }\r\n\r\n\r\n    return <div className={classes.root}>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={() => {\r\n            if (!imageLoadRef) {\r\n                console.log(\"No ref\")\r\n                return;\r\n            }\r\n            if (!imageLoadRef.current) {\r\n                console.log(\"No current\")\r\n                return;\r\n            }\r\n            console.log(\"Clicking ref\")\r\n            imageLoadRef.current.click();\r\n        }}>\r\n            Load image\r\n        </Button>\r\n        <Button\r\n            className={classes.floatRightBtn}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => {\r\n                browserHistory.push('/categories')\r\n            }}>\r\n            Manage categories\r\n            </Button>\r\n        <input type='file' id='fileinput' style={{ display: 'none' }}\r\n            accept=\".bmp, .jpg, .png, .pbm\"\r\n            ref={imageLoadRef} onChange={() => loadFile()} />\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        transactions: state.transactions\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Transactions)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n}))\r\n\r\nconst CategoriesContent = props => {\r\n    const classes = useStyles()\r\n\r\n    return (\r\n        <div>\r\n            CategoriesContent\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    \r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CategoriesContent)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    \r\n}))\r\n\r\nconst CategoryTypeContent = props => {\r\n    const classes = useStyles()\r\n    \r\n    return <div>\r\n        CategoryTypeContent\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    \r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CategoryTypeContent)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n}))\r\n\r\nconst UnlabeledContent = props => {\r\n    const classes = useStyles()\r\n    const { transactions } = props;\r\n\r\n    console.log(transactions)\r\n\r\n    return (\r\n        <div>\r\n            {transactions && transactions.map(t => (\r\n                <div>\r\n                    {t.saaja}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    \r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UnlabeledContent)","import React, { useState, useEffect } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport CategoriesContent from './CategoriesContent'\r\nimport CategoryTypeContent from './CategoryTypeContent'\r\nimport UnlabeledContent from './UnlabeledContent'\r\nimport TabContent from '../core/TabContent'\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { setTransactions } from '../transactions/transactionActions'\r\nimport { categoriesApi, categoryTypeApi, transactionsApi } from '../api'\r\nimport { setError, setMessage } from '../App/AppActions';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: theme.root,\r\n    marginBtn: { margin: theme.spacing(2) },\r\n    paper: {\r\n        padding: theme.spacing(1),\r\n        margin: theme.spacing(2),\r\n        height: \"100%\"\r\n    }\r\n}))\r\n\r\nconst Categories = props => {\r\n    const classes = useStyles()\r\n    const [state, setState] = useState({\r\n        tabValue: 0\r\n    })\r\n    const { tabValue } = state;\r\n    const { onListTransactions, transactions, categories, categoryTypes } = props;\r\n\r\n    console.log(\"foo\", transactions)\r\n\r\n    useEffect(() => {\r\n        onListTransactions()\r\n    }, [])\r\n\r\n    return (\r\n        <div className={classes.root} style={{ height: \"100%\" }}>\r\n            <Button\r\n                className={classes.marginBtn}\r\n                startIcon={<ArrowBackIcon />}\r\n                onClick={() => {\r\n                    browserHistory.push('/transactions')\r\n                }}>\r\n                Back\r\n            </Button>\r\n            <Paper className={classes.paper} elevation={4}>\r\n                <Tabs\r\n                    variant=\"fullWidth\"\r\n                    className={classes.tabs}\r\n                    indicatorColor=\"primary\"\r\n                    textColor=\"primary\"\r\n                    value={tabValue}\r\n                    onChange={(e, value) => setState({ ...state, tabValue: value })}\r\n                >\r\n                    <Tab label=\"Categories\" />\r\n                    <Tab label=\"Category types\" />\r\n                    <Tab label=\"Unlabeled\" />\r\n                </Tabs>\r\n                <TabContent value={tabValue} index={0} >\r\n                    <CategoriesContent />\r\n                </TabContent>\r\n                <TabContent value={tabValue} index={1} >\r\n                    <CategoryTypeContent />\r\n                </TabContent>\r\n                <TabContent value={tabValue} index={2} >\r\n                    <UnlabeledContent \r\n                        transactions={transactions}\r\n                    />\r\n                </TabContent>\r\n            </Paper>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        transactions: state.transactions.transactions.data,\r\n        categories: state.categories.categories,\r\n        categoryTypes: state.categories.categoryTypes\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onAddCategory: (name, main, sub, sub2) => {\r\n\r\n        },\r\n        onEditCategory: (id, name, main, sub, sub2) => {\r\n\r\n        },\r\n        onListCategories: () => {\r\n\r\n        },\r\n        onListTransactions: () => {\r\n            transactionsApi.list({ $limit: 10 })\r\n                .then(res => dispatch(setTransactions(res)))\r\n                .catch(err => dispatch(setError(err.message)))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Categories)","export const setTransactions = transactions => {\r\n    return { type: \"SET_TRANSACTION\", transactions}\r\n}","\r\nconst FIND_MAP = {\r\n    \"viitenumero\": \"viite\",\r\n    \"viite\": \"viite\",\r\n    \"fi01\": \"iban\"\r\n}\r\n\r\n\r\nexport const parseImageResult = data => {\r\n    const result = {\r\n        viite: { result: \"\", confidence: 0},\r\n        iban: { result: \"\", confidence: 0},\r\n        saaja: { result: \"\", confidence: 0},\r\n        euro: { result: 0, confidence: 0},\r\n        dueDate: { result: new Date, confidence: 0},\r\n    };\r\n\r\n    const tryFindViite = line => {\r\n        \r\n    }\r\n    \r\n    const tryFindIBAN = line => {\r\n        \r\n    }\r\n\r\n    const tryFindSaaja = line => {\r\n\r\n    }\r\n\r\n    const tryFindAmount = line => {\r\n\r\n    }\r\n\r\n    const tryFindDueDate = line => {\r\n\r\n    }\r\n\r\n    data.lines.forEach(line => {\r\n        line = line.toLowerCase()\r\n        tryFindViite(line);\r\n    });\r\n\r\n    const res = {}\r\n    Object.keys(result).forEach(k => res[k] = result[k].result)\r\n    return res\r\n}","import React, { useState, useRef } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, Dialog, DialogActions, DialogContent, TextField, CircularProgress, LinearProgress } from '@material-ui/core'\r\n\r\nimport { parseImageResult } from './textParser';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    progressDiv: {\r\n        position: \"absolute\",\r\n        bottom: \"5rem\",\r\n        width: \"100%\"\r\n    }\r\n}))\r\n\r\nconst SessionModal = props => {\r\n    const classes = useStyles()\r\n\r\n    const { worker, workerLoadProgress, modalOpen, onClose, onAdd } = props;\r\n    const [state, setState] = useState({\r\n        viite: \"\",\r\n        iban: \"\",\r\n        saaja: \"\",\r\n        euro: 0,\r\n        dueDate: new Date(),\r\n        image: null,\r\n    })\r\n    const imageLoadRef = useRef(null);\r\n\r\n    const handleChange = e => {\r\n        setState({ ...state, [e.target.name]: e.target.value })\r\n    }\r\n\r\n    const loadFile = () => {\r\n        if (typeof window.FileReader !== 'function') {\r\n            alert(\"The file API isn't supported on this browser yet.\")\r\n            return;\r\n        }\r\n        let input = document.getElementById(\"fileinput\");\r\n        if (!input)\r\n            console.error(\"Couldn't find the input element\");\r\n        else if (!input.files)\r\n            console.error(\"Input files error\");\r\n        else if (!input.files[0])\r\n            alert(\"Please select file first\")\r\n        else {\r\n            const selectedFile = input.files[0];\r\n\r\n            input.files = null; // Enables the onChange event to fire next time\r\n            input.value = '';\r\n\r\n            console.log(\"Selected file: \", selectedFile)\r\n\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = e => {\r\n                const parseImage = async () => {\r\n                    const result = await worker.recognize(e.target.result);\r\n                    console.log(\"Got result: \", result)\r\n                    const parsedResult = parseImageResult(result.data)\r\n                    setState({ parsedResult, image: e.target.result })\r\n                }\r\n\r\n                parseImage()\r\n                // imageParser.create({ data: e.target.result })\r\n                //     .then(res => {\r\n                //         console.log(\"Got result: \", res)\r\n                //     })\r\n                //     .catch(err => {\r\n                //         console.log(\"ERROR: \", err)\r\n                //     })\r\n            }\r\n            fileReader.readAsDataURL(selectedFile);\r\n        }\r\n    }\r\n\r\n    let loaderIndicator;\r\n    if (workerLoadProgress !== 0 && workerLoadProgress < 1) {\r\n        loaderIndicator = (\r\n            <div className={classes.progressDiv}>\r\n                <CircularProgress color=\"primary\" variant=\"indeterminate\" />\r\n                <LinearProgress color=\"primary\" variant=\"determinate\" value={workerLoadProgress * 100} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Dialog open={modalOpen} onClose={onClose}>\r\n            <DialogContent>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={() => {\r\n                    if (imageLoadRef && imageLoadRef.current)\r\n                        imageLoadRef.current.click()\r\n                }}\r\n                    disabled={!Boolean(worker)}>\r\n                    Load image\r\n            </Button>\r\n                <div>\r\n                    <TextField label=\"IBAN\" name=\"iban\" value={state.iban} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Saaja\" name=\"saaja\" value={state.saaja} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Euro\" name=\"euro\" value={state.euro} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Viite\" name=\"viite\" value={state.viite} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Eräpäivä\" name=\"dueDate\" value={state.dueDate} onChange={handleChange} />\r\n                </div>\r\n                {loaderIndicator}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={onClose}>Cancel</Button>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={onAdd}>Add</Button>\r\n                <input type='file' id='fileinput' style={{ display: 'none' }}\r\n                    accept=\".bmp, .jpg, .png, .pbm, .pdf\"\r\n                    ref={imageLoadRef} onChange={() => loadFile()} />\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default SessionModal","import React, { useState, useEffect } from 'react'\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, CircularProgress, Slide, Typography } from '@material-ui/core'\r\n\r\nimport SessionModal from './SessionModal'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { createWorker } from 'tesseract.js'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        ...theme.root,\r\n    },\r\n    loaderDiv: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        marginTop: \"5rem\",\r\n        position: \"absolute\",\r\n        width: \"100%\"\r\n    },\r\n    actionButtons: {\r\n        position: \"absolute\",\r\n        bottom: \"3rem\",\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        width: \"100%\",\r\n        margin: theme.spacing(2)\r\n    },\r\n    addBillButton: {\r\n        margin: theme.spacing(2)\r\n    }\r\n}))\r\n\r\nconst Session = props => {\r\n    const classes = useStyles()\r\n    const [state, setState] = useState({\r\n        worker: null,\r\n        workerLoadProgress: 0,\r\n        modalOpen: false,\r\n    })\r\n\r\n    useEffect(() => {\r\n        const initWorker = async () => {\r\n            const worker = createWorker({\r\n                logger: m => {\r\n                    if (m.status === \"recognizing text\") {\r\n                        setState({ ...state, workerLoadProgress: m.progress })\r\n                    }\r\n                    console.log(\"Worker: \", m)\r\n                }\r\n            })\r\n\r\n            await worker.load();\r\n            await worker.loadLanguage(\"fin\");\r\n            await worker.initialize(\"fin\");\r\n\r\n            setState({ ...state, worker: worker })\r\n        }\r\n        if (!state.worker)\r\n            initWorker()\r\n\r\n        return () => {\r\n            const kill = async () => {\r\n                console.log(\"killing worker\")\r\n                await state.worker.terminate();\r\n                console.log(\"Worker terminated\")\r\n            }\r\n            if (state.worker)\r\n                kill()\r\n        }\r\n    }, [])\r\n\r\n    const redirBack = () => browserHistory.push(\"/payments\");\r\n    const addPayments = () => {\r\n        // TODO\r\n        console.log(\"Fake adding payments!\")\r\n        // browserHistory.push(\"/payments\")\r\n    }\r\n\r\n    return <div className={classes.root}>\r\n        <Button className={classes.addBillButton} variant=\"contained\" color=\"primary\" onClick={() => setState({ ...state, modalOpen: true })}>\r\n            Add bill\r\n        </Button>\r\n        <SessionModal {...state} onClose={() => setState({ ...state, modalOpen: false })}\r\n            onAdd={props => {\r\n                console.log(\"Adding payment with: \", props)\r\n                // TODO\r\n            }} />\r\n        <div className={classes.actionButtons}>\r\n            <Button variant=\"contained\" color=\"secondary\" onClick={() => redirBack()}>Back</Button>\r\n            <Button variant=\"contained\" color=\"secondary\" onClick={() => addPayments()}>Cancel</Button>\r\n        </div>\r\n\r\n        <Slide direction=\"up\" in={!Boolean(state.worker)} mountOnEnter unmountOnExit>\r\n            <div className={classes.loaderDiv}>\r\n                <CircularProgress color=\"primary\" variant=\"indeterminate\" />\r\n                <Typography color=\"primary\">Worker loading...</Typography>\r\n            </div>\r\n        </Slide>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Session)","const drawerState = { open: false }\r\n\r\nexport default (state = drawerState, action) => {\r\n  switch (action.type) {\r\n    case 'OPEN_DRAWER':\r\n      return { open: true }\r\n    case 'CLOSE_DRAWER':\r\n      return { open: false }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","const profileMenuState = { open: false, anchor: null }\r\n\r\nexport default (state = profileMenuState, action) => {\r\n    switch (action.type) {\r\n        case 'OPEN_PROFILE_MENU':\r\n            return { open: true, anchor: action.target}\r\n        case 'CLOSE_PROFILE_MENU':\r\n            return { open: false, anchor: null }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","// import { foodService } from '../api'\r\n\r\n// TODO implement auto filtering on main types based on last eaten\r\n\r\nconst foodState = {\r\n\tfilters: {\r\n\t\tmain: {},\r\n\t\tside: {},\r\n\t\tspeed: {$lt: 180},\r\n\t\tday: {}\r\n\t},\r\n\tsearch: \"\",\r\n\tsearchOptions: [],\r\n\tsort: {},\r\n\tpage: 0,\r\n\tlimit: 10,\r\n\tselectedFood: null,\r\n\tfoodEdit: null,\r\n\tfoodEditOpen: false,\r\n\tfoods: {\r\n\t\tdata: []\r\n\t},\r\n\tfiltersOpen: false,\r\n\tdistincts: {},\r\n\terrors: [],\r\n\tlatestFood: null,\r\n}\r\n\r\nexport default (state = foodState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_FILTERS\":\r\n\t\t\treturn Object.assign({}, state, { filters: action.filters })\r\n\t\tcase \"SELECT_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { selectedFood: action.food })\r\n\t\tcase \"EDIT_FOOD\":\r\n\t\t\tconst isOpen = state.foodEditOpen;\r\n\t\t\tif (isOpen) return Object.assign({}, state, { foodEdit: null, foodEditOpen: false })\r\n\t\t\treturn Object.assign({}, state, { foodEdit: action.food, foodEditOpen: true })\r\n\t\tcase \"SET_FOODS\":\r\n\t\t\tconst newState = action.foods\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfoods: newState.foods,\r\n\t\t\t\tfilters: newState.filters,\r\n\t\t\t\tsort: newState.sort,\r\n\t\t\t\tsearch: newState.search,\r\n\t\t\t\tpage: newState.page,\r\n\t\t\t\tlimit: newState.limit\r\n\t\t\t})\r\n\t\tcase \"SET_OPEN_FILTERS\":\r\n\t\t\tconst open = state.filtersOpen;\r\n\t\t\treturn Object.assign({}, state, { filtersOpen: !open })\r\n\t\tcase \"SET_DISTINCTS\":\r\n\t\t\treturn Object.assign({}, state, { distincts: action.res })\r\n\t\tcase \"SET_ERRORS\":\r\n\t\t\treturn Object.assign({}, state, { errors: action.errors })\r\n\t\tcase \"SET_LATEST_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { latestFood: action.food })\r\n\t\tcase \"SET_SEARCH_OPTIONS\":\r\n\t\t\treturn Object.assign({}, state, { searchOptions: action.options})\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","const paymentState = {\r\n\tdata: null,\r\n\tdeleteId: null,\r\n    distinctNotes: []\r\n}\r\n\r\nexport default (state = paymentState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_DATA\":\r\n\t\t\treturn Object.assign({}, state, { data: action.data })\r\n\t\tcase \"SET_DELETE_ID\":\r\n\t\t\treturn Object.assign({}, state, { deleteId: action.id })\r\n        case \"SET_DISTINCT_NOTES\":\r\n            return Object.assign({}, state, { distinctNotes: action.notes })\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n","const transactionState = {\r\n    transactions: {\r\n        page: 0,\r\n        skip: 0,\r\n        limit: 100,\r\n        data: []\r\n    }\r\n}\r\n\r\nexport default (state = transactionState, action) => {\r\n    switch (action.type) {\r\n        case \"SET_TRANSACTION\":\r\n            return Object.assign({}, state, { transactions: action.transactions })\r\n        default:\r\n            return state;\r\n    }\r\n}","const transactionState = {\r\n    categories: [],\r\n    categoryTypes: []\r\n}\r\n\r\nexport default (state = transactionState, action) => {\r\n    switch (action.type) {\r\n        \r\n        default:\r\n            return state;\r\n    }\r\n}","import { combineReducers } from 'redux'\r\nimport app from './App/AppReducer'\r\nimport user from './App/userReducer'\r\nimport drawer from './App/drawerReducer'\r\nimport profile from './App/profileReducer'\r\nimport food from './foods/foodReducers'\r\nimport payment from './payments/paymentReducer'\r\nimport transactions from './transactions/transactionReducer'\r\nimport categories from './categories/categoriesReducer'\r\n\r\nexport default combineReducers({\r\n    app,\r\n    user,\r\n    drawer,\r\n    profile,\r\n    food,\r\n    payment,\r\n    transactions,\r\n    categories,\r\n})\r\n","export default (state = {message: \"\", err: \"\"}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_MESSAGE\":\r\n\t\t\treturn {message: action.message, err: \"\"}\r\n\t\tcase \"SET_ERROR\":\r\n\t\t\treturn {message: \"\", err: action.message}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","export default (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t  case 'AUTH':\r\n\t\treturn action.user\r\n\t  case 'DEAUTH':\r\n\t\treturn {}\r\n\t  default:\r\n\t\treturn state\r\n\t}\r\n  }\r\n  ","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Router, Route, browserHistory } from 'react-router'\r\nimport { createStore } from 'redux'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport feathers from '@feathersjs/client'\r\nimport rest from '@feathersjs/rest-client'\r\nimport authentication from '@feathersjs/authentication-client'\r\nimport superagent from 'superagent'\r\n\r\nimport App from './App/App'\r\nimport SignIn from './signin/SignIn'\r\nimport Home from './home/home'\r\nimport Foods from './foods/Foods'\r\nimport ShopList from './shoplist/Shoplist'\r\nimport Payments from './payments/payments'\r\nimport MarkPendingPayment from './pending-payments/MarkPendingPayment'\r\nimport MinerMonitor from './minermonitor/MonitorDashboard'\r\nimport Transactions from './transactions/Transactions'\r\nimport Categories from './categories/Categories'\r\nimport Session from './payments/Session/Session'\r\n\r\nimport reducers from './reducers'\r\nimport { authUser } from './App/AppActions'\r\n\r\nconst store = createStore(reducers)\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n\tconsole.log('This app is using DEVELOPMENT environment');\r\n\tconsole.log('REACT_APP_API_URL = ' + process.env.REACT_APP_API_URL);\r\n\tconsole.log('REACT_APP_OAUTH_URL = ' + process.env.REACT_APP_OAUTH_URL);\r\n}\r\nif (process.env.NODE_ENV === \"production\") {\r\n\tif (!process.env.REACT_APP_API_URL)\r\n\t\tconsole.error('REACT_APP_API_URL is not set!')\r\n\tif (!process.env.REACT_APP_OAUTH_URL)\r\n\t\tconsole.error('REACT_APP_OAUTH_URL is not set!')\r\n}\r\n\r\nconst app = feathers()\r\n\t.configure(rest(process.env.REACT_APP_API_URL).superagent(superagent))\r\n\t.configure(authentication({ storage: window.localStorage }))\r\n\r\nfunction handlePath(pathname) {\r\n\tif (pathname === '/signin' || pathname.includes('/pending-payments:')) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t//Get user from Redux state\r\n\tconst user = store.getState().user;\r\n\t//If we have no user, none is logged in.\r\n\tif (!user || !user._id) {\r\n\t\tbrowserHistory.push('/signin');\r\n\t\treturn;\r\n\t}\r\n\r\n\t// if (pathname !== \"/home\" || pathname !== \"/signin\" || pathname !== \"/foods\" || pathname !== \"/shoplist\") {\r\n\t// \tbrowserHistory.push(\"/home\");\r\n\t// \treturn;\r\n\t// }\r\n}\r\n\r\nfunction enterHandler() {\r\n\tconst pathname = window.location.pathname\r\n\thandlePath(pathname)\r\n}\r\n\r\n\r\napp.reAuthenticate()\r\n\t.then(r => {\r\n\t\t//Populate Redux state with user information if authenticated.\r\n\t\tstore.dispatch(authUser(r.user))\r\n\t\tinitRender()\r\n\t})\r\n\t.catch(err => {\r\n\t\tinitRender()\r\n\t})\r\n\r\n\r\nfunction initRender() {\r\n\tReactDOM.render((\r\n\t\t<Provider store={store}>\r\n\t\t\t<Router history={browserHistory}>\r\n\t\t\t\t<Route path=\"/\" component={App} onEnter={enterHandler}>\r\n\t\t\t\t\t<Route path=\"/home\" component={Home} />\r\n\t\t\t\t\t<Route path=\"/signin\" component={SignIn} />\r\n\t\t\t\t\t<Route path=\"/foods\" component={Foods} />\r\n\t\t\t\t\t<Route path=\"/shoplist\" component={ShopList} />\r\n\t\t\t\t\t<Route path=\"/payments\" component={Payments} />\r\n                    <Route path=\"/pending-payments:id\" component={MarkPendingPayment} />\r\n                    <Route path=\"/minermonitor\" component={MinerMonitor} />\r\n                    {/* <Route path=\"/payments/session\" component={Session} /> */}\r\n                    {/* <Route path=\"/transactions\" component={Transactions} />\r\n                    <Route path=\"/categories\" component={Categories} /> */}\r\n\t\t\t\t</Route>\r\n\t\t\t</Router>\r\n\t\t</Provider>\r\n\t), document.getElementById('root'))\r\n}\r\n\r\nexport default app\r\n"],"sourceRoot":""}