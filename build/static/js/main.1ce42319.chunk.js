(this.webpackJsonpkisahome=this.webpackJsonpkisahome||[]).push([[0],{459:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o),l=n(17),c=n(79),u=n(11),s=n(211),m=n.n(s),d=n(212),f=n.n(d),p=n(213),E=n.n(p),g=n(214),v=n.n(g),h=n(215),b=n(216),y=n(246),O=n(244),C=n(243),j=n(513),w=n(129),x=n(128),S=Object(C.a)({}),k=Object(C.a)({palette:{primary:{main:w.a[800]},secondary:{main:"#fffffF"},error:x.a},overrides:{MuiPaper:{root:{flexBasis:"auto"}},MuiTabs:{vertical:{maxWidth:"80px"}},MuiGrid:{root:{justifyContent:"space-evenly"}},MuiDialogTitle:{root:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}}},separate:{flexGrow:1},root:{marginTop:"4rem"},centerDivColumn:{display:"flex",flexDirection:"column",alignItems:"center"},spreadDivColumn:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},monitor:{paper:{width:"calc(100% - ".concat(S.spacing(3),")"),margin:S.spacing(2),padding:S.spacing(1),backgroundColor:"#333",color:"#fff"},floatRight:{float:"right"},background:{background:"#121212",color:"#fff"},lightBackground:{backgroundColor:"#333",color:"#fff"}}}),N=function(e){return r.a.createElement(j.a,{theme:k},r.a.createElement("div",null,e.children))},D=n(526),T=n(515),F=n(220),P=n.n(F),I=n(517),R=n(518),A=n(217),L=function(e){return{type:"SET_ERROR",message:e}},_=function(e){return{type:"SET_MESSAGE",message:e}},M=function(e){return{type:"AUTH",user:e}},B=n(219),W=n.n(B),U=Object(A.a)((function(e){return{navBar:{zIndex:e.zIndex.drawer+1,top:0,left:0,margin:0},separate:e.separate}})),$=Object(u.b)((function(e){return{user:e.user,drawerOpen:e.drawer.open,profileOpen:e.profile.open}}),(function(e){return{onOpenDrawer:function(){e({type:"OPEN_DRAWER"})},onCloseDrawer:function(){e({type:"CLOSE_DRAWER"})},onNavigate:function(t){l.c.push(t),e({type:"CLOSE_DRAWER"})},onOpenProfile:function(t){e({type:"OPEN_PROFILE_MENU",target:t.currentTarget})},onCloseProfile:function(){e({type:"CLOSE_PROFILE_MENU"})}}}))((function(e){var t,n,a,o=e.location,i=e.user,l=e.drawerOpen,c=e.onOpenDrawer,u=e.onCloseDrawer,s=e.profileOpen,m=e.onOpenProfile,d=e.onCloseProfile,f=U();return a=null!=i._id&&r.a.createElement("div",null,r.a.createElement(T.a,{onClick:s?d:m,style:{color:"white"}},r.a.createElement(W.a,{fontSize:"large"}))),"/signin"===o.pathname||(n=r.a.createElement(T.a,{edge:"start",style:{color:"white"},onClick:function(){l?u():c()}},r.a.createElement(P.a,null))),t=r.a.createElement(I.a,{position:"static",className:f.navBar},r.a.createElement(R.a,null,n,r.a.createElement("div",{className:f.separate}),a)),r.a.createElement("header",null,t)})),Y=n(553),H=n(551),G=Object(u.b)((function(e){return{text:e.app.message,err:e.app.err}}),(function(e){return{onClose:function(){e(_(""))}}}))((function(e){var t=e.text,n=e.err,a=e.onClose;return r.a.createElement(Y.a,{open:Boolean(n||t),autoHideDuration:3e3,onClose:a},r.a.createElement(H.a,{elevation:6,variant:"filled",onClose:a,severity:n?"error":t?"success":"info"},n||(t||"")))})),z=n(522),J=n(521),q=n(523),V=n(221),Q=n.n(V),K=n(118),X=n.n(K),Z=n(119),ee=n.n(Z),te=n(120),ne=n.n(te),ae=n(121),re=n.n(ae),oe=n(460),ie=n(519),le=n(520),ce=n(245),ue=Object(u.b)((function(e){return{}}),(function(e){return{onNavigate:function(t){l.c.push(t),e({type:"CLOSE_DRAWER"})}}}))((function(e){var t=e.path,n=e.icon,a=e.onNavigate;return r.a.createElement(oe.a,{button:!0,key:t,onClick:function(){return a("/".concat(t))}},r.a.createElement(ie.a,null,n),r.a.createElement(le.a,{primary:Object(ce.a)(t)}))})),se=Object(u.b)((function(e){return{user:e.user,drawerOpen:e.drawer.open}}),(function(e){return{onOpenDrawer:function(){e({type:"OPEN_DRAWER"})},onCloseDrawer:function(){e({type:"CLOSE_DRAWER"})},onNavigate:function(t){l.c.push(t),e({type:"CLOSE_DRAWER"})}}}))((function(e){var t=e.user,n=e.drawerOpen,a=e.onOpenDrawer,o=e.onCloseDrawer,i=(e.onNavigate,[]);return t._id?(i.push(r.a.createElement(J.a,{key:"div1"})),i.push(r.a.createElement(ue,{key:1,path:"home",icon:r.a.createElement(Q.a,null)})),i.push(r.a.createElement(ue,{key:2,path:"foods",icon:r.a.createElement(X.a,null)})),i.push(r.a.createElement(ue,{key:3,path:"shoplist",icon:r.a.createElement(ee.a,null)})),"admin"===t.role&&(i.push(r.a.createElement(ue,{key:4,path:"payments",icon:r.a.createElement(ne.a,null)})),i.push(r.a.createElement(ue,{key:5,path:"minermonitor",icon:r.a.createElement(re.a,null)}))),i.push(r.a.createElement(J.a,{key:"div2"})),r.a.createElement(z.a,{open:n,onClose:function(e){return e?o():a()}},r.a.createElement(q.a,null,i))):r.a.createElement("div",null)})),me=n(247),de=n(525),fe=n(222),pe=n.n(fe),Ee=n(12),ge=n(42),ve=navigator.userAgent.indexOf("Chrome")>-1,he=navigator.userAgent.indexOf("Safari")>-1,be=navigator.userAgent.toLowerCase().indexOf("op")>-1;ve&&he&&(he=!1),ve&&be&&(ve=!1);var ye=function(e,t){return gr.authenticate({strategy:"local",email:e,password:t})},Oe=function(){return gr.logout()},Ce=function(e){var t={};return Object.keys(e).forEach((function(n){var a=e[n];"asc"===a?e[n]=1:"desc"===a&&(e[n]=-1),t[function(e){switch(e){case"main":return"maintype";case"side":return"sidetype";case"food":return"name";case"Food Amount":return"foodamount";case"Cooking Time":return"time";case"Last Eaten":return"lasteaten";default:return"timeseaten"}}(n)]=e[n]})),t},je=function(e){var t={};return Object.keys(e).forEach((function(n){var a={};if("speed"===n)a.time=e[n],t=Object.assign(t,a);else{var r=[];Object.keys(e[n]).forEach((function(t){"$nin"===e[n][t]&&r.push(t)})),r.length&&("day"===n?(r=r.map((function(e){return parseInt(e.split(" ")[0])})),a.foodamount={$nin:r}):a["".concat(n,"type")]={$nin:r},t=Object.assign(t,a))}})),t},we=function(){return gr.service("v1/foods")},xe=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4?arguments[4]:void 0,o=je(e),i=Ce(n),l=Object.assign(o,{$skip:10*(t-1<0?0:t),$limit:r,$sort:i});return a&&(l=Object.assign(l,{$search:a})),we().find({query:l})},Se=function(e){return we().create(e)},ke=function(e,t){return we().patch(e,t)},Ne=function(e){return we().remove(e)},De=function(e){return we().find({query:e})},Te=function(){return new Promise((function(e,t){return we().find({query:{$limit:1e4}}).then((function(t){var n=[],a=[],r=Object(ge.a)(Array(4).keys()).map((function(e){return"".concat(e+1," day")}));t.data.forEach((function(e){n.push(e.maintype),e.sidetype.forEach((function(e){return a.push(e)}))})),e({main:Object(ge.a)(new Set(n)),side:Object(ge.a)(new Set(a)),day:r})}))}))},Fe=function(){return new Promise((function(e,t){we().find({query:{$sort:{lasteaten:-1},$lasteaten:!0}}).then((function(t){e(t)}))}))},Pe=function(){return gr.service("v1/payments")},Ie=function(e){return Pe().find({query:e})},Re=function(e){return Pe().create(Object(Ee.a)(Object(Ee.a)({},e),{},{paid:!1}))},Ae=function(e,t){return Pe().patch(e,t)},Le=function(e){return Pe().remove(e)},_e=function(){return gr.service("v1/pending-payments")},Me=function(e){return _e().get(e)},Be=function(e){return _e().create(e)},We=function(){return gr.service("v1/transactions")},Ue=function(e){return We().find({query:e})},$e=function(e){return gr.service("v1/hwinfo").find({query:e})},Ye=function(){return gr.service("v1/nh").get({})},He=function(e){return gr.service("v1/binance").find({query:e})},Ge=Object(u.b)((function(e){return{user:e.user,profileOpen:e.profile.open,anchorEl:e.profile.anchor}}),(function(e){return{onCloseProfile:function(){e({type:"CLOSE_PROFILE_MENU"})},onNavigate:function(e){l.c.push(e)},onSignOut:function(){var t=setTimeout((function(){e(_("Connection timeout during sign out."))}),5e3);Oe().then((function(){clearTimeout(t),e(_("Signed out.")),e({type:"DEAUTH"}),l.c.push("/signin")})).catch((function(n){clearTimeout(t),e(_(n.message))}))}}}))((function(e){var t=e.user,n=e.profileOpen,a=e.onCloseProfile,o=e.anchorEl,i=e.onSignOut;return r.a.createElement(me.a,{anchorEl:o,keepMounted:!0,open:n,onClose:a,disableAutoFocus:!0},r.a.createElement(de.a,{disabled:!0,style:{opacity:1}},r.a.createElement(le.a,{primary:"Signed in as: ".concat(t.isQuest?" Quest":"")})),r.a.createElement(de.a,{disabled:!0,style:{opacity:1}},r.a.createElement(le.a,{primary:t.name,secondary:t.email})),r.a.createElement(J.a,null),r.a.createElement(de.a,{onClick:function(){a(),i()}},r.a.createElement(ie.a,null,r.a.createElement(pe.a,null)),r.a.createElement(le.a,{primary:"Sign Out"})))})),ze=function(e){Object(y.a)(n,e);var t=Object(O.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e,t;return"/signin"!==this.props.location.pathname&&(e=r.a.createElement(se,null),t=r.a.createElement(Ge,null)),r.a.createElement(N,null,r.a.createElement("div",null,r.a.createElement(D.a,null),r.a.createElement($,{location:this.props.location}),e,t,this.props.main,this.props.children,r.a.createElement(G,null)))}}]),n}(r.a.Component),Je=n(8),qe=n(529),Ve=n(130),Qe=n(528),Ke=n(527),Xe=n(223),Ze=n.n(Xe),et=Object(A.a)((function(e){return{root:{marginTop:"8rem",display:"flex",margin:e.spacing(2)},TextField:{display:"flex",margin:e.spacing(2),paddingRight:e.spacing(4)}}}));var tt=Object(u.b)((function(e){return{}}),(function(e){return{onSignIn:function(t,n){if(0===t.length&&0===n.length)return e(_("E-mail and password cannot be empty")),{user:null,error:Promise.resolve(3)};if(0===t.length)return e(_("E-mail cannot be empty")),{user:null,error:Promise.resolve(1)};if(-1===t.indexOf("@"))return e(_('E-mail does not contain "@" symbol')),{user:null,error:Promise.resolve(4)};if(0===n.length)return e(_("Password cannot be empty")),{user:null,error:Promise.resolve(2)};e(_("Signing in..."));var a=setTimeout((function(){e(_("Connection timeout during sign in."))}),5e3);return ye(t,n).then((function(t){return clearTimeout(a),e(_("Signed in.")),e(M(t.user)),l.c.push("/home"),{user:t.user,error:null}})).catch((function(t){return clearTimeout(a),"MongoError"===t.name?e(_("Server error. Try again later.")):"NotAuthenticated"===t.name?e(_("Unable to sign in. Invalid e-mail or password.")):e(L("Error: "+t.name+t.message)),l.c.push("/"),setTimeout((function(){return l.c.push("/signin")}),10),{user:null,error:t}}))},onSignInGoogle:function(){},onResetPassword:function(){}}}))((function(e){var t=et(),n=Object(a.useState)(),o=Object(Je.a)(n,1)[0],i=Object(a.useState)(""),l=Object(Je.a)(i,2),c=l[0],u=l[1],s=Object(a.useState)(""),m=Object(Je.a)(s,2),d=m[0],f=m[1],p=e.onSignIn,E=function(e){e.preventDefault(),p(c,d)};return r.a.createElement("div",{className:t.root},r.a.createElement(Ve.a,{elevation:3,style:{width:"100%"}},r.a.createElement(q.a,{subheader:r.a.createElement(Ke.a,null,"Sign In")},r.a.createElement("form",{onSubmit:E,style:{marginTop:"24px"}},r.a.createElement("div",null,r.a.createElement(Qe.a,{className:t.TextField,label:"Email",value:c,fullWidth:!0,onChange:function(e){return u(e.target.value)},type:"email",error:!!o,helperText:1===o||3===o?"E-mail is required":4===o?'E-mail does not contain "@" symbol':null})),r.a.createElement("div",null,r.a.createElement(Qe.a,{className:t.TextField,label:"Password",value:d,fullWidth:!0,onChange:function(e){return f(e.target.value)},type:"password",error:!!o,helperText:2===o||3===o?"Password is required":null})),r.a.createElement("div",null,r.a.createElement(qe.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(Ze.a,null),onClick:E,className:t.TextField},"Sign In")),r.a.createElement("input",{type:"submit",style:{display:"none"}})))))})),nt=Object(A.a)((function(e){return{paper:{marginTop:"10rem",marginLeft:"1rem",marginRight:"1rem"}}})),at=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{onNavigate:function(t){l.c.push(t),e({type:"CLOSE_DRAWER"})}}}))((function(e){var t=nt(),n=e.user,a=[];return a.push(r.a.createElement(ue,{key:0,path:"foods",icon:r.a.createElement(X.a,null)})),a.push(r.a.createElement(ue,{key:1,path:"shoplist",icon:r.a.createElement(ee.a,null)})),"admin"===n.role&&(a.push(r.a.createElement(ue,{key:2,path:"payments",icon:r.a.createElement(ne.a,null)})),a.push(r.a.createElement(ue,{key:3,path:"minermonitor",icon:r.a.createElement(re.a,null)}))),r.a.createElement("div",null,r.a.createElement(q.a,{className:t.paper},a))})),rt=n(532),ot=n(549),it=n(531),lt=n(533),ct=n(530),ut=n(555),st=n(81),mt=n(71),dt=n(548),ft=function(e){var t=e.children,n=e.value,a=e.index,o=Object(st.a)(e,["children","value","index"]);return r.a.createElement(mt.a,Object.assign({component:"div",role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},o),n===a&&r.a.createElement(dt.a,{p:3},t))},pt=Object(A.a)((function(e){return{filterSectionRoot:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:224},tabs:{borderRight:"1px solid ".concat(e.palette.divider),backgroundColor:e.palette.primary},verticalTab:{alignItems:"start",maxWidth:"10px"},center:{display:"flex",position:"relative",alignItems:"center"},tabContainer:{flexGrow:1,maxWidth:"250px",marginLeft:"-56px",marginTop:"-40px",paddingTop:"2px"},speedContainer:{minWidth:"200px",marginLeft:"5px"},speedText:{display:"flex",flexDirection:"column",alignItems:"center"},speedBtn:{display:"flex",alignItems:"center",margin:"10px"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary},filterButton:{width:"80px",fontSize:"small"},filterButtonDisabled:{width:"80px",fontSize:"small",color:"#d3d3d3"},header:{width:"80px",fontSize:"small",opacity:1},filterTab:{minWidth:"80px"}}})),Et=Object(u.b)((function(e){return{}}),(function(e){return{}}))((function(e){var t=e.filters,n=e.setFilters,o=pt(),i=Object(a.useState)(0),l=Object(Je.a)(i,2),c=l[0],u=l[1],s=function(e){var a;e in t.main?a=t.main:e in t.side?a=t.side:e in t.day&&(a=t.day);var r="$in"===a[e]?"$nin":"$in";a[e]=r,n(t)},m=function(e,a){var r,o=Object.keys(e.type)[0];o in t.main?r=t.main:o in t.side?r=t.side:o in t.day&&(r=t.day),Object.keys(r).forEach((function(e){r[e]=a})),n(t)},d=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ct.a,{item:!0,xs:2},r.a.createElement(qe.a,{color:"primary",className:o.header,onClick:function(){return m(e,"$in")}},"Include")),r.a.createElement(ct.a,{item:!0,xs:2},r.a.createElement(qe.a,{color:"primary",className:o.header,onClick:function(){return m(e,"$nin")}},"Exclude")))},f=function(e,t,n){return r.a.createElement(qe.a,{variant:e?"contained":"outlined",color:e?"primary":"default",onClick:function(){return n(t)},className:e?o.filterButton:o.filterButtonDisabled},t)},p=function(e){var t=Object.keys(e);return r.a.createElement("div",{className:o.tabContainer},r.a.createElement(ct.a,{container:!0,spacing:1,directon:"row",justify:"space-evenly",alignItems:"flex-start"},r.a.createElement(ct.a,{container:!0,item:!0,xs:12,spacing:3},r.a.createElement(d,{type:e})),t.map((function(t){var n="$in"===e[t];return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(ct.a,{container:!0,item:!0,xs:12,spacing:3},r.a.createElement(ct.a,{item:!0,xs:2},f(n,t,s)),r.a.createElement(ct.a,{item:!0,xs:2},f(!n,t,s))))}))))},E=p(t.main),g=p(t.side),v=p(t.day),h=Object.keys(t.speed)[0],b=t.speed[h],y="$lt"===h,O=y?"less":"more",C=function(e){t.speed=y?{$gt:b}:{$lt:b},n(t)},j=r.a.createElement("div",{className:o.speedContainer},r.a.createElement("div",{className:o.speedBtn},f(y,"<",C),f(!y,">",C)),r.a.createElement(ut.a,{value:b,defaultValue:180,track:y?"normal":"inverted",getAriaValueText:function(e){return"".concat(e)},valueLabelDisplay:"auto",valueLabelFormat:function(e){return function(e){var t=Math.floor(e/60),n=Math.floor(e%60/6);return 0===n?t:"".concat(t,".").concat(n)}(e)},onChange:function(e,a){a!==b&&(t.speed[h]=a,n(t))},step:30,min:0,max:180}),r.a.createElement("div",{className:o.speedText},r.a.createElement("div",null,"Takes ".concat(O," than ")),r.a.createElement("div",null,"".concat(function(e){var t=Math.floor(e/60),n=Math.floor(e%60);return 0===t?"    ".concat(n," min"):0===n?"".concat(t," h       "):"".concat(t,"h ").concat(n," min")}(b))),r.a.createElement("div",null," to make")));return r.a.createElement("div",{className:o.filterSectionRoot},r.a.createElement(ot.a,{orientation:"vertical",className:o.tabs,indicatorColor:"primary",textColor:"primary",value:c,onChange:function(e,t){return u(t)}},r.a.createElement(it.a,{label:"Main",className:o.filterTab}),r.a.createElement(it.a,{label:"Side",className:o.filterTab}),r.a.createElement(it.a,{label:"Speed",className:o.filterTab}),r.a.createElement(it.a,{label:"Day",className:o.filterTab})),r.a.createElement(ft,{value:c,index:0},E),r.a.createElement(ft,{value:c,index:1},g),r.a.createElement(ft,{value:c,index:2},j),r.a.createElement(ft,{value:c,index:3},v))})),gt=n(226),vt=n.n(gt),ht=n(227),bt=n.n(ht),yt=Object(A.a)((function(e){return{filterSectionRoot:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:224,width:"325px"},buttonContainer:{width:"33%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:e.spacing(1)},descriptionContainer:{height:"40%",color:"rgba(0, 0, 0, 0.54)"},upperdescriptionContainer:{display:"flex",alignItems:"flex-end"},textContainer:{display:"flex",flexDirection:"column",alignItems:"center"}}})),Ot=function(e){var t=e.sort,n=e.setSort,a=yt(),o=function(e){return r.a.createElement("div",{className:a.buttonContainer},r.a.createElement("div",{className:"".concat(a.descriptionContainer," ").concat(a.upperdescriptionContainer)},function(e){if(!t[e]||t[e]<0)return null;var n=r.a.createElement(vt.a,null),o="Food Amount"===e?"Less first":"Cooking Time"===e?"Fastest first":"Oldest first";return r.a.createElement("div",{className:a.textContainer},n,r.a.createElement(mt.a,null,o))}(e)),r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:function(){return function(e){var a=t[e];a?a>0?t[e]=-1:delete t[e]:t[e]=1,n(t)}(e)}},e),r.a.createElement("div",{className:a.descriptionContainer},function(e){if(!t[e]||t[e]>0)return null;var n=r.a.createElement(bt.a,null),o="Food Amount"===e?"Multiple first":"Cooking Time"===e?"Slowest first":"Latest first";return r.a.createElement("div",{className:a.textContainer},r.a.createElement(mt.a,null,o),n)}(e)))};return r.a.createElement("div",{className:a.filterSectionRoot},o("Food Amount"),o("Cooking Time"),o("Last Eaten"))},Ct=Object(A.a)((function(e){return{tabs:{width:"100%"},container:{margin:e.spacing(1)},actionContent:{alignItems:"stretch",justifyContent:"space-between"}}})),jt=function(e){return JSON.parse(JSON.stringify(e))},wt=Object(u.b)((function(e){return{currentFilters:e.food.filters,filtersOpen:e.food.filtersOpen}}),(function(e){return{}}))((function(e){var t=e.onApply,n=e.filtersOpen,o=e.setOpenFilter,i=e.currentFilters,l=e.currentSort,c=e.clearFilters,u=Ct(),s=Object(a.useState)(0),m=Object(Je.a)(s,2),d=m[0],f=m[1],p=Object(a.useState)(jt(i)),E=Object(Je.a)(p,2),g=E[0],v=E[1],h=Object(a.useState)(jt(l)),b=Object(Je.a)(h,2),y=b[0],O=b[1];return!g.main.liha&&i.main.liha&&v(jt(i)),r.a.createElement("div",null,r.a.createElement(rt.a,{open:n,onClose:function(){v(jt(i)),O(jt(l)),o()}},r.a.createElement("div",{className:u.container},r.a.createElement(ot.a,{variant:"fullWidth",className:u.tabs,indicatorColor:"primary",textColor:"primary",value:d,onChange:function(e,t){return f(t)}},r.a.createElement(it.a,{label:"Filters"}),r.a.createElement(it.a,{label:"Sort"})),r.a.createElement(ft,{value:d,index:0},r.a.createElement(Et,{filters:g,setFilters:function(e){return v(jt(e))}})),r.a.createElement(ft,{value:d,index:1},r.a.createElement(Ot,{sort:y,setSort:function(e){return O(jt(e))}}))),r.a.createElement(lt.a,{className:u.actionContent},r.a.createElement(qe.a,{onClick:function(){g.main.liha=null,v(g),O({}),c()},color:"primary"},"Clear Filters"),r.a.createElement(qe.a,{onClick:function(){o(),t(g,y)},color:"primary",autoFocus:!0},"Apply"))))})),xt=n(534),St=n(550),kt=function(e,t){if(!e||!t)return e;t=t.toLowerCase();var n=(e=e.toLowerCase()).split(t),a=n.map((function(e,a){return a===n.length-1?e:r.a.createElement("span",{key:a},e,r.a.createElement("b",null,t))}));return r.a.createElement("span",null,a.map((function(e){return e})))},Nt=n(229),Dt=n.n(Nt),Tt=function(e){return{type:"SELECT_FOOD",food:e}},Ft=function(e){return{type:"EDIT_FOOD",food:e}},Pt=function(e){return{type:"SET_ERRORS",errors:e}},It=function(e){return{type:"SET_SEARCH_OPTIONS",options:e}},Rt=Object(A.a)((function(e){return{margin:{margin:e.spacing(1),maxWidth:"300px"},center:{display:"flex",position:"relative",alignItems:"center",width:"100%"},searchDiv:{width:"60%"},btnDiv:{width:"40%"},div:{flexGrow:1},padding:{padding:e.spacing(2)}}}));var At=Object(u.b)((function(e){return{options:e.food.searchOptions}}),(function(e){return{onSetOptions:function(t){if(!t.length)return e(It([]));De({$regex:t}).then((function(t){e(It(t.data))})).catch((function(e){console.log(e)}))}}}))((function(e){var t=Rt(),n=e.search,o=e.onSelectFood,i=e.options,l=e.onSetOptions,c=Object(a.useState)(n),u=Object(Je.a)(c,2),s=u[0],m=u[1];return r.a.createElement(dt.a,{display:"block",justifyContent:"center",className:t.padding},r.a.createElement(St.a,{options:i,getOptionLabel:function(e){return e.name},renderOption:function(e){return kt(e.name,s)},renderInput:function(e){var t=e.InputProps,n=Object(st.a)(e,["InputProps"]);return t.startAdornment=r.a.createElement(xt.a,{position:"start"},r.a.createElement(Dt.a,null)),r.a.createElement(Qe.a,Object.assign({},n,{placeholder:"Search...",variant:"outlined",value:s,fullWidth:!0,onChange:function(e){return function(e){m(e),l(e)}(e.target.value)},InputProps:t}))},onChange:function(e,t){o(t)}}))})),Lt=n(9),_t=n(541),Mt=n(539),Bt=n(538),Wt=n(540),Ut=n(536),$t=n(557),Yt=n(537),Ht=n(556),Gt=n(535),zt=n(230),Jt=n.n(zt),qt=n(125),Vt=n.n(qt),Qt=864e5,Kt=function(e,t){var n=e.getDate(),a=e.getMonth()+1;if(t)return"".concat(n,".").concat(a);var r=e.getFullYear().toString().substr(2);return"".concat(n,".").concat(a,".").concat(r)},Xt=function(e,t){var n,a=Math.floor((t-e)/Qt),r=a<2?"day":"days",o=new Date,i=Math.round((o-t)/Qt);if(i>356)n="Over a Year ago";else if(i>30){var l=Math.round(i/30);n="".concat(l," month").concat(l>1?"s":""," ago")}else if(i>7){var c=Math.round(i/7);n="".concat(c," week").concat(c>1?"s":""," ago")}else i>0?n="".concat(i," day").concat(i>1?"s":""," ago"):0===i?n="today":-1===i?n="tomorrow":i<-1&&(n="in ".concat(-1*i," days"));return"".concat(n," - ").concat(Kt(e,!0),"-").concat(Kt(t)," (").concat(a," ").concat(r," food)")},Zt=function(e){var t=(new Date-e)/1e3;if(t<60)return"".concat(t.toFixed(0)," s ago");if(t<3600)return"".concat((t/60).toFixed(0)," min ago");if(t<86400)return"".concat((t/3600).toFixed(0)," h ago");if(t<604800){var n=(t/86400).toFixed(0);return"".concat(n,"1"===n?" day ago":" days ago")}return"".concat(e.getDate(),".").concat(e.getMonth()+1,".").concat(e.getFullYear().toString().slice(2))},en=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!e.length)return[];e=e.sort((function(e,t){return t-e}));var n=[],a=e[0],r=e[0];return e.forEach((function(o,i){return n.length>=t?n:r-o>2*Qt?(n.push(Xt(a,r)),a=o,void(r=o)):(a=o,void(i===e.length-1&&n.push(Xt(a,r))))})),n},tn=Object(A.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Lt.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},button:{marginRight:e.spacing(2),marginLeft:e.spacing(2),minWidth:"133px"}}})),nn=function(e){var t=tn(),n=e.columns,a=e.data,o=e.sort,i=e.setSort,l=e.limit,c=e.setLimit,u=e.onSelectFood,s=e.onAddFood,m=e.page,d=e.setPage,f=e.setOpenFilter;if(!a)return r.a.createElement("div",null);var p=a.data,E=a.total||0,g=0===E?0:m,v=r.a.createElement(R.a,null,r.a.createElement(mt.a,{className:t.title,variant:"h6",id:"tableTitle"},"Foods"),r.a.createElement(Gt.a,{title:"Add New Food"},r.a.createElement(qe.a,{variant:"contained",onClick:s,startIcon:r.a.createElement(Vt.a,null),color:"primary",className:t.button,size:"small"},"Add Food")),r.a.createElement(Gt.a,{title:"Filter list"},r.a.createElement(qe.a,{variant:"contained",color:"primary",endIcon:r.a.createElement(Jt.a,null),size:"small",className:t.button,onClick:function(){f()}},"Filter"))),h=function(e){var t=o[e];return!!t&&(t>0?"asc":"desc")},b=r.a.createElement(Ut.a,null,r.a.createElement(Yt.a,null,n.map((function(e,n){return r.a.createElement(Bt.a,{key:n,className:t.root,align:"left",padding:"none",sortDirection:h(e)},r.a.createElement(Ht.a,{active:Boolean(o[e]),direction:h(e)||"asc",onClick:function(t){t.preventDefault(),function(e){var t=o[e];t?t>0?o[e]=-1:delete o[e]:o[e]=1,i(o)}(e)}},e))})))),y=r.a.createElement(Mt.a,null,p.map((function(e,t){return r.a.createElement(Yt.a,{key:t,hover:!0,onClick:function(t){t.preventDefault(),u(e)}},r.a.createElement(Bt.a,null,e.maintype),r.a.createElement(Bt.a,null,e.sidetype.join(", ")),r.a.createElement(Bt.a,null,e.name),r.a.createElement(Bt.a,null,e.timeseaten),r.a.createElement(Bt.a,null,e.lasteaten&&e.lasteaten.length?en(e.lasteaten.map((function(e){return new Date(e)})),1)[0].split(" - ")[0]:""),r.a.createElement(Bt.a,null,e.time),r.a.createElement(Bt.a,null,e.foodamount))})));return r.a.createElement("div",null,v,r.a.createElement(Wt.a,null,r.a.createElement(_t.a,{size:"medium"},b,y)),r.a.createElement($t.a,{component:"div",count:E,rowsPerPage:l,onChangeRowsPerPage:function(e){return c(e.target.value)},rowsPerPageOptions:[10,20,40,50],page:g,onChangePage:function(e,t){e.preventDefault(),d(t)}}))},an=n(465),rn=n(471),on=n(469),ln=n(470),cn=n(552),un=n(466),sn=n(542),mn=n(543),dn=n(94),fn=n.n(dn),pn=Object(A.a)((function(e){return{container:{margin:e.spacing(1)}}})),En=function(e){var t=e.open,n=e.onCancel,a=e.onOk,o=e.title,i=e.text,l=e.cancelText,c=e.okText,u=pn();return r.a.createElement("div",null,r.a.createElement(rt.a,{open:t,onClose:oncancel,className:u.container},r.a.createElement(sn.a,null,o),r.a.createElement(mn.a,null,i),r.a.createElement(lt.a,null,r.a.createElement(qe.a,{onClick:n,color:"primary"},l||"Cancel"),r.a.createElement(qe.a,{onClick:a,color:"primary"},c||"Apply"))))},gn=Object(A.a)((function(e){return{container:{margin:e.spacing(1)},selectFieldContainer:{width:"250px",padding:e.spacing(2)},selectField:{minWidth:"200px",maxWidth:"200px"},addButton:{minWidth:"100px",maxWidth:"150px",backgroundColor:e.palette.common.white,color:e.palette.primary.main},sideType:{backgroundColor:e.palette.common.white},center:{display:"flex",position:"relative",alignItems:"center"},div:{flexGrow:1},dialogContainer:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"}}})),vn=[{label:"1 day",value:1},{label:"2 days",value:2},{label:"3 days",value:3},{label:"4 days",value:4},{label:"5 days",value:5}],hn=Object(u.b)((function(e){var t=e.food.distincts;return{user:e.user,open:e.food.foodEditOpen,distMainTypes:t.main||[],distSideTypes:t.side||[],errors:e.food.errors}}),(function(e){return{onSetEditFood:function(t){e(Ft(t)),e(Pt([]))},onDeleteFood:function(t){t&&Ne(t).then((function(){e(_("Food Deleted")),e(Ft(null)),e(Tt(null)),e(Pt([]))})).catch((function(t){return e(L(t.message))}))},onSaveFood:function(t){var n=[];if(t.name||n.push("name"),t.sidetype.length||n.push("side"),t.time||n.push("time"),n.length)return e(Pt(n));t._id?ke(t._id,t).then((function(){e(_("Food Updated")),e(Ft(null)),e(Pt([]))})).catch((function(t){return e(L(t.message))})):Se(t).then((function(){e(_("New Food Added")),e(Ft(null)),e(Pt([]))})).catch((function(t){return e(L(t.message))}))}}}))((function(e){var t=e.user,n=e.foodEdit,o=e.open,i=e.onSetEditFood,l=e.distMainTypes,c=e.distSideTypes,u=e.onSaveFood,s=e.onDeleteFood,m=e.errors,d=e.onUpdate,f=gn(),p=Object.assign({},n),E=Object(a.useState)(p.maintype),g=Object(Je.a)(E,2),v=g[0],h=g[1],b=Object(a.useState)(p.foodamount.toString()),y=Object(Je.a)(b,2),O=y[0],C=y[1],j=Object(a.useState)(p.sidetype),w=Object(Je.a)(j,2),x=w[0],S=w[1],k=Object(a.useState)(p.name),N=Object(Je.a)(k,2),D=N[0],T=N[1],F=Object(a.useState)(p.link),P=Object(Je.a)(F,2),I=P[0],R=P[1],A=Object(a.useState)(p.timeseaten),L=Object(Je.a)(A,2),_=L[0],M=L[1],B=Object(a.useState)(p.time),W=Object(Je.a)(B,2),U=W[0],$=W[1],Y=Object(a.useState)(!1),H=Object(Je.a)(Y,2),G=H[0],z=H[1],J=function(e){var t=e.label,n=e.value,a=e.onChange,o=e.types;return r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(Qe.a,{select:!0,label:t,fullWidth:!0,className:f.selectField,variant:"outlined",value:n,onChange:function(e){return a(e.target.value)}},o.map((function(e,t){return r.a.createElement(de.a,{key:t,value:e.value||e},e.label||e)}))))},q=r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(an.a,{className:f.selectField,variant:"outlined",error:m.includes("side")},r.a.createElement(rn.a,{className:f.sideType},"Side Types"),r.a.createElement(on.a,{multiple:!0,fullWidth:!0,multiline:!0,value:x,onChange:function(e){return S(e.target.value)},input:r.a.createElement(ln.a,null),renderValue:function(e){return e.join(", ")}},c.map((function(e){return r.a.createElement(de.a,{key:e,value:e},r.a.createElement(cn.a,{checked:x.includes(e),color:"primary"}),r.a.createElement(le.a,{primary:e}))}))),r.a.createElement(un.a,null,m.includes("side")?"Must have at least one side type":""))),V=r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(Qe.a,{variant:"outlined",className:f.selectField,label:"Name",value:D,multiline:!0,onChange:function(e){return T(e.target.value)},error:m.includes("name"),helperText:m.includes("name")?"Name can't be empty":""})),Q=r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(Qe.a,{variant:"outlined",className:f.selectField,label:"Cooking Time",value:U,onChange:function(e){return t=e.target.value,void(new RegExp("[^0-9]").test(t)||$(t));var t},error:m.includes("time"),helperText:m.includes("time")?"Cooking time can't be empty":""})),K=r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(Qe.a,{variant:"outlined",className:f.selectField,label:"Recipe",value:I,multiline:!I.includes("http"),onChange:function(e){return R(e.target.value)}})),X=r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(Qe.a,{variant:"outlined",className:f.selectField,label:"Times Eaten",value:_,onChange:function(e){return M(e.target.value)},disabled:"admin"!==t.role})),Z=r.a.createElement(r.a.Fragment,null,V,r.a.createElement(J,{label:"Main Type",value:v,onChange:function(e){return h(e)},types:l}),q,r.a.createElement(J,{label:"Food Amount",value:O,onChange:function(e){return C(e)},types:vn}),Q,K,X),ee=r.a.createElement(qe.a,{startIcon:r.a.createElement(fn.a,null),onClick:function(){return z(!0)}},"Delete");return r.a.createElement("div",null,r.a.createElement(rt.a,{open:o,onClose:function(){return i(null)},className:f.container},r.a.createElement(sn.a,null,r.a.createElement("div",{className:f.center},D,r.a.createElement("div",{className:f.div}),p._id?ee:null)),r.a.createElement(mn.a,null,r.a.createElement("form",{className:f.dialogContainer,noValidate:!0},Z)),r.a.createElement(lt.a,null,r.a.createElement(qe.a,{onClick:function(){return i(null)},color:"primary"},"Cancel"),r.a.createElement(qe.a,{onClick:function(){d(),u({_id:p._id,name:D,link:I,maintype:v,sidetype:x,foodamount:O,time:U,timeseaten:_})},color:"primary",autoFocus:!0},p.id?"Apply":"Add"))),r.a.createElement(En,{open:G,onCancel:function(){return z(!1)},onOk:function(){z(!1),s(p._id),d()},title:"Delete Food",text:"Are you sure?",okText:"Delete"}))})),bn=n(544),yn=n(30),On=n(547),Cn=n(127),jn=n(159),wn=n.n(jn),xn=n(232),Sn=n.n(xn),kn=n(95),Nn=n.n(kn),Dn=n(231),Tn=n.n(Dn),Fn=Object(A.a)((function(e){return{spread:e.spreadDivColumn,centerColumns:e.centerDivColumn,container:{margin:e.spacing(1)},margin:{margin:e.spacing(3)},selectFieldContainer:{padding:e.spacing(2)},selectField:{minWidth:"200px",maxWidth:"200px"},datePickerTextfield:{width:"110px"},button:{width:"180px",height:"60px"}}}));wn.a.locale("en"),wn.a.updateLocale("en",{week:{dow:1,doy:0}});var Pn=Object(u.b)((function(e){return{user:e.user,food:e.food.selectedFood,latestFood:e.food.latestFood}}),(function(e){return{onSelectFood:function(t){e(Tt(t))},onSetEditFood:function(t){e(Ft(t))},onFoodSelection:function(t){ke(t._id,t).then((function(n){e(_("Going to eat ".concat(t.name))),e(Tt(null))})).catch((function(t){e(L(t.message))}))}}}))((function(e){var t=e.food,n=e.latestFood,o=e.onSelectFood,i=e.onSetEditFood,l=e.onUpdate,c=e.onFoodSelection,u=Fn(),s=function(e){var t=new Date(e.lasteaten.sort((function(e,t){return new Date(t)-new Date(e)}))[0]);t<new Date&&(t=new Date);var n=new Date(t.valueOf()+864e5),a=new Date(n.valueOf()+24*e.foodamount*60*60*1e3);return{startDate:n,endDate:a}}(n),m=Object(a.useState)(s.startDate),d=Object(Je.a)(m,2),f=d[0],p=d[1],E=Object(a.useState)(s.endDate),g=Object(Je.a)(E,2),v=g[0],h=g[1];if(!t)return null;var b=r.a.createElement("div",{className:u.selectFieldContainer},r.a.createElement(_t.a,{size:"small"},r.a.createElement(Ut.a,null,r.a.createElement(Yt.a,null,r.a.createElement(Bt.a,null,"History"))),r.a.createElement(Mt.a,null,t.lasteaten?en(t.lasteaten.map((function(e){return new Date(e)}))).map((function(e,t){return r.a.createElement(Yt.a,{key:t},r.a.createElement(Bt.a,null,e))})):r.a.createElement(Yt.a,null,r.a.createElement(Bt.a,null,"No recordings"))))),y=r.a.createElement("div",{className:u.centerColumns},r.a.createElement("div",null,t.link.includes("http")||t.link.includes("www")?r.a.createElement(mt.a,null,r.a.createElement(bn.a,{href:t.link},"Link To Recipe")):null),r.a.createElement("div",{className:u.spread},r.a.createElement(yn.a,{utils:Cn.a},r.a.createElement(On.a,{label:"Date",format:"DD.MM.YYYY",views:["year","month","date"],minDate:new Date(2020,0,1),showTodayButton:!0,value:f,onChange:function(e){return p(e._d)},animateYearScrolling:!0,TextFieldComponent:function(e){return r.a.createElement(Qe.a,{label:"Start Date",onClick:e.onClick,value:e.value,InputProps:{startAdornment:r.a.createElement(Nn.a,null)},size:"small",className:"".concat(u.datePickerTextfield," ").concat(u.margin)})}}),r.a.createElement(On.a,{label:"Date",format:"DD.MM.YYYY",views:["year","month","date"],minDate:new Date(2020,0,1),showTodayButton:!0,value:v,onChange:function(e){return h(e._d)},animateYearScrolling:!0,TextFieldComponent:function(e){return r.a.createElement(Qe.a,{label:"End Date",onClick:e.onClick,value:e.value,InputProps:{startAdornment:r.a.createElement(Nn.a,null)},size:"small",className:"".concat(u.datePickerTextfield," ").concat(u.margin)})}}))),r.a.createElement(qe.a,{startIcon:r.a.createElement(Tn.a,null),variant:"contained",color:"primary",className:u.button,onClick:function(){for(var e=[f.toDateString()],n=f;;){var a=new Date(n.valueOf()+864e5);if(a>v)break;e.push(a.toDateString()),n=a}t.lasteaten||(t.lasteaten=[]),t.lasteaten=t.lasteaten.concat(e),t.timeseaten=t.timeseaten+1,c(t),l()}},"Select Food"),b);return r.a.createElement("div",null,r.a.createElement(rt.a,{open:!0,onClose:function(){return o(null)},className:u.container},r.a.createElement(sn.a,null,r.a.createElement("div",{className:u.spread},t.name,r.a.createElement(T.a,{onClick:function(){return i(t)}},r.a.createElement(Sn.a,null)))),r.a.createElement(mn.a,null,y),r.a.createElement(lt.a,null,r.a.createElement(qe.a,{onClick:function(){return o(null)},color:"primary"},"Cancel"))))})),In=Object(A.a)((function(e){return{root:e.root}})),Rn=["Main","Side","Food","Count","LastEaten","Cooking Time","Food Amount"],An={name:"Name",maintype:"liha",sidetype:["pasta"],foodamount:1,link:"",time:60,timeseaten:0},Ln=Object(u.b)((function(e){return{user:e.user,foods:e.food.foods,sort:e.food.sort,filters:e.food.filters,search:e.food.search,page:e.food.page,limit:e.food.limit,selectedFood:e.food.selectedFood,foodEdit:e.food.foodEdit}}),(function(e){return{onSelectFood:function(t){e(Tt(t))},onRefresh:function(t,n,a,r,o){xe(n,t,a,r,o).then((function(i){e({type:"SET_FOODS",foods:{foods:i,filters:n,sort:a,page:t,limit:o,search:r}}),Fe().then((function(t){e({type:"SET_LATEST_FOOD",food:t})}))})).catch((function(t){return e(L(t.message))}))},setOpenFilter:function(){e({type:"SET_OPEN_FILTERS"})},initFilters:function(){var t={main:{},side:{},speed:{$lt:180},day:{}};Te().then((function(n){e(function(e){return{type:"SET_DISTINCTS",res:e}}(n)),n.main.forEach((function(e){t.main[e]="$in"})),n.side.forEach((function(e){t.side[e]="$in"})),n.day.forEach((function(e){t.day[e]="$in"})),e(function(e){return{type:"SET_FILTERS",filters:e}}(t))})).catch((function(e){return L(e.message)}))},onSetEditFood:function(t){e(Ft(t))}}}))((function(e){var t=e.foods,n=e.sort,a=e.onSelectFood,o=e.onRefresh,i=e.filters,l=e.search,c=e.setOpenFilter,u=e.page,s=e.limit,m=e.selectedFood,d=e.foodEdit,f=e.initFilters,p=e.onSetEditFood,E=In();return t.limit||(f(),o(u,i,n,l,s)),r.a.createElement(Ve.a,{className:E.root},r.a.createElement(At,{search:l,onSelectFood:a}),r.a.createElement(wt,{setOpenFilter:c,currentFilters:i,currentSort:n,onApply:function(e,t){return o(u,e,t,l,s)},clearFilters:function(){return f()}}),r.a.createElement(nn,{columns:Rn,data:t,sort:n,limit:s,setSort:function(e){return o(u,i,e,l,s)},setLimit:function(e){return o(u,i,n,l,e)},onSelectFood:a,onAddFood:function(){return p(An)},setOpenFilter:c,page:u,setPage:function(e){return o(e,i,n,l,s)}}),m?r.a.createElement(Pn,{onUpdate:function(){return o(u,i,n,l,s)}}):null,d?r.a.createElement(hn,{foodEdit:d,onUpdate:function(){return o(u,i,n,l,s)}}):null)}));var _n=function(e){return r.a.createElement("div",null,"shoplist")},Mn=n(24),Bn=n.n(Mn),Wn=n(55),Un=n(160),$n=n.n(Un),Yn=function(e){return{type:"SET_DELETE_ID",id:e}},Hn=function(e,t){var n="";e.forEach((function(e){n+="".concat(e.notes,", ").concat(e.amount,"\u20ac, er\xe4p\xe4iv\xe4: ").concat(function(e){var t=new Date(e),n=t.getMonth()+1,a=t.getDate();return"".concat(a,".").concat(n)}(e.date)," (").concat(e.imageName,")\n")}));var a="".concat("https://kisaeeheifoodpicker.herokuapp.com/v1/pending-payments","/").concat(t);return"Hei,\n\nLiitteen\xe4 taas laskuja:\n\n".concat(n,"\n\n").concat(a,"\n\nTerveisin,\nKimi Heinonen\n")},Gn=n(233),zn=n.n(Gn),Jn=n(234),qn=n.n(Jn),Vn=n(157),Qn=n.n(Vn),Kn=Object(A.a)((function(e){return{}})),Xn=function(e){Kn();var t,n,a=e.rowData,o=e.onChange,i=e.toMailList,l=a.mailed&&a.paid,c=a.mailed&&!1===a.paid,u=!a.mailed&&null==a.imageData;return l?(n="Mailed and paid",t=r.a.createElement(cn.a,{disabled:!0,checked:!0,icon:r.a.createElement(Qn.a,null),color:"primary"})):c?(n="Mailed and pending",t=r.a.createElement(cn.a,{icon:r.a.createElement(zn.a,null),checkedIcon:r.a.createElement(qn.a,null),checked:null!=i.find((function(e){return e._id===a._id})),color:"primary",onChange:o})):u?(n="Missing pdf - cant mail",t=r.a.createElement(cn.a,{disabled:!0,checked:!1,color:"primary"})):(n="Not mailed",t=r.a.createElement(cn.a,{color:"primary",onChange:o,checked:null!=i.find((function(e){return e._id===a._id}))})),r.a.createElement(Gt.a,{title:n},r.a.createElement("span",null,t))},Zn=Object(A.a)((function(e){return{root:e.root,centerDivColumn:e.centerDivColumn,spacings:{padding:e.spacing(2),width:"10px"},datePickerTextfieldWide:{width:"110px"},datePickerTextfieldSmall:{width:"70px"},tableIcon:{width:"5px"},spacing:{margin:e.spacing(2),width:"200px"},sendMailButton:{marginLeft:"-30px",marginRight:"-30px"}}})),ea=function(e){"string"===typeof e&&(e=new Date(e));var t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return"".concat(a,".").concat(n,".").concat(t)},ta=new Date(2020,0,1),na=new Date((new Date).getUTCFullYear(),0,1),aa=new Date((new Date).getUTCFullYear(),11,31);var ra=Object(u.b)((function(e){return{data:e.payment.data,deleteId:e.payment.deleteId,distinctNotes:e.payment.distinctNotes}}),(function(e){var t=function(t,n){Ie({date:{$gt:t,$lt:n},$sort:{createdAt:-1}}).then((function(t){return e({type:"SET_DATA",data:t.data})})).catch((function(t){return e(L(t.message))}))};return{onGetData:function(e,n){return t(e,n)},onAddPayment:function(n,a,r){Re(n).then((function(n){e(_("Payment Added")),t(a,r)})).catch((function(t){return e(L(t.message))}))},onSetDeleteId:function(t){e(Yn(t))},onDeletePayment:function(n,a,r){Le(n).then((function(n){e(_("Payment Deleted")),e(Yn(null)),t(a,r)})).catch((function(t){return e(L(t.message))}))},onGetDistinctNotes:function(){Ie({}).then((function(t){var n=t.data.map((function(e){return e.notes})),a=Object(ge.a)(new Set(n));0===a.length&&a.push("..."),e({type:"SET_DISTINCT_NOTES",notes:a})})).catch((function(t){return e(L(t.message))}))},onSendMail:function(){var e=Object(Wn.a)(Bn.a.mark((function e(n,a,r){var o,i;return Bn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<r.length)){e.next=8;break}return i=r[o],e.next=5,Ae(i._id,{mailed:!0});case 5:o++,e.next=1;break;case 8:t(n,a);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}}))((function(e){var t,n,o=Zn(),i=e.data,l=e.deleteId,c=e.distinctNotes,u=e.onGetData,s=e.onAddPayment,m=e.onSetDeleteId,d=e.onDeletePayment,f=e.onGetDistinctNotes,p=e.onSendMail,E=Object(a.useState)(new Date),g=Object(Je.a)(E,2),v=g[0],h=g[1],b=Object(a.useState)(""),y=Object(Je.a)(b,2),O=y[0],C=y[1],j=Object(a.useState)(""),w=Object(Je.a)(j,2),x=w[0],S=w[1],k=Object(a.useState)(!0),N=Object(Je.a)(k,2),D=N[0],F=N[1],P=Object(a.useState)(na),I=Object(Je.a)(P,2),R=I[0],A=I[1],L=Object(a.useState)(aa),_=Object(Je.a)(L,2),M=_[0],B=_[1],W=Object(a.useState)({}),U=Object(Je.a)(W,2),$=U[0],Y=U[1],H=Object(a.useState)(null),G=Object(Je.a)(H,2),z=G[0],J=G[1],q=Object(a.useState)([]),V=Object(Je.a)(q,2),Q=V[0],K=V[1];Object(a.useEffect)((function(){u(R,M)}),[R,M,u]),Object(a.useEffect)((function(){0===c.length&&f()}),[f,c]),i&&(n=((t=i.reduce((function(e,t){return e+t.amount}),0).toFixed(1))/(i.length?new Date(i[0].date).getMonth()-R.getMonth():1)).toFixed(1));var X=function(e){var t=document.createElement("a");t.href=e.data,t.download=e.name,t.click()},Z=function(e,t,n,a,i){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Date(2020,0,1),c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:aa;return r.a.createElement(yn.a,{utils:Cn.a},r.a.createElement(On.a,{label:e,format:i,views:a,minDate:l,maxDate:c,showTodayButton:!0,value:t,onChange:function(e){return n(e._d)},animateYearScrolling:!0,TextFieldComponent:function(t){return r.a.createElement(Qe.a,{label:e,onClick:t.onClick,value:t.value,InputProps:{endAdornment:r.a.createElement(Nn.a,null)},size:"small",className:i.split(".").length>2?o.datePickerTextfieldWide:o.datePickerTextfieldSmall})}}))},ee=r.a.createElement("div",{className:o.centerDivColumn},r.a.createElement("div",{className:"".concat(o.spacing," ").concat(o.centerDivColumn)},Z("Date",v,h,["year","month","date"],"DD.MM.YYYY")),r.a.createElement("div",{className:o.spacing},r.a.createElement(Qe.a,{value:O,type:"number",variant:"outlined",onChange:function(e){return C(e.target.value.replace(",","."))},InputProps:{endAdornment:r.a.createElement(xt.a,{position:"end"},"\u20ac")}})),r.a.createElement("div",{className:o.spacing},r.a.createElement(St.a,{key:D,freeSolo:!0,options:c,renderOption:function(e){return kt(e,x)},renderInput:function(e){return r.a.createElement(Qe.a,Object.assign({},e,{label:"Note",value:x,fullWidth:!0,onChange:function(e){return S(e.target.value)}}))},onChange:function(e,t){return S(t||"")}})),r.a.createElement(qe.a,{className:o.spacing,variant:"contained",color:"primary",onClick:function(){(!$.name&&!$.data||window.confirm("Replace current image?"))&&(z?z.click():console.error("No input Ref!!"))}},"Add Image"),$.name&&r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(qe.a,{onClick:function(){return X($)}},$.name),r.a.createElement(T.a,{onClick:function(){return Y({})}},r.a.createElement(fn.a,null))),r.a.createElement(qe.a,{className:o.spacing,variant:"contained",color:"primary",startIcon:r.a.createElement(Vt.a,null),onClick:function(){return function(){if(!(parseFloat(O)<=0)){var e={date:v,amount:O,notes:x};($.name||$.data)&&(e=Object(Ee.a)(Object(Ee.a)({},e),{},{imageName:$.name,imageData:$.data})),s(e,R,M),h(new Date),C(""),S(""),F(!D),Y({})}}()}},"Add Payment")),te=r.a.createElement(Wt.a,{component:Ve.a},r.a.createElement(_t.a,null,r.a.createElement(Ut.a,null,r.a.createElement(Yt.a,null,r.a.createElement(Bt.a,null,Z("from",R,A,["year","month"],"MM.YY",ta,M)),r.a.createElement(Bt.a,null,Z("to",M,B,["year","month"],"MM.YY",R,aa)),r.a.createElement(Bt.a,null,"Total: ".concat(t," \u20ac")),r.a.createElement(Bt.a,null,"PerMonth: ".concat(n," \u20ac")),r.a.createElement(Bt.a,null),r.a.createElement(Bt.a,null),r.a.createElement(Bt.a,null)),r.a.createElement(Yt.a,null,r.a.createElement(Bt.a,null,"Created"),r.a.createElement(Bt.a,null,"Bill Due"),r.a.createElement(Bt.a,null,"Amount"),r.a.createElement(Bt.a,null,"Notes"),r.a.createElement(Bt.a,null,"Pdf"),r.a.createElement(Bt.a,null,Q.length>0?r.a.createElement(qe.a,{variant:"contained",color:"primary",className:o.sendMailButton,onClick:function(){var e={isMarked:!1,ids:Q.map((function(e){return e._id}))};Be(e).then((function(e){!function(e,t){var n=Hn(e,t);window.open("mailto:".concat("kariveikko.heinonen@gmail.com","?subject=").concat("Laskuja","&body=").concat(encodeURIComponent(n)))}(Q,e._id),p(R,M,Q),K([])})).catch((function(e){return console.error(e)}))},endIcon:r.a.createElement($n.a,null)},"Send"):r.a.createElement(T.a,{disabled:!0},r.a.createElement($n.a,null))),r.a.createElement(Bt.a,{className:o.tableIcon}))),r.a.createElement(Mt.a,null,i?i.map((function(e){return r.a.createElement(Yt.a,{key:e.date},r.a.createElement(Bt.a,null,ea(e.createdAt)),r.a.createElement(Bt.a,null,ea(e.date)),r.a.createElement(Bt.a,null,e.amount," \u20ac"),r.a.createElement(Bt.a,null,function(e){return e?e.length<50?e:"".concat(e.substr(0,50),"..."):""}(e.notes)),r.a.createElement(Bt.a,null,e.imageName&&r.a.createElement(qe.a,{onClick:function(){return X({name:e.imageName,data:e.imageData})}},e.imageName)),r.a.createElement(Bt.a,null,r.a.createElement(Xn,{rowData:e,onChange:function(){return function(e){null!=Q.find((function(t){return t._id===e._id}))?K(Q.filter((function(t){return t._id!==e._id}))):(Q.push(e),K(Object(ge.a)(Q)))}(e)},toMailList:Q})),r.a.createElement(Bt.a,{className:o.tableIcon},r.a.createElement(T.a,{onClick:function(){return m(e._id)}},r.a.createElement(fn.a,null))))})):null)));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,{className:o.root},ee),te,r.a.createElement(En,{open:Boolean(l),onClose:function(){return m(null)},title:"Delete payment",text:"Are you sure?",okText:"Delete",onOk:function(){return d(l,R,M)}}),r.a.createElement("input",{type:"file",id:"fileinput",style:{display:"none"},accept:".pdf",ref:function(e){return J(e)},onChange:function(){return function(){if("function"===typeof window.FileReader){var e=document.getElementById("fileinput");if(e)if(e.files)if(e.files[0]){var t=e.files[0];e.files=null,e.value="";var n=new FileReader;n.onload=function(e){Y({name:t.name,data:e.target.result})},n.readAsDataURL(t)}else alert("Please select an Excel file before clicking 'Process'");else alert("This browser doesn't seem to support the 'files' property of file inputs.");else alert("Um, couldn't find the fileinput element.")}else alert("The file API isn't supported on this browser yet.")}()}}))})),oa=function(e){var t=Object(a.useState)({dialogOpen:!1,seconds:0}),n=Object(Je.a)(t,2),o=n[0],i=n[1],l=e.params.id;Object(a.useEffect)((function(){var e;if(o.dialogOpen){if(0===o.seconds)c();else{var t=o.seconds-1;e=setTimeout((function(){return i(Object(Ee.a)(Object(Ee.a)({},o),{},{seconds:t}))}),1e3)}return function(){return clearTimeout(e)}}}),[o.seconds]);var c=function(){i({dialogOpen:!1,seconds:0}),window.close()};return Object(a.useEffect)((function(){l?Me(l.replace(":","")).then((function(e){e&&e.alreadyMarked?window.close():i({dialogOpen:!0,seconds:5})})).catch((function(e){console.error(e),window.close()})):window.close()}),[]),console.log("FOOBAR"),r.a.createElement(rt.a,{open:o.dialogOpen},r.a.createElement(mn.a,null,"Laskut merkattu maksetuksi\n\n\n\n    T\xe4m\xe4 sulkeutuu automaattisesti ".concat(o.seconds," sekunnin kuluttua...")),r.a.createElement(lt.a,null,r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:function(){return c()}},"Close")))},ia=n(80),la=n.n(ia),ca=n(236),ua=n.n(ca),sa=n(235),ma=n.n(sa),da=Object(A.a)((function(e){return{paper:e.monitor.paper,floatRight:e.monitor.floatRight,horizontal:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"85%"},margin:{margin:e.spacing(1)},up:{color:"green"},down:{color:"red"}}})),fa=function(e,t){var n=[],a=1,r=e.find((function(e){return"USDEUR"===e.symbol}));return r&&(a=r.value),t.filter((function(e){return"USDEUR"!==e})).forEach((function(t){var r=e.find((function(e){return e.symbol===t}));r&&n.push({symbol:t.slice(0,3),icon:"".concat(t.slice(0,3),".png"),price:parseFloat(r.lastPrice)*a,changePrice:parseFloat(r.priceChange)*a,changePercent:parseFloat(r.priceChangePercent)})})),n},pa=["BTCUSDT","ETHUSDT","USDEUR"],Ea=function(e){var t=e.refresh,n=e.data,o=e.setData,i=da(),l=Object(a.useCallback)((function(){He({symbols:pa}).then((function(e){o(fa(e,pa))})).catch((function(e){console.log("Binance ERROR: ",e)}))}),[true,o]);return Object(a.useEffect)((function(){l()}),[t]),r.a.createElement(Ve.a,{elevation:4,className:i.paper},r.a.createElement(T.a,{className:i.floatRight,onClick:function(){return l()}},r.a.createElement(la.a,{color:"primary"})),n.map((function(e){var t,n;return r.a.createElement("div",{className:i.horizontal,key:e.symbol},r.a.createElement("img",{source:"./build/".concat(e.icon),alt:e.name,style:{height:"50px",width:"50px"}}),r.a.createElement("p",{className:i.margin,style:{width:"28px"}},e.symbol),r.a.createElement("p",{className:i.margin,style:{width:"252x"}},"$ ",null===(t=e.price)||void 0===t?void 0:t.toFixed(0)),r.a.createElement("div",{style:{display:"contents",width:"66px"}},r.a.createElement("p",{className:i.margin},null===(n=e.changePercent)||void 0===n?void 0:n.toFixed(1)," %"),e.changePrice>0?r.a.createElement(ma.a,{className:i.up}):r.a.createElement(ua.a,{className:i.down})))})))},ga=n(96),va=n(162),ha=n(238),ba=n.n(ha),ya=n(468),Oa=Object(ya.a)((function(e){return{hiddenTabRoot:{visibility:"collapse",minHeight:"0px",height:"0px"}}})),Ca=function(e){var t=e.children,n=e.value,a=e.index,o=Object(st.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},o),n===a&&t)},ja=function(e){var t=Oa(),n=e.panels,o=e.hideTabs,i=e.tabProps,l=Object(a.useState)(0),c=Object(Je.a)(l,2),u=c[0],s=c[1],m=o?{classes:{root:t.hiddenTabRoot}}:{};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ot.a,Object.assign({value:u,onChange:function(e,t){return s(t)}},m,i),Object(ge.a)(Array(n.length).keys()).map((function(e){return r.a.createElement(it.a,Object.assign({label:"Tab-".concat(e)},{id:"full-width-tab-".concat(t=0),"aria-controls":"full-width-tabpanel-".concat(t)}));var t}))),r.a.createElement(ba.a,{index:u,onChangeIndex:function(e){return s(e)}},n.map((function(e,t){return r.a.createElement(Ca,{value:u,index:t},e)}))))},wa=n(239),xa=n.n(wa),Sa=Object(A.a)((function(e){return{paper:e.monitor.paper,floatRight:e.monitor.floatRight,background:e.monitor.lightBackground,labelContainer:{position:"absolute",top:"72px",left:"calc(50% - 80px)",height:"100px",width:"150px",textAlign:"center"},statusContainer:{position:"absolute",top:"91%",right:"16px"},labelStyle:{lineHeight:"8px"},arcplotStyle:{position:"absolute",left:"calc(50% - 170px)",top:"8px"},timeLabelsContainer:{position:"absolute",height:"100%",top:"calc(100% - 28px)"},timelabel:{lineHeight:"0px",marginTop:"4px",fontSize:"0.705rem",color:"#ffffff70"},gpuContainer:{display:"flex",justifyContent:"space-between"},gpuInnerContainer:{width:"45%"},gpuLabelDiv:{display:"flex",justifyContent:"space-between",height:"22px"}}})),ka=Math.PI,Na=function(e){var t,n=e.miningRigs[0].devices.filter((function(e){return"CPU"!==e.deviceType.enumName})).map((function(e){return{name:e.name,powerUsage:e.powerUsage,status:e.status.description,speed:e.speeds}})),a=n.reduce((function(e,t){return e+t.speed.reduce((function(e,t){return e+Number(t.speed)}),0)}),0);return(null===(t=e.devicesStatuses)||void 0===t?void 0:t.DISABLED)&&delete e.devicesStatuses.DISABLED,{status:e.devicesStatuses,profitabilityBTC:e.totalProfitability,totalSpeed:a,devices:n,time:new Date(parseInt(e.miningRigs[0].statusTime))}},Da=function(e,t,n,a,r,o,i,l){var c=.5*-ka+e/i*ka,u=function(e,t,n,a,r){return e<=a?"#00ffff":e<=t?"#00dba4":e<=n?"#00bd00":e<=r?"#FF8C00":"#FF0000"}(e,a,r,o,i);return{angle0:.5*-ka,angle:c,radius0:t,radius:n,color:u,label:l}},Ta=function(e){var t,n=e.data,o=e.setData,i=e.combData,l=e.setCombData,c=e.hwinfoData,u=e.refresh,s=e.setRefresh,m=Sa(),d=Object(a.useState)({data:[],labels:[]}),f=Object(Je.a)(d,2),p=f[0],E=f[1],g=Object(a.useState)({hwinfo:"--",nh:"--",updateTime:!1}),v=Object(Je.a)(g,2),h=v[0],b=v[1],y=Object(a.useCallback)((function(){var e=!1;return Ye().then((function(t){e||o(Na(t))})).catch((function(e){console.log("NH ERROR: ",e)})),function(){e=!0}}),[true]);Object(a.useEffect)(y,[u]),Object(ga.a)((function(){var e=c.length>0?Zt(new Date(c[0].time)):"--",t=(null===n||void 0===n?void 0:n.time)?Zt(n.time):"--";b({hwinfo:e,nh:t,updateTime:h.updateTime});var a=setTimeout((function(){b(Object(Ee.a)(Object(Ee.a)({},h),{},{updateTime:!h.updateTime}))}),5e3);return function(){clearTimeout(a)}}),[h.updateTime,null===n||void 0===n?void 0:n.time,c.length>0?c[0].time:null],(function(e,t){return function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(e,t)})),Object(ga.a)((function(){var e,t,a,o,i=function(e,t){return e&&e.devices?(t&&t[0]&&(Object.keys(t[0]).forEach((function(n){var a=e.devices.find((function(e){return e.name.includes(n)}));a&&Object.keys(t[0][n]).forEach((function(e){a[e.replace("GPU","")]=t[0][n][e]}))})),e.totalGPUPower=e.devices.reduce((function(e,t){return e+t.Power}),0),e.totalPower=e.totalGPUPower+t[0].CPUPower+50),e):e}(n,c);Object.keys(i).length&&(l(i),E({data:[(null===(e=i.devices)||void 0===e?void 0:e.length)>1&&Da(i.devices[1].MemJunctTemp,2.3,2.75,90,98,80,102,"MemJunc"),Da(i.totalGPUPower,2.15,2.25,390,410,150,500,"Power"),Da(i.totalSpeed,2,2.1,135,150,50,160,"Speed")],labels:[i.devices.length>1&&r.a.createElement("div",{key:"MemJuncLabel"},r.a.createElement("p",{className:m.labelStyle},"Mem: ",null===(t=i.devices[1].MemJunctTemp)||void 0===t?void 0:t.toFixed(0)," \xb0")),r.a.createElement("div",{key:"PowerLabel"},r.a.createElement("p",{className:m.labelStyle},"Power: ",null===(a=i.totalGPUPower)||void 0===a?void 0:a.toFixed(0)," W")),r.a.createElement("div",{key:"SpeedLabel"},r.a.createElement("p",{className:m.labelStyle},"Speed: ",null===(o=i.totalSpeed)||void 0===o?void 0:o.toFixed(1)," MH/s"))]}))}),[n,c],(function(e,t){return function(e,t){return!(t[0]&&t[0].devices&&t[1]&&t[1][0])||xa()(e,t)}(e,t)}));var O=function(e){var t=e.title,n=e.value,a=e.alert;return r.a.createElement("div",{className:m.gpuLabelDiv},r.a.createElement("p",{className:m.labelStyle},t),r.a.createElement("p",{className:m.labelStyle,style:a?{color:"red"}:{}},n))},C=function(e){return r.a.createElement(Ve.a,{elevation:4,className:m.paper,style:{position:"relative",height:"200px",overflow:"hidden"}},r.a.createElement(T.a,{className:m.floatRight,onClick:function(){return s()}},r.a.createElement(la.a,{color:"primary"})),r.a.createElement("p",{style:{marginLeft:"8px"}},e.title),e.children,r.a.createElement("div",{className:m.timeLabelsContainer},r.a.createElement("p",{className:m.timelabel},"HWinfo: ",h.hwinfo),r.a.createElement("p",{className:m.timelabel},"NH: ",h.nh)))},j=r.a.createElement(C,{title:"OverView"},r.a.createElement(va.b,{className:m.arcplotStyle,xDomain:[-3,3],yDomain:[-3,3],width:300,height:300},r.a.createElement(va.a,{colorType:"literal",animation:{damping:9,stiffness:300},radiusDomain:[0,3],data:p.data,getLabel:function(e){return e.name}})),r.a.createElement("div",{className:m.labelContainer},p.labels),(null===i||void 0===i?void 0:i.status)&&r.a.createElement("div",{className:m.statusContainer},r.a.createElement("p",{className:"".concat(m.labelStyle," ").concat(m.timelabel)},JSON.stringify(i.status).split("{").join("").split("}").join("").split('"').join("").split(":").join(": ")))),w=null===i||void 0===i||null===(t=i.devices)||void 0===t?void 0:t.map((function(e){var t,n,a,o,i,l,c,u,s;return r.a.createElement(C,{key:e.name,title:e.name.split(" ").slice(-1)[0]},r.a.createElement("div",{className:m.gpuContainer},r.a.createElement("div",{className:m.gpuInnerContainer},r.a.createElement(O,{title:"GPU Temp: ",value:r.a.createElement(r.a.Fragment,null,null===(t=e.Temp)||void 0===t?void 0:t.toFixed(1)," \xb0")}),r.a.createElement(O,{title:"HotSpot: ",value:r.a.createElement(r.a.Fragment,null,null===(n=e.HotSpotTemp)||void 0===n?void 0:n.toFixed(1)," \xb0")}),"MemJunctTemp"in e&&r.a.createElement(O,{title:"MemJunc: ",value:r.a.createElement(r.a.Fragment,null,null===(a=e.MemJunctTemp)||void 0===a?void 0:a.toFixed(1)," \xb0"),alert:e.MemJunctTemp>100}),r.a.createElement(O,{title:"Fans: ",value:r.a.createElement(r.a.Fragment,null,null===(o=e.Fan)||void 0===o?void 0:o.toFixed(1)," %"),alert:e.Fan>94})),r.a.createElement("div",{className:m.gpuInnerContainer},r.a.createElement(O,{title:"Power: ",value:r.a.createElement(r.a.Fragment,null,null===(i=e.Power)||void 0===i?void 0:i.toFixed(1)," W")}),r.a.createElement(O,{title:"Speed: ",value:r.a.createElement(r.a.Fragment,null,(null===(l=e.speed)||void 0===l?void 0:l.length)>0?parseFloat(null===(c=e.speed[0])||void 0===c?void 0:c.speed).toFixed(1):0," MH/s")}),r.a.createElement(O,{title:"Algo: ",value:(null===(u=e.speed)||void 0===u?void 0:u.length)>0?null===(s=e.speed[0])||void 0===s?void 0:s.title:"--"}),r.a.createElement(O,{title:"Status: ",value:e.status.includes("OFFLINE")?"OFFLINE":e.status,alert:e.status.includes("OFFLINE")}))))}));return null===w||void 0===w||w.reverse(),r.a.createElement(ja,{hideTabs:!0,panels:w?[j].concat(Object(ge.a)(w)):[j]})},Fa=n(161),Pa=n.n(Fa),Ia=n(240),Ra=n.n(Ia),Aa=Object(A.a)((function(e){return{paper:Object(Ee.a)(Object(Ee.a)({},e.monitor.paper),{},{marginTop:"0px",marginBottom:"0px"}),profitabilityContainer:{textAlign:"center"},profitabilityProjectorContainer:{display:"flex",justifyContent:"space-around"},labelStyle:{lineHeight:"8px"},profitLabelStyle:{color:"#00bd00",fontSize:"18px"},centered:{display:"flex",alignItems:"center",justifyContent:"center"},tabRoot:{visibility:"collapse",minHeight:"0px",height:"0px"},whiteLabel:{color:e.monitor.paper.color}}})),La=function(e){var t;return null===(t=e.find((function(e){return"BTC"===e.symbol})))||void 0===t?void 0:t.price},_a=function(e){var t,n,o,i,l=e.nhData,c=e.binanceData,u=Aa(),s=Object(a.useState)(!0),m=Object(Je.a)(s,2),d=m[0],f=m[1],p=Object(a.useState)(.158),E=Object(Je.a)(p,2),g=E[0],v=E[1],h=Object(a.useState)({}),b=Object(Je.a)(h,2),y=b[0],O=b[1];Object(ga.a)((function(){O(function(e,t,n,a){var r=t/1e3*24*a,o=e-(n?r:0);return{profitabilityEUR:o,profitabilityWeek:7*o,profitabilityMonth:365*o/12,profitabilityYear:365*o,powerCostPercentage:r/e*100}}(l.profitabilityBTC*La(c),l.totalPower,d,g))}),[d,g,l,c],(function(e,t){return function(e,t){var n,a,r,o;if(Number.isNaN(null===(n=t[2])||void 0===n?void 0:n.profitabilityBTC)||Number.isNaN(null===(a=t[2])||void 0===a?void 0:a.totalPower)||!Array.isArray(t[3]))return!0;var i=La(t[3]);if(!Boolean(i))return!0;var l=La(e[3]);return e[0]===t[0]&&e[1]===t[1]&&(null===(r=e[2])||void 0===r?void 0:r.profitabilityBTC)===t[2].profitabilityBTC&&(null===(o=e[2])||void 0===o?void 0:o.totalPower)===t[2].totalPower&&l===i}(e,t)}));var C=function(e){return r.a.createElement("p",Object.assign({className:u.labelStyle},e),e.children)},j=function(e){return r.a.createElement("p",{className:"".concat(u.labelStyle," ").concat(u.profitLabelStyle)},e.children," \u20ac")},w=null===y||void 0===y?void 0:y.powerCostPercentage,x=r.a.createElement(Ve.a,{elevation:4,className:u.paper},r.a.createElement(qe.a,{style:{float:"right",width:"100px",marginLeft:"-100px"},className:u.whiteLabel,onClick:function(){return f(!d)},startIcon:d?r.a.createElement(Pa.a,{style:{color:"yellow"}}):r.a.createElement(Ra.a,null)},Number.isFinite(w)?w.toFixed(0):"--"," %"),r.a.createElement("div",{className:u.profitabilityContainer},r.a.createElement("div",{style:{dispaly:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(C,{style:{marginRight:"-8px"}},"Daily profit: "),r.a.createElement(j,null," ",null===(t=y.profitabilityEUR)||void 0===t?void 0:t.toFixed(2))),r.a.createElement("div",{className:u.profitabilityProjectorContainer},r.a.createElement("div",null,r.a.createElement(C,null,"Week"),r.a.createElement(j,null,null===(n=y.profitabilityWeek)||void 0===n?void 0:n.toFixed(0))),r.a.createElement("div",null,r.a.createElement(C,null,"Month"),r.a.createElement(j,null,null===(o=y.profitabilityMonth)||void 0===o?void 0:o.toFixed(0))),r.a.createElement("div",null,r.a.createElement(C,null,"Year"),r.a.createElement(j,null,null===(i=y.profitabilityYear)||void 0===i?void 0:i.toFixed(0)))))),S=r.a.createElement(Ve.a,{elevation:4,className:"".concat(u.paper," ").concat(u.centered),style:{height:"148px"}},r.a.createElement(Qe.a,{label:r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa.a,{style:{color:"yellow"}}),"Power Cost per kW/h"),type:"number",value:g,className:u.powerCostLabel,onChange:function(e){return v(e.target.value)},InputLabelProps:{className:"".concat(u.whiteLabel," ").concat(u.centered)},InputProps:{className:u.whiteLabel,style:{textAlign:"right"}}}));return r.a.createElement(ja,{hideTabs:!0,panels:[x,S]})},Ma=Object(A.a)((function(e){return{root:{paddingTop:e.spacing(1),width:"100%",height:"100vh"},background:e.monitor.background,refreshButtonContainer:{display:"flex",justifyContent:"center"}}})),Ba=function(e){var t=Object(a.useState)({refresh:!1}),n=Object(Je.a)(t,2),o=n[0],i=n[1],l=Object(a.useState)([]),c=Object(Je.a)(l,2),u=c[0],s=c[1],m=Object(a.useState)([]),d=Object(Je.a)(m,2),f=d[0],p=d[1],E=Object(a.useState)({data:{},combinedData:{}}),g=Object(Je.a)(E,2),v=g[0],h=g[1],b=Ma();return Object(a.useEffect)((function(){$e({$limit:1,$sort:{time:-1}}).then((function(e){return s(e.data)})).catch((function(e){console.log(e)}))}),[o.refresh]),r.a.createElement("div",{className:"".concat(b.root," ").concat(b.background)},r.a.createElement(Ta,{refresh:o.refresh,setRefresh:function(){return i({refresh:!o.refresh})},data:v.data,combData:v.combinedData,setData:function(e){return h(Object(Ee.a)(Object(Ee.a)({},v),{},{data:e}))},setCombData:function(e){return h(Object(Ee.a)(Object(Ee.a)({},v),{},{combinedData:e}))},hwinfoData:u}),r.a.createElement(_a,{nhData:v.combinedData,binanceData:f}),r.a.createElement(Ea,{refresh:o.refresh,data:f,setData:function(e){return p(e)}}),r.a.createElement("div",{className:b.refreshButtonContainer},r.a.createElement(qe.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(la.a,null),onClick:function(){return i(Object(Ee.a)(Object(Ee.a)({},o),{},{refresh:!o.refresh}))}},"Refresh")))},Wa=Object(A.a)((function(e){return{root:e.root,floatRightBtn:{float:"right",margin:e.spacing(2)}}})),Ua=(Object(u.b)((function(e){return{transactions:e.transactions}}),(function(e){return{}}))((function(e){var t=Wa(),n=Object(a.useState)({labelManagerOpen:!0}),o=Object(Je.a)(n,2),i=(o[0],o[1],Object(a.useRef)(null));Object(a.useEffect)((function(){}),[]);return r.a.createElement("div",{className:t.root},r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:function(){i?i.current?(console.log("Clicking ref"),i.current.click()):console.log("No current"):console.log("No ref")}},"Load image"),r.a.createElement(qe.a,{className:t.floatRightBtn,variant:"contained",color:"primary",onClick:function(){l.c.push("/categories")}},"Manage categories"),r.a.createElement("input",{type:"file",id:"fileinput",style:{display:"none"},accept:".bmp, .jpg, .png, .pbm",ref:i,onChange:function(){return function(){if("function"===typeof window.FileReader){var e=document.getElementById("fileinput");if(e)if(e.files)if(e.files[0]){var t=e.files[0];e.files=null,e.value="",console.log("Selected file: ",t);var n=new FileReader;n.onload=function(e){!function(){var e=Object(Wn.a)(Bn.a.mark((function e(){return Bn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()},n.readAsDataURL(t)}else alert("Please select file first");else console.error("Input files error");else console.error("Couldn't find the input element")}else alert("The file API isn't supported on this browser yet.")}()}}))})),Object(A.a)((function(e){return{}}))),$a=Object(u.b)((function(e){return{}}),(function(e){return{}}))((function(e){Ua();return r.a.createElement("div",null,"CategoriesContent")})),Ya=Object(A.a)((function(e){return{}})),Ha=Object(u.b)((function(e){return{}}),(function(e){return{}}))((function(e){Ya();return r.a.createElement("div",null,"CategoryTypeContent")})),Ga=Object(A.a)((function(e){return{}})),za=Object(u.b)((function(e){return{}}),(function(e){return{}}))((function(e){Ga();var t=e.transactions;return console.log(t),r.a.createElement("div",null,t&&t.map((function(e){return r.a.createElement("div",null,e.saaja)})))})),Ja=n(241),qa=n.n(Ja),Va=Object(A.a)((function(e){return{root:e.root,marginBtn:{margin:e.spacing(2)},paper:{padding:e.spacing(1),margin:e.spacing(2),height:"100%"}}})),Qa=(Object(u.b)((function(e){return{transactions:e.transactions.transactions.data,categories:e.categories.categories,categoryTypes:e.categories.categoryTypes}}),(function(e){return{onAddCategory:function(e,t,n,a){},onEditCategory:function(e,t,n,a,r){},onListCategories:function(){},onListTransactions:function(){Ue({$limit:10}).then((function(t){return e({type:"SET_TRANSACTION",transactions:t})})).catch((function(t){return e(L(t.message))}))}}}))((function(e){var t=Va(),n=Object(a.useState)({tabValue:0}),o=Object(Je.a)(n,2),i=o[0],c=o[1],u=i.tabValue,s=e.onListTransactions,m=e.transactions;e.categories,e.categoryTypes;return console.log("foo",m),Object(a.useEffect)((function(){s()}),[]),r.a.createElement("div",{className:t.root,style:{height:"100%"}},r.a.createElement(qe.a,{className:t.marginBtn,startIcon:r.a.createElement(qa.a,null),onClick:function(){l.c.push("/transactions")}},"Back"),r.a.createElement(Ve.a,{className:t.paper,elevation:4},r.a.createElement(ot.a,{variant:"fullWidth",className:t.tabs,indicatorColor:"primary",textColor:"primary",value:u,onChange:function(e,t){return c(Object(Ee.a)(Object(Ee.a)({},i),{},{tabValue:t}))}},r.a.createElement(it.a,{label:"Categories"}),r.a.createElement(it.a,{label:"Category types"}),r.a.createElement(it.a,{label:"Unlabeled"})),r.a.createElement(ft,{value:u,index:0},r.a.createElement($a,null)),r.a.createElement(ft,{value:u,index:1},r.a.createElement(Ha,null)),r.a.createElement(ft,{value:u,index:2},r.a.createElement(za,{transactions:m}))))})),n(461)),Ka=n(545),Xa=n(123),Za=n(546),er=function(e){var t={viite:{result:"",confidence:0},iban:{result:"",confidence:0},saaja:{result:"",confidence:0},euro:{result:0,confidence:0},dueDate:{result:new Date,confidence:0}};e.lines.forEach((function(e){e=e.toLowerCase()}));var n={};return Object.keys(t).forEach((function(e){return n[e]=t[e].result})),n},tr=Object(A.a)((function(e){return{progressDiv:{position:"absolute",bottom:"5rem",width:"100%"}}})),nr=function(e){var t,n=tr(),o=e.worker,i=e.workerLoadProgress,l=e.modalOpen,c=e.onClose,u=e.onAdd,s=Object(a.useState)({viite:"",iban:"",saaja:"",euro:0,dueDate:new Date,image:null}),m=Object(Je.a)(s,2),d=m[0],f=m[1],p=Object(a.useRef)(null),E=function(e){f(Object(Ee.a)(Object(Ee.a)({},d),{},Object(Xa.a)({},e.target.name,e.target.value)))};return 0!==i&&i<1&&(t=r.a.createElement("div",{className:n.progressDiv},r.a.createElement(Ka.a,{color:"primary",variant:"indeterminate"}),r.a.createElement(Za.a,{color:"primary",variant:"determinate",value:100*i}))),r.a.createElement(rt.a,{open:l,onClose:c},r.a.createElement(mn.a,null,r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:function(){p&&p.current&&p.current.click()},disabled:!Boolean(o)},"Load image"),r.a.createElement("div",null,r.a.createElement(Qe.a,{label:"IBAN",name:"iban",value:d.iban,onChange:E})),r.a.createElement("div",null,r.a.createElement(Qe.a,{label:"Saaja",name:"saaja",value:d.saaja,onChange:E})),r.a.createElement("div",null,r.a.createElement(Qe.a,{label:"Euro",name:"euro",value:d.euro,onChange:E})),r.a.createElement("div",null,r.a.createElement(Qe.a,{label:"Viite",name:"viite",value:d.viite,onChange:E})),r.a.createElement("div",null,r.a.createElement(Qe.a,{label:"Er\xe4p\xe4iv\xe4",name:"dueDate",value:d.dueDate,onChange:E})),t),r.a.createElement(lt.a,null,r.a.createElement(qe.a,{variant:"contained",color:"secondary",onClick:c},"Cancel"),r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:u},"Add"),r.a.createElement("input",{type:"file",id:"fileinput",style:{display:"none"},accept:".bmp, .jpg, .png, .pbm, .pdf",ref:p,onChange:function(){return function(){if("function"===typeof window.FileReader){var e=document.getElementById("fileinput");if(e)if(e.files)if(e.files[0]){var t=e.files[0];e.files=null,e.value="",console.log("Selected file: ",t);var n=new FileReader;n.onload=function(e){!function(){var t=Object(Wn.a)(Bn.a.mark((function t(){var n,a;return Bn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.recognize(e.target.result);case 2:n=t.sent,console.log("Got result: ",n),a=er(n.data),f({parsedResult:a,image:e.target.result});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()},n.readAsDataURL(t)}else alert("Please select file first");else console.error("Input files error");else console.error("Couldn't find the input element")}else alert("The file API isn't supported on this browser yet.")}()}})))},ar=n(242),rr=Object(A.a)((function(e){return{root:Object(Ee.a)({},e.root),loaderDiv:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"5rem",position:"absolute",width:"100%"},actionButtons:{position:"absolute",bottom:"3rem",display:"flex",justifyContent:"space-between",width:"100%",margin:e.spacing(2)},addBillButton:{margin:e.spacing(2)}}})),or=(Object(u.b)((function(e){return{}}),(function(e){}))((function(e){var t=rr(),n=Object(a.useState)({worker:null,workerLoadProgress:0,modalOpen:!1}),o=Object(Je.a)(n,2),i=o[0],c=o[1];Object(a.useEffect)((function(){var e=function(){var e=Object(Wn.a)(Bn.a.mark((function e(){var t;return Bn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(ar.createWorker)({logger:function(e){"recognizing text"===e.status&&c(Object(Ee.a)(Object(Ee.a)({},i),{},{workerLoadProgress:e.progress})),console.log("Worker: ",e)}}),e.next=3,t.load();case 3:return e.next=5,t.loadLanguage("fin");case 5:return e.next=7,t.initialize("fin");case 7:c(Object(Ee.a)(Object(Ee.a)({},i),{},{worker:t}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.worker||e(),function(){var e=function(){var e=Object(Wn.a)(Bn.a.mark((function e(){return Bn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("killing worker"),e.next=3,i.worker.terminate();case 3:console.log("Worker terminated");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i.worker&&e()}}),[]);return r.a.createElement("div",{className:t.root},r.a.createElement(qe.a,{className:t.addBillButton,variant:"contained",color:"primary",onClick:function(){return c(Object(Ee.a)(Object(Ee.a)({},i),{},{modalOpen:!0}))}},"Add bill"),r.a.createElement(nr,Object.assign({},i,{onClose:function(){return c(Object(Ee.a)(Object(Ee.a)({},i),{},{modalOpen:!1}))},onAdd:function(e){console.log("Adding payment with: ",e)}})),r.a.createElement("div",{className:t.actionButtons},r.a.createElement(qe.a,{variant:"contained",color:"secondary",onClick:function(){return l.c.push("/payments")}},"Back"),r.a.createElement(qe.a,{variant:"contained",color:"secondary",onClick:function(){console.log("Fake adding payments!")}},"Cancel")),r.a.createElement(Qa.a,{direction:"up",in:!Boolean(i.worker),mountOnEnter:!0,unmountOnExit:!0},r.a.createElement("div",{className:t.loaderDiv},r.a.createElement(Ka.a,{color:"primary",variant:"indeterminate"}),r.a.createElement(mt.a,{color:"primary"},"Worker loading..."))))})),{open:!1}),ir={open:!1,anchor:null},lr={filters:{main:{},side:{},speed:{$lt:180},day:{}},search:"",searchOptions:[],sort:{},page:0,limit:10,selectedFood:null,foodEdit:null,foodEditOpen:!1,foods:{data:[]},filtersOpen:!1,distincts:{},errors:[],latestFood:null},cr={data:null,deleteId:null,distinctNotes:[]},ur={transactions:{page:0,skip:0,limit:100,data:[]}},sr={categories:[],categoryTypes:[]},mr=Object(c.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:"",err:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return{message:t.message,err:""};case"SET_ERROR":return{message:"",err:t.message};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return t.user;case"DEAUTH":return{};default:return e}},drawer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_DRAWER":return{open:!0};case"CLOSE_DRAWER":return{open:!1};default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_PROFILE_MENU":return{open:!0,anchor:t.target};case"CLOSE_PROFILE_MENU":return{open:!1,anchor:null};default:return e}},food:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTERS":return Object.assign({},e,{filters:t.filters});case"SELECT_FOOD":return Object.assign({},e,{selectedFood:t.food});case"EDIT_FOOD":var n=e.foodEditOpen;return n?Object.assign({},e,{foodEdit:null,foodEditOpen:!1}):Object.assign({},e,{foodEdit:t.food,foodEditOpen:!0});case"SET_FOODS":var a=t.foods;return Object.assign({},e,{foods:a.foods,filters:a.filters,sort:a.sort,search:a.search,page:a.page,limit:a.limit});case"SET_OPEN_FILTERS":var r=e.filtersOpen;return Object.assign({},e,{filtersOpen:!r});case"SET_DISTINCTS":return Object.assign({},e,{distincts:t.res});case"SET_ERRORS":return Object.assign({},e,{errors:t.errors});case"SET_LATEST_FOOD":return Object.assign({},e,{latestFood:t.food});case"SET_SEARCH_OPTIONS":return Object.assign({},e,{searchOptions:t.options});default:return e}},payment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA":return Object.assign({},e,{data:t.data});case"SET_DELETE_ID":return Object.assign({},e,{deleteId:t.id});case"SET_DISTINCT_NOTES":return Object.assign({},e,{distinctNotes:t.notes});default:return e}},transactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRANSACTION":return Object.assign({},e,{transactions:t.transactions});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1?arguments[1]:void 0;return t.type,e}}),dr=Object(c.c)(mr);var fr=m()().configure(f()("https://kisaeeheifoodpicker.herokuapp.com").superagent(v.a)).configure(E()({storage:window.localStorage}));function pr(){!function(e){if("/signin"!==e&&!e.includes("/pending-payments:")){var t=dr.getState().user;t&&t._id||l.c.push("/signin")}}(window.location.pathname)}function Er(){i.a.render(r.a.createElement(u.a,{store:dr},r.a.createElement(l.b,{history:l.c},r.a.createElement(l.a,{path:"/",component:ze,onEnter:pr},r.a.createElement(l.a,{path:"/home",component:at}),r.a.createElement(l.a,{path:"/signin",component:tt}),r.a.createElement(l.a,{path:"/foods",component:Ln}),r.a.createElement(l.a,{path:"/shoplist",component:_n}),r.a.createElement(l.a,{path:"/payments",component:ra}),r.a.createElement(l.a,{path:"/pending-payments:id",component:oa}),r.a.createElement(l.a,{path:"/minermonitor",component:Ba})))),document.getElementById("root"))}fr.reAuthenticate().then((function(e){dr.dispatch(M(e.user)),Er()})).catch((function(e){Er()}));var gr=t.default=fr}},[[459,1,2]]]);
//# sourceMappingURL=main.1ce42319.chunk.js.map