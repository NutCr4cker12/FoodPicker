{"version":3,"sources":["theme.js","App/AppActions.js","App/Header.js","App/Message.js","core/NavItem.js","App/Nav.js","api.js","App/profile.js","App/App.js","signin/SignIn.js","home/home.js","core/TabContent.js","foods/FilterSection.js","foods/FilterSorting.js","foods/Filters.js","core/BoldSearch.js","foods/foodAction.js","foods/Search.js","core/combineDates.js","core/Table.js","core/BackDialog.js","foods/foodEdit.js","foods/SelectedFood.js","foods/Foods.js","shoplist/Shoplist.js","payments/paymentAction.js","payments/MailDialog.js","payments/payments.js","transactions/Transactions.js","categories/CategoriesContent.js","categories/CategoryTypeContent.js","categories/UnlabeledContent.js","categories/Categories.js","transactions/transactionActions.js","payments/Session/textParser.js","payments/Session/SessionModal.js","payments/Session/Session.js","App/drawerReducer.js","App/profileReducer.js","foods/foodReducers.js","payments/paymentReducer.js","transactions/transactionReducer.js","categories/categoriesReducer.js","reducers.js","App/AppReducer.js","App/userReducer.js","index.js"],"names":["muiTheme","createMuiTheme","palette","primary","main","green","secondary","error","red","overrides","MuiPaper","root","flexBasis","MuiTabs","vertical","maxWidth","MuiGrid","justifyContent","MuiDialogTitle","flexDirection","alignItems","separate","flexGrow","marginTop","centerDivColumn","display","spreadDivColumn","AppTheme","props","ThemeProvider","theme","children","setError","message","type","setMessage","authUser","user","useStyles","makeStyles","navBar","zIndex","drawer","position","top","left","margin","connect","state","drawerOpen","open","profileOpen","profile","dispatch","onOpenDrawer","onCloseDrawer","onNavigate","pathname","browserHistory","push","onOpenProfile","event","target","currentTarget","onCloseProfile","appbar","mobileNavIcon","profileButton","location","classes","_id","IconButton","onClick","style","color","fontSize","edge","AppBar","className","Toolbar","text","app","err","onClose","Snackbar","Boolean","autoHideDuration","elevation","variant","severity","path","icon","ListItem","button","key","ListItemIcon","ListItemText","capitalCase","menuItems","Divider","role","Drawer","List","isChrome","navigator","userAgent","indexOf","isSafari","isOpera","toLowerCase","users","email","password","authenticate","strategy","logout","getSorting","sort","s","Object","keys","forEach","value","name","convertName","convertFilters","filters","f","d","assign","nins","length","map","x","parseInt","split","$nin","foodService","service","foods","page","search","limit","sorting","query","$skip","$limit","$sort","$search","find","food","create","id","patch","remove","Promise","resolve","reject","then","result","mainTypes","sideTypes","dayTypes","Array","data","maintype","sidetype","Set","side","day","lasteaten","$lasteaten","res","paymentsService","payments","payment","transactionService","transactionsApi","anchorEl","anchor","onSignOut","timeout","setTimeout","clearTimeout","catch","keepMounted","disableAutoFocus","MenuItem","disabled","opacity","isQuest","App","profileMenu","this","CssBaseline","React","Component","spacing","TextField","paddingRight","onSignIn","onSignInGoogle","onResetPassword","useState","setEmail","setPassword","submitHanlder","preventDefault","Paper","width","subheader","ListSubheader","onSubmit","label","fullWidth","onChange","e","helperText","Button","startIcon","paper","marginLeft","marginRight","index","other","Typography","component","hidden","aria-labelledby","Box","p","filterSectionRoot","backgroundColor","background","height","tabs","borderRight","divider","verticalTab","center","tabContainer","paddingTop","speedContainer","minWidth","speedText","speedBtn","padding","textAlign","filterButton","filterButtonDisabled","header","filterTab","setFilters","tabValue","setTabValue","onFilterClick","selected","newValue","forceColumn","filter","first","GridHeader","Fragment","Grid","item","xs","onOffBtn","on","buttonFilters","arr","container","directon","justify","mainContent","sideContent","dayContent","speedFilter","speed","speedValue","timeIsLess","speedFilterText","handleSpeedClick","speedContent","Slider","defaultValue","track","getAriaValueText","valueLabelDisplay","valueLabelFormat","hours","Math","floor","mins","getSpeedLabel","step","min","max","getSpeedText","Tabs","orientation","indicatorColor","textColor","Tab","TabContent","buttonContainer","descriptionContainer","upperdescriptionContainer","textContainer","setSort","SortButton","getSortDescriptionUp","handleChange","getSortDescriptionDown","actionContent","copyObj","JSON","parse","stringify","currentFilters","filtersOpen","onApply","setOpenFilter","currentSort","clearFilters","liha","Dialog","FilterSorting","DialogActions","autoFocus","boldSearch","bolded","i","selectFood","setEditFood","setErrors","errors","setOptions","options","searchDiv","btnDiv","div","searchOptions","onSetOptions","$regex","console","log","onSelectFood","searchState","setSearchState","Autocomplete","getOptionLabel","option","renderOption","renderInput","params","InputProps","rest","startAdornment","InputAdornment","placeholder","setSearch","dayMs","getShortTime","date","short","getDate","m","getMonth","year","getFullYear","toString","substr","getDateText","start","end","ago","numDays","days","today","Date","diff","round","w","dates","maxLength","a","b","firstDate","latestDate","paddingLeft","highlight","lighten","light","dark","title","flex","visuallyHidden","border","clip","overflow","columns","setLimit","onAddFood","setPage","count","total","pager","tableToolbar","Tooltip","size","endIcon","getSortDirection","tableHeaders","TableHead","TableRow","TableCell","align","sortDirection","TableSortLabel","active","direction","tableBody","TableBody","hover","join","timeseaten","combineDates","time","foodamount","TableContainer","Table","TablePagination","rowsPerPage","onChangeRowsPerPage","rowsPerPageOptions","onChangePage","newPage","onCancel","onOk","cancelText","okText","oncancel","DialogTitle","DialogContent","selectFieldContainer","selectField","addButton","common","white","sideType","dialogContainer","distDayTypes","distincts","foodEditOpen","distMainTypes","distSideTypes","onSetEditFood","onDeleteFood","onSaveFood","foodEdit","onUpdate","mainType","setMainType","foodAmount","setFoodAmount","setSideTypes","setName","link","recipe","setRecipe","eaten","setEaten","cookTime","setCookTime","deleteOpen","setDeleteOpen","SelectField","types","select","sideTypeElement","FormControl","includes","InputLabel","Select","multiple","multiline","input","OutlinedInput","renderValue","Checkbox","checked","FormHelperText","nameElement","speedElement","RegExp","test","recipeElement","eatenElement","editContent","deleteFood","noValidate","BackDialog","spread","centerColumns","datePickerTextfield","moment","locale","updateLocale","week","dow","doy","selectedFood","latestFood","onFoodSelection","latestFoodInfo","lastDate","startDate","valueOf","endDate","getLatestFoodInfo","setStartDate","setEndDate","historyContent","selectContent","Link","href","utils","MomentUtils","DatePicker","format","views","minDate","showTodayButton","_d","animateYearScrolling","TextFieldComponent","toDateString","currDay","newDay","concat","defaultFood","onRefresh","initFilters","$lt","Shoplist","setDeleteId","createDefaultContent","paymentText","notes","amount","oDate","month","formatDate","imageName","spacings","datePickerTextfieldWide","datePickerTextfieldSmall","tableIcon","sendMailButton","yearStart","getUTCFullYear","yearEnd","deleteId","distinctNotes","getData","$gt","onGetData","onAddPayment","onSetDeleteId","onDeletePayment","onGetDistinctNotes","allNotes","onSendMail","paymentList","mailed","perMonth","setDate","setAmount","note","setNote","autoCompleteKey","image","setImage","inputRef","setInputRef","toMailList","setToMailList","useEffect","reduce","toFixed","downloadImage","document","createElement","download","click","datePicker","setValue","maxDate","endAdornment","addPayment","replace","freeSolo","window","confirm","parseFloat","imageData","handleAddPayment","table","content","process","encodeURIComponent","openOnMail","createdAt","formatNotes","handleMailList","accept","ref","elem","FileReader","getElementById","files","selectedFile","fileReader","onload","readAsDataURL","alert","loadFile","floatRightBtn","float","transactions","labelManagerOpen","imageLoadRef","useRef","current","foo","t","saaja","marginBtn","categories","categoryTypes","onAddCategory","sub","sub2","onEditCategory","onListCategories","onListTransactions","setState","parseImageResult","viite","confidence","iban","euro","dueDate","lines","line","k","progressDiv","bottom","SessionModal","loaderIndicator","worker","workerLoadProgress","modalOpen","onAdd","CircularProgress","LinearProgress","recognize","parsedResult","parseImage","loaderDiv","actionButtons","addBillButton","drawerState","initWorker","createWorker","logger","status","progress","load","loadLanguage","initialize","kill","terminate","Slide","in","mountOnEnter","unmountOnExit","profileMenuState","foodState","paymentState","transactionState","skip","combineReducers","action","isOpen","newState","store","createStore","reducers","feathers","configure","superagent","authentication","storage","localStorage","enterHandler","getState","handlePath","initRender","ReactDOM","render","history","onEnter","Home","SignIn","Foods","ShopList","Payments","reAuthenticate","r"],"mappings":"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","file":"static/js/main.c369ad22.chunk.js","sourcesContent":["import React from 'react'\r\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { green, red } from '@material-ui/core/colors'\r\n\r\nconst muiTheme = createMuiTheme({\r\n\tpalette: {\r\n\t\t// primary: green,\r\n\t\tprimary: {\r\n\t\t\tmain: green[800]\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#fffffF\"\r\n\t\t},\r\n\t\terror: red\r\n\t},\r\n\toverrides: {\r\n\t\tMuiPaper: {\r\n\t\t\troot: {\r\n\t\t\t\t// flex: 1,\r\n\t\t\t\tflexBasis: \"auto\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiTabs: {\r\n\t\t\tvertical: {\r\n\t\t\t\tmaxWidth: \"80px\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiGrid: {\r\n\t\t\troot: {\r\n\t\t\t\tjustifyContent: \"space-evenly\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiDialogTitle: {\r\n\t\t\troot: {\r\n\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\talignItems: \"center\",\r\n\t\t\t\tjustifyContent: \"space-between\"\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tseparate: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\troot: {\r\n\t\tmarginTop: \"4rem\"\r\n\t},\r\n\tcenterDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspreadDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t}\r\n})\r\n\r\n\r\nexport const AppTheme = (props) => {\r\n\r\n\treturn (\r\n\t\t<ThemeProvider theme={muiTheme}>\r\n\t\t\t<div>\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t</ThemeProvider>\r\n\t)\r\n}\r\n","export const setError = message => {\r\n\treturn { type: 'SET_ERROR', message }\r\n  }\r\n\r\n  export const setMessage = message => {\r\n\treturn { type: 'SET_MESSAGE', message }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  \r\n  export const openDrawer = () => {\r\n\treturn { type: 'OPEN_DRAWER' }\r\n  }\r\n  \r\n  export const closeDrawer = () => {\r\n\treturn { type: 'CLOSE_DRAWER' }\r\n  }\r\n  \r\n  export const openProfile = (target) => {\r\n\treturn { type: \"OPEN_PROFILE_MENU\", target }\r\n  }\r\n  \r\n  export const closeProfile = () => {\r\n\treturn { type: \"CLOSE_PROFILE_MENU\" }\r\n  }\r\n  \r\n  export const authUser = user => {\r\n\treturn { type: 'AUTH', user }\r\n  }\r\n  \r\n  export const deauthUser = () => {\r\n\treturn { type: 'DEAUTH' }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  ","import React from 'react';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { connect } from 'react-redux';\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { closeDrawer, openDrawer, openProfile, closeProfile } from './AppActions'\r\n\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tnavBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\tposition: \"fixed\",\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\tmargin: 0,\r\n\t\t// backgroundColor: theme.palette.primary.dark\r\n\t},\r\n\tseparate: theme.separate\r\n}))\r\n\r\nconst Header = ({ location, user, drawerOpen, onOpenDrawer, onCloseDrawer, profileOpen, onOpenProfile, onCloseProfile }) => {\r\n\tconst classes = useStyles();\r\n\tlet appbar, mobileNavIcon, profileButton\r\n\r\n\tprofileButton = (\r\n\t\tuser._id != null &&\r\n\t\t<div>\r\n\t\t\t<IconButton onClick={profileOpen ? onCloseProfile : onOpenProfile} style={{ color: 'white' }}>\r\n\t\t\t\t<AccountCircleIcon fontSize=\"large\" />\r\n\t\t\t</IconButton>\r\n\t\t</div>\r\n\t)\r\n\r\n\tif (location.pathname === '/signin') {\r\n\t\t//do nothing\r\n\t}\r\n\telse\r\n\t\tmobileNavIcon =\r\n\t\t\t<IconButton edge=\"start\" style={{ color: 'white' }} onClick={() => {drawerOpen ? onCloseDrawer() : onOpenDrawer()}} >\r\n\t\t\t\t<MenuIcon />\r\n\t\t\t</IconButton>\r\n\r\n\tappbar = (\r\n\t\t<AppBar position=\"static\" className={classes.navBar}>\r\n\t\t\t<Toolbar>\r\n\t\t\t\t{mobileNavIcon}\r\n\t\t\t\t<div className={classes.separate} />\r\n\t\t\t\t{profileButton}\r\n\t\t\t</Toolbar>\r\n\t\t</AppBar>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t{appbar}\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open,\r\n\t\tprofileOpen: state.profile.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonOpenDrawer: () => {\r\n\t\t\tdispatch(openDrawer())\r\n\t\t},\r\n\t\tonCloseDrawer: () => {\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonOpenProfile: (event) => {\r\n\t\t\tdispatch(openProfile(event.currentTarget))\r\n\t\t},\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)","import React from 'react'\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setMessage } from './AppActions'\r\n\r\nconst Message = ({ text, err, onClose }) => (\r\n\t<Snackbar\r\n\t\topen={Boolean(err || text)}\r\n\t\tautoHideDuration={3000}\r\n\t\tonClose={onClose}\r\n\t\t// anchorOrigin={{horizontal: \"center\", vertical: \"top\"}}\r\n\t>\r\n\t\t<MuiAlert\r\n\t\t\televation={6}\r\n\t\t\tvariant=\"filled\"\r\n\t\t\tonClose={onClose}\r\n\t\t\tseverity={err ? \"error\" : text ? \"success\" : \"info\"}\r\n\t\t>\r\n\t\t\t{err ? err : text ? text : \"\"}\r\n\t\t</MuiAlert>\r\n\t</Snackbar>\r\n)\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\ttext: state.app.message,\r\n\t\terr: state.app.err\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonClose: () => {\r\n\t\t\tdispatch(setMessage(\"\"))\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Message)\r\n","import React from 'react'\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { capitalCase } from \"capital-case\";\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeDrawer } from '../App/AppActions'\r\n\r\nconst NavItem = (props) => {\r\n\tconst { path, icon, onNavigate } = props;\r\n\r\n\treturn (\r\n\t\t<ListItem button key={path} onClick={() => onNavigate(`/${path}`)}>\r\n\t\t\t<ListItemIcon>{icon}</ListItemIcon>\r\n\t\t\t<ListItemText primary={capitalCase(path)} />\r\n\t\t</ListItem>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NavItem)","import React from 'react';\r\n\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\n\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport AccountBalanceIcon from '@material-ui/icons/AccountBalance';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { closeDrawer, openDrawer } from './AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst Nav = ({user, drawerOpen, onOpenDrawer, onCloseDrawer, onNavigate}) => {\r\n\tlet menuItems = []\r\n\r\n\r\n\tif (user._id) {\r\n\t\tmenuItems.push(<Divider key=\"div1\" />)\r\n\t\tmenuItems.push(<NavItem key={1} path={\"home\"} icon={<HomeIcon/>} />)\r\n\t\tmenuItems.push(<NavItem key={2} path=\"foods\" icon={<FastfoodIcon />} />)\r\n        menuItems.push(<NavItem key={3} path=\"shoplist\" icon={<ShoppingCartIcon />} />)\r\n\t\tif (user.role === \"admin\") {\r\n            menuItems.push(<NavItem key={4} path=\"payments\" icon={<PaymentIcon />} />)\r\n            // menuItems.push(<NavItem key={5} path=\"transactions\" icon={<AccountBalanceIcon />} />)\r\n\t\t}\r\n\t\tmenuItems.push(<Divider key=\"div2\" />)\r\n\r\n\t\treturn (\r\n\t\t\t<Drawer \r\n\t\t\t\topen={drawerOpen}\r\n\t\t\t\tonClose={open => open? onCloseDrawer() : onOpenDrawer()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{menuItems}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Drawer>\r\n\t\t)\r\n\t}\r\n\treturn (<div/>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t  onOpenDrawer: () => {\r\n\t\tdispatch(openDrawer())\r\n\t  },\r\n\t  onCloseDrawer: () => {\r\n\t\tdispatch(closeDrawer())\r\n\t  },\r\n\t  onNavigate: pathname => {\r\n\t\tbrowserHistory.push(pathname)\r\n\t\tdispatch(closeDrawer())\r\n\t  }    \r\n\t}\r\n  }\r\n  \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav)","import app from '.'\r\n\r\nlet isChrome = navigator.userAgent.indexOf('Chrome') > -1\r\n// let isExplorer = navigator.userAgent.indexOf('MSIE') > -1\r\n// let isFirefox = navigator.userAgent.indexOf('Firefox') > -1\r\nlet isSafari = navigator.userAgent.indexOf(\"Safari\") > -1\r\nlet isOpera = navigator.userAgent.toLowerCase().indexOf(\"op\") > -1\r\nif (isChrome && isSafari) isSafari = false\r\nif (isChrome && isOpera) isChrome = false\r\n\r\n// const passwordChangeService = () => app.service('v1/password-change')\r\n// const passwordResetRequestService = () => app.service('v1/password-requestreset')\r\n// const passwordResetRequestAdminService = () => app.service('v1/password-requestreset-admin')\r\n// const passwordResetService = () => app.service('v1/password-reset')\r\nconst userService = () => app.service('v1/users')\r\nexport const users = {\r\n\tlist: query => {\r\n\t\treturn userService().find({ query: query });\r\n\t},\r\n\tget: id => {\r\n\t\tif (!id) {\r\n\t\t\treturn app.get('authentication');\r\n\t\t}\r\n\t\treturn userService().get(id)\r\n\t},\r\n\tcreate: user => userService().create(user),\r\n\tpatch: (id, user) => userService().patch(id, user),\r\n\tremove: id => userService().remove(id),\r\n\tauthenticate: () => app.authentication.reAuthenticate(true),\r\n\tsignIn: (email, password) => app.authenticate({ strategy: 'local', email, password }),\r\n\t//   signInGoogle: () => {\r\n\t//     window.location.href = process.env.REACT_APP_OAUTH_URL + '/google';\r\n\t//     return Promise.resolve(null)\r\n\t//   },\r\n\tsignOut: () => app.logout(),\r\n\t//   changePassword: (oldPassword, newPassword) => passwordChangeService().create({ oldPassword, newPassword }),\r\n\t//   resetPassword: (id, token, password) => passwordResetService().create({ id, token, password }),\r\n\t//   requestPasswordReset: email => passwordResetRequestService().create({ email }),\r\n\t//   requestPasswordResetAdmin: email => passwordResetRequestAdminService().create({ email }),\r\n}\r\n\r\nconst getSorting = (sort) => { // desc = -1, asc = 1\r\n\tconst s = {}\r\n\tconst convertName = (name) => {\r\n\t\tswitch (name) {\r\n\t\t\tcase \"main\":\r\n\t\t\t\treturn \"maintype\"\r\n\t\t\tcase \"side\":\r\n\t\t\t\treturn \"sidetype\"\r\n\t\t\tcase \"food\":\r\n\t\t\t\treturn \"name\"\r\n\t\t\tcase \"Food Amount\":\r\n\t\t\t\treturn \"foodamount\"\r\n\t\t\tcase \"Cooking Time\":\r\n\t\t\t\treturn \"time\"\r\n\t\t\tcase \"Last Eaten\":\r\n\t\t\t\treturn \"lasteaten\"\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"timeseaten\"\r\n\t\t}\r\n\t}\r\n\tObject.keys(sort).forEach(key => {\r\n\t\tconst value = sort[key];\r\n\t\tif (value === \"asc\") {\r\n\t\t\tsort[key] = 1\r\n\t\t} else if (value === \"desc\") {\r\n\t\t\tsort[key] = -1\r\n\t\t}\r\n\t\ts[convertName(key)] = sort[key]\r\n\t})\r\n\treturn s\r\n}\r\n\r\nconst convertFilters = (filters) => {\r\n\tvar f = {}\r\n\tObject.keys(filters).forEach(type => {\r\n\t\tvar d = {}\r\n\t\tif (type === \"speed\") {\r\n\t\t\td[\"time\"] = filters[type]\r\n\t\t\tf = Object.assign(f, d)\r\n\t\t} else {\r\n\t\t\tvar nins = []\r\n\t\t\tObject.keys(filters[type]).forEach(name => {\r\n\t\t\t\tif (filters[type][name] === \"$nin\") nins.push(name)\r\n\t\t\t})\r\n\t\t\tif (nins.length) {\r\n\t\t\t\tif (type === \"day\") {\r\n\t\t\t\t\tnins = nins.map(x => parseInt(x.split(\" \")[0]))\r\n\t\t\t\t\td[\"foodamount\"] = { $nin: nins }\r\n\t\t\t\t} else {\r\n\t\t\t\t\td[`${type}type`] = { $nin: nins }\r\n\t\t\t\t}\r\n\t\t\t\tf = Object.assign(f, d)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\treturn f\r\n}\r\n\r\nconst foodService = () => app.service('v1/foods')\r\nexport const foods = {\r\n\tlist: (filters, page, sort, search = \"\", limit) => {\r\n\t\tconst f = convertFilters(filters)\r\n\t\tconst sorting = getSorting(sort)\r\n\t\tvar query = Object.assign(f, {\r\n\t\t\t$skip: ((page - 1) < 0 ? 0 : page) * 10,\r\n\t\t\t$limit: limit,\r\n\t\t\t$sort: sorting,\r\n\t\t})\r\n\t\tif (search) query = Object.assign(query, { $search: search })\r\n\t\treturn foodService().find({ query: query })\r\n\t},\r\n\tget: id => foodService().get(id),\r\n\tcreate: food => foodService().create(food),\r\n\tpatch: (id, food) => foodService().patch(id, food),\r\n\tremove: id => foodService().remove(id),\r\n\tfind: query => foodService().find({ query: query }),\r\n\tdistincts: () => {\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t\tfoodService().find({ query: { $limit: 10000 } })\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tlet mainTypes = []\r\n\t\t\t\t\tlet sideTypes = []\r\n\t\t\t\t\tconst dayTypes = [...Array(4).keys()].map(d => `${d + 1} day`)\r\n\t\t\t\t\tresult.data.forEach(f => {\r\n\t\t\t\t\t\tmainTypes.push(f.maintype)\r\n\t\t\t\t\t\tf.sidetype.forEach(s => sideTypes.push(s))\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tmain: [...new Set(mainTypes)],\r\n\t\t\t\t\t\tside: [...new Set(sideTypes)],\r\n\t\t\t\t\t\tday: dayTypes\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t)\r\n\t},\r\n\tlastEaten: () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tfoodService().find({ query: {\r\n\t\t\t\t$sort: {\r\n\t\t\t\t\tlasteaten: -1\r\n\t\t\t\t},\r\n\t\t\t\t$lasteaten: true\r\n\t\t\t}}).then(res => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\n\r\n\r\nconst shopListService = () => app.service('v1/shoplist')\r\nexport const shoplist = {\r\n\tlist: query => {\r\n\t\treturn shopListService().find({ query: query })\r\n\t},\r\n\tget: id => shopListService().get(id),\r\n\tcreate: item => shopListService().create(item),\r\n\tpatch: (id, item) => shopListService().patch(id, item),\r\n\tremove: id => shopListService().remove(id)\r\n}\r\n\r\nconst paymentsService = () => app.service('v1/payments')\r\nexport const payments = {\r\n\tlist: query => paymentsService().find({ query: query }),\r\n\tget: id => paymentsService().get(id),\r\n\tcreate: payment => paymentsService().create(payment),\r\n\tpatch: (id, payment) => paymentsService().patch(id, payment),\r\n\tremove: id => paymentsService().remove(id)\r\n}\r\n\r\nconst transactionService = () => app.service('v1/transactions')\r\nexport const transactionsApi = {\r\n    list: query => transactionService().find({ query: query }),\r\n    get: id => transactionService().get(id),\r\n    patch: (id, transaction) => transactionService().patch(id, transaction)\r\n}\r\n\r\nconst categoriesService = () => app.service('v1/categories')\r\nexport const categoriesApi = {\r\n    list: query => categoriesService().find({ query: query }),\r\n    get: id => categoriesService().get(id),\r\n    create: cateogry => categoriesService().create(cateogry),\r\n\tpatch: (id, cateogry) => categoriesService().patch(id, cateogry),\r\n\tremove: id => categoriesService().remove(id)   \r\n}\r\n\r\nconst categoryTypeService = () => app.service('v1/category-type')\r\nexport const categoryTypesApi = {\r\n    list: query => categoryTypeService().find({ query: query }),\r\n    get: id => categoryTypeService().get(id),\r\n    create: type => categoryTypeService().create(type),\r\n\tpatch: (id, type) => categoryTypeService().patch(id, type),\r\n\tremove: id => categoryTypeService().remove(id)   \r\n}\r\n","import React from 'react'\r\n\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider'\r\n\r\nimport ActionExitToApp from '@material-ui/icons/ExitToApp';\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { closeProfile, setMessage, deauthUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst profile = ({ user, profileOpen, onCloseProfile, anchorEl, onSignOut }) => {\r\n\r\n\treturn (\r\n\t\t<Menu\r\n\t\t\tanchorEl={anchorEl}\r\n\t\t\tkeepMounted\r\n\t\t\topen={profileOpen}\r\n\t\t\tonClose={onCloseProfile}\r\n\t\t\tdisableAutoFocus={true}\r\n\t\t>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={`Signed in as: ${user.isQuest ? \" Quest\" : \"\"}`} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={user.name} secondary={user.email} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<Divider />\r\n\t\t\t<MenuItem onClick={() => {\r\n\t\t\t\tonCloseProfile()\r\n\t\t\t\tonSignOut()\r\n\t\t\t}}>\r\n\t\t\t\t<ListItemIcon><ActionExitToApp /></ListItemIcon>\r\n\t\t\t\t<ListItemText primary='Sign Out' />\r\n\t\t\t</MenuItem>\r\n\t\t</Menu>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tprofileOpen: state.profile.open,\r\n\t\tanchorEl: state.profile.anchor\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t},\r\n\t\tonSignOut: () => {\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign out.'))\r\n\t\t\t}, 5000)\r\n\t\t\tusers.signOut()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed out.'))\r\n\t\t\t\t\tdispatch(deauthUser())\r\n\t\t\t\t\t// eslint-disable-next-line no-restricted-globals\r\n\t\t\t\t\tbrowserHistory.push('/signin');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage(err.message))\r\n\t\t\t\t})\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(profile)\r\n","import React from 'react'\r\nimport { AppTheme } from '../theme'\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Header from './Header'\r\nimport Message from './Message'\r\n\r\nimport Nav from './Nav'\r\nimport Profile from './profile'\r\n// import MediaQuery from 'react-responsive'\r\n\r\nexport default class App extends React.Component {\r\n\r\n\trender() {\r\n\t\tlet navBar, profileMenu;\r\n\t\tif (this.props.location.pathname !== \"/signin\") {\r\n\t\t\tnavBar =\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Nav />\r\n\t\t\t\t</div>\r\n\t\t\tprofileMenu = <div><Profile /></div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<AppTheme>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<CssBaseline />\r\n\t\t\t\t\t<Header location={this.props.location} />\r\n\t\t\t\t\t{navBar}\r\n\t\t\t\t\t{profileMenu}\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{this.props.main}\r\n\t\t\t\t\t\t{this.props.children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Message />\r\n\t\t\t\t</div>\r\n\t\t\t</AppTheme>\r\n\t\t)\r\n\t}\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport List from '@material-ui/core/List'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ActionLock from '@material-ui/icons/Lock'\r\n\r\n// import { CookieDisclaimer } from '../home/CookieDisclaimer'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { setMessage, setError, authUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tmarginTop: \"8rem\",\r\n\t\tdisplay: 'flex',\r\n\t\tmargin: theme.spacing(2),\r\n\t},\r\n\tTextField: {\r\n\t\tdisplay: \"flex\",\r\n\t\tmargin: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(4)\r\n\t}\r\n}))\r\n\r\nfunction SignIn(props) {\r\n\tconst classes = useStyles();\r\n\tconst [error] = useState();\r\n\tconst [email, setEmail] = useState();\r\n\tconst [password, setPassword] = useState();\r\n\r\n\tconst { onSignIn } = props;\r\n\r\n\tconst submitHanlder = event => {\r\n\t\tevent.preventDefault()\r\n\t\tonSignIn(email, password)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper elevation={3} style={{ width: \"100%\"}}>\r\n\t\t\t\t<List subheader={<ListSubheader>Sign In</ListSubheader>}>\r\n\t\t\t\t\t<form onSubmit={submitHanlder} style={{ marginTop: '24px' }}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Email\"\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 1 || error === 3 ? \"E-mail is required\" : error === 4 ? 'E-mail does not contain \"@\" symbol' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 2 || error === 3 ? 'Password is required' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tstartIcon={<ActionLock />}\r\n\t\t\t\t\t\t\t\tonClick={submitHanlder}\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t>Sign In</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"submit\" style={{ display: \"none\" }} />\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</List>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSignIn: (email, password) => {\r\n\t\t\tif (email.length === 0 && password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail and password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(3) }\r\n\t\t\t}\r\n\t\t\tif (email.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(1) }\r\n\t\t\t}\r\n\t\t\tif (email.indexOf('@') === -1) {\r\n\t\t\t\tdispatch(setMessage('E-mail does not contain \"@\" symbol'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(4) }\r\n\t\t\t}\r\n\t\t\tif (password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('Password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(2) }\r\n\t\t\t}\r\n\t\t\tdispatch(setMessage('Signing in...'))\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign in.'))\r\n\t\t\t}, 5000)\r\n\t\t\treturn users.signIn(email, password)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed in.'));\r\n\t\t\t\t\tdispatch(authUser(result.user));\r\n\t\t\t\t\tbrowserHistory.push('/home')\r\n\t\t\t\t\treturn { user: result.user, error: null }\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tif (err.name === 'MongoError') {\r\n\t\t\t\t\t\tdispatch(setMessage('Server error. Try again later.'))\r\n\t\t\t\t\t} else if (err.name === 'NotAuthenticated') {\r\n\t\t\t\t\t\tdispatch(setMessage('Unable to sign in. Invalid e-mail or password.'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatch(setError('Error: ' + err.name + err.message))\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbrowserHistory.push('/')\r\n\t\t\t\t\tsetTimeout(() => browserHistory.push('/signin'), 10)\r\n\t\t\t\t\treturn { user: null, error: err };\r\n\t\t\t\t})\r\n\t\t},\r\n\t\tonSignInGoogle: () => {\r\n\t\t\t//   dispatch(setMessage('Signing in...'))\r\n\t\t\t//   return users.signInGoogle()\r\n\t\t},\r\n\t\tonResetPassword: () => {\r\n\t\t\t//   browserHistory.push('/passwordreset')\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\r\n","import React from 'react'\r\n\r\nimport List from '@material-ui/core/List';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport AccountBalanceIcon from '@material-ui/icons/AccountBalance';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { closeDrawer } from '../App/AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\tmarginTop: \"10rem\",\r\n\t\tmarginLeft: \"1rem\",\r\n\t\tmarginRight: \"1rem\"\r\n\t}\r\n}))\r\n\r\nconst Home = (props) => {\r\n\tconst classes = useStyles()\r\n\tconst { user } = props;\r\n\tlet menuItems = []\r\n\r\n\tmenuItems.push(<NavItem key={0} path=\"foods\" icon={<FastfoodIcon />} />)\r\n\tmenuItems.push(<NavItem key={1} path=\"shoplist\" icon={<ShoppingCartIcon />} />)\r\n\tif (user.role === \"admin\") {\r\n        menuItems.push(<NavItem key={2} path=\"payments\" icon={<PaymentIcon />} />)\r\n        // menuItems.push(<NavItem key={5} path=\"transactions\" icon={<AccountBalanceIcon />} />)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<List className={classes.paper}>\r\n\t\t\t\t{menuItems}\r\n\t\t\t</List>\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)","import React from 'react'\r\n\r\nimport { Box, Typography } from '@material-ui/core';\r\n\r\nexport default (props) => {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<Typography\r\n\t\t\tcomponent=\"div\"\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`simple-tabpanel-${index}`}\r\n\t\t\taria-labelledby={`simple-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && <Box p={3}>{children}</Box>}\r\n\t\t</Typography>\r\n\t);\r\n}","import React, { useState } from 'react'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { Tabs, Tab, Button, Slider, Grid } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport TabContent from '../core/TabContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfilterSectionRoot: {\r\n\t\tflexGrow: 1,\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tdisplay: 'flex',\r\n\t\theight: 224,\r\n\t\t// marginLeft: \"-20px\"\r\n\t},\r\n\ttabs: {\r\n\t\tborderRight: `1px solid ${theme.palette.divider}`,\r\n\t\tbackgroundColor: theme.palette.primary,\r\n\t},\r\n\tverticalTab: {\r\n\t\talignItems: \"start\",\r\n\t\tmaxWidth: \"10px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\ttabContainer: {\r\n\t\tflexGrow: 1,\r\n\t\tmaxWidth: \"250px\",\r\n\t\tmarginLeft: \"-56px\",\r\n\t\tmarginTop: \"-40px\",\r\n\t\tpaddingTop: \"2px\"\r\n\t},\r\n\tspeedContainer: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmarginLeft: \"5px\"\r\n\t},\r\n\tspeedText: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspeedBtn: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tmargin: \"10px\"\r\n\t},\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(1),\r\n\t\ttextAlign: 'center',\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t},\r\n\tfilterButton: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\"\r\n\t},\r\n\tfilterButtonDisabled: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\",\r\n\t\tcolor: \"#d3d3d3\"\r\n\t},\r\n\theader: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\",\r\n\t\topacity: 1,\r\n\t\t// border: `1px solid ${theme.palette.primary.main}`,\r\n\t\t// color: theme.palette.primary.main\r\n\t},\r\n\tfilterTab: {\r\n\t\tminWidth: \"80px\"\r\n\t},\r\n}));\r\n\r\nconst getSpeedLabel = (value) => {\r\n\tconst hours = Math.floor(value / 60)\r\n\tconst mins = Math.floor((value % 60) / 6);\r\n\tif (mins === 0) return hours\r\n\treturn `${hours}.${mins}`\r\n}\r\n\r\nconst getSpeedText = (value) => {\r\n\tconst hours = Math.floor(value / 60)\r\n\tconst mins = Math.floor(value % 60);\r\n\tif (hours === 0) return `    ${mins} min`\r\n\tif (mins === 0) return `${hours} h       `\r\n\treturn `${hours}h ${mins} min`\r\n}\r\n\r\nconst inSpread = 2;\r\nconst outSpread = 12;\r\nconst gridSpacing = 3;\r\n\r\nconst FilterSection = ({ filters, setFilters }) => {\r\n\tconst classes = useStyles()\r\n\tconst [tabValue, setTabValue] = useState(0)\r\n\r\n\tconst onFilterClick = (f) => {\r\n\t\tvar selected;\r\n\t\tif (f in filters.main) selected = filters.main\r\n\t\telse if (f in filters.side) selected = filters.side\r\n\t\telse if (f in filters.day) selected = filters.day\r\n\t\tconst newValue = selected[f] === \"$in\" ? \"$nin\" : \"$in\"\r\n\t\tselected[f] = newValue\r\n\t\tsetFilters(filters)\r\n\t}\r\n\t\r\n\tconst forceColumn = (type, filter) => {\r\n\t\tconst first = Object.keys(type.type)[0]\r\n\r\n\t\tvar selected;\r\n\t\tif (first in filters.main) selected = filters.main\r\n\t\telse if (first in filters.side) selected = filters.side\r\n\t\telse if (first in filters.day) selected = filters.day\r\n\r\n\t\tObject.keys(selected).forEach(f => {\r\n\t\t\tselected[f] = filter\r\n\t\t})\r\n\t\tsetFilters(filters)\r\n\t}\r\n\r\n\tconst GridHeader = (type) => (\r\n\t\t<React.Fragment>\r\n\t\t\t<Grid item xs={inSpread}>\r\n\t\t\t\t<Button color=\"primary\" className={classes.header} onClick={() => forceColumn(type, \"$in\")}>Include</Button>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={inSpread}>\r\n\t\t\t\t<Button color=\"primary\" className={classes.header} onClick={() => forceColumn(type, \"$nin\")}>Exclude</Button>\r\n\t\t\t</Grid>\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst onOffBtn = (on, label, onClick) => (\r\n\t\t<Button\r\n\t\t\tvariant={on ? \"contained\" : \"outlined\"}\r\n\t\t\tcolor={on ? \"primary\" : \"default\"}\r\n\t\t\tonClick={() => onClick(label)}\r\n\t\t\tclassName={on ? classes.filterButton : classes.filterButtonDisabled}\r\n\t\t>{label}</Button>\r\n\t)\r\n\r\n\tconst buttonFilters = (type) => {\r\n\t\tconst arr = Object.keys(type)\r\n\t\treturn (\r\n\t\t\t<div className={classes.tabContainer}>\r\n\t\t\t\t<Grid container spacing={1} directon=\"row\" justify=\"space-evenly\" alignItems=\"flex-start\">\r\n\t\t\t\t\t<Grid container item xs={outSpread} spacing={gridSpacing}>\r\n\t\t\t\t\t\t<GridHeader type={type} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{arr.map(f => {\r\n\t\t\t\t\t\tconst left = type[f] === \"$in\"\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<React.Fragment key={f}>\r\n\t\t\t\t\t\t\t\t<Grid container item xs={outSpread} spacing={gridSpacing} >\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={inSpread} >\r\n\t\t\t\t\t\t\t\t\t\t{onOffBtn(left, f, onFilterClick)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={inSpread} >\r\n\t\t\t\t\t\t\t\t\t\t{onOffBtn(!left, f, onFilterClick)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst mainContent = buttonFilters(filters.main)\r\n\tconst sideContent = buttonFilters(filters.side)\r\n\tconst dayContent = buttonFilters(filters.day)\r\n\r\n\tconst speedFilter = Object.keys(filters.speed)[0]\r\n\tconst speedValue = filters.speed[speedFilter]\r\n\tconst timeIsLess = speedFilter === \"$lt\"\r\n\tconst speedFilterText = timeIsLess ? \"less\" : \"more\";\r\n\r\n\tconst handleSpeedClick = (value) => {\r\n\t\tfilters.speed = timeIsLess ? {\"$gt\": speedValue} : {\"$lt\": speedValue}\r\n\t\tsetFilters(filters)\r\n\t}\r\n\r\n\tconst speedContent = (\r\n\t\t<div className={classes.speedContainer}>\r\n\t\t\t<div className={classes.speedBtn}>\r\n\t\t\t\t{onOffBtn(timeIsLess, \"<\", handleSpeedClick)}\r\n\t\t\t\t{onOffBtn(!timeIsLess, \">\", handleSpeedClick)}\r\n\t\t\t</div>\r\n\t\t\t<Slider\r\n\t\t\t\tvalue={speedValue}\r\n\t\t\t\tdefaultValue={180}\r\n\t\t\t\ttrack={timeIsLess ? \"normal\" : \"inverted\"}\r\n\t\t\t\tgetAriaValueText={value => `${value}`}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tvalueLabelFormat={value => getSpeedLabel(value)}\r\n\t\t\t\tonChange={(e, value) => {\r\n\t\t\t\t\tif (value !== speedValue) {\r\n\t\t\t\t\t\tfilters.speed[speedFilter] = value\r\n\t\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tstep={30}\r\n\t\t\t\tmin={0}\r\n\t\t\t\tmax={180}\r\n\t\t\t/>\r\n\t\t\t{/* <Typography id=\"discrete-slider-restrict\" gutterBottom> */}\r\n\t\t\t\t<div className={classes.speedText}>\r\n\t\t\t\t\t<div>{`Takes ${speedFilterText} than `}</div>\r\n\t\t\t\t\t<div>{`${getSpeedText(speedValue)}`}</div>\r\n\t\t\t\t\t<div>{` to make`}</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/* </Typography> */}\r\n\t\t</div>\r\n\t);\r\n\t\r\n\treturn (\r\n\t\t<div className={classes.filterSectionRoot}>\r\n\t\t\t<Tabs\r\n\t\t\t\torientation=\"vertical\"\r\n\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\tvalue={tabValue}\r\n\t\t\t\tonChange={(e, value) => setTabValue(value)}\r\n\t\t\t>\r\n\t\t\t\t<Tab label=\"Main\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Side\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Speed\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Day\" className={classes.filterTab} />\r\n\t\t\t</Tabs>\r\n\t\t\t<TabContent value={tabValue} index={0} >\r\n\t\t\t\t{mainContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={1} >\r\n\t\t\t\t{sideContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={2} >\r\n\t\t\t\t{speedContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={3} >\r\n\t\t\t\t{dayContent}\r\n\t\t\t</TabContent>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FilterSection)","import React from 'react'\r\n\r\nimport { Button, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfilterSectionRoot: {\r\n\t\tflexGrow: 1,\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tdisplay: 'flex',\r\n\t\theight: 224,\r\n\t\twidth: \"325px\"\r\n\t},\r\n\tbuttonContainer: {\r\n\t\twidth: \"33%\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tdescriptionContainer: {\r\n\t\theight: \"40%\",\r\n\t\tcolor: \"rgba(0, 0, 0, 0.54)\"\r\n\t},\r\n\tupperdescriptionContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"flex-end\"\r\n\t},\r\n\ttextContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t}\r\n}));\r\n\r\nexport default ({ sort, setSort }) => {\r\n\tconst classes = useStyles()\r\n\r\n\tconst handleChange = (name) => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) sort[name] = 1\r\n\t\telse if (value > 0) sort[name] = -1\r\n\t\telse delete sort[name]\r\n\t\tsetSort(sort)\r\n\t}\r\n\r\n\tconst getSortDescriptionUp = name => {\r\n\t\tif (!sort[name] || sort[name] < 0) return null\r\n\t\tconst icon = <ArrowUpwardIcon />\r\n\t\tconst text = name === \"Food Amount\" ? \"Less first\" : (name === \"Cooking Time\" ? \"Fastest first\" : \"Oldest first\")\r\n\t\treturn (\r\n\t\t\t<div className={classes.textContainer}>\r\n\t\t\t\t{icon}\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</Typography>\r\n\t\t\t</ div>\r\n\t\t)\r\n\t}\r\n\t\r\n\tconst getSortDescriptionDown = name => {\r\n\t\tif (!sort[name] || sort[name] > 0) return  null\r\n\t\tconst icon = <ArrowDownwardIcon />\r\n\t\tconst text = name === \"Food Amount\" ? \"Multiple first\" : (name === \"Cooking Time\" ? \"Slowest first\" : \"Latest first\")\r\n\t\treturn (\r\n\t\t\t<div className={classes.textContainer}>\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t{icon}\r\n\t\t\t</ div>\r\n\t\t)\r\n\t}\r\n\t\r\n\r\n\tconst SortButton = (name) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.buttonContainer}>\r\n\t\t\t\t<div className={`${classes.descriptionContainer} ${classes.upperdescriptionContainer}`}>\r\n\t\t\t\t\t{getSortDescriptionUp(name)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={() => handleChange(name)}>\r\n\t\t\t\t\t{name}\r\n\t\t\t\t</Button>\r\n\t\t\t\t<div className={classes.descriptionContainer}>\r\n\t\t\t\t\t{getSortDescriptionDown(name)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.filterSectionRoot}>\r\n\t\t\t{SortButton(\"Food Amount\")}\r\n\t\t\t{SortButton(\"Cooking Time\")}\r\n\t\t\t{SortButton(\"Last Eaten\")}\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, Tabs, Tab } from '@material-ui/core';\r\n\r\nimport FilterSection from './FilterSection'\r\nimport FilterSorting from './FilterSorting'\r\nimport TabContent from '../core/TabContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttabs: {\r\n\t\twidth: \"100%\",\r\n\t},\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tactionContent: {\r\n\t\talignItems: \"stretch\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t},\r\n}))\r\n\r\nconst copyObj = filters => {\r\n\treturn JSON.parse(JSON.stringify(filters))\r\n}\r\n\r\n\r\nconst Filters = ({ onApply, filtersOpen, setOpenFilter, currentFilters, currentSort, clearFilters }) => {\r\n\tconst classes = useStyles()\r\n\tconst [tabValue, setTabValue] = useState(0)\r\n\tconst [filters, setFilters] = useState(copyObj(currentFilters))\r\n\tconst [sort, setSort] = useState(copyObj(currentSort))\r\n\r\n\tif (!filters.main.liha && currentFilters.main.liha) {\r\n\t\tsetFilters(copyObj(currentFilters))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={filtersOpen} onClose={() => {\r\n\t\t\t\tsetFilters(copyObj(currentFilters))\r\n\t\t\t\tsetSort(copyObj(currentSort))\r\n\t\t\t\tsetOpenFilter()\r\n\t\t\t}} >\r\n\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvariant=\"fullWidth\"\r\n\t\t\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\tvalue={tabValue}\r\n\t\t\t\t\t\tonChange={(e, value) => setTabValue(value)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tab label=\"Filters\" />\r\n\t\t\t\t\t\t<Tab label=\"Sort\" />\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t<TabContent value={tabValue} index={0} >\r\n\t\t\t\t\t\t<FilterSection\r\n\t\t\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\t\t\tsetFilters={f => setFilters(copyObj(f))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabContent>\r\n\t\t\t\t\t<TabContent value={tabValue} index={1} >\r\n\t\t\t\t\t\t<FilterSorting \r\n\t\t\t\t\t\t\tsort={sort}\r\n\t\t\t\t\t\t\tsetSort={s => setSort(copyObj(s))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabContent>\r\n\t\t\t\t</div>\r\n\t\t\t\t<DialogActions className={classes.actionContent}>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tfilters.main.liha = null;\r\n\t\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t\t\tsetSort({})\r\n\t\t\t\t\t\tclearFilters()\r\n\t\t\t\t\t}} color=\"primary\" >\r\n\t\t\t\t\t\tClear Filters\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tsetOpenFilter()\r\n\t\t\t\t\t\tonApply(filters, sort)\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\tApply\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tcurrentFilters: state.food.filters,\r\n\t\tfiltersOpen: state.food.filtersOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Filters)","import React from 'react'\r\n\r\nexport const boldSearch = (text, search) => {\r\n\tif (!text || !search) return text;\r\n\tsearch = search.toLowerCase()\r\n\ttext = text.toLowerCase()\r\n\tconst split = text.split(search);\r\n\tconst bolded = split.map((x, i) => {\r\n\t\tif (i === split.length - 1) return x;\r\n\t\treturn (<span key={i}>{x}<b>{search}</b></span>)\r\n\t})\r\n\treturn (\r\n\t\t<span>\r\n\t\t\t{bolded.map(x => x)}\r\n\t\t</span>\r\n\t)\r\n}","export const setFilters = (filters) => {\r\n\treturn { type: \"SET_FILTERS\", filters }\r\n}\r\n\r\nexport const selectFood = (food) => {\r\n\treturn { type: \"SELECT_FOOD\", food}\r\n}\r\n\r\nexport const setFoods = (foods) => {\r\n\treturn { type: \"SET_FOODS\", foods}\r\n}\r\n\r\nexport const onSetOpenFilters = () => {\r\n\treturn { type: \"SET_OPEN_FILTERS\"}\r\n}\r\n\r\nexport const distincts = (res) => {\r\n\treturn { type: \"SET_DISTINCTS\", res}\r\n}\r\n\r\nexport const setEditFood = (food) => {\r\n\treturn { type: \"EDIT_FOOD\", food}\r\n}\r\n\r\nexport const setErrors = (errors) => {\r\n\treturn { type: \"SET_ERRORS\", errors}\r\n}\r\n\r\nexport const setLatestFood = (food) => {\r\n\treturn { type: \"SET_LATEST_FOOD\", food}\r\n}\r\n\r\nexport const setOptions = (options) => {\r\n\treturn { type: \"SET_SEARCH_OPTIONS\", options }\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport Box from '@material-ui/core/Box';\r\nimport { boldSearch } from '../core/BoldSearch'\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setOptions } from './foodAction'\r\nimport { foods } from '../api'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tmaxWidth: \"300px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\",\r\n\t\twidth: \"100%\"\r\n\t},\r\n\tsearchDiv: {\r\n\t\twidth: \"60%\"\r\n\t},\r\n\tbtnDiv: {\r\n\t\twidth: \"40%\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tpadding: {\r\n\t\tpadding: theme.spacing(2)\r\n\t}\r\n}))\r\n\r\nfunction Search(props) {\r\n\tconst classes = useStyles()\r\n\tconst { search, onSelectFood, options, onSetOptions } = props\r\n\tconst [searchState, setSearchState] = useState(search)\r\n\r\n\tconst setSearch = search => {\r\n\t\tsetSearchState(search)\r\n\t\tonSetOptions(search)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box display=\"block\" justifyContent=\"center\" className={classes.padding}>\r\n\t\t\t<Autocomplete\r\n\t\t\t\toptions={options}\r\n\t\t\t\tgetOptionLabel={option => option.name}\r\n\t\t\t\trenderOption={option => boldSearch(option.name, searchState)}\r\n\t\t\t\trenderInput={params => {\r\n\t\t\t\t\tvar { InputProps, ...rest } = params;\r\n\t\t\t\t\tInputProps.startAdornment = (\r\n\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t\t\t</InputAdornment >)\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\tplaceholder=\"Search...\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tvalue={searchState}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tonChange={e => setSearch(e.target.value)}\r\n\t\t\t\t\t\t\tInputProps={InputProps}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t\tonChange={(e, value) => {\r\n\t\t\t\t\tonSelectFood(value)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t</ Box>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\toptions: state.food.searchOptions\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetOptions: search => {\r\n\t\t\tif (!search.length)\r\n\t\t\t\treturn dispatch(setOptions([]))\r\n\t\t\tconst query = { $regex: search }\r\n\t\t\tfoods.find(query)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setOptions(res.data))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Search)","const dayMs = 24 * 60 * 60 * 1000\r\n\r\nconst getShortTime = (date, short) => {\r\n\tconst d = date.getDate()\r\n\tconst m = date.getMonth() + 1\r\n\tif (short) return `${d}.${m}`\r\n\tconst year = date.getFullYear().toString().substr(2)\r\n\treturn `${d}.${m}.${year}`\r\n}\r\n\r\nconst getDateText = (start, end) => {\r\n\tconst numDays = Math.floor((end - start) / dayMs)\r\n\tconst days = numDays < 2 ? \"day\" : \"days\"\r\n\tconst today = new Date()\r\n\tconst diff = Math.round((today - end) / dayMs)\r\n\tvar ago;\r\n\tif (diff > 356) {\r\n\t\tago = \"Over a Year ago\"\r\n\t} else if (diff > 30) {\r\n\t\tconst m = Math.round(diff / 30)\r\n\t\tago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff > 7) {\r\n\t\tconst w = Math.round(diff / 7)\r\n\t\tago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff > 0) {\r\n\t\tago = `${diff} day${diff > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff === 0) {\r\n\t\tago = \"today\"\r\n\t} else if (diff === -1) {\r\n\t\tago = \"tomorrow\"\r\n\t} else if (diff < -1) {\r\n\t\tago = `in ${diff * (-1)} days`\r\n\t}\r\n\treturn `${ago} - ${getShortTime(start, true)}-${getShortTime(end)} (${numDays} ${days} food)`\r\n}\r\n\r\n/**\r\n * dates = Array of date objects\r\n * return Array of strings\r\n * @param {Array} dates \r\n */\r\nexport default (dates, maxLength = 10) => {\r\n\tif (!dates.length) return []\r\n\tdates = dates.sort((a, b) => b - a)\r\n\tconst arr = []\r\n\tvar firstDate = dates[0]\r\n\tvar latestDate = dates[0]\r\n\tdates.forEach((date, i) => {\r\n\t\tif (arr.length >= maxLength) return arr\r\n\t\t// start of new date clamp\r\n\t\tif (latestDate - date > 2 * dayMs ) {\r\n\t\t\tarr.push(getDateText(firstDate, latestDate))\r\n\t\t\tfirstDate = date;\r\n\t\t\tlatestDate = date;\r\n\t\t\treturn\r\n\t\t}\r\n\t\tfirstDate = date\r\n\t\tif (i === dates.length - 1) {\r\n\t\t\tarr.push(getDateText(firstDate, latestDate))\r\n\t\t}\r\n\t});\r\n\treturn arr\r\n}","import React from 'react';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport combineDates from './combineDates';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t},\r\n\thighlight:\r\n\t\ttheme.palette.type === 'light'\r\n\t\t\t? {\r\n\t\t\t\tcolor: theme.palette.secondary.main,\r\n\t\t\t\tbackgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n\t\t\t}\r\n\t\t\t: {\r\n\t\t\t\tcolor: theme.palette.text.primary,\r\n\t\t\t\tbackgroundColor: theme.palette.secondary.dark,\r\n\t\t\t},\r\n\ttitle: {\r\n\t\tflex: '1 1 100%',\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1,\r\n\t},\r\n\tbutton: {\r\n\t\tmarginRight: theme.spacing(2),\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tminWidth: \"133px\",\r\n\t}\r\n}));\r\n\r\n\r\nexport default (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { columns, data, sort, setSort, limit, setLimit, onSelectFood, onAddFood, page, setPage, setOpenFilter } = props;\r\n\tif (!data) return (\r\n\t\t<div />\r\n\t)\r\n\r\n\tconst foods = data.data\r\n\tconst count = data.total || 0;\r\n\tconst pager = count === 0 ? 0 : page;\r\n\r\n\tconst handleChange = (name) => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) sort[name] = 1\r\n\t\telse if (value > 0) sort[name] = -1\r\n\t\telse delete sort[name]\r\n\t\tsetSort(sort)\r\n\t}\r\n\r\n\tconst tableToolbar = (\r\n\t\t<Toolbar >\r\n\t\t\t<Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t\tFoods\r\n\t\t  \t\t</Typography>\r\n\t\t\t<Tooltip title=\"Add New Food\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={onAddFood}\r\n\t\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.button}\r\n\t\t\t\t\tsize=\"small\" >\r\n\t\t\t\t\tAdd Food\r\n\t\t\t\t</Button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"Filter list\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tendIcon={<FilterListIcon />}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tclassName={classes.button}\r\n\t\t\t\t\tonClick={() => { setOpenFilter() }}>\r\n\t\t\t\t\tFilter\r\n\t\t\t\t\t</Button>\r\n\t\t\t</Tooltip>\r\n\t\t</Toolbar>\r\n\t)\r\n\r\n\tconst getSortDirection = name => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) return false;\r\n\t\tif (value > 0) return \"asc\"\r\n\t\treturn \"desc\"\r\n\t}\r\n\r\n\tconst tableHeaders = (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t{columns.map((name, i) => (\r\n\t\t\t\t\t<TableCell key={i}\r\n\t\t\t\t\t\tclassName={classes.root}\r\n\t\t\t\t\t\talign={\"left\"}\r\n\t\t\t\t\t\tpadding=\"none\"\r\n\t\t\t\t\t\tsortDirection={getSortDirection(name)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\tactive={Boolean(sort[name])}\r\n\t\t\t\t\t\t\tdirection={getSortDirection(name) || \"asc\"}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\thandleChange(name)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t)\r\n\r\n\tconst tableBody = (\r\n\t\t<TableBody>\r\n\t\t\t{foods.map((d, i) => (\r\n\t\t\t\t<TableRow\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\thover\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\tonSelectFood(d)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.maintype}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.sidetype.join(\", \")}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.name}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.timeseaten}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.lasteaten && d.lasteaten.length ? \r\n\t\t\t\t\t\tcombineDates(d.lasteaten.map(x => new Date(x)), 1)[0].split(\" - \")[0]\r\n\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.time}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.foodamount}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t</TableRow>\r\n\t\t\t))}\r\n\t\t</TableBody>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{tableToolbar}\r\n\t\t\t<TableContainer>\r\n\t\t\t\t<Table size={'medium'} >\r\n\t\t\t\t\t{tableHeaders}\r\n\t\t\t\t\t{tableBody}\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={count}\r\n\t\t\t\trowsPerPage={limit}\r\n\t\t\t\tonChangeRowsPerPage={e => setLimit(e.target.value)}\r\n\t\t\t\trowsPerPageOptions={[10,20,40,50]}\r\n\t\t\t\tpage={pager}\r\n\t\t\t\tonChangePage={(e, newPage) => {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\tsetPage(newPage)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, Button, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n}))\r\n\r\nexport default ({ open, onCancel, onOk, title, text, cancelText, okText }) => {\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={oncancel} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={onCancel} color=\"primary\">\r\n\t\t\t\t\t\t{cancelText || \"Cancel\"}\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={onOk} color=\"primary\">\r\n\t\t\t\t\t\t{okText || \"Apply\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, OutlinedInput, DialogTitle, DialogContent, TextField, MenuItem, FormControl, InputLabel, Select, Checkbox, ListItemText, FormHelperText } from '@material-ui/core';\r\n\r\nimport { setEditFood, setErrors, selectFood } from './foodAction'\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\twidth: \"250px\",\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\taddButton: {\r\n\t\tminWidth: \"100px\",\r\n\t\tmaxWidth: \"150px\",\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t\tcolor: theme.palette.primary.main\r\n\t},\r\n\tsideType: {\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tdialogContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tmargin: \"auto\",\r\n\t\twidth: \"fit-content\"\r\n\t}\r\n}))\r\n\r\nconst distDayTypes = [\r\n\t{ label: \"1 day\", value: 1 },\r\n\t{ label: \"2 days\", value: 2 },\r\n\t{ label: \"3 days\", value: 3 },\r\n\t{ label: \"4 days\", value: 4 },\r\n\t{ label: \"5 days\", value: 5 },\r\n]\r\n\r\nconst FoodEdit = ({ user, foodEdit, open, onSetEditFood, distMainTypes, distSideTypes, onSaveFood, onDeleteFood, errors, onUpdate }) => {\r\n\tconst classes = useStyles()\r\n\tvar food = Object.assign({}, foodEdit);\r\n\r\n\tconst [mainType, setMainType] = useState(food.maintype)\r\n\tconst [foodAmount, setFoodAmount] = useState(food.foodamount.toString())\r\n\tconst [sideTypes, setSideTypes] = useState(food.sidetype)\r\n\tconst [name, setName] = useState(food.name)\r\n\tconst [recipe, setRecipe] = useState(food.link)\r\n\tconst [eaten, setEaten] = useState(food.timeseaten)\r\n\tconst [cookTime, setCookTime] = useState(food.time)\r\n\tconst [deleteOpen, setDeleteOpen] = useState(false)\r\n\r\n\tconst constructFood = () => {\r\n\t\treturn {\r\n\t\t\t_id: food._id,\r\n\t\t\tname: name,\r\n\t\t\tlink: recipe,\r\n\t\t\tmaintype: mainType,\r\n\t\t\tsidetype: sideTypes,\r\n\t\t\tfoodamount: foodAmount,\r\n\t\t\ttime: cookTime,\r\n\t\t\ttimeseaten: eaten\r\n\t\t}\r\n\t}\r\n\r\n\tconst validateTime = (value) => {\r\n\t\tconst regex = new RegExp(\"[^0-9]\")\r\n\t\tif (regex.test(value)) return\r\n\t\tsetCookTime(value)\r\n\t}\r\n\r\n\tconst SelectField = ({ label, value, onChange, types }) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.selectFieldContainer}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tselect\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e => onChange(e.target.value)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{types.map((x, i) => (\r\n\t\t\t\t\t\t<MenuItem key={i} value={x.value || x}>\r\n\t\t\t\t\t\t\t{x.label || x}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</TextField>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst sideTypeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<FormControl className={classes.selectField} variant=\"outlined\"\r\n\t\t\t\terror={errors.includes(\"side\")}\r\n\t\t\t>\r\n\t\t\t\t<InputLabel className={classes.sideType}>Side Types</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tmultiline={true}\r\n\t\t\t\t\tvalue={sideTypes}\r\n\t\t\t\t\tonChange={e => setSideTypes(e.target.value)}\r\n\t\t\t\t\tinput={<OutlinedInput />}\r\n\t\t\t\t\trenderValue={sideTypes => sideTypes.join(\", \")}\r\n\t\t\t\t>\r\n\t\t\t\t\t{distSideTypes.map(type => (\r\n\t\t\t\t\t\t<MenuItem key={type} value={type}>\r\n\t\t\t\t\t\t\t<Checkbox checked={sideTypes.includes(type)} color=\"primary\" />\r\n\t\t\t\t\t\t\t<ListItemText primary={type} />\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t\t<FormHelperText>{errors.includes(\"side\") ? \"Must have at least one side type\" : \"\"}</FormHelperText>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst nameElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Name\"}\r\n\t\t\t\tvalue={name}\r\n\t\t\t\tmultiline={true}\r\n\t\t\t\tonChange={value => setName(value.target.value)}\r\n\t\t\t\terror={errors.includes(\"name\")}\r\n\t\t\t\thelperText={errors.includes(\"name\") ? \"Name can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst speedElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Cooking Time\"\r\n\t\t\t\tvalue={cookTime}\r\n\t\t\t\tonChange={e => validateTime(e.target.value)}\r\n\t\t\t\terror={errors.includes(\"time\")}\r\n\t\t\t\thelperText={errors.includes(\"time\") ? \"Cooking time can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst recipeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Recipe\"}\r\n\t\t\t\tvalue={recipe}\r\n\t\t\t\tmultiline={!recipe.includes(\"http\")}\r\n\t\t\t\tonChange={e => setRecipe(e.target.value)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst eatenElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Times Eaten\"\r\n\t\t\t\tvalue={eaten}\r\n\t\t\t\tonChange={e => setEaten(e.target.value)}\r\n\t\t\t\tdisabled={user.role !== \"admin\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst editContent = (\r\n\t\t<React.Fragment>\r\n\t\t\t{nameElement}\r\n\t\t\t<SelectField label={\"Main Type\"} value={mainType} onChange={(value) => setMainType(value)} types={distMainTypes} />\r\n\t\t\t{sideTypeElement}\r\n\t\t\t<SelectField label={\"Food Amount\"} value={foodAmount} onChange={(value) => setFoodAmount(value)} types={distDayTypes} />\r\n\t\t\t{speedElement}\r\n\t\t\t{recipeElement}\r\n\t\t\t{eatenElement}\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst deleteFood = (\r\n\t\t<Button startIcon={<DeleteForeverIcon />} onClick={() => setDeleteOpen(true)}>\r\n\t\t\tDelete\r\n\t\t</Button>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={() => onSetEditFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t<div className={classes.center}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t<div className={classes.div} />\r\n\t\t\t\t\t\t{food._id ? deleteFood : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent >\r\n\t\t\t\t\t<form className={classes.dialogContainer} noValidate>\r\n\t\t\t\t\t\t{editContent}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSetEditFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tonUpdate()\r\n\t\t\t\t\t\tonSaveFood(constructFood())\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\t{food.id ? \"Apply\" : \"Add\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<BackDialog\r\n\t\t\t\topen={deleteOpen}\r\n\t\t\t\tonCancel={() => setDeleteOpen(false)}\r\n\t\t\t\tonOk={() => {\r\n\t\t\t\t\tsetDeleteOpen(false)\r\n\t\t\t\t\tonDeleteFood(food._id)\r\n\t\t\t\t\tonUpdate()\r\n\t\t\t\t}}\r\n\t\t\t\ttitle=\"Delete Food\"\r\n\t\t\t\ttext=\"Are you sure?\"\r\n\t\t\t\tokText=\"Delete\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\tconst d = state.food.distincts\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\topen: state.food.foodEditOpen,\r\n\t\tdistMainTypes: d.main || [],\r\n\t\tdistSideTypes: d.side || [],\r\n\t\terrors: state.food.errors\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t\tdispatch(setErrors([]))\r\n\t\t},\r\n\t\tonDeleteFood: (id) => {\r\n\t\t\tif (!id) return\r\n\t\t\tfoods.remove(id)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch(setMessage(\"Food Deleted\"))\r\n\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tonSaveFood: (food) => {\r\n\t\t\tvar errors = []\r\n\t\t\tif (!food.name) errors.push(\"name\")\r\n\t\t\tif (!food.sidetype.length) errors.push(\"side\")\r\n\t\t\tif (!food.time) errors.push(\"time\")\r\n\t\t\tif (errors.length) {\r\n\t\t\t\treturn dispatch(setErrors(errors))\r\n\t\t\t} else {\r\n\t\t\t\tif (food._id) {\r\n\t\t\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('Food Updated'))\r\n\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfoods.create(food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('New Food Added'))\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FoodEdit)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Dialog, DialogActions, TextField, Button, DialogTitle, DialogContent, IconButton, Table, TableRow, TableCell, TableBody, Link, TableHead, Typography } from '@material-ui/core';\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport moment from 'moment-timezone'\r\nimport { selectFood, setEditFood } from './foodAction'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport combineDates from '../core/combineDates';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tspread: theme.spreadDivColumn,\r\n\tcenterColumns: theme.centerDivColumn,\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(3)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\tdatePickerTextfield: {\r\n\t\twidth: \"110px\"\r\n\t},\r\n\tbutton: {\r\n\t\twidth: \"180px\",\r\n\t\theight: \"60px\"\r\n\t}\r\n}))\r\n\r\nmoment.locale(\"en\")\r\nmoment.updateLocale(\"en\", {\r\n\tweek: { dow: 1, doy: 0 }\r\n})\r\n\r\n\r\n// const toFineTime = (time) => {\r\n// \tconst today = new Date()\r\n// \tconst diff = Math.round((today - time) / (24 * 60 * 60 * 1000))\r\n// \tvar ago;\r\n// \tif (diff > 356) {\r\n// \t\tago = \"Over a Year ago\"\r\n// \t} else if (diff > 30) {\r\n// \t\tconst m = Math.round(diff / 30)\r\n// \t\tago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n// \t} else if (diff > 7) {\r\n// \t\tconst w = Math.round(diff / 7)\r\n// \t\tago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n// \t} else if (diff === 0) {\r\n// \t\tago = \"today\"\r\n// \t} else if (diff === -1) {\r\n// \t\tago = \"tomorrow\"\r\n// \t} else if (diff < -1) {\r\n// \t\tago = `in ${diff * (-1)} days`\r\n// \t}\r\n// \treturn `${time.getDate()}.${time.getMonth() + 1}.${time.getFullYear()} - ${ago}`\r\n// }\r\n\r\nconst getLatestFoodInfo = food => {\r\n\tvar lastDate = new Date(food.lasteaten.sort((a, b) => new Date(b) - new Date(a))[0])\r\n\tif (lastDate < new Date()) lastDate = new Date()\r\n\tconst startDate = new Date(lastDate.valueOf() + 24 * 60 * 60 * 1000)\r\n\tconst endDate = new Date(startDate.valueOf() + food.foodamount * 24 * 60 * 60 * 1000)\r\n\treturn {\r\n\t\tstartDate: startDate,\r\n\t\tendDate: endDate\r\n\t}\r\n}\r\n\r\nconst SelectedFood = ({ food, latestFood, onSelectFood, onSetEditFood, onUpdate, onFoodSelection }) => {\r\n\tconst classes = useStyles()\r\n\tconst latestFoodInfo = getLatestFoodInfo(latestFood)\r\n\tconst [startDate, setStartDate] = useState(latestFoodInfo.startDate)\r\n\tconst [endDate, setEndDate] = useState(latestFoodInfo.endDate)\r\n\r\n\tif (!food) return null;\r\n\r\n\tconst handleSelect = () => {\r\n\t\tvar days = [startDate.toDateString()]\r\n\t\tvar currDay = startDate\r\n\t\twhile (true) {\r\n\t\t\tvar newDay = new Date(currDay.valueOf() + 24 * 60 * 60 * 1000)\r\n\t\t\tif (newDay > endDate) break\r\n\t\t\tdays.push(newDay.toDateString())\r\n\t\t\tcurrDay = newDay\r\n\t\t}\r\n\t\tif (!food.lasteaten) food.lasteaten = [];\r\n\t\tfood.lasteaten = food.lasteaten.concat(days)\r\n\t\tfood.timeseaten = food.timeseaten + 1\r\n\t\tonFoodSelection(food)\r\n\t\tonUpdate()\r\n\t}\r\n\r\n\r\n\tconst historyContent = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<Table size=\"small\">\r\n\t\t\t\t<TableHead>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>History</TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t\t{food.lasteaten ? combineDates(food.lasteaten.map(x => new Date(x))).map((f, i) => (\r\n\t\t\t\t\t\t<TableRow key={i}>\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t{f}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t)) : <TableRow><TableCell>No recordings</TableCell></TableRow>}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst selectContent = (\r\n\t\t<div className={classes.centerColumns}>\r\n\t\t\t<div>\r\n\t\t\t\t{food.link.includes(\"http\") || food.link.includes(\"www\") ?\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t<Link href={food.link}>\r\n\t\t\t\t\t\t\tLink To Recipe\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t: null}\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.spread}>\r\n\t\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={startDate}\r\n\t\t\t\t\t\tonChange={date => setStartDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"Start Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={endDate}\r\n\t\t\t\t\t\tonChange={date => setEndDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"End Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tstartIcon={<CheckIcon />}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t\tonClick={handleSelect}\r\n\t\t\t>Select Food</Button>\r\n\t\t\t{historyContent}\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={true} onClose={() => onSelectFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle >\r\n\t\t\t\t\t<div className={classes.spread}>\r\n\t\t\t\t\t\t{food.name}\r\n\t\t\t\t\t\t<IconButton onClick={() => onSetEditFood(food)}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{selectContent}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSelectFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfood: state.food.selectedFood,\r\n\t\tlatestFood: state.food.latestFood,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t},\r\n\t\tonFoodSelection: (food) => {\r\n\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setMessage(`Going to eat ${food.name}`))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tdispatch(setError(err.message))\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectedFood)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { foods } from '../api'\r\nimport Filters from './Filters'\r\nimport Search from './Search'\r\nimport Table from '../core/Table'\r\nimport FoodEdit from './foodEdit'\r\nimport SelectedFood from './SelectedFood'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setFilters, selectFood, setFoods, onSetOpenFilters, distincts, setEditFood, setLatestFood } from './foodAction'\r\nimport { setError } from '../App/AppActions';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: theme.root,\r\n}))\r\n\r\nconst columns = [\"Main\", \"Side\", \"Food\", \"Count\", \"LastEaten\", \"Cooking Time\", \"Food Amount\"]\r\n\r\nconst defaultFood = {\r\n\tname: \"Name\",\r\n\tmaintype: \"liha\",\r\n\tsidetype: [\"pasta\"],\r\n\tfoodamount: 1,\r\n\tlink: \"\",\r\n\ttime: 60,\r\n\ttimeseaten: 0\r\n}\r\n\r\nconst Foods = ({ foods, sort, onSelectFood, onRefresh, filters, search, setOpenFilter, page, limit, selectedFood, foodEdit, initFilters, onSetEditFood }) => {\r\n\tconst classes = useStyles()\r\n\r\n\tif (!foods.limit) {  // Init fetching\r\n\t\tinitFilters()\r\n\t\tonRefresh(page, filters, sort, search, limit)\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<Search search={search} onSelectFood={onSelectFood} />\r\n\t\t\t<Filters\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tcurrentFilters={filters}\r\n\t\t\t\tcurrentSort={sort}\r\n\t\t\t\tonApply={(f, s) => onRefresh(page, f, s, search, limit)}\r\n\t\t\t\tclearFilters={() => initFilters()}\r\n\t\t\t/>\r\n\t\t\t<Table\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tdata={foods}\r\n\t\t\t\tsort={sort}\r\n\t\t\t\tlimit={limit}\r\n\t\t\t\tsetSort={sort => onRefresh(page, filters, sort, search, limit)}\r\n\t\t\t\tsetLimit={limit => onRefresh(page, filters, sort, search, limit)}\r\n\t\t\t\tonSelectFood={onSelectFood}\r\n\t\t\t\tonAddFood={() => onSetEditFood(defaultFood)}\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tsetPage={p => onRefresh(p, filters, sort, search, limit)}\r\n\t\t\t/>\r\n\t\t\t{selectedFood ? <SelectedFood onUpdate={() => onRefresh(page, filters, sort, search, limit)} /> : null}\r\n\t\t\t{foodEdit ? <FoodEdit foodEdit={foodEdit} onUpdate={() => onRefresh(page, filters, sort, search, limit)} /> : null}\r\n\t\t</Paper>\r\n\t)\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfoods: state.food.foods,\r\n\t\tsort: state.food.sort,\r\n\t\tfilters: state.food.filters,\r\n\t\tsearch: state.food.search,\r\n\t\tpage: state.food.page,\r\n\t\tlimit: state.food.limit,\r\n\t\tselectedFood: state.food.selectedFood,\r\n\t\tfoodEdit: state.food.foodEdit,\r\n\t}\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonRefresh: (page, filters, sort, search, limit) => {\r\n\t\t\tfoods.list(filters, page, sort, search, limit)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tdispatch(setFoods({\r\n\t\t\t\t\t\tfoods: result,\r\n\t\t\t\t\t\tfilters: filters,\r\n\t\t\t\t\t\tsort: sort,\r\n\t\t\t\t\t\tpage: page,\r\n\t\t\t\t\t\tlimit: limit,\r\n\t\t\t\t\t\tsearch: search\r\n\t\t\t\t\t}))\r\n\t\t\t\t\tfoods.lastEaten()\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tdispatch(setLatestFood(res))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tsetOpenFilter: () => {\r\n\t\t\tdispatch(onSetOpenFilters())\r\n\t\t},\r\n\t\tinitFilters: () => {\r\n\t\t\tvar filters = {\r\n\t\t\t\tmain: {},\r\n\t\t\t\tside: {},\r\n\t\t\t\tspeed: {$lt: 180},\r\n\t\t\t\tday: {}\r\n\t\t\t}\r\n\t\t\tfoods.distincts()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(distincts(res))\r\n\t\t\t\t\tres.main.forEach(m => {\r\n\t\t\t\t\t\tfilters.main[m] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.side.forEach(s => {\r\n\t\t\t\t\t\tfilters.side[s] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.day.forEach(d => {\r\n\t\t\t\t\t\tfilters.day[d] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tdispatch(setFilters(filters))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => setError(err.message))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Foods)","import React from 'react'\r\n\r\nfunction Shoplist(props) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tshoplist\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Shoplist","export const setData = (data) => {\r\n\treturn { type: \"SET_DATA\", data }\r\n}\r\n\r\nexport const setDeleteId = (id) => {\r\n\treturn { type: \"SET_DELETE_ID\", id}\r\n} \r\n\r\nexport const setDistinctNotes = (notes) => {\r\n    return { type: \"SET_DISTINCT_NOTES\", notes}\r\n}","const formatDate = oDate => {\r\n    let date = new Date(oDate)\r\n    const month = date.getMonth() + 1\r\n    const day = date.getDate()\r\n    return `${day}.${month}`\r\n}\r\n\r\nconst createDefaultContent = payments => {\r\n    let paymentText = \"\";\r\n    payments.forEach(p => {\r\n        paymentText += `${p.notes}, ${p.amount}, erpiv: ${formatDate(p.date)} (${p.imageName})\\n`;\r\n    })\r\n    return `Hei,\\n\\nLiitteen taas laskuja:\\n\\n${paymentText}\\nTerveisin,\\nKimi Heinonen\\n`\r\n}\r\n\r\nexport const openOnMail = (payments) => {\r\n    let from = process.env.REACT_APP_MAIL_FROM;\r\n    let to = process.env.REACT_APP_MAIL_TO;\r\n    let title = \"Laskuja\";\r\n    let content = createDefaultContent(payments);\r\n    window.open(`mailto:${to}?subject=${title}&body=${encodeURIComponent(content)}`);\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper, Button, TextField, Table, TableContainer, TableRow, TableCell, TableBody, TableHead, InputAdornment, IconButton, Checkbox, Tooltip } from '@material-ui/core'\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport { connect } from 'react-redux'\r\n\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\n\r\nimport { boldSearch } from '../core/BoldSearch'\r\nimport { payments } from '../api'\r\nimport { setError, setMessage } from '../App/AppActions';\r\nimport { setData, setDeleteId, setDistinctNotes } from './paymentAction'\r\nimport { openOnMail } from './MailDialog'\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: theme.root,\r\n    centerDivColumn: theme.centerDivColumn,\r\n    spacings: {\r\n        padding: theme.spacing(2),\r\n        width: \"10px\"\r\n    },\r\n    datePickerTextfieldWide: {\r\n        width: \"110px\"\r\n    },\r\n    datePickerTextfieldSmall: {\r\n        width: \"70px\"\r\n    },\r\n    tableIcon: {\r\n        width: \"5px\"\r\n    },\r\n    spacing: {\r\n        margin: theme.spacing(2),\r\n        width: \"200px\"\r\n    },\r\n    sendMailButton: {\r\n        marginLeft: \"-30px\",\r\n        marginRight: \"-30px\"\r\n    }\r\n}))\r\n\r\n// const MONHTLY_ALLOWANCE = 700\r\n\r\nconst formatDate = date => {\r\n    if (typeof date === \"string\") date = new Date(date)\r\n    const year = date.getFullYear()\r\n    const month = date.getMonth() + 1\r\n    const day = date.getDate()\r\n    return `${day}.${month}.${year}`\r\n}\r\n\r\nconst formatNotes = note => {\r\n    if (!note) return \"\"\r\n    if (note.length < 50) return note;\r\n    return `${note.substr(0, 50)}...`\r\n}\r\n\r\nconst firstDate = new Date(2020, 0, 1)\r\nconst yearStart = new Date(new Date().getUTCFullYear(), 0, 1)\r\nconst yearEnd = new Date(new Date().getUTCFullYear(), 11, 31)\r\n\r\nfunction Payments(props) {\r\n    const classes = useStyles()\r\n    const { data, deleteId, distinctNotes } = props;\r\n    const { onGetData, onAddPayment, onSetDeleteId, onDeletePayment, onGetDistinctNotes, onSendMail } = props;\r\n\r\n    const [date, setDate] = useState(new Date())\r\n    const [amount, setAmount] = useState(\"\")\r\n    const [note, setNote] = useState(\"\")\r\n    const [autoCompleteKey, setAutoCompleteKey] = useState(true)\r\n    const [startDate, setStartDate] = useState(yearStart)\r\n    const [endDate, setEndDate] = useState(yearEnd)\r\n    const [image, setImage] = useState({});\r\n    const [inputRef, setInputRef] = useState(null);\r\n    const [toMailList, setToMailList] = useState([])\r\n\r\n    var total, perMonth;\r\n    useEffect(() => {\r\n        onGetData(startDate, endDate);\r\n    }, [startDate, endDate, onGetData])\r\n\r\n    useEffect(() => {\r\n        if (distinctNotes.length === 0)\r\n            onGetDistinctNotes();\r\n    }, [onGetDistinctNotes, distinctNotes])\r\n\r\n    if (data) {\r\n        total = data.reduce((total, x) => total + x.amount, 0).toFixed(1)\r\n        const months = data.length ?  (new Date(data[0].date).getMonth() - startDate.getMonth()) : 1;\r\n\r\n        perMonth = (total / months).toFixed(1);\r\n    }\r\n    const handleAddPayment = () => {\r\n        if (parseFloat(amount) <= 0) return\r\n        let payment = { date: date, amount: amount, notes: note }\r\n        if (image.name || image.data)\r\n            payment = { ...payment, imageName: image.name, imageData: image.data }\r\n        onAddPayment(payment, startDate, endDate)\r\n        setDate(new Date())\r\n        setAmount(\"\")\r\n        setNote(\"\")\r\n        autoCompleteKey(!autoCompleteKey) // To re-render cleared autoComplete\r\n        setImage({})\r\n    }\r\n\r\n    const AddImage = () => {\r\n        if ((image.name || image.data) && !window.confirm(\"Replace current image?\")) {\r\n            return;\r\n        }\r\n        if (!inputRef) {\r\n            console.error(\"No input Ref!!\")\r\n        } else {\r\n            inputRef.click();\r\n        }\r\n    }\r\n\r\n    const loadFile = () => {\r\n        if (typeof window.FileReader !== 'function') {\r\n            alert(\"The file API isn't supported on this browser yet.\");\r\n            return;\r\n        }\r\n        let input = document.getElementById('fileinput');\r\n        if (!input) {\r\n            alert(\"Um, couldn't find the fileinput element.\");\r\n        }\r\n        else if (!input.files) {\r\n            alert(\"This browser doesn't seem to support the 'files' property of file inputs.\");\r\n        }\r\n        else if (!input.files[0]) {\r\n            alert(\"Please select an Excel file before clicking 'Process'\");\r\n        }\r\n        else {\r\n            const selectedFile = input.files[0]\r\n\r\n            input.files = null // Without these the second upload try won't fire the onChange event\r\n            input.value = ''\r\n\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = e => {\r\n                setImage({\r\n                    name: selectedFile.name,\r\n                    data: e.target.result\r\n                })\r\n            }\r\n            fileReader.readAsDataURL(selectedFile);\r\n        }\r\n    }\r\n\r\n    const downloadImage = (image) => {\r\n        var a = document.createElement(\"a\");\r\n        a.href = image.data;\r\n        a.download = image.name;\r\n        a.click();\r\n    }\r\n\r\n    const handleMailList = (data) => {\r\n        // Already in the list -> remove it\r\n        if (toMailList.find(d => d._id === data._id) != null) {\r\n            setToMailList(toMailList.filter(x => x._id !== data._id));\r\n        } else {\r\n            toMailList.push(data);\r\n            setToMailList([...toMailList]);\r\n        }\r\n\r\n    }\r\n\r\n    const openMailAndMarkSend = () => {\r\n        openOnMail(toMailList);\r\n        onSendMail(startDate, endDate, toMailList);\r\n        setToMailList([])\r\n    }\r\n\r\n    const datePicker = (label, value, setValue, views, format, minDate = new Date(2020, 0, 1), maxDate = yearEnd) => (\r\n        <MuiPickersUtilsProvider utils={MomentUtils}>\r\n            <DatePicker\r\n                label={label}\r\n                format={format}\r\n                views={views}\r\n                minDate={minDate}\r\n                maxDate={maxDate}\r\n                showTodayButton={true}\r\n                value={value}\r\n                onChange={date => setValue(date._d)}\r\n                animateYearScrolling\r\n                TextFieldComponent={(props) => (\r\n                    <TextField\r\n                        label={label}\r\n                        onClick={props.onClick}\r\n                        value={props.value}\r\n                        InputProps={{\r\n                            endAdornment: <TodayIcon />\r\n                        }}\r\n                        size=\"small\"\r\n                        className={format.split(\".\").length > 2 ? classes.datePickerTextfieldWide : classes.datePickerTextfieldSmall}\r\n                    />\r\n                )}\r\n            />\r\n        </MuiPickersUtilsProvider>\r\n    )\r\n\r\n    const addPayment = (\r\n        <div className={classes.centerDivColumn}>\r\n            <div className={`${classes.spacing} ${classes.centerDivColumn}`}>\r\n                {datePicker(\"Date\", date, setDate, [\"year\", \"month\", \"date\"], \"DD.MM.YYYY\")}\r\n            </div>\r\n            <div className={classes.spacing}>\r\n                <TextField\r\n                    value={amount}\r\n                    type=\"number\"\r\n                    variant=\"outlined\"\r\n                    onChange={e => setAmount(e.target.value.replace(\",\", \".\"))}\r\n                    InputProps={{\r\n                        endAdornment: <InputAdornment position=\"end\"></InputAdornment>,\r\n                    }}\r\n                />\r\n            </div>\r\n            <div className={classes.spacing}>\r\n                <Autocomplete\r\n                    key={autoCompleteKey}\r\n                    freeSolo\r\n                    options={distinctNotes}\r\n                    renderOption={option => boldSearch(option, note)}\r\n                    renderInput={props =>\r\n                        <TextField\r\n                            {...props}\r\n                            label=\"Note\"\r\n                            value={note}\r\n                            fullWidth\r\n                            onChange={e => setNote(e.target.value)} />\r\n                    }\r\n                    onChange={(e, value) => setNote(value || \"\")}\r\n                />\r\n            </div>\r\n            <Button\r\n                className={classes.spacing}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => AddImage()}>\r\n                Add Image\r\n            </Button>\r\n            {image.name &&\r\n                <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n                    <Button onClick={() => downloadImage(image)}>\r\n                        {image.name}\r\n                    </Button>\r\n                    <IconButton onClick={() => setImage({})}>\r\n                        <DeleteForeverIcon />\r\n                    </IconButton>\r\n                </div>}\r\n            <Button\r\n                className={classes.spacing}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<AddIcon />}\r\n                onClick={() => handleAddPayment()}>\r\n                Add Payment\r\n\t\t\t</Button>\r\n        </div>\r\n    )\r\n\r\n    const table = (\r\n        <TableContainer component={Paper}>\r\n            <Table>\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>{`Total: ${total} `}</TableCell>\r\n                        <TableCell>{`PerMonth: ${perMonth} `}</TableCell>\r\n                        <TableCell />\r\n                        <TableCell />\r\n                        <TableCell />\r\n                        <TableCell>\r\n                            {datePicker(\"from\", startDate, setStartDate, [\"year\", \"month\"], \"MM.YY\", firstDate, endDate)}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            {datePicker(\"to\", endDate, setEndDate, [\"year\", \"month\"], \"MM.YY\", startDate, yearEnd)}\r\n                        </TableCell>\r\n                    </TableRow>\r\n                    <TableRow>\r\n                        <TableCell>Created</TableCell>\r\n                        <TableCell>Bill Due</TableCell>\r\n                        <TableCell>Amount</TableCell>\r\n                        <TableCell>Notes</TableCell>\r\n                        <TableCell>Pdf</TableCell>\r\n                        <TableCell>\r\n                            {toMailList.length > 0 ?\r\n                                <Button variant=\"contained\" color=\"primary\"\r\n                                    className={classes.sendMailButton}\r\n                                    onClick={openMailAndMarkSend}\r\n                                    endIcon={<MailIcon />}>\r\n                                    Send\r\n                                </Button>\r\n                                : <IconButton disabled ><MailIcon /></IconButton>}\r\n                        </TableCell>\r\n                        <TableCell className={classes.tableIcon}></TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                    {data ? data.map(d => (\r\n                        <TableRow key={d.date}>\r\n                            <TableCell>{formatDate(d.createdAt)}</TableCell>\r\n                            <TableCell>{formatDate(d.date)}</TableCell>\r\n                            <TableCell>{d.amount} </TableCell>\r\n                            <TableCell>{formatNotes(d.notes)}</TableCell>\r\n                            <TableCell>\r\n                                {d.imageName &&\r\n                                    <Button onClick={() => downloadImage({ name: d.imageName, data: d.imageData })}>\r\n                                        {d.imageName}\r\n                                    </Button>\r\n                                }\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <div>\r\n                                    <Checkbox\r\n                                        disabled={d.imageData == null}\r\n                                        checked={toMailList.find(x => x._id === d._id) != null}\r\n                                        onChange={() => handleMailList(d)}\r\n                                        color=\"primary\" />\r\n                                    {d.mailed &&\r\n                                        <Tooltip title=\"Mail sent\">\r\n                                            <IconButton><DoneAllIcon /></IconButton>\r\n                                        </Tooltip>\r\n                                    }\r\n                                </div>\r\n                            </TableCell>\r\n                            <TableCell className={classes.tableIcon}>\r\n                                <IconButton onClick={() => onSetDeleteId(d._id)}>\r\n                                    <DeleteForeverIcon />\r\n                                </IconButton>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    )) : null}\r\n                </TableBody>\r\n            </Table>\r\n        </TableContainer>\r\n    )\r\n    return (\r\n        <React.Fragment>\r\n            <Paper className={classes.root}>\r\n                {addPayment}\r\n            </Paper>\r\n            {table}\r\n            <BackDialog\r\n                open={Boolean(deleteId)}\r\n                onClose={() => onSetDeleteId(null)}\r\n                title=\"Delete payment\"\r\n                text=\"Are you sure?\"\r\n                okText={\"Delete\"}\r\n                onOk={() => onDeletePayment(deleteId, startDate, endDate)}\r\n            />\r\n            <input type=\"file\"\r\n                id=\"fileinput\"\r\n                style={{ display: \"none\" }}\r\n                accept=\".pdf\"\r\n                ref={elem => setInputRef(elem)}\r\n                onChange={() => loadFile()} />\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        data: state.payment.data,\r\n        deleteId: state.payment.deleteId,\r\n        distinctNotes: state.payment.distinctNotes,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    const getData = (start, end) => {\r\n        payments.list({\r\n            date: {\r\n                $gt: start,\r\n                $lt: end\r\n            },\r\n            $sort: {\r\n                date: -1\r\n            }\r\n        }).then(res => dispatch(setData(res.data)))\r\n            .catch(err => dispatch(setError(err.message)))\r\n    }\r\n    return {\r\n        onGetData: (start, end) => getData(start, end),\r\n        onAddPayment: (payment, start, end) => {\r\n            payments.create(payment)\r\n                .then(res => {\r\n                    dispatch(setMessage(\"Payment Added\"))\r\n                    getData(start, end)\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onSetDeleteId: (id) => {\r\n            dispatch(setDeleteId(id))\r\n        },\r\n        onDeletePayment: (id, start, end) => {\r\n            payments.remove(id)\r\n                .then(res => {\r\n                    dispatch(setMessage(\"Payment Deleted\"))\r\n                    dispatch(setDeleteId(null))\r\n                    getData(start, end)\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onGetDistinctNotes: () => {\r\n            payments.list({})\r\n                .then(res => {\r\n                    const allNotes = res.data.map(x => x.notes)\r\n                    const distinctNotes = [...new Set(allNotes)]\r\n                    if (distinctNotes.length === 0)\r\n                        distinctNotes.push(\"...\")\r\n                    dispatch(setDistinctNotes(distinctNotes))\r\n                })\r\n                .catch(err => dispatch(setError(err.message)))\r\n        },\r\n        onSendMail: (start, end, paymentList) => {\r\n            paymentList.forEach(payment => {\r\n                payments.patch(payment._id, { ...payment, mailed: true })\r\n                    .then(res => {\r\n                        if (payment._id === paymentList[paymentList.length - 1]._id) {\r\n                            setTimeout(() => getData(start, end), 500);\r\n                        }\r\n                    })\r\n                    .catch(err => dispatch(setError(err.message)))\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Payments)","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport { Button } from '@material-ui/core'\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: theme.root,\r\n    floatRightBtn: {\r\n        float: \"right\",\r\n        margin: theme.spacing(2)\r\n    }\r\n}))\r\n\r\nconst Transactions = props => {\r\n    const classes = useStyles()\r\n    const [state, setState] = useState({\r\n        labelManagerOpen: true,\r\n    })\r\n    const imageLoadRef = useRef(null);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n    }, [])\r\n\r\n    const loadFile = () => {\r\n        if (typeof window.FileReader !== 'function') {\r\n            alert(\"The file API isn't supported on this browser yet.\")\r\n            return;\r\n        }\r\n        let input = document.getElementById(\"fileinput\");\r\n        if (!input)\r\n            console.error(\"Couldn't find the input element\");\r\n        else if (!input.files)\r\n            console.error(\"Input files error\");\r\n        else if (!input.files[0])\r\n            alert(\"Please select file first\")\r\n        else {\r\n            const selectedFile = input.files[0];\r\n\r\n            input.files = null; // Enables the onChange event to fire next time\r\n            input.value = '';\r\n\r\n            console.log(\"Selected file: \", selectedFile)\r\n\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = e => {\r\n                const foo = async () => {\r\n                    \r\n                }\r\n\r\n\r\n                foo()\r\n                // imageParser.create({ data: e.target.result })\r\n                //     .then(res => {\r\n                //         console.log(\"Got result: \", res)\r\n                //     })\r\n                //     .catch(err => {\r\n                //         console.log(\"ERROR: \", err)\r\n                //     })\r\n            }\r\n            fileReader.readAsDataURL(selectedFile);\r\n        }\r\n    }\r\n\r\n\r\n    return <div className={classes.root}>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={() => {\r\n            if (!imageLoadRef) {\r\n                console.log(\"No ref\")\r\n                return;\r\n            }\r\n            if (!imageLoadRef.current) {\r\n                console.log(\"No current\")\r\n                return;\r\n            }\r\n            console.log(\"Clicking ref\")\r\n            imageLoadRef.current.click();\r\n        }}>\r\n            Load image\r\n        </Button>\r\n        <Button\r\n            className={classes.floatRightBtn}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => {\r\n                browserHistory.push('/categories')\r\n            }}>\r\n            Manage categories\r\n            </Button>\r\n        <input type='file' id='fileinput' style={{ display: 'none' }}\r\n            accept=\".bmp, .jpg, .png, .pbm\"\r\n            ref={imageLoadRef} onChange={() => loadFile()} />\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        transactions: state.transactions\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Transactions)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n}))\r\n\r\nconst CategoriesContent = props => {\r\n    const classes = useStyles()\r\n\r\n    return (\r\n        <div>\r\n            CategoriesContent\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    \r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CategoriesContent)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    \r\n}))\r\n\r\nconst CategoryTypeContent = props => {\r\n    const classes = useStyles()\r\n    \r\n    return <div>\r\n        CategoryTypeContent\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    \r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CategoryTypeContent)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\r\n}))\r\n\r\nconst UnlabeledContent = props => {\r\n    const classes = useStyles()\r\n    const { transactions } = props;\r\n\r\n    console.log(transactions)\r\n\r\n    return (\r\n        <div>\r\n            {transactions && transactions.map(t => (\r\n                <div>\r\n                    {t.saaja}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    \r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UnlabeledContent)","import React, { useState, useEffect } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport CategoriesContent from './CategoriesContent'\r\nimport CategoryTypeContent from './CategoryTypeContent'\r\nimport UnlabeledContent from './UnlabeledContent'\r\nimport TabContent from '../core/TabContent'\r\n\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { setTransactions } from '../transactions/transactionActions'\r\nimport { categoriesApi, categoryTypeApi, transactionsApi } from '../api'\r\nimport { setError, setMessage } from '../App/AppActions';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: theme.root,\r\n    marginBtn: { margin: theme.spacing(2) },\r\n    paper: {\r\n        padding: theme.spacing(1),\r\n        margin: theme.spacing(2),\r\n        height: \"100%\"\r\n    }\r\n}))\r\n\r\nconst Categories = props => {\r\n    const classes = useStyles()\r\n    const [state, setState] = useState({\r\n        tabValue: 0\r\n    })\r\n    const { tabValue } = state;\r\n    const { onListTransactions, transactions, categories, categoryTypes } = props;\r\n\r\n    console.log(\"foo\", transactions)\r\n\r\n    useEffect(() => {\r\n        onListTransactions()\r\n    }, [])\r\n\r\n    return (\r\n        <div className={classes.root} style={{ height: \"100%\" }}>\r\n            <Button\r\n                className={classes.marginBtn}\r\n                startIcon={<ArrowBackIcon />}\r\n                onClick={() => {\r\n                    browserHistory.push('/transactions')\r\n                }}>\r\n                Back\r\n            </Button>\r\n            <Paper className={classes.paper} elevation={4}>\r\n                <Tabs\r\n                    variant=\"fullWidth\"\r\n                    className={classes.tabs}\r\n                    indicatorColor=\"primary\"\r\n                    textColor=\"primary\"\r\n                    value={tabValue}\r\n                    onChange={(e, value) => setState({ ...state, tabValue: value })}\r\n                >\r\n                    <Tab label=\"Categories\" />\r\n                    <Tab label=\"Category types\" />\r\n                    <Tab label=\"Unlabeled\" />\r\n                </Tabs>\r\n                <TabContent value={tabValue} index={0} >\r\n                    <CategoriesContent />\r\n                </TabContent>\r\n                <TabContent value={tabValue} index={1} >\r\n                    <CategoryTypeContent />\r\n                </TabContent>\r\n                <TabContent value={tabValue} index={2} >\r\n                    <UnlabeledContent \r\n                        transactions={transactions}\r\n                    />\r\n                </TabContent>\r\n            </Paper>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        transactions: state.transactions.transactions.data,\r\n        categories: state.categories.categories,\r\n        categoryTypes: state.categories.categoryTypes\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        onAddCategory: (name, main, sub, sub2) => {\r\n\r\n        },\r\n        onEditCategory: (id, name, main, sub, sub2) => {\r\n\r\n        },\r\n        onListCategories: () => {\r\n\r\n        },\r\n        onListTransactions: () => {\r\n            transactionsApi.list({ $limit: 10 })\r\n                .then(res => dispatch(setTransactions(res)))\r\n                .catch(err => dispatch(setError(err.message)))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Categories)","export const setTransactions = transactions => {\r\n    return { type: \"SET_TRANSACTION\", transactions}\r\n}","\r\nconst FIND_MAP = {\r\n    \"viitenumero\": \"viite\",\r\n    \"viite\": \"viite\",\r\n    \"fi01\": \"iban\"\r\n}\r\n\r\n\r\nexport const parseImageResult = data => {\r\n    const result = {\r\n        viite: { result: \"\", confidence: 0},\r\n        iban: { result: \"\", confidence: 0},\r\n        saaja: { result: \"\", confidence: 0},\r\n        euro: { result: 0, confidence: 0},\r\n        dueDate: { result: new Date, confidence: 0},\r\n    };\r\n\r\n    const tryFindViite = line => {\r\n        \r\n    }\r\n    \r\n    const tryFindIBAN = line => {\r\n        \r\n    }\r\n\r\n    const tryFindSaaja = line => {\r\n\r\n    }\r\n\r\n    const tryFindAmount = line => {\r\n\r\n    }\r\n\r\n    const tryFindDueDate = line => {\r\n\r\n    }\r\n\r\n    data.lines.forEach(line => {\r\n        line = line.toLowerCase()\r\n        tryFindViite(line);\r\n    });\r\n\r\n    const res = {}\r\n    Object.keys(result).forEach(k => res[k] = result[k].result)\r\n    return res\r\n}","import React, { useState, useRef } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, Dialog, DialogActions, DialogContent, TextField, CircularProgress, LinearProgress } from '@material-ui/core'\r\n\r\nimport { parseImageResult } from './textParser';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    progressDiv: {\r\n        position: \"absolute\",\r\n        bottom: \"5rem\",\r\n        width: \"100%\"\r\n    }\r\n}))\r\n\r\nconst SessionModal = props => {\r\n    const classes = useStyles()\r\n\r\n    const { worker, workerLoadProgress, modalOpen, onClose, onAdd } = props;\r\n    const [state, setState] = useState({\r\n        viite: \"\",\r\n        iban: \"\",\r\n        saaja: \"\",\r\n        euro: 0,\r\n        dueDate: new Date(),\r\n        image: null,\r\n    })\r\n    const imageLoadRef = useRef(null);\r\n\r\n    const handleChange = e => {\r\n        setState({ ...state, [e.target.name]: e.target.value })\r\n    }\r\n\r\n    const loadFile = () => {\r\n        if (typeof window.FileReader !== 'function') {\r\n            alert(\"The file API isn't supported on this browser yet.\")\r\n            return;\r\n        }\r\n        let input = document.getElementById(\"fileinput\");\r\n        if (!input)\r\n            console.error(\"Couldn't find the input element\");\r\n        else if (!input.files)\r\n            console.error(\"Input files error\");\r\n        else if (!input.files[0])\r\n            alert(\"Please select file first\")\r\n        else {\r\n            const selectedFile = input.files[0];\r\n\r\n            input.files = null; // Enables the onChange event to fire next time\r\n            input.value = '';\r\n\r\n            console.log(\"Selected file: \", selectedFile)\r\n\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = e => {\r\n                const parseImage = async () => {\r\n                    const result = await worker.recognize(e.target.result);\r\n                    console.log(\"Got result: \", result)\r\n                    const parsedResult = parseImageResult(result.data)\r\n                    setState({ parsedResult, image: e.target.result })\r\n                }\r\n\r\n                parseImage()\r\n                // imageParser.create({ data: e.target.result })\r\n                //     .then(res => {\r\n                //         console.log(\"Got result: \", res)\r\n                //     })\r\n                //     .catch(err => {\r\n                //         console.log(\"ERROR: \", err)\r\n                //     })\r\n            }\r\n            fileReader.readAsDataURL(selectedFile);\r\n        }\r\n    }\r\n\r\n    let loaderIndicator;\r\n    if (workerLoadProgress !== 0 && workerLoadProgress < 1) {\r\n        loaderIndicator = (\r\n            <div className={classes.progressDiv}>\r\n                <CircularProgress color=\"primary\" variant=\"indeterminate\" />\r\n                <LinearProgress color=\"primary\" variant=\"determinate\" value={workerLoadProgress * 100} />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Dialog open={modalOpen} onClose={onClose}>\r\n            <DialogContent>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={() => {\r\n                    if (imageLoadRef && imageLoadRef.current)\r\n                        imageLoadRef.current.click()\r\n                }}\r\n                    disabled={!Boolean(worker)}>\r\n                    Load image\r\n            </Button>\r\n                <div>\r\n                    <TextField label=\"IBAN\" name=\"iban\" value={state.iban} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Saaja\" name=\"saaja\" value={state.saaja} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Euro\" name=\"euro\" value={state.euro} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Viite\" name=\"viite\" value={state.viite} onChange={handleChange} />\r\n                </div>\r\n                <div>\r\n                    <TextField label=\"Erpiv\" name=\"dueDate\" value={state.dueDate} onChange={handleChange} />\r\n                </div>\r\n                {loaderIndicator}\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={onClose}>Cancel</Button>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={onAdd}>Add</Button>\r\n                <input type='file' id='fileinput' style={{ display: 'none' }}\r\n                    accept=\".bmp, .jpg, .png, .pbm, .pdf\"\r\n                    ref={imageLoadRef} onChange={() => loadFile()} />\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default SessionModal","import React, { useState, useEffect } from 'react'\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, CircularProgress, Slide, Typography } from '@material-ui/core'\r\n\r\nimport SessionModal from './SessionModal'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { createWorker } from 'tesseract.js'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        ...theme.root,\r\n    },\r\n    loaderDiv: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        marginTop: \"5rem\",\r\n        position: \"absolute\",\r\n        width: \"100%\"\r\n    },\r\n    actionButtons: {\r\n        position: \"absolute\",\r\n        bottom: \"3rem\",\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        width: \"100%\",\r\n        margin: theme.spacing(2)\r\n    },\r\n    addBillButton: {\r\n        margin: theme.spacing(2)\r\n    }\r\n}))\r\n\r\nconst Session = props => {\r\n    const classes = useStyles()\r\n    const [state, setState] = useState({\r\n        worker: null,\r\n        workerLoadProgress: 0,\r\n        modalOpen: false,\r\n    })\r\n\r\n    useEffect(() => {\r\n        const initWorker = async () => {\r\n            const worker = createWorker({\r\n                logger: m => {\r\n                    if (m.status === \"recognizing text\") {\r\n                        setState({ ...state, workerLoadProgress: m.progress })\r\n                    }\r\n                    console.log(\"Worker: \", m)\r\n                }\r\n            })\r\n\r\n            await worker.load();\r\n            await worker.loadLanguage(\"fin\");\r\n            await worker.initialize(\"fin\");\r\n\r\n            setState({ ...state, worker: worker })\r\n        }\r\n        if (!state.worker)\r\n            initWorker()\r\n\r\n        return () => {\r\n            const kill = async () => {\r\n                console.log(\"killing worker\")\r\n                await state.worker.terminate();\r\n                console.log(\"Worker terminated\")\r\n            }\r\n            if (state.worker)\r\n                kill()\r\n        }\r\n    }, [])\r\n\r\n    const redirBack = () => browserHistory.push(\"/payments\");\r\n    const addPayments = () => {\r\n        // TODO\r\n        console.log(\"Fake adding payments!\")\r\n        // browserHistory.push(\"/payments\")\r\n    }\r\n\r\n    return <div className={classes.root}>\r\n        <Button className={classes.addBillButton} variant=\"contained\" color=\"primary\" onClick={() => setState({ ...state, modalOpen: true })}>\r\n            Add bill\r\n        </Button>\r\n        <SessionModal {...state} onClose={() => setState({ ...state, modalOpen: false })}\r\n            onAdd={props => {\r\n                console.log(\"Adding payment with: \", props)\r\n                // TODO\r\n            }} />\r\n        <div className={classes.actionButtons}>\r\n            <Button variant=\"contained\" color=\"secondary\" onClick={() => redirBack()}>Back</Button>\r\n            <Button variant=\"contained\" color=\"secondary\" onClick={() => addPayments()}>Cancel</Button>\r\n        </div>\r\n\r\n        <Slide direction=\"up\" in={!Boolean(state.worker)} mountOnEnter unmountOnExit>\r\n            <div className={classes.loaderDiv}>\r\n                <CircularProgress color=\"primary\" variant=\"indeterminate\" />\r\n                <Typography color=\"primary\">Worker loading...</Typography>\r\n            </div>\r\n        </Slide>\r\n    </div>\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Session)","const drawerState = { open: false }\r\n\r\nexport default (state = drawerState, action) => {\r\n  switch (action.type) {\r\n    case 'OPEN_DRAWER':\r\n      return { open: true }\r\n    case 'CLOSE_DRAWER':\r\n      return { open: false }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","const profileMenuState = { open: false, anchor: null }\r\n\r\nexport default (state = profileMenuState, action) => {\r\n    switch (action.type) {\r\n        case 'OPEN_PROFILE_MENU':\r\n            return { open: true, anchor: action.target}\r\n        case 'CLOSE_PROFILE_MENU':\r\n            return { open: false, anchor: null }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","// import { foodService } from '../api'\r\n\r\n// TODO implement auto filtering on main types based on last eaten\r\n\r\nconst foodState = {\r\n\tfilters: {\r\n\t\tmain: {},\r\n\t\tside: {},\r\n\t\tspeed: {$lt: 180},\r\n\t\tday: {}\r\n\t},\r\n\tsearch: \"\",\r\n\tsearchOptions: [],\r\n\tsort: {},\r\n\tpage: 0,\r\n\tlimit: 10,\r\n\tselectedFood: null,\r\n\tfoodEdit: null,\r\n\tfoodEditOpen: false,\r\n\tfoods: {\r\n\t\tdata: []\r\n\t},\r\n\tfiltersOpen: false,\r\n\tdistincts: {},\r\n\terrors: [],\r\n\tlatestFood: null,\r\n}\r\n\r\nexport default (state = foodState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_FILTERS\":\r\n\t\t\treturn Object.assign({}, state, { filters: action.filters })\r\n\t\tcase \"SELECT_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { selectedFood: action.food })\r\n\t\tcase \"EDIT_FOOD\":\r\n\t\t\tconst isOpen = state.foodEditOpen;\r\n\t\t\tif (isOpen) return Object.assign({}, state, { foodEdit: null, foodEditOpen: false })\r\n\t\t\treturn Object.assign({}, state, { foodEdit: action.food, foodEditOpen: true })\r\n\t\tcase \"SET_FOODS\":\r\n\t\t\tconst newState = action.foods\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfoods: newState.foods,\r\n\t\t\t\tfilters: newState.filters,\r\n\t\t\t\tsort: newState.sort,\r\n\t\t\t\tsearch: newState.search,\r\n\t\t\t\tpage: newState.page,\r\n\t\t\t\tlimit: newState.limit\r\n\t\t\t})\r\n\t\tcase \"SET_OPEN_FILTERS\":\r\n\t\t\tconst open = state.filtersOpen;\r\n\t\t\treturn Object.assign({}, state, { filtersOpen: !open })\r\n\t\tcase \"SET_DISTINCTS\":\r\n\t\t\treturn Object.assign({}, state, { distincts: action.res })\r\n\t\tcase \"SET_ERRORS\":\r\n\t\t\treturn Object.assign({}, state, { errors: action.errors })\r\n\t\tcase \"SET_LATEST_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { latestFood: action.food })\r\n\t\tcase \"SET_SEARCH_OPTIONS\":\r\n\t\t\treturn Object.assign({}, state, { searchOptions: action.options})\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","const paymentState = {\r\n\tdata: null,\r\n\tdeleteId: null,\r\n    distinctNotes: []\r\n}\r\n\r\nexport default (state = paymentState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_DATA\":\r\n\t\t\treturn Object.assign({}, state, { data: action.data })\r\n\t\tcase \"SET_DELETE_ID\":\r\n\t\t\treturn Object.assign({}, state, { deleteId: action.id })\r\n        case \"SET_DISTINCT_NOTES\":\r\n            return Object.assign({}, state, { distinctNotes: action.notes })\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n","const transactionState = {\r\n    transactions: {\r\n        page: 0,\r\n        skip: 0,\r\n        limit: 100,\r\n        data: []\r\n    }\r\n}\r\n\r\nexport default (state = transactionState, action) => {\r\n    switch (action.type) {\r\n        case \"SET_TRANSACTION\":\r\n            return Object.assign({}, state, { transactions: action.transactions })\r\n        default:\r\n            return state;\r\n    }\r\n}","const transactionState = {\r\n    categories: [],\r\n    categoryTypes: []\r\n}\r\n\r\nexport default (state = transactionState, action) => {\r\n    switch (action.type) {\r\n        \r\n        default:\r\n            return state;\r\n    }\r\n}","import { combineReducers } from 'redux'\r\nimport app from './App/AppReducer'\r\nimport user from './App/userReducer'\r\nimport drawer from './App/drawerReducer'\r\nimport profile from './App/profileReducer'\r\nimport food from './foods/foodReducers'\r\nimport payment from './payments/paymentReducer'\r\nimport transactions from './transactions/transactionReducer'\r\nimport categories from './categories/categoriesReducer'\r\n\r\nexport default combineReducers({\r\n    app,\r\n    user,\r\n    drawer,\r\n    profile,\r\n    food,\r\n    payment,\r\n    transactions,\r\n    categories,\r\n})\r\n","export default (state = {message: \"\", err: \"\"}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_MESSAGE\":\r\n\t\t\treturn {message: action.message, err: \"\"}\r\n\t\tcase \"SET_ERROR\":\r\n\t\t\treturn {message: \"\", err: action.message}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","export default (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t  case 'AUTH':\r\n\t\treturn action.user\r\n\t  case 'DEAUTH':\r\n\t\treturn {}\r\n\t  default:\r\n\t\treturn state\r\n\t}\r\n  }\r\n  ","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Router, Route, browserHistory } from 'react-router'\r\nimport { createStore } from 'redux'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport feathers from '@feathersjs/client'\r\nimport rest from '@feathersjs/rest-client'\r\nimport authentication from '@feathersjs/authentication-client'\r\nimport superagent from 'superagent'\r\n\r\nimport App from './App/App'\r\nimport SignIn from './signin/SignIn'\r\nimport Home from './home/home'\r\nimport Foods from './foods/Foods'\r\nimport ShopList from './shoplist/Shoplist'\r\nimport Payments from './payments/payments'\r\nimport Transactions from './transactions/Transactions'\r\nimport Categories from './categories/Categories'\r\nimport Session from './payments/Session/Session'\r\n\r\nimport reducers from './reducers'\r\nimport { authUser } from './App/AppActions'\r\n\r\nconst store = createStore(reducers)\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n\tconsole.log('This app is using DEVELOPMENT environment');\r\n\tconsole.log('REACT_APP_API_URL = ' + process.env.REACT_APP_API_URL);\r\n\tconsole.log('REACT_APP_OAUTH_URL = ' + process.env.REACT_APP_OAUTH_URL);\r\n}\r\nif (process.env.NODE_ENV === \"production\") {\r\n\tif (!process.env.REACT_APP_API_URL)\r\n\t\tconsole.error('REACT_APP_API_URL is not set!')\r\n\tif (!process.env.REACT_APP_OAUTH_URL)\r\n\t\tconsole.error('REACT_APP_OAUTH_URL is not set!')\r\n}\r\n\r\nconst app = feathers()\r\n\t.configure(rest(process.env.REACT_APP_API_URL).superagent(superagent))\r\n\t.configure(authentication({ storage: window.localStorage }))\r\n\r\nfunction handlePath(pathname) {\r\n\tif (pathname === '/signin' || pathname === '/passwordreset') {\r\n\t\treturn;\r\n\t}\r\n\r\n\t//Get user from Redux state\r\n\tconst user = store.getState().user;\r\n\t//If we have no user, none is logged in.\r\n\tif (!user || !user._id) {\r\n\t\tbrowserHistory.push('/signin');\r\n\t\treturn;\r\n\t}\r\n\r\n\t// if (pathname !== \"/home\" || pathname !== \"/signin\" || pathname !== \"/foods\" || pathname !== \"/shoplist\") {\r\n\t// \tbrowserHistory.push(\"/home\");\r\n\t// \treturn;\r\n\t// }\r\n}\r\n\r\nfunction enterHandler() {\r\n\tconst pathname = window.location.pathname\r\n\thandlePath(pathname)\r\n}\r\n\r\n\r\napp.reAuthenticate()\r\n\t.then(r => {\r\n\t\t//Populate Redux state with user information if authenticated.\r\n\t\tstore.dispatch(authUser(r.user))\r\n\t\tinitRender()\r\n\t})\r\n\t.catch(err => {\r\n\t\tinitRender()\r\n\t})\r\n\r\n\r\nfunction initRender() {\r\n\tReactDOM.render((\r\n\t\t<Provider store={store}>\r\n\t\t\t<Router history={browserHistory}>\r\n\t\t\t\t<Route path=\"/\" component={App} onEnter={enterHandler}>\r\n\t\t\t\t\t<Route path=\"/home\" component={Home} />\r\n\t\t\t\t\t<Route path=\"/signin\" component={SignIn} />\r\n\t\t\t\t\t<Route path=\"/foods\" component={Foods} />\r\n\t\t\t\t\t<Route path=\"/shoplist\" component={ShopList} />\r\n\t\t\t\t\t<Route path=\"/payments\" component={Payments} />\r\n                    {/* <Route path=\"/payments/session\" component={Session} /> */}\r\n                    {/* <Route path=\"/transactions\" component={Transactions} />\r\n                    <Route path=\"/categories\" component={Categories} /> */}\r\n\t\t\t\t</Route>\r\n\t\t\t</Router>\r\n\t\t</Provider>\r\n\t), document.getElementById('root'))\r\n}\r\n\r\nexport default app\r\n"],"sourceRoot":""}