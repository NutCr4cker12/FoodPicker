(this.webpackJsonpkisahome=this.webpackJsonpkisahome||[]).push([[0],{427:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),l=n.n(o),i=n(18),c=n(75),u=n(17),s=n(199),m=n.n(s),d=n(200),f=n.n(d),p=n(201),E=n.n(p),g=n(202),h=n.n(g),v=n(203),b=n(204),y=n(232),O=n(230),C=n(229),j=n(470),S=n(121),w=n(120),D=Object(C.a)({}),k=Object(C.a)({palette:{primary:{main:S.a[800]},secondary:{main:"#fffffF"},error:w.a},overrides:{MuiPaper:{root:{flexBasis:"auto"}},MuiTabs:{vertical:{maxWidth:"80px"}},MuiGrid:{root:{justifyContent:"space-evenly"}},MuiDialogTitle:{root:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"}}},separate:{flexGrow:1},root:{marginTop:"0rem"},centerDivColumn:{display:"flex",flexDirection:"column",alignItems:"center"},spreadDivColumn:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},monitor:{paper:{width:"calc(100% - ".concat(D.spacing(3),")"),margin:D.spacing(2),padding:D.spacing(1),backgroundColor:"#333",color:"#fff"},floatRight:{float:"right"},background:{background:"#121212",color:"#fff"},lightBackground:{backgroundColor:"#333",color:"#fff"}}}),T=function(e){return r.a.createElement(j.a,{theme:k},r.a.createElement("div",null,e.children))},F=n(482),N=n(472),x=n(208),P=n.n(x),R=n(474),I=n(475),_=n(205),L=function(e){return{type:"SET_ERROR",message:e}},A=function(e){return{type:"SET_MESSAGE",message:e}},M=function(e){return{type:"AUTH",user:e}},U=n(207),B=n.n(U),W=Object(_.a)((function(e){return{navBar:{zIndex:e.zIndex.drawer+1,top:0,left:0,margin:0},separate:e.separate}})),$=Object(u.b)((function(e){return{user:e.user,drawerOpen:e.drawer.open,profileOpen:e.profile.open}}),(function(e){return{onOpenDrawer:function(){e({type:"OPEN_DRAWER"})},onCloseDrawer:function(){e({type:"CLOSE_DRAWER"})},onNavigate:function(t){i.c.push(t),e({type:"CLOSE_DRAWER"})},onOpenProfile:function(t){e({type:"OPEN_PROFILE_MENU",target:t.currentTarget})},onCloseProfile:function(){e({type:"CLOSE_PROFILE_MENU"})}}}))((function(e){var t,n,a,o=e.location,l=e.user,i=e.drawerOpen,c=e.onOpenDrawer,u=e.onCloseDrawer,s=e.profileOpen,m=e.onOpenProfile,d=e.onCloseProfile,f=W();return a=null!=l._id&&r.a.createElement("div",null,r.a.createElement(N.a,{onClick:s?d:m,style:{color:"white"}},r.a.createElement(B.a,{fontSize:"large"}))),"/signin"===o.pathname||(n=r.a.createElement(N.a,{edge:"start",style:{color:"white"},onClick:function(){i?u():c()}},r.a.createElement(P.a,null))),t=r.a.createElement(R.a,{position:"static",className:f.navBar},r.a.createElement(I.a,null,n,r.a.createElement("div",{className:f.separate}),a)),r.a.createElement("header",null,t)})),Y=n(509),H=n(507),G=Object(u.b)((function(e){return{text:e.app.message,err:e.app.err}}),(function(e){return{onClose:function(){e(A(""))}}}))((function(e){var t=e.text,n=e.err,a=e.onClose;return r.a.createElement(Y.a,{open:Boolean(n||t),autoHideDuration:3e3,onClose:a},r.a.createElement(H.a,{elevation:6,variant:"filled",onClose:a,severity:n?"error":t?"success":"info"},n||(t||"")))})),z=n(511),J=n(478),q=n(479),V=n(209),Q=n.n(V),K=n(111),X=n.n(K),Z=n(112),ee=n.n(Z),te=n(113),ne=n.n(te),ae=n(428),re=n(476),oe=n(477),le=n(231),ie=Object(u.b)((function(e){return{}}),(function(e){return{onNavigate:function(t){i.c.push(t),e({type:"CLOSE_DRAWER"})}}}))((function(e){var t=e.path,n=e.icon,a=e.onNavigate;return r.a.createElement(ae.a,{button:!0,key:t,onClick:function(){return a("/".concat(t))}},r.a.createElement(re.a,null,n),r.a.createElement(oe.a,{primary:Object(le.a)(t)}))})),ce=Object(u.b)((function(e){return{user:e.user,drawerOpen:e.drawer.open}}),(function(e){return{onOpenDrawer:function(){e({type:"OPEN_DRAWER"})},onCloseDrawer:function(){e({type:"CLOSE_DRAWER"})},onNavigate:function(t){i.c.push(t),e({type:"CLOSE_DRAWER"})}}}))((function(e){var t=e.user,n=e.drawerOpen,a=e.onOpenDrawer,o=e.onCloseDrawer,l=(e.onNavigate,[]);return t._id?(l.push(r.a.createElement(J.a,{key:"div1"})),l.push(r.a.createElement(ie,{key:1,path:"home",icon:r.a.createElement(Q.a,null)})),l.push(r.a.createElement(ie,{key:2,path:"foods",icon:r.a.createElement(X.a,null)})),"admin"===t.role&&(l.push(r.a.createElement(ie,{key:4,path:"payments",icon:r.a.createElement(ee.a,null)})),l.push(r.a.createElement(ie,{key:5,path:"minermonitor",icon:r.a.createElement(ne.a,null)}))),l.push(r.a.createElement(J.a,{key:"div2"})),r.a.createElement(z.a,{open:n,onClose:function(e){return e?o():a()}},r.a.createElement(q.a,null,l))):r.a.createElement("div",null)})),ue=n(233),se=n(481),me=n(210),de=n.n(me),fe=n(19),pe=n(41),Ee=function(e,t){return Aa.authenticate({strategy:"local",email:e,password:t})},ge=function(){return Aa.logout()},he=function(e){var t={};return Object.keys(e).forEach((function(n){var a=e[n];"asc"===a?e[n]=1:"desc"===a&&(e[n]=-1),t[function(e){switch(e){case"main":return"maintype";case"side":return"sidetype";case"food":return"name";case"food amount":return"foodamount";case"cooking time":return"time";case"Last Eaten":return"lasteaten";default:return"timeseaten"}}(n)]=e[n]})),t},ve=function(e){var t={};return Object.keys(e).forEach((function(n){var a={};if("speed"===n)a.time=e[n],t=Object.assign(t,a);else{var r=[];Object.keys(e[n]).forEach((function(t){"$nin"===e[n][t]&&r.push(t)})),r.length&&("day"===n?(r=r.map((function(e){return parseInt(e.split(" ")[0])})),a.foodamount={$nin:r}):a["".concat(n,"type")]={$nin:r},t=Object.assign(t,a))}})),t},be=function(){return Aa.service("v1/foods")},ye=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4?arguments[4]:void 0,o=ve(e),l=he(n),i=Object.assign(o,{$skip:10*(t-1<0?0:t),$limit:r,$sort:l});return a&&(i=Object.assign(i,{$search:a})),be().find({query:i})},Oe=function(e){return be().create(e)},Ce=function(e,t){return be().patch(e,t)},je=function(e){return be().remove(e)},Se=function(e){return be().find({query:e})},we=function(){return new Promise((function(e,t){return be().find({query:{$limit:1e4}}).then((function(t){var n=[],a=[],r=Object(pe.a)(Array(4).keys()).map((function(e){return"".concat(e+1," day")}));t.data.forEach((function(e){n.push(e.maintype),e.sidetype.forEach((function(e){return a.push(e)}))})),e({main:Object(pe.a)(new Set(n)),side:Object(pe.a)(new Set(a)),day:r})}))}))},De=function(){return new Promise((function(e,t){be().find({query:{$sort:{lasteaten:-1},$lasteaten:!0}}).then((function(t){e(t)}))}))},ke=function(){return Aa.service("v1/payments")},Te=function(e){return ke().find({query:e})},Fe=function(e){return ke().create(Object(fe.a)(Object(fe.a)({},e),{},{paid:!1}))},Ne=function(e,t){return ke().patch(e,t)},xe=function(e){return ke().remove(e)},Pe=function(){return Aa.service("v1/pending-payments")},Re=function(e){return Pe().get(e)},Ie=function(e){return Pe().create(e)},_e=function(e){return Aa.service("v1/hwinfo").find({query:e})},Le=function(){return Aa.service("v1/nh").get({})},Ae=function(e){return Aa.service("v1/binance").find({query:e})},Me=Object(u.b)((function(e){return{user:e.user,profileOpen:e.profile.open,anchorEl:e.profile.anchor}}),(function(e){return{onCloseProfile:function(){e({type:"CLOSE_PROFILE_MENU"})},onNavigate:function(e){i.c.push(e)},onSignOut:function(){var t=setTimeout((function(){e(A("Connection timeout during sign out."))}),5e3);ge().then((function(){clearTimeout(t),e(A("Signed out.")),e({type:"DEAUTH"}),i.c.push("/signin")})).catch((function(n){clearTimeout(t),e(A(n.message))}))}}}))((function(e){var t=e.user,n=e.profileOpen,a=e.onCloseProfile,o=e.anchorEl,l=e.onSignOut;return r.a.createElement(ue.a,{anchorEl:o,keepMounted:!0,open:n,onClose:a,disableAutoFocus:!0},r.a.createElement(se.a,{disabled:!0,style:{opacity:1}},r.a.createElement(oe.a,{primary:"Signed in as: ".concat(t.isQuest?" Quest":"")})),r.a.createElement(se.a,{disabled:!0,style:{opacity:1}},r.a.createElement(oe.a,{primary:t.name,secondary:t.email})),r.a.createElement(J.a,null),r.a.createElement(se.a,{onClick:function(){a(),l()}},r.a.createElement(re.a,null,r.a.createElement(de.a,null)),r.a.createElement(oe.a,{primary:"Sign Out"})))})),Ue=function(e){Object(y.a)(n,e);var t=Object(O.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e,t;return"/signin"!==this.props.location.pathname&&(e=r.a.createElement(ce,null),t=r.a.createElement(Me,null)),r.a.createElement(T,null,r.a.createElement("div",null,r.a.createElement(F.a,null),r.a.createElement($,{location:this.props.location}),e,t,this.props.main,this.props.children,r.a.createElement(G,null)))}}]),n}(r.a.Component),Be=n(8),We=n(485),$e=n(155),Ye=n(484),He=n(483),Ge=n(211),ze=n.n(Ge),Je=Object(_.a)((function(e){return{root:{marginTop:"8rem",display:"flex",margin:e.spacing(2)},TextField:{display:"flex",margin:e.spacing(2),paddingRight:e.spacing(4)}}}));var qe=Object(u.b)((function(e){return{}}),(function(e){return{onSignIn:function(t,n){if(0===t.length&&0===n.length)return e(A("E-mail and password cannot be empty")),{user:null,error:Promise.resolve(3)};if(0===t.length)return e(A("E-mail cannot be empty")),{user:null,error:Promise.resolve(1)};if(-1===t.indexOf("@"))return e(A('E-mail does not contain "@" symbol')),{user:null,error:Promise.resolve(4)};if(0===n.length)return e(A("Password cannot be empty")),{user:null,error:Promise.resolve(2)};e(A("Signing in..."));var a=setTimeout((function(){e(A("Connection timeout during sign in."))}),5e3);return Ee(t,n).then((function(t){return clearTimeout(a),e(A("Signed in.")),e(M(t.user)),i.c.push("/home"),{user:t.user,error:null}})).catch((function(t){return clearTimeout(a),"MongoError"===t.name?e(A("Server error. Try again later.")):"NotAuthenticated"===t.name?e(A("Unable to sign in. Invalid e-mail or password.")):e(L("Error: "+t.name+t.message)),i.c.push("/"),setTimeout((function(){return i.c.push("/signin")}),10),{user:null,error:t}}))},onSignInGoogle:function(){},onResetPassword:function(){}}}))((function(e){var t=Je(),n=Object(a.useState)(),o=Object(Be.a)(n,1)[0],l=Object(a.useState)(""),i=Object(Be.a)(l,2),c=i[0],u=i[1],s=Object(a.useState)(""),m=Object(Be.a)(s,2),d=m[0],f=m[1],p=e.onSignIn,E=function(e){e.preventDefault(),p(c,d)};return r.a.createElement("div",{className:t.root},r.a.createElement($e.a,{elevation:3,style:{width:"100%"}},r.a.createElement(q.a,{subheader:r.a.createElement(He.a,null,"Sign In")},r.a.createElement("form",{onSubmit:E,style:{marginTop:"24px"}},r.a.createElement("div",null,r.a.createElement(Ye.a,{className:t.TextField,label:"Email",value:c,fullWidth:!0,onChange:function(e){return u(e.target.value)},type:"email",error:!!o,helperText:1===o||3===o?"E-mail is required":4===o?'E-mail does not contain "@" symbol':null})),r.a.createElement("div",null,r.a.createElement(Ye.a,{className:t.TextField,label:"Password",value:d,fullWidth:!0,onChange:function(e){return f(e.target.value)},type:"password",error:!!o,helperText:2===o||3===o?"Password is required":null})),r.a.createElement("div",null,r.a.createElement(We.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(ze.a,null),onClick:E,className:t.TextField},"Sign In")),r.a.createElement("input",{type:"submit",style:{display:"none"}})))))})),Ve=Object(_.a)((function(e){return{paper:{marginTop:"10rem",marginLeft:"1rem",marginRight:"1rem"}}})),Qe=Object(u.b)((function(e){return{user:e.user}}),(function(e){return{onNavigate:function(t){i.c.push(t),e({type:"CLOSE_DRAWER"})}}}))((function(e){var t=Ve(),n=e.user,a=[];return a.push(r.a.createElement(ie,{key:0,path:"foods",icon:r.a.createElement(X.a,null)})),"admin"===n.role&&(a.push(r.a.createElement(ie,{key:2,path:"payments",icon:r.a.createElement(ee.a,null)})),a.push(r.a.createElement(ie,{key:3,path:"minermonitor",icon:r.a.createElement(ne.a,null)}))),r.a.createElement("div",null,r.a.createElement(q.a,{className:t.paper},a))})),Ke=n(486),Xe=n(508),Ze=n(487),et=n(488),tt=n(489),nt=n(433),at=n(490),rt=n(491),ot=n(212),lt=n.n(ot),it=n(213),ct=n.n(it),ut=Object(_.a)((function(e){return{padded:{padding:e.spacing(2)},margin:{margin:e.spacing(1)}}})),st=function(e){var t=ut(),n=e.open,a=e.onClose,o=e.title,l=e.sort,i=e.filters,c=e.filterType,u=e.setFilters,s=n?i[c]:{},m="string"===typeof o&&l[o.toLowerCase()],d=m&&m>0,f=m&&m<0,p=function(){return Object.keys(s).map((function(e){return r.a.createElement(Ke.a,{key:e,label:e.toUpperCase(),control:r.a.createElement(Xe.a,{color:"primary",checked:"$in"===s[e],onChange:function(){i[c][e]="$in"===s[e]?"$nin":"$in",u(i,l)}})})}))},E=function(){return[{label:"< 30 min",value:30},{label:"< 60 min",value:60},{label:"< 90 min",value:90},{label:"< 180 min",value:180}].map((function(e){return r.a.createElement(Ke.a,{key:e.label,label:e.label,control:r.a.createElement(Xe.a,{color:"primary",checked:i.speed.$lt>=e.value,onChange:function(){i.speed={$lt:e.value},u(i,l)}})})}))},g="Cooking Time"===o;return r.a.createElement(Ze.a,{open:n,onClose:function(){return a(i,l)},maxWidth:"xs"},r.a.createElement(et.a,null,o),r.a.createElement(tt.a,null,!g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(We.a,{color:"primary",variant:"outlined",onClick:function(){Object.keys(s).forEach((function(e){i[c][e]="$in"})),u(i,l)},className:t.margin},"Select All"),r.a.createElement(J.a,{className:t.margin})),r.a.createElement(nt.a,{component:"fieldset",className:t.padded},r.a.createElement(at.a,null,g?r.a.createElement(E,null):r.a.createElement(p,null))),r.a.createElement(J.a,{className:t.margin}),r.a.createElement(We.a,{color:"primary",variant:m?"contained":"outlined",endIcon:d?r.a.createElement(lt.a,null):f?r.a.createElement(ct.a,null):null,onClick:function(){return e=o.toLowerCase(),m?d?l[e]=-1:delete l[e]:l[e]=1,void u(i,l);var e}},"Sort by")),r.a.createElement(rt.a,null,r.a.createElement(We.a,{color:"primary",onClick:function(){return a(i,l)}},"close")))},mt=n(119),dt=n(492),ft=n(506),pt=n(504),Et=function(e,t){if(!e||!t)return e;t=t.toLowerCase();var n=(e=e.toLowerCase()).split(t),a=n.map((function(e,a){return a===n.length-1?e:r.a.createElement("span",{key:a},e,r.a.createElement("b",null,t))}));return r.a.createElement("span",null,a.map((function(e){return e})))},gt=n(217),ht=n.n(gt),vt=function(e){return{type:"SELECT_FOOD",food:e}},bt=function(e){return{type:"EDIT_FOOD",food:e}},yt=function(e){return{type:"SET_ERRORS",errors:e}},Ot=function(e){return{type:"SET_SEARCH_OPTIONS",options:e}},Ct=Object(_.a)((function(e){return{margin:{margin:e.spacing(1),maxWidth:"300px"},center:{display:"flex",position:"relative",alignItems:"center",width:"100%"},searchDiv:{width:"60%"},btnDiv:{width:"40%"},div:{flexGrow:1},padding:{padding:e.spacing(2)}}}));var jt=Object(u.b)((function(e){return{options:e.food.searchOptions}}),(function(e){return{onSetOptions:function(t){if(!t.length)return e(Ot([]));Se({$regex:t}).then((function(t){e(Ot(t.data))})).catch((function(e){console.log(e)}))}}}))((function(e){var t=Ct(),n=e.search,o=e.onSelectFood,l=e.options,i=e.onSetOptions,c=Object(a.useState)(n),u=Object(Be.a)(c,2),s=u[0],m=u[1];return r.a.createElement(pt.a,{display:"block",justifyContent:"center",className:t.padding},r.a.createElement(ft.a,{options:l,getOptionLabel:function(e){return e.name},renderOption:function(e){return Et(e.name,s)},renderInput:function(e){var t=e.InputProps,n=Object(mt.a)(e,["InputProps"]);return t.startAdornment=r.a.createElement(dt.a,{position:"start"},r.a.createElement(ht.a,null)),r.a.createElement(Ye.a,Object.assign({},n,{placeholder:"Search...",variant:"outlined",value:s,fullWidth:!0,onChange:function(e){return function(e){m(e),i(e)}(e.target.value)},InputProps:t}))},onChange:function(e,t){o(t)}}))})),St=n(9),wt=n(512),Dt=n(493),kt=n(494),Tt=n(495),Ft=n(496),Nt=n(63),xt=n(497),Pt=n(498),Rt=n(499),It=n(500),_t=n(513),Lt=n(117),At=n.n(Lt),Mt=n(148),Ut=n.n(Mt),Bt=864e5,Wt=function(e,t){var n=e.getDate(),a=e.getMonth()+1;if(t)return"".concat(n,".").concat(a);var r=e.getFullYear().toString().substr(2);return"".concat(n,".").concat(a,".").concat(r)},$t=function(e,t){var n,a=Math.floor((t-e)/Bt),r=a<2?"day":"days",o=new Date,l=Math.round((o-t)/Bt);if(l>356)n="Over a Year ago";else if(l>30){var i=Math.round(l/30);n="".concat(i," month").concat(i>1?"s":""," ago")}else if(l>7){var c=Math.round(l/7);n="".concat(c," week").concat(c>1?"s":""," ago")}else l>0?n="".concat(l," day").concat(l>1?"s":""," ago"):0===l?n="today":-1===l?n="tomorrow":l<-1&&(n="in ".concat(-1*l," days"));return"".concat(n," - ").concat(Wt(e,!0),"-").concat(Wt(t)," (").concat(a," ").concat(r," food)")},Yt=function(e){var t=(new Date-e)/1e3;if(t<60)return"".concat(t.toFixed(0)," s ago");if(t<3600)return"".concat((t/60).toFixed(0)," min ago");if(t<86400)return"".concat((t/3600).toFixed(0)," h ago");if(t<604800){var n=(t/86400).toFixed(0);return"".concat(n,"1"===n?" day ago":" days ago")}return"".concat(e.getDate(),".").concat(e.getMonth()+1,".").concat(e.getFullYear().toString().slice(2))},Ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!e.length)return[];e=e.sort((function(e,t){return t-e}));var n=[],a=e[0],r=e[0];return e.forEach((function(o,l){return n.length>=t?n:r-o>2*Bt?(n.push($t(a,r)),a=o,void(r=o)):(a=o,void(l===e.length-1&&n.push($t(a,r))))})),n},Gt=Object(_.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(St.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},toolBar:{justifyContent:"space-between"},toolBarTitle:{display:"flex",alignItems:"center"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},button:{marginRight:e.spacing(2),marginLeft:e.spacing(2),minWidth:"133px"}}})),zt=function(e){var t=Gt(),n=r.a.useState(null),a=Object(Be.a)(n,2),o=a[0],l=a[1],i=e.columns,c=e.data,u=e.sort,s=e.setSort,m=e.limit,d=e.setLimit,f=e.onSelectFood,p=e.onAddFood,E=e.page,g=e.setPage,h=e.setFilterOpen,v=e.clearFilters;if(!c)return r.a.createElement("div",null);var b=c.data,y=c.total||0,O=0===y?0:E,C=function(){return r.a.createElement(ue.a,{anchorEl:o,open:Boolean(o),onClose:function(){return l(null)}},r.a.createElement(se.a,{onClick:function(){v(),l()}},"Clear Filters"))},j=function(e){var t=u[e];return!!t&&(t>0?"asc":"desc")},S=function(e){var t=e.headerName;return r.a.createElement(wt.a,{active:Boolean(u[t]),direction:j(t)||"asc",onClick:function(e){e.preventDefault(),function(e){var t=u[e];t?t>0?u[e]=-1:delete u[e]:u[e]=1,s(u)}(t)}},t)},w=function(e){var t=e.headerName;return r.a.createElement(wt.a,{active:Boolean(u[t]),direction:j(t)||"asc",onClick:function(){return h(t)}},t,r.a.createElement(Ut.a,{style:{opacity:"0.4"}}))},D=r.a.createElement(Dt.a,null,r.a.createElement(kt.a,null,i.map((function(n,a){return r.a.createElement(Tt.a,{key:a,className:t.root,align:"left",padding:"none",sortDirection:j(n)},e.columnNameToFilter[n]?r.a.createElement(w,{headerName:n}):r.a.createElement(S,{headerName:n}))})))),k=r.a.createElement(Ft.a,null,b.map((function(e,t){return r.a.createElement(kt.a,{key:t,hover:!0,onClick:function(t){t.preventDefault(),f(e)}},r.a.createElement(Tt.a,null,e.maintype),r.a.createElement(Tt.a,null,e.sidetype.join(", ")),r.a.createElement(Tt.a,null,e.name),r.a.createElement(Tt.a,null,e.timeseaten),r.a.createElement(Tt.a,null,e.lasteaten&&e.lasteaten.length?Ht(e.lasteaten.map((function(e){return new Date(e)})),1)[0].split(" - ")[0]:""),r.a.createElement(Tt.a,null,e.time),r.a.createElement(Tt.a,null,e.foodamount))})));return r.a.createElement("div",null,r.a.createElement(I.a,{className:t.toolBar},r.a.createElement("div",{className:t.toolBarTitle},r.a.createElement(N.a,{onClick:function(e){return l(e.currentTarget)},style:{padding:"0px"}},r.a.createElement(Ut.a,{style:{opacity:"0.4"}})),r.a.createElement(Nt.a,{variant:"h6",id:"tableTitle"},"Foods")),r.a.createElement(xt.a,{title:"Add New Food"},r.a.createElement(Pt.a,{color:"primary",size:"medium",onClick:function(){return p()}},r.a.createElement(At.a,null)))),r.a.createElement(C,null),r.a.createElement(Rt.a,null,r.a.createElement(It.a,{size:"medium"},D,k)),r.a.createElement(_t.a,{component:"div",count:y,rowsPerPage:m,onChangeRowsPerPage:function(e){return d(e.target.value)},rowsPerPageOptions:[10,20,40,50],page:O,onChangePage:function(e,t){e.preventDefault(),g(t)}}))},Jt=n(439),qt=n(437),Vt=n(438),Qt=n(434),Kt=n(87),Xt=n.n(Kt),Zt=Object(_.a)((function(e){return{container:{margin:e.spacing(1)}}})),en=function(e){var t=e.open,n=e.onCancel,a=e.onOk,o=e.title,l=e.text,i=e.cancelText,c=e.okText,u=Zt();return r.a.createElement("div",null,r.a.createElement(Ze.a,{open:t,onClose:oncancel,className:u.container},r.a.createElement(et.a,null,o),r.a.createElement(tt.a,null,l),r.a.createElement(rt.a,null,r.a.createElement(We.a,{onClick:n,color:"primary"},i||"Cancel"),r.a.createElement(We.a,{onClick:a,color:"primary"},c||"Apply"))))},tn=Object(_.a)((function(e){return{container:{margin:e.spacing(1)},selectFieldContainer:{width:"250px",padding:e.spacing(2)},selectField:{minWidth:"200px",maxWidth:"200px"},addButton:{minWidth:"100px",maxWidth:"150px",backgroundColor:e.palette.common.white,color:e.palette.primary.main},sideType:{backgroundColor:e.palette.common.white},center:{display:"flex",position:"relative",alignItems:"center"},div:{flexGrow:1},dialogContainer:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"}}})),nn=[{label:"1 day",value:1},{label:"2 days",value:2},{label:"3 days",value:3},{label:"4 days",value:4},{label:"5 days",value:5}],an=Object(u.b)((function(e){var t=e.food.distincts;return{user:e.user,open:e.food.foodEditOpen,distMainTypes:t.main||[],distSideTypes:t.side||[],errors:e.food.errors}}),(function(e){return{onSetEditFood:function(t){e(bt(t)),e(yt([]))},onDeleteFood:function(t){t&&je(t).then((function(){e(A("Food Deleted")),e(bt(null)),e(vt(null)),e(yt([]))})).catch((function(t){return e(L(t.message))}))},onSaveFood:function(t){var n=[];if(t.name||n.push("name"),t.sidetype.length||n.push("side"),t.time||n.push("time"),n.length)return e(yt(n));t._id?Ce(t._id,t).then((function(){e(A("Food Updated")),e(bt(null)),e(yt([]))})).catch((function(t){return e(L(t.message))})):Oe(t).then((function(){e(A("New Food Added")),e(bt(null)),e(yt([]))})).catch((function(t){return e(L(t.message))}))}}}))((function(e){var t=e.user,n=e.foodEdit,o=e.open,l=e.onSetEditFood,i=e.distMainTypes,c=e.distSideTypes,u=e.onSaveFood,s=e.onDeleteFood,m=e.errors,d=e.onUpdate,f=tn(),p=Object.assign({},n),E=Object(a.useState)(p.maintype),g=Object(Be.a)(E,2),h=g[0],v=g[1],b=Object(a.useState)(p.foodamount.toString()),y=Object(Be.a)(b,2),O=y[0],C=y[1],j=Object(a.useState)(p.sidetype),S=Object(Be.a)(j,2),w=S[0],D=S[1],k=Object(a.useState)(p.name),T=Object(Be.a)(k,2),F=T[0],N=T[1],x=Object(a.useState)(p.link),P=Object(Be.a)(x,2),R=P[0],I=P[1],_=Object(a.useState)(p.timeseaten),L=Object(Be.a)(_,2),A=L[0],M=L[1],U=Object(a.useState)(p.time),B=Object(Be.a)(U,2),W=B[0],$=B[1],Y=Object(a.useState)(!1),H=Object(Be.a)(Y,2),G=H[0],z=H[1],J=function(e){var t=e.label,n=e.value,a=e.onChange,o=e.types;return r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(Ye.a,{select:!0,label:t,fullWidth:!0,className:f.selectField,variant:"outlined",value:n,onChange:function(e){return a(e.target.value)}},o.map((function(e,t){return r.a.createElement(se.a,{key:t,value:e.value||e},e.label||e)}))))},q=r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(nt.a,{className:f.selectField,variant:"outlined",error:m.includes("side")},r.a.createElement(Jt.a,{className:f.sideType},"Side Types"),r.a.createElement(qt.a,{multiple:!0,fullWidth:!0,multiline:!0,value:w,onChange:function(e){return D(e.target.value)},input:r.a.createElement(Vt.a,null),renderValue:function(e){return e.join(", ")}},c.map((function(e){return r.a.createElement(se.a,{key:e,value:e},r.a.createElement(Xe.a,{checked:w.includes(e),color:"primary"}),r.a.createElement(oe.a,{primary:e}))}))),r.a.createElement(Qt.a,null,m.includes("side")?"Must have at least one side type":""))),V=r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(Ye.a,{variant:"outlined",className:f.selectField,label:"Name",value:F,multiline:!0,onChange:function(e){return N(e.target.value)},error:m.includes("name"),helperText:m.includes("name")?"Name can't be empty":""})),Q=r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(Ye.a,{variant:"outlined",className:f.selectField,label:"Cooking Time",value:W,onChange:function(e){return t=e.target.value,void(new RegExp("[^0-9]").test(t)||$(t));var t},error:m.includes("time"),helperText:m.includes("time")?"Cooking time can't be empty":""})),K=r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(Ye.a,{variant:"outlined",className:f.selectField,label:"Recipe",value:R,multiline:!R.includes("http"),onChange:function(e){return I(e.target.value)}})),X=r.a.createElement("div",{className:f.selectFieldContainer},r.a.createElement(Ye.a,{variant:"outlined",className:f.selectField,label:"Times Eaten",value:A,onChange:function(e){return M(e.target.value)},disabled:"admin"!==t.role})),Z=r.a.createElement(r.a.Fragment,null,V,r.a.createElement(J,{label:"Main Type",value:h,onChange:function(e){return v(e)},types:i}),q,r.a.createElement(J,{label:"Food Amount",value:O,onChange:function(e){return C(e)},types:nn}),Q,K,X),ee=r.a.createElement(We.a,{startIcon:r.a.createElement(Xt.a,null),onClick:function(){return z(!0)}},"Delete");return r.a.createElement("div",null,r.a.createElement(Ze.a,{open:o,onClose:function(){return l(null)},className:f.container},r.a.createElement(et.a,null,r.a.createElement("div",{className:f.center},F,r.a.createElement("div",{className:f.div}),p._id?ee:null)),r.a.createElement(tt.a,null,r.a.createElement("form",{className:f.dialogContainer,noValidate:!0},Z)),r.a.createElement(rt.a,null,r.a.createElement(We.a,{onClick:function(){return l(null)},color:"primary"},"Cancel"),r.a.createElement(We.a,{onClick:function(){d(),u({_id:p._id,name:F,link:R,maintype:h,sidetype:w,foodamount:O,time:W,timeseaten:A})},color:"primary",autoFocus:!0},p.id?"Apply":"Add"))),r.a.createElement(en,{open:G,onCancel:function(){return z(!1)},onOk:function(){z(!1),s(p._id),d()},title:"Delete Food",text:"Are you sure?",okText:"Delete"}))})),rn=n(501),on=n(28),ln=n(503),cn=n(118),un=n(149),sn=n.n(un),mn=n(219),dn=n.n(mn),fn=n(88),pn=n.n(fn),En=n(218),gn=n.n(En),hn=Object(_.a)((function(e){return{spread:e.spreadDivColumn,centerColumns:e.centerDivColumn,container:{margin:e.spacing(1)},margin:{margin:e.spacing(3)},selectFieldContainer:{padding:e.spacing(2)},selectField:{minWidth:"200px",maxWidth:"200px"},datePickerTextfield:{width:"110px"},button:{width:"180px",height:"60px"}}}));sn.a.locale("en"),sn.a.updateLocale("en",{week:{dow:1,doy:0}});var vn=Object(u.b)((function(e){return{user:e.user,food:e.food.selectedFood,latestFood:e.food.latestFood}}),(function(e){return{onSelectFood:function(t){e(vt(t))},onSetEditFood:function(t){e(bt(t))},onFoodSelection:function(t){Ce(t._id,t).then((function(n){e(A("Going to eat ".concat(t.name))),e(vt(null))})).catch((function(t){e(L(t.message))}))}}}))((function(e){var t=e.food,n=e.latestFood,o=e.onSelectFood,l=e.onSetEditFood,i=e.onUpdate,c=e.onFoodSelection,u=hn(),s=function(e){var t=new Date(e.lasteaten.sort((function(e,t){return new Date(t)-new Date(e)}))[0]);t<new Date&&(t=new Date);var n=new Date(t.valueOf()+864e5),a=new Date(n.valueOf()+24*e.foodamount*60*60*1e3);return{startDate:n,endDate:a}}(n),m=Object(a.useState)(s.startDate),d=Object(Be.a)(m,2),f=d[0],p=d[1],E=Object(a.useState)(s.endDate),g=Object(Be.a)(E,2),h=g[0],v=g[1];if(!t)return null;var b=r.a.createElement("div",{className:u.selectFieldContainer},r.a.createElement(It.a,{size:"small"},r.a.createElement(Dt.a,null,r.a.createElement(kt.a,null,r.a.createElement(Tt.a,null,"History"))),r.a.createElement(Ft.a,null,t.lasteaten?Ht(t.lasteaten.map((function(e){return new Date(e)}))).map((function(e,t){return r.a.createElement(kt.a,{key:t},r.a.createElement(Tt.a,null,e))})):r.a.createElement(kt.a,null,r.a.createElement(Tt.a,null,"No recordings"))))),y=r.a.createElement("div",{className:u.centerColumns},r.a.createElement("div",null,t.link.includes("http")||t.link.includes("www")?r.a.createElement(Nt.a,null,r.a.createElement(rn.a,{href:t.link},"Link To Recipe")):null),r.a.createElement("div",{className:u.spread},r.a.createElement(on.a,{utils:cn.a},r.a.createElement(ln.a,{label:"Date",format:"DD.MM.YYYY",views:["year","month","date"],minDate:new Date(2020,0,1),showTodayButton:!0,value:f,onChange:function(e){return p(e._d)},animateYearScrolling:!0,TextFieldComponent:function(e){return r.a.createElement(Ye.a,{label:"Start Date",onClick:e.onClick,value:e.value,InputProps:{startAdornment:r.a.createElement(pn.a,null)},size:"small",className:"".concat(u.datePickerTextfield," ").concat(u.margin)})}}),r.a.createElement(ln.a,{label:"Date",format:"DD.MM.YYYY",views:["year","month","date"],minDate:new Date(2020,0,1),showTodayButton:!0,value:h,onChange:function(e){return v(e._d)},animateYearScrolling:!0,TextFieldComponent:function(e){return r.a.createElement(Ye.a,{label:"End Date",onClick:e.onClick,value:e.value,InputProps:{startAdornment:r.a.createElement(pn.a,null)},size:"small",className:"".concat(u.datePickerTextfield," ").concat(u.margin)})}}))),r.a.createElement(We.a,{startIcon:r.a.createElement(gn.a,null),variant:"contained",color:"primary",className:u.button,onClick:function(){for(var e=[f.toDateString()],n=f;;){var a=new Date(n.valueOf()+864e5);if(a>h)break;e.push(a.toDateString()),n=a}t.lasteaten||(t.lasteaten=[]),t.lasteaten=t.lasteaten.concat(e),t.timeseaten=t.timeseaten+1,c(t),i()}},"Select Food"),b);return r.a.createElement("div",null,r.a.createElement(Ze.a,{open:!0,onClose:function(){return o(null)},className:u.container},r.a.createElement(et.a,null,r.a.createElement("div",{className:u.spread},t.name,r.a.createElement(N.a,{onClick:function(){return l(t)}},r.a.createElement(dn.a,null)))),r.a.createElement(tt.a,null,y),r.a.createElement(rt.a,null,r.a.createElement(We.a,{onClick:function(){return o(null)},color:"primary"},"Cancel"))))})),bn=Object(_.a)((function(e){return{root:e.root}})),yn=["Main","Side","Food","Count","LastEaten","Cooking Time","Food Amount"],On={Main:"main",Side:"side","Food Amount":"day","Cooking Time":"speed"},Cn={name:"Name",maintype:"liha",sidetype:["pasta"],foodamount:1,link:"",time:60,timeseaten:0},jn=Object(u.b)((function(e){return{user:e.user,foods:e.food.foods,sort:e.food.sort,filters:e.food.filters,search:e.food.search,page:e.food.page,limit:e.food.limit,selectedFood:e.food.selectedFood,foodEdit:e.food.foodEdit}}),(function(e){return{onSelectFood:function(t){e(vt(t))},onRefresh:function(t,n,a,r,o){ye(n,t,a,r,o).then((function(l){e({type:"SET_FOODS",foods:{foods:l,filters:n,sort:a,page:t,limit:o,search:r}}),De().then((function(t){e({type:"SET_LATEST_FOOD",food:t})}))})).catch((function(t){return e(L(t.message))}))},setOpenFilter:function(){e({type:"SET_OPEN_FILTERS"})},initFilters:function(){var t={main:{},side:{},speed:{$lt:180},day:{}};we().then((function(n){e(function(e){return{type:"SET_DISTINCTS",res:e}}(n)),n.main.forEach((function(e){t.main[e]="$in"})),n.side.forEach((function(e){t.side[e]="$in"})),n.day.forEach((function(e){t.day[e]="$in"})),e(function(e){return{type:"SET_FILTERS",filters:e}}(t))})).catch((function(e){return L(e.message)}))},onSetEditFood:function(t){e(bt(t))}}}))((function(e){var t=e.foods,n=e.sort,a=e.onSelectFood,o=e.onRefresh,l=e.filters,i=e.search,c=e.setOpenFilter,u=e.page,s=e.limit,m=e.selectedFood,d=e.foodEdit,f=e.initFilters,p=e.onSetEditFood,E=bn(),g=r.a.useState(!1),h=Object(Be.a)(g,2),v=h[0],b=h[1];r.a.useEffect((function(){f(),o(u,l,n,i,s)}),[]);return r.a.createElement($e.a,{className:E.root},r.a.createElement(jt,{search:i,onSelectFood:a}),r.a.createElement(zt,{columns:yn,columnNameToFilter:On,data:t,sort:n,setSort:function(e){return o(0,l,e,i,s)},limit:s,setLimit:function(e){return o(u,l,n,i,e)},onSelectFood:a,setFilterOpen:function(e){return b(e)},onAddFood:function(){return p(Cn)},setOpenFilter:c,page:u,setPage:function(e){return o(e,l,n,i,s)},clearFilters:function(){return l.speed={$lt:180},Object.keys(l).filter((function(e){return"speed"!==e})).forEach((function(e){Object.keys(l[e]).forEach((function(t){l[e][t]="$in"}))})),void o(u,l,{},"",s)}}),m?r.a.createElement(vn,{onUpdate:function(){return o(u,l,n,i,s)}}):null,d?r.a.createElement(an,{foodEdit:d,onUpdate:function(){return o(u,l,n,i,s)}}):null,r.a.createElement(st,{open:Boolean(v),sort:n,filters:l,title:v,filterType:On[v],setFilters:function(e,t){return o(0,e,t,i,s)},onClose:function(e,t){b(!1),o(0,e,t,i,s)}}))})),Sn=n(150),wn=n.n(Sn),Dn=n(220),kn=n(151),Tn=n.n(kn),Fn=function(e){return{type:"SET_DELETE_ID",id:e}},Nn=function(e,t){var n="";e.forEach((function(e){n+="".concat(e.notes,", ").concat(e.amount,"\u20ac, er\xe4p\xe4iv\xe4: ").concat(function(e){var t=new Date(e),n=t.getMonth()+1,a=t.getDate();return"".concat(a,".").concat(n)}(e.date)," (").concat(e.imageName,")\n")}));var a="".concat("https://kisaeeheifoodpicker.herokuapp.com/v1/pending-payments","/").concat(t);return"Hei,\n\nLiitteen\xe4 taas laskuja:\n\n".concat(n,"\n\n").concat(a,"\n\nTerveisin,\nKimi Heinonen\n")},xn=n(221),Pn=n.n(xn),Rn=n(222),In=n.n(Rn),_n=n(146),Ln=n.n(_n),An=Object(_.a)((function(e){return{}})),Mn=function(e){An();var t,n,a=e.rowData,o=e.onChange,l=e.toMailList,i=a.mailed&&a.paid,c=a.mailed&&!1===a.paid,u=!a.mailed&&null==a.imageData;return i?(n="Mailed and paid",t=r.a.createElement(Xe.a,{disabled:!0,checked:!0,icon:r.a.createElement(Ln.a,null),color:"primary"})):c?(n="Mailed and pending",t=r.a.createElement(Xe.a,{icon:r.a.createElement(Pn.a,null),checkedIcon:r.a.createElement(In.a,null),checked:null!=l.find((function(e){return e._id===a._id})),color:"primary",onChange:o})):u?(n="Missing pdf - cant mail",t=r.a.createElement(Xe.a,{disabled:!0,checked:!1,color:"primary"})):(n="Not mailed",t=r.a.createElement(Xe.a,{color:"primary",onChange:o,checked:null!=l.find((function(e){return e._id===a._id}))})),r.a.createElement(xt.a,{title:n},r.a.createElement("span",null,t))},Un=Object(_.a)((function(e){return{root:e.root,centerDivColumn:e.centerDivColumn,spacings:{padding:e.spacing(2),width:"10px"},datePickerTextfieldWide:{width:"110px"},datePickerTextfieldSmall:{width:"70px"},tableIcon:{width:"5px"},spacing:{margin:e.spacing(2),width:"200px"},sendMailButton:{marginLeft:"-30px",marginRight:"-30px"}}})),Bn=function(e){"string"===typeof e&&(e=new Date(e));var t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return"".concat(a,".").concat(n,".").concat(t)},Wn=new Date(2020,0,1),$n=new Date((new Date).getUTCFullYear(),0,1),Yn=new Date((new Date).getUTCFullYear(),11,31);var Hn=Object(u.b)((function(e){return{data:e.payment.data,deleteId:e.payment.deleteId,distinctNotes:e.payment.distinctNotes}}),(function(e){var t=function(t,n){Te({date:{$gt:t,$lt:n},$sort:{createdAt:-1}}).then((function(t){return e({type:"SET_DATA",data:t.data})})).catch((function(t){return e(L(t.message))}))};return{onGetData:function(e,n){return t(e,n)},onAddPayment:function(n,a,r){Fe(n).then((function(n){e(A("Payment Added")),t(a,r)})).catch((function(t){return e(L(t.message))}))},onSetDeleteId:function(t){e(Fn(t))},onDeletePayment:function(n,a,r){xe(n).then((function(n){e(A("Payment Deleted")),e(Fn(null)),t(a,r)})).catch((function(t){return e(L(t.message))}))},onGetDistinctNotes:function(){Te({}).then((function(t){var n=t.data.map((function(e){return e.notes})),a=Object(pe.a)(new Set(n));0===a.length&&a.push("..."),e({type:"SET_DISTINCT_NOTES",notes:a})})).catch((function(t){return e(L(t.message))}))},onSendMail:function(){var e=Object(Dn.a)(wn.a.mark((function e(n,a,r){var o,l;return wn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<r.length)){e.next=8;break}return l=r[o],e.next=5,Ne(l._id,{mailed:!0});case 5:o++,e.next=1;break;case 8:t(n,a);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()}}))((function(e){var t,n,o=Un(),l=e.data,i=e.deleteId,c=e.distinctNotes,u=e.onGetData,s=e.onAddPayment,m=e.onSetDeleteId,d=e.onDeletePayment,f=e.onGetDistinctNotes,p=e.onSendMail,E=Object(a.useState)(new Date),g=Object(Be.a)(E,2),h=g[0],v=g[1],b=Object(a.useState)(""),y=Object(Be.a)(b,2),O=y[0],C=y[1],j=Object(a.useState)(""),S=Object(Be.a)(j,2),w=S[0],D=S[1],k=Object(a.useState)(!0),T=Object(Be.a)(k,2),F=T[0],x=T[1],P=Object(a.useState)($n),R=Object(Be.a)(P,2),I=R[0],_=R[1],L=Object(a.useState)(Yn),A=Object(Be.a)(L,2),M=A[0],U=A[1],B=Object(a.useState)({}),W=Object(Be.a)(B,2),$=W[0],Y=W[1],H=Object(a.useState)(null),G=Object(Be.a)(H,2),z=G[0],J=G[1],q=Object(a.useState)([]),V=Object(Be.a)(q,2),Q=V[0],K=V[1];Object(a.useEffect)((function(){u(I,M)}),[I,M,u]),Object(a.useEffect)((function(){0===c.length&&f()}),[f,c]),l&&(n=((t=l.reduce((function(e,t){return e+t.amount}),0).toFixed(1))/(l.length?new Date(l[0].date).getMonth()-I.getMonth():1)).toFixed(1));var X=function(e){var t=document.createElement("a");t.href=e.data,t.download=e.name,t.click()},Z=function(e,t,n,a,l){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Date(2020,0,1),c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yn;return r.a.createElement(on.a,{utils:cn.a},r.a.createElement(ln.a,{label:e,format:l,views:a,minDate:i,maxDate:c,showTodayButton:!0,value:t,onChange:function(e){return n(e._d)},animateYearScrolling:!0,TextFieldComponent:function(t){return r.a.createElement(Ye.a,{label:e,onClick:t.onClick,value:t.value,InputProps:{endAdornment:r.a.createElement(pn.a,null)},size:"small",className:l.split(".").length>2?o.datePickerTextfieldWide:o.datePickerTextfieldSmall})}}))},ee=r.a.createElement("div",{className:o.centerDivColumn},r.a.createElement("div",{className:"".concat(o.spacing," ").concat(o.centerDivColumn)},Z("Date",h,v,["year","month","date"],"DD.MM.YYYY")),r.a.createElement("div",{className:o.spacing},r.a.createElement(Ye.a,{value:O,type:"number",variant:"outlined",onChange:function(e){return C(e.target.value.replace(",","."))},InputProps:{endAdornment:r.a.createElement(dt.a,{position:"end"},"\u20ac")}})),r.a.createElement("div",{className:o.spacing},r.a.createElement(ft.a,{key:F,freeSolo:!0,options:c,renderOption:function(e){return Et(e,w)},renderInput:function(e){return r.a.createElement(Ye.a,Object.assign({},e,{label:"Note",value:w,fullWidth:!0,onChange:function(e){return D(e.target.value)}}))},onChange:function(e,t){return D(t||"")}})),r.a.createElement(We.a,{className:o.spacing,variant:"contained",color:"primary",onClick:function(){(!$.name&&!$.data||window.confirm("Replace current image?"))&&(z?z.click():console.error("No input Ref!!"))}},"Add Image"),$.name&&r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(We.a,{onClick:function(){return X($)}},$.name),r.a.createElement(N.a,{onClick:function(){return Y({})}},r.a.createElement(Xt.a,null))),r.a.createElement(We.a,{className:o.spacing,variant:"contained",color:"primary",startIcon:r.a.createElement(At.a,null),onClick:function(){return function(){if(!(parseFloat(O)<=0)){var e={date:h,amount:O,notes:w};($.name||$.data)&&(e=Object(fe.a)(Object(fe.a)({},e),{},{imageName:$.name,imageData:$.data})),s(e,I,M),v(new Date),C(""),D(""),x(!F),Y({})}}()}},"Add Payment")),te=r.a.createElement(Rt.a,{component:$e.a},r.a.createElement(It.a,null,r.a.createElement(Dt.a,null,r.a.createElement(kt.a,null,r.a.createElement(Tt.a,null,Z("from",I,_,["year","month"],"MM.YY",Wn,M)),r.a.createElement(Tt.a,null,Z("to",M,U,["year","month"],"MM.YY",I,Yn)),r.a.createElement(Tt.a,null,"Total: ".concat(t," \u20ac")),r.a.createElement(Tt.a,null,"PerMonth: ".concat(n," \u20ac")),r.a.createElement(Tt.a,null),r.a.createElement(Tt.a,null),r.a.createElement(Tt.a,null)),r.a.createElement(kt.a,null,r.a.createElement(Tt.a,null,"Created"),r.a.createElement(Tt.a,null,"Bill Due"),r.a.createElement(Tt.a,null,"Amount"),r.a.createElement(Tt.a,null,"Notes"),r.a.createElement(Tt.a,null,"Pdf"),r.a.createElement(Tt.a,null,Q.length>0?r.a.createElement(We.a,{variant:"contained",color:"primary",className:o.sendMailButton,onClick:function(){var e={isMarked:!1,ids:Q.map((function(e){return e._id}))};Ie(e).then((function(e){!function(e,t){var n=Nn(e,t);window.open("mailto:".concat("kariveikko.heinonen@gmail.com","?subject=").concat("Laskuja","&body=").concat(encodeURIComponent(n)))}(Q,e._id),p(I,M,Q),K([])})).catch((function(e){return console.error(e)}))},endIcon:r.a.createElement(Tn.a,null)},"Send"):r.a.createElement(N.a,{disabled:!0},r.a.createElement(Tn.a,null))),r.a.createElement(Tt.a,{className:o.tableIcon}))),r.a.createElement(Ft.a,null,l?l.map((function(e){return r.a.createElement(kt.a,{key:e.date},r.a.createElement(Tt.a,null,Bn(e.createdAt)),r.a.createElement(Tt.a,null,Bn(e.date)),r.a.createElement(Tt.a,null,e.amount," \u20ac"),r.a.createElement(Tt.a,null,function(e){return e?e.length<50?e:"".concat(e.substr(0,50),"..."):""}(e.notes)),r.a.createElement(Tt.a,null,e.imageName&&r.a.createElement(We.a,{onClick:function(){return X({name:e.imageName,data:e.imageData})}},e.imageName)),r.a.createElement(Tt.a,null,r.a.createElement(Mn,{rowData:e,onChange:function(){return function(e){null!=Q.find((function(t){return t._id===e._id}))?K(Q.filter((function(t){return t._id!==e._id}))):(Q.push(e),K(Object(pe.a)(Q)))}(e)},toMailList:Q})),r.a.createElement(Tt.a,{className:o.tableIcon},r.a.createElement(N.a,{onClick:function(){return m(e._id)}},r.a.createElement(Xt.a,null))))})):null)));return r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,{className:o.root},ee),te,r.a.createElement(en,{open:Boolean(i),onClose:function(){return m(null)},title:"Delete payment",text:"Are you sure?",okText:"Delete",onOk:function(){return d(i,I,M)}}),r.a.createElement("input",{type:"file",id:"fileinput",style:{display:"none"},accept:".pdf",ref:function(e){return J(e)},onChange:function(){return function(){if("function"===typeof window.FileReader){var e=document.getElementById("fileinput");if(e)if(e.files)if(e.files[0]){var t=e.files[0];e.files=null,e.value="";var n=new FileReader;n.onload=function(e){Y({name:t.name,data:e.target.result})},n.readAsDataURL(t)}else alert("Please select an Excel file before clicking 'Process'");else alert("This browser doesn't seem to support the 'files' property of file inputs.");else alert("Um, couldn't find the fileinput element.")}else alert("The file API isn't supported on this browser yet.")}()}}))})),Gn=function(e){var t=Object(a.useState)({dialogOpen:!1,seconds:0}),n=Object(Be.a)(t,2),o=n[0],l=n[1],i=e.params.id;Object(a.useEffect)((function(){var e;if(o.dialogOpen){if(0===o.seconds)c();else{var t=o.seconds-1;e=setTimeout((function(){return l(Object(fe.a)(Object(fe.a)({},o),{},{seconds:t}))}),1e3)}return function(){return clearTimeout(e)}}}),[o.seconds]);var c=function(){l({dialogOpen:!1,seconds:0}),window.close()};return Object(a.useEffect)((function(){i?Re(i.replace(":","")).then((function(e){e&&e.alreadyMarked?window.close():l({dialogOpen:!0,seconds:5})})).catch((function(e){console.error(e),window.close()})):window.close()}),[]),console.log("FOOBAR"),r.a.createElement(Ze.a,{open:o.dialogOpen},r.a.createElement(tt.a,null,"Laskut merkattu maksetuksi\n\n\n\n    T\xe4m\xe4 sulkeutuu automaattisesti ".concat(o.seconds," sekunnin kuluttua...")),r.a.createElement(rt.a,null,r.a.createElement(We.a,{variant:"contained",color:"primary",onClick:function(){return c()}},"Close")))},zn=n(77),Jn=n.n(zn),qn=n(224),Vn=n.n(qn),Qn=n(223),Kn=n.n(Qn),Xn=Object(_.a)((function(e){return{paper:e.monitor.paper,floatRight:e.monitor.floatRight,horizontal:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"85%"},margin:{margin:e.spacing(1)},up:{color:"green"},down:{color:"red"}}})),Zn=function(e,t){var n=[],a=1,r=e.find((function(e){return"USDEUR"===e.symbol}));return r&&(a=r.value),t.filter((function(e){return"USDEUR"!==e})).forEach((function(t){var r=e.find((function(e){return e.symbol===t}));r&&n.push({symbol:t.slice(0,3),icon:"".concat(t.slice(0,3),".png"),price:parseFloat(r.lastPrice)*a,changePrice:parseFloat(r.priceChange)*a,changePercent:parseFloat(r.priceChangePercent)})})),n},ea=["BTCUSDT","ETHUSDT","USDEUR"],ta=function(e){var t=e.refresh,n=e.data,o=e.setData,l=Xn(),i=Object(a.useCallback)((function(){Ae({symbols:ea}).then((function(e){o(Zn(e,ea))})).catch((function(e){console.log("Binance ERROR: ",e)}))}),[true,o]);return Object(a.useEffect)((function(){i()}),[t]),r.a.createElement($e.a,{elevation:4,className:l.paper},r.a.createElement(N.a,{className:l.floatRight,onClick:function(){return i()}},r.a.createElement(Jn.a,{color:"primary"})),n.map((function(e){var t,n;return r.a.createElement("div",{className:l.horizontal,key:e.symbol},r.a.createElement("p",{className:l.margin,style:{width:"28px"}},e.symbol),r.a.createElement("p",{className:l.margin,style:{width:"252x"}},"\u20ac ",null===(t=e.price)||void 0===t?void 0:t.toFixed(0)),r.a.createElement("div",{style:{display:"contents",width:"66px"}},r.a.createElement("p",{className:l.margin},null===(n=e.changePercent)||void 0===n?void 0:n.toFixed(1)," %"),e.changePrice>0?r.a.createElement(Kn.a,{className:l.up}):r.a.createElement(Vn.a,{className:l.down})))})))},na=n(89),aa=n(153),ra=n(226),oa=n.n(ra),la=n(505),ia=n(502),ca=n(436),ua=Object(ca.a)((function(e){return{hiddenTabRoot:{visibility:"collapse",minHeight:"0px",height:"0px"}}})),sa=function(e){var t=e.children,n=e.value,a=e.index,o=Object(mt.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},o),n===a&&t)},ma=function(e){var t=ua(),n=e.panels,o=e.hideTabs,l=e.tabProps,i=Object(a.useState)(0),c=Object(Be.a)(i,2),u=c[0],s=c[1],m=o?{classes:{root:t.hiddenTabRoot}}:{};return r.a.createElement(r.a.Fragment,null,r.a.createElement(la.a,Object.assign({value:u,onChange:function(e,t){return s(t)}},m,l),Object(pe.a)(Array(n.length).keys()).map((function(e){return r.a.createElement(ia.a,Object.assign({label:"Tab-".concat(e)},{id:"full-width-tab-".concat(t=0),"aria-controls":"full-width-tabpanel-".concat(t)}));var t}))),r.a.createElement(oa.a,{index:u,onChangeIndex:function(e){return s(e)}},n.map((function(e,t){return r.a.createElement(sa,{value:u,index:t},e)}))))},da=n(227),fa=n.n(da),pa=Object(_.a)((function(e){return{paper:e.monitor.paper,floatRight:e.monitor.floatRight,background:e.monitor.lightBackground,labelContainer:{position:"absolute",top:"72px",left:"calc(50% - 80px)",height:"100px",width:"150px",textAlign:"center"},statusContainer:{position:"absolute",top:"91%",right:"16px"},labelStyle:{lineHeight:"8px"},arcplotStyle:{position:"absolute",left:"calc(50% - 170px)",top:"8px"},timeLabelsContainer:{position:"absolute",height:"100%",top:"calc(100% - 28px)"},timelabel:{lineHeight:"0px",marginTop:"4px",fontSize:"0.705rem",color:"#ffffff70"},gpuContainer:{display:"flex",justifyContent:"space-between"},gpuInnerContainer:{width:"45%"},gpuLabelDiv:{display:"flex",justifyContent:"space-between",height:"22px"}}})),Ea=Math.PI,ga=function(e){var t,n=e.miningRigs[0].devices.filter((function(e){return"CPU"!==e.deviceType.enumName})).map((function(e){return{name:e.name,powerUsage:e.powerUsage,status:e.status.description,speed:e.speeds}})),a=n.reduce((function(e,t){return e+t.speed.reduce((function(e,t){return e+Number(t.speed)}),0)}),0);return(null===(t=e.devicesStatuses)||void 0===t?void 0:t.DISABLED)&&delete e.devicesStatuses.DISABLED,{status:e.devicesStatuses,profitabilityBTC:e.totalProfitability,totalSpeed:a,devices:n,time:new Date(parseInt(e.miningRigs[0].statusTime))}},ha=function(e,t,n,a,r,o,l,i){var c=.5*-Ea+e/l*Ea,u=function(e,t,n,a,r){return e<=a?"#00ffff":e<=t?"#00dba4":e<=n?"#00bd00":e<=r?"#FF8C00":"#FF0000"}(e,a,r,o,l);return{angle0:.5*-Ea,angle:c,radius0:t,radius:n,color:u,label:i}},va=function(e){var t,n=e.data,o=e.setData,l=e.combData,i=e.setCombData,c=e.hwinfoData,u=e.refresh,s=e.setRefresh,m=pa(),d=Object(a.useState)({data:[],labels:[]}),f=Object(Be.a)(d,2),p=f[0],E=f[1],g=Object(a.useState)({hwinfo:"--",nh:"--",updateTime:!1}),h=Object(Be.a)(g,2),v=h[0],b=h[1],y=Object(a.useCallback)((function(){var e=!1;return Le().then((function(t){e||o(ga(t))})).catch((function(e){console.log("NH ERROR: ",e)})),function(){e=!0}}),[true]);Object(a.useEffect)(y,[u]),Object(na.a)((function(){var e=c.length>0?Yt(new Date(c[0].time)):"--",t=(null===n||void 0===n?void 0:n.time)?Yt(n.time):"--";b({hwinfo:e,nh:t,updateTime:v.updateTime});var a=setTimeout((function(){b(Object(fe.a)(Object(fe.a)({},v),{},{updateTime:!v.updateTime}))}),5e3);return function(){clearTimeout(a)}}),[v.updateTime,null===n||void 0===n?void 0:n.time,c.length>0?c[0].time:null],(function(e,t){return function(e,t){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(e,t)})),Object(na.a)((function(){var e,t,a,o,l=function(e,t){return e&&e.devices?(t&&t[0]&&(Object.keys(t[0]).forEach((function(n){var a=e.devices.find((function(e){return e.name.includes(n)}));a&&Object.keys(t[0][n]).forEach((function(e){a[e.replace("GPU","")]=t[0][n][e]}))})),e.totalGPUPower=e.devices.reduce((function(e,t){return e+t.Power}),0),e.totalPower=e.totalGPUPower+t[0].CPUPower+50),e):e}(n,c);Object.keys(l).length&&(i(l),E({data:[(null===(e=l.devices)||void 0===e?void 0:e.length)>1&&ha(l.devices[1].MemJunctTemp,2.3,2.75,90,98,80,102,"MemJunc"),ha(l.totalGPUPower,2.15,2.25,390,410,150,500,"Power"),ha(l.totalSpeed,2,2.1,135,150,50,160,"Speed")],labels:[l.devices.length>1&&r.a.createElement("div",{key:"MemJuncLabel"},r.a.createElement("p",{className:m.labelStyle},"Mem: ",null===(t=l.devices[1].MemJunctTemp)||void 0===t?void 0:t.toFixed(0)," \xb0")),r.a.createElement("div",{key:"PowerLabel"},r.a.createElement("p",{className:m.labelStyle},"Power: ",null===(a=l.totalGPUPower)||void 0===a?void 0:a.toFixed(0)," W")),r.a.createElement("div",{key:"SpeedLabel"},r.a.createElement("p",{className:m.labelStyle},"Speed: ",null===(o=l.totalSpeed)||void 0===o?void 0:o.toFixed(1)," MH/s"))]}))}),[n,c],(function(e,t){return function(e,t){return!(t[0]&&t[0].devices&&t[1]&&t[1][0])||fa()(e,t)}(e,t)}));var O=function(e){var t=e.title,n=e.value,a=e.alert;return r.a.createElement("div",{className:m.gpuLabelDiv},r.a.createElement("p",{className:m.labelStyle},t),r.a.createElement("p",{className:m.labelStyle,style:a?{color:"red"}:{}},n))},C=function(e){return r.a.createElement($e.a,{elevation:4,className:m.paper,style:{position:"relative",height:"200px",overflow:"hidden"}},r.a.createElement(N.a,{className:m.floatRight,onClick:function(){return s()}},r.a.createElement(Jn.a,{color:"primary"})),r.a.createElement("p",{style:{marginLeft:"8px"}},e.title),e.children,r.a.createElement("div",{className:m.timeLabelsContainer},r.a.createElement("p",{className:m.timelabel},"HWinfo: ",v.hwinfo),r.a.createElement("p",{className:m.timelabel},"NH: ",v.nh)))},j=r.a.createElement(C,{title:"OverView"},r.a.createElement(aa.b,{className:m.arcplotStyle,xDomain:[-3,3],yDomain:[-3,3],width:300,height:300},r.a.createElement(aa.a,{colorType:"literal",animation:{damping:9,stiffness:300},radiusDomain:[0,3],data:p.data,getLabel:function(e){return e.name}})),r.a.createElement("div",{className:m.labelContainer},p.labels),(null===l||void 0===l?void 0:l.status)&&r.a.createElement("div",{className:m.statusContainer},r.a.createElement("p",{className:"".concat(m.labelStyle," ").concat(m.timelabel)},JSON.stringify(l.status).split("{").join("").split("}").join("").split('"').join("").split(":").join(": ")))),S=null===l||void 0===l||null===(t=l.devices)||void 0===t?void 0:t.map((function(e){var t,n,a,o,l,i,c,u,s;return r.a.createElement(C,{key:e.name,title:e.name.split(" ").slice(-1)[0]},r.a.createElement("div",{className:m.gpuContainer},r.a.createElement("div",{className:m.gpuInnerContainer},r.a.createElement(O,{title:"GPU Temp: ",value:r.a.createElement(r.a.Fragment,null,null===(t=e.Temp)||void 0===t?void 0:t.toFixed(1)," \xb0")}),r.a.createElement(O,{title:"HotSpot: ",value:r.a.createElement(r.a.Fragment,null,null===(n=e.HotSpotTemp)||void 0===n?void 0:n.toFixed(1)," \xb0")}),"MemJunctTemp"in e&&r.a.createElement(O,{title:"MemJunc: ",value:r.a.createElement(r.a.Fragment,null,null===(a=e.MemJunctTemp)||void 0===a?void 0:a.toFixed(1)," \xb0"),alert:e.MemJunctTemp>100}),r.a.createElement(O,{title:"Fans: ",value:r.a.createElement(r.a.Fragment,null,null===(o=e.Fan)||void 0===o?void 0:o.toFixed(1)," %"),alert:e.Fan>94})),r.a.createElement("div",{className:m.gpuInnerContainer},r.a.createElement(O,{title:"Power: ",value:r.a.createElement(r.a.Fragment,null,null===(l=e.Power)||void 0===l?void 0:l.toFixed(1)," W")}),r.a.createElement(O,{title:"Speed: ",value:r.a.createElement(r.a.Fragment,null,(null===(i=e.speed)||void 0===i?void 0:i.length)>0?parseFloat(null===(c=e.speed[0])||void 0===c?void 0:c.speed).toFixed(1):0," MH/s")}),r.a.createElement(O,{title:"Algo: ",value:(null===(u=e.speed)||void 0===u?void 0:u.length)>0?null===(s=e.speed[0])||void 0===s?void 0:s.title:"--"}),r.a.createElement(O,{title:"Status: ",value:e.status.includes("OFFLINE")?"OFFLINE":e.status,alert:e.status.includes("OFFLINE")}))))}));return null===S||void 0===S||S.reverse(),r.a.createElement(ma,{hideTabs:!0,panels:S?[j].concat(Object(pe.a)(S)):[j]})},ba=n(152),ya=n.n(ba),Oa=n(228),Ca=n.n(Oa),ja=Object(_.a)((function(e){return{paper:Object(fe.a)(Object(fe.a)({},e.monitor.paper),{},{marginTop:"0px",marginBottom:"0px"}),profitabilityContainer:{textAlign:"center"},profitabilityProjectorContainer:{display:"flex",justifyContent:"space-around"},labelStyle:{lineHeight:"8px"},profitLabelStyle:{color:"#00bd00",fontSize:"18px"},centered:{display:"flex",alignItems:"center",justifyContent:"center"},tabRoot:{visibility:"collapse",minHeight:"0px",height:"0px"},whiteLabel:{color:e.monitor.paper.color}}})),Sa=function(e){var t;return null===(t=e.find((function(e){return"BTC"===e.symbol})))||void 0===t?void 0:t.price},wa=function(e){var t,n,o,l,i=e.nhData,c=e.binanceData,u=ja(),s=Object(a.useState)(!0),m=Object(Be.a)(s,2),d=m[0],f=m[1],p=Object(a.useState)(.158),E=Object(Be.a)(p,2),g=E[0],h=E[1],v=Object(a.useState)({}),b=Object(Be.a)(v,2),y=b[0],O=b[1];Object(na.a)((function(){O(function(e,t,n,a){var r=t/1e3*24*a,o=e-(n?r:0);return{profitabilityEUR:o,profitabilityWeek:7*o,profitabilityMonth:365*o/12,profitabilityYear:365*o,powerCostPercentage:r/e*100}}(i.profitabilityBTC*Sa(c),i.totalPower,d,g))}),[d,g,i,c],(function(e,t){return function(e,t){var n,a,r,o;if(Number.isNaN(null===(n=t[2])||void 0===n?void 0:n.profitabilityBTC)||Number.isNaN(null===(a=t[2])||void 0===a?void 0:a.totalPower)||!Array.isArray(t[3]))return!0;var l=Sa(t[3]);if(!Boolean(l))return!0;var i=Sa(e[3]);return e[0]===t[0]&&e[1]===t[1]&&(null===(r=e[2])||void 0===r?void 0:r.profitabilityBTC)===t[2].profitabilityBTC&&(null===(o=e[2])||void 0===o?void 0:o.totalPower)===t[2].totalPower&&i===l}(e,t)}));var C=function(e){return r.a.createElement("p",Object.assign({className:u.labelStyle},e),e.children)},j=function(e){return r.a.createElement("p",{className:"".concat(u.labelStyle," ").concat(u.profitLabelStyle)},e.children," \u20ac")},S=null===y||void 0===y?void 0:y.powerCostPercentage,w=r.a.createElement($e.a,{elevation:4,className:u.paper},r.a.createElement(We.a,{style:{float:"right",width:"100px",marginLeft:"-100px"},className:u.whiteLabel,onClick:function(){return f(!d)},startIcon:d?r.a.createElement(ya.a,{style:{color:"yellow"}}):r.a.createElement(Ca.a,null)},Number.isFinite(S)?S.toFixed(0):"--"," %"),r.a.createElement("div",{className:u.profitabilityContainer},r.a.createElement("div",{style:{dispaly:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(C,{style:{marginRight:"-8px"}},"Daily profit: "),r.a.createElement(j,null," ",null===(t=y.profitabilityEUR)||void 0===t?void 0:t.toFixed(2))),r.a.createElement("div",{className:u.profitabilityProjectorContainer},r.a.createElement("div",null,r.a.createElement(C,null,"Week"),r.a.createElement(j,null,null===(n=y.profitabilityWeek)||void 0===n?void 0:n.toFixed(0))),r.a.createElement("div",null,r.a.createElement(C,null,"Month"),r.a.createElement(j,null,null===(o=y.profitabilityMonth)||void 0===o?void 0:o.toFixed(0))),r.a.createElement("div",null,r.a.createElement(C,null,"Year"),r.a.createElement(j,null,null===(l=y.profitabilityYear)||void 0===l?void 0:l.toFixed(0)))))),D=r.a.createElement($e.a,{elevation:4,className:"".concat(u.paper," ").concat(u.centered),style:{height:"148px"}},r.a.createElement(Ye.a,{label:r.a.createElement(r.a.Fragment,null,r.a.createElement(ya.a,{style:{color:"yellow"}}),"Power Cost per kW/h"),type:"number",value:g,className:u.powerCostLabel,onChange:function(e){return h(e.target.value)},InputLabelProps:{className:"".concat(u.whiteLabel," ").concat(u.centered)},InputProps:{className:u.whiteLabel,style:{textAlign:"right"}}}));return r.a.createElement(ma,{hideTabs:!0,panels:[w,D]})},Da=Object(_.a)((function(e){return{root:{width:"100%",height:"100vh"},background:e.monitor.background,refreshButtonContainer:{display:"flex",justifyContent:"center"}}})),ka=function(e){var t=Object(a.useState)({refresh:!1}),n=Object(Be.a)(t,2),o=n[0],l=n[1],i=Object(a.useState)([]),c=Object(Be.a)(i,2),u=c[0],s=c[1],m=Object(a.useState)([]),d=Object(Be.a)(m,2),f=d[0],p=d[1],E=Object(a.useState)({data:{},combinedData:{}}),g=Object(Be.a)(E,2),h=g[0],v=g[1],b=Da();return Object(a.useEffect)((function(){_e({$limit:1,$sort:{time:-1}}).then((function(e){return s(e.data)})).catch((function(e){console.log(e)}))}),[o.refresh]),r.a.createElement("div",{className:"".concat(b.root," ").concat(b.background)},r.a.createElement(va,{refresh:o.refresh,setRefresh:function(){return l({refresh:!o.refresh})},data:h.data,combData:h.combinedData,setData:function(e){return v(Object(fe.a)(Object(fe.a)({},h),{},{data:e}))},setCombData:function(e){return v(Object(fe.a)(Object(fe.a)({},h),{},{combinedData:e}))},hwinfoData:u}),r.a.createElement(wa,{nhData:h.combinedData,binanceData:f}),r.a.createElement(ta,{refresh:o.refresh,data:f,setData:function(e){return p(e)}}),r.a.createElement("div",{className:b.refreshButtonContainer},r.a.createElement(We.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(Jn.a,null),onClick:function(){return l(Object(fe.a)(Object(fe.a)({},o),{},{refresh:!o.refresh}))}},"Refresh")))},Ta={open:!1},Fa={open:!1,anchor:null},Na={filters:{main:{},side:{},speed:{$lt:180},day:{}},search:"",searchOptions:[],sort:{},page:0,limit:10,selectedFood:null,foodEdit:null,foodEditOpen:!1,foods:{data:[]},filtersOpen:!1,distincts:{},errors:[],latestFood:null},xa={data:null,deleteId:null,distinctNotes:[]},Pa=Object(c.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:"",err:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return{message:t.message,err:""};case"SET_ERROR":return{message:"",err:t.message};default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return t.user;case"DEAUTH":return{};default:return e}},drawer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ta,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_DRAWER":return{open:!0};case"CLOSE_DRAWER":return{open:!1};default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_PROFILE_MENU":return{open:!0,anchor:t.target};case"CLOSE_PROFILE_MENU":return{open:!1,anchor:null};default:return e}},food:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTERS":return Object.assign({},e,{filters:t.filters});case"SELECT_FOOD":return Object.assign({},e,{selectedFood:t.food});case"EDIT_FOOD":var n=e.foodEditOpen;return n?Object.assign({},e,{foodEdit:null,foodEditOpen:!1}):Object.assign({},e,{foodEdit:t.food,foodEditOpen:!0});case"SET_FOODS":var a=t.foods;return Object.assign({},e,{foods:a.foods,filters:a.filters,sort:a.sort,search:a.search,page:a.page,limit:a.limit});case"SET_OPEN_FILTERS":var r=e.filtersOpen;return Object.assign({},e,{filtersOpen:!r});case"SET_DISTINCTS":return Object.assign({},e,{distincts:t.res});case"SET_ERRORS":return Object.assign({},e,{errors:t.errors});case"SET_LATEST_FOOD":return Object.assign({},e,{latestFood:t.food});case"SET_SEARCH_OPTIONS":return Object.assign({},e,{searchOptions:t.options});default:return e}},payment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA":return Object.assign({},e,{data:t.data});case"SET_DELETE_ID":return Object.assign({},e,{deleteId:t.id});case"SET_DISTINCT_NOTES":return Object.assign({},e,{distinctNotes:t.notes});default:return e}}}),Ra=Object(c.c)(Pa);var Ia=m()().configure(f()("https://kisaeeheifoodpicker.herokuapp.com").superagent(h.a)).configure(E()({storage:window.localStorage}));function _a(){!function(e){if("/signin"!==e&&!e.includes("/pending-payments:")){var t=Ra.getState().user;t&&t._id||i.c.push("/signin")}}(window.location.pathname)}function La(){l.a.render(r.a.createElement(u.a,{store:Ra},r.a.createElement(i.b,{history:i.c},r.a.createElement(i.a,{path:"/",component:Ue,onEnter:_a},r.a.createElement(i.a,{path:"/home",component:Qe}),r.a.createElement(i.a,{path:"/signin",component:qe}),r.a.createElement(i.a,{path:"/foods",component:jn}),r.a.createElement(i.a,{path:"/payments",component:Hn}),r.a.createElement(i.a,{path:"/pending-payments:id",component:Gn}),r.a.createElement(i.a,{path:"/minermonitor",component:ka})))),document.getElementById("root"))}Ia.reAuthenticate().then((function(e){Ra.dispatch(M(e.user)),La()})).catch((function(e){La()}));var Aa=t.default=Ia}},[[427,1,2]]]);
//# sourceMappingURL=main.f973e71f.chunk.js.map