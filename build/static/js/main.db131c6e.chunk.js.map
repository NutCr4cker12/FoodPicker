{"version":3,"sources":["theme.js","App/AppActions.js","App/Header.js","App/Message.js","core/NavItem.js","App/Nav.js","api.js","App/profile.js","App/App.js","signin/SignIn.js","home/home.js","core/TabContent.js","foods/FilterSection.js","foods/FilterSorting.js","foods/Filters.js","foods/foodAction.js","foods/Search.js","core/combineDates.js","core/Table.js","core/BackDialog.js","foods/foodEdit.js","foods/SelectedFood.js","foods/Foods.js","shoplist/shoplist.js","payments/paymentAction.js","payments/payments.js","App/drawerReducer.js","App/profileReducer.js","foods/foodReducers.js","payments/paymentReducer.js","reducers.js","App/AppReducer.js","App/userReducer.js","index.js"],"names":["muiTheme","createMuiTheme","palette","primary","main","green","secondary","error","red","overrides","MuiPaper","root","flexBasis","MuiTabs","vertical","maxWidth","MuiGrid","justifyContent","MuiDialogTitle","flexDirection","alignItems","separate","flexGrow","marginTop","centerDivColumn","display","spreadDivColumn","AppTheme","props","ThemeProvider","theme","children","setError","message","type","setMessage","authUser","user","useStyles","makeStyles","navBar","zIndex","drawer","position","top","left","margin","connect","state","drawerOpen","open","profileOpen","profile","dispatch","onOpenDrawer","onCloseDrawer","onNavigate","pathname","browserHistory","push","onOpenProfile","event","target","currentTarget","onCloseProfile","appbar","mobileNavIcon","profileButton","location","classes","_id","IconButton","onClick","style","color","fontSize","edge","AppBar","className","Toolbar","text","app","err","onClose","Snackbar","Boolean","autoHideDuration","elevation","variant","severity","path","icon","ListItem","button","key","ListItemIcon","ListItemText","capitalCase","menuItems","Divider","role","Drawer","List","isChrome","navigator","userAgent","indexOf","isSafari","isOpera","toLowerCase","users","email","password","authenticate","strategy","logout","getSorting","sort","s","Object","keys","forEach","value","name","convertName","convertFilters","filters","f","d","assign","nins","length","map","x","parseInt","split","$nin","foodService","service","foods","page","search","limit","sorting","query","$skip","$limit","$sort","$search","find","food","create","id","patch","remove","Promise","resolve","reject","then","result","mainTypes","sideTypes","dayTypes","Array","data","maintype","sidetype","Set","side","day","lasteaten","$lasteaten","res","paymentsService","payments","payment","anchorEl","anchor","onSignOut","timeout","setTimeout","clearTimeout","catch","keepMounted","disableAutoFocus","MenuItem","disabled","opacity","isQuest","App","profileMenu","this","CssBaseline","React","Component","spacing","TextField","paddingRight","onSignIn","onSignInGoogle","onResetPassword","useState","setEmail","setPassword","submitHanlder","preventDefault","Paper","width","subheader","ListSubheader","onSubmit","label","fullWidth","onChange","e","helperText","Button","startIcon","paper","marginLeft","marginRight","index","other","Typography","component","hidden","aria-labelledby","Box","p","filterSectionRoot","backgroundColor","background","height","tabs","borderRight","divider","verticalTab","center","tabContainer","paddingTop","speedContainer","minWidth","speedText","speedBtn","padding","textAlign","filterButton","filterButtonDisabled","header","filterTab","setFilters","tabValue","setTabValue","onFilterClick","selected","newValue","forceColumn","filter","first","GridHeader","Fragment","Grid","item","xs","onOffBtn","on","buttonFilters","arr","container","directon","justify","mainContent","sideContent","dayContent","speedFilter","speed","speedValue","timeIsLess","speedFilterText","handleSpeedClick","speedContent","Slider","defaultValue","track","getAriaValueText","valueLabelDisplay","valueLabelFormat","hours","Math","floor","mins","getSpeedLabel","step","min","max","getSpeedText","Tabs","orientation","indicatorColor","textColor","Tab","TabContent","buttonContainer","descriptionContainer","upperdescriptionContainer","textContainer","setSort","SortButton","getSortDescriptionUp","handleChange","getSortDescriptionDown","actionContent","copyObj","JSON","parse","stringify","currentFilters","filtersOpen","onApply","setOpenFilter","currentSort","clearFilters","liha","Dialog","FilterSorting","DialogActions","autoFocus","selectFood","setEditFood","setErrors","errors","setOptions","options","searchDiv","btnDiv","div","searchOptions","onSetOptions","$regex","console","log","onSelectFood","searchState","setSearchState","Autocomplete","getOptionLabel","option","renderOption","bolded","i","boldSearched","renderInput","params","InputProps","rest","startAdornment","InputAdornment","placeholder","setSearch","getShortTime","date","short","getDate","m","getMonth","year","getFullYear","toString","substr","getDateText","start","end","ago","numDays","days","today","Date","diff","round","w","dates","maxLength","a","b","firstDate","latestDate","paddingLeft","highlight","lighten","light","dark","title","flex","visuallyHidden","border","clip","overflow","columns","setLimit","onAddFood","setPage","count","total","pager","tableToolbar","Tooltip","size","endIcon","getSortDirection","tableHeaders","TableHead","TableRow","TableCell","align","sortDirection","TableSortLabel","active","direction","tableBody","TableBody","hover","join","timeseaten","combineDates","time","foodamount","TableContainer","Table","TablePagination","rowsPerPage","onChangeRowsPerPage","rowsPerPageOptions","onChangePage","newPage","onCancel","onOk","cancelText","okText","oncancel","DialogTitle","DialogContent","selectFieldContainer","selectField","addButton","common","white","sideType","dialogContainer","distDayTypes","distincts","foodEditOpen","distMainTypes","distSideTypes","onSetEditFood","onDeleteFood","onSaveFood","foodEdit","onUpdate","mainType","setMainType","foodAmount","setFoodAmount","setSideTypes","setName","link","recipe","setRecipe","eaten","setEaten","cookTime","setCookTime","deleteOpen","setDeleteOpen","SelectField","types","select","sideTypeElement","FormControl","includes","InputLabel","Select","multiple","multiline","input","OutlinedInput","renderValue","Checkbox","checked","FormHelperText","nameElement","speedElement","RegExp","test","recipeElement","eatenElement","editContent","deleteFood","noValidate","BackDialog","spread","centerColumns","datePickerTextfield","moment","locale","updateLocale","week","dow","doy","selectedFood","latestFood","onFoodSelection","latestFoodInfo","lastDate","startDate","valueOf","endDate","getLatestFoodInfo","setStartDate","setEndDate","historyContent","selectContent","Link","href","utils","MomentUtils","DatePicker","format","views","minDate","showTodayButton","_d","animateYearScrolling","TextFieldComponent","toDateString","currDay","newDay","concat","defaultFood","onRefresh","initFilters","$lt","shoplist","setDeleteId","spacings","tableIcon","deleteId","getData","startOfTheMonth","getTime","$gt","onGetData","onAddPayment","onSetDeleteId","onDeletePayment","setDate","amount","setAmount","reduce","addPayment","replace","endAdornment","parseFloat","table","month","formatDate","note","notes","drawerState","profileMenuState","foodState","paymentState","combineReducers","action","isOpen","newState","store","createStore","reducers","feathers","configure","process","superagent","authentication","storage","window","localStorage","enterHandler","getState","handlePath","initRender","ReactDOM","render","history","onEnter","Home","SignIn","Foods","ShopList","Payments","document","getElementById","reAuthenticate","r"],"mappings":"kWAIMA,EAAWC,YAAe,CAC/BC,QAAS,CAERC,QAAS,CACRC,KAAMC,IAAM,MAEbC,UAAW,CACVF,KAAM,WAEPG,MAAOC,KAERC,UAAW,CACVC,SAAU,CACTC,KAAM,CAELC,UAAW,SAGbC,QAAS,CACRC,SAAU,CACTC,SAAU,SAGZC,QAAS,CACRL,KAAM,CACLM,eAAgB,iBAGlBC,eAAgB,CACfP,KAAM,CACLQ,cAAe,MACfC,WAAY,SACZH,eAAgB,mBAInBI,SAAU,CACTC,SAAU,GAEXX,KAAM,CACLY,UAAW,QAEZC,gBAAiB,CAChBC,QAAS,OACTN,cAAe,SACfC,WAAY,UAEbM,gBAAiB,CAChBD,QAAS,OACTN,cAAe,MACfC,WAAY,SACZH,eAAgB,mBAKLU,EAAW,SAACC,GAExB,OACC,kBAACC,EAAA,EAAD,CAAeC,MAAO9B,GACrB,6BACE4B,EAAMG,Y,+DCjEEC,EAAW,SAAAC,GACvB,MAAO,CAAEC,KAAM,YAAaD,YAGdE,EAAa,SAAAF,GAC3B,MAAO,CAAEC,KAAM,cAAeD,YAqBhBG,EAAW,SAAAC,GACzB,MAAO,CAAEH,KAAM,OAAQG,S,kBCblBC,EAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCU,OAAQ,CACPC,OAAQX,EAAMW,OAAOC,OAAS,EAC9BC,SAAU,QACVC,IAAK,EACLC,KAAM,EACNC,OAAQ,GAGTzB,SAAUS,EAAMT,aAuEF0B,eA7BS,SAACC,GACxB,MAAO,CACNX,KAAMW,EAAMX,KACZY,WAAYD,EAAMN,OAAOQ,KACzBC,YAAaH,EAAMI,QAAQF,SAIF,SAACG,GAC3B,MAAO,CACNC,aAAc,WACbD,EDjEK,CAAEnB,KAAM,iBCmEdqB,cAAe,WACdF,EDhEK,CAAEnB,KAAM,kBCkEdsB,WAAY,SAAAC,GACXC,IAAeC,KAAKF,GACpBJ,EDpEK,CAAEnB,KAAM,kBCsEd0B,cAAe,SAACC,GACfR,EDnEK,CAAEnB,KAAM,oBAAqB4B,OCmEbD,EAAME,iBAE5BC,eAAgB,WACfX,EDlEK,CAAEnB,KAAM,2BCuEDa,EApEA,SAAC,GAA6G,IAExHkB,EAAQC,EAAeC,EAFVC,EAA0G,EAA1GA,SAAU/B,EAAgG,EAAhGA,KAAMY,EAA0F,EAA1FA,WAAYK,EAA8E,EAA9EA,aAAcC,EAAgE,EAAhEA,cAAeJ,EAAiD,EAAjDA,YAAaS,EAAoC,EAApCA,cAAeI,EAAqB,EAArBA,eAChGK,EAAU/B,IA+BhB,OA5BA6B,EACa,MAAZ9B,EAAKiC,KACL,6BACC,kBAACC,EAAA,EAAD,CAAYC,QAASrB,EAAca,EAAiBJ,EAAea,MAAO,CAAEC,MAAO,UAClF,kBAAC,IAAD,CAAmBC,SAAS,YAKL,YAAtBP,EAASX,WAIZS,EACC,kBAACK,EAAA,EAAD,CAAYK,KAAK,QAAQH,MAAO,CAAEC,MAAO,SAAWF,QAAS,WAAOvB,EAAaM,IAAkBD,MAClG,kBAAC,IAAD,QAGHW,EACC,kBAACY,EAAA,EAAD,CAAQlC,SAAS,SAASmC,UAAWT,EAAQ7B,QAC5C,kBAACuC,EAAA,EAAD,KACEb,EACD,yBAAKY,UAAWT,EAAQhD,WACvB8C,IAMH,gCACEF,M,kBClBWlB,eAfS,SAACC,GACxB,MAAO,CACNgC,KAAMhC,EAAMiC,IAAIhD,QAChBiD,IAAKlC,EAAMiC,IAAIC,QAIU,SAAC7B,GAC3B,MAAO,CACN8B,QAAS,WACR9B,EAASlB,EAAW,SAKRY,EAlCC,SAAC,GAAD,IAAGiC,EAAH,EAAGA,KAAME,EAAT,EAASA,IAAKC,EAAd,EAAcA,QAAd,OACf,kBAACC,EAAA,EAAD,CACClC,KAAMmC,QAAQH,GAAOF,GACrBM,iBAAkB,IAClBH,QAASA,GAGT,kBAAC,IAAD,CACCI,UAAW,EACXC,QAAQ,SACRL,QAASA,EACTM,SAAUP,EAAM,QAAUF,EAAO,UAAY,QAE5CE,IAAYF,GAAc,S,4ICgBfjC,gBAfS,SAACC,GACxB,MAAO,MAKmB,SAACK,GAC3B,MAAO,CACNG,WAAY,SAAAC,GACXC,IAAeC,KAAKF,GACpBJ,EHjBK,CAAEnB,KAAM,qBGsBDa,EA1BC,SAACnB,GAAW,IACnB8D,EAA2B9D,EAA3B8D,KAAMC,EAAqB/D,EAArB+D,KAAMnC,EAAe5B,EAAf4B,WAEpB,OACC,kBAACoC,GAAA,EAAD,CAAUC,QAAM,EAACC,IAAKJ,EAAMlB,QAAS,kBAAMhB,EAAW,IAAD,OAAKkC,MACzD,kBAACK,GAAA,EAAD,KAAeJ,GACf,kBAACK,GAAA,EAAD,CAAc7F,QAAS8F,aAAYP,SCmDvB3C,gBAvBS,SAACC,GACxB,MAAO,CACNX,KAAMW,EAAMX,KACZY,WAAYD,EAAMN,OAAOQ,SAIA,SAACG,GAC3B,MAAO,CACLC,aAAc,WACfD,EJ5CM,CAAEnB,KAAM,iBI8CbqB,cAAe,WAChBF,EJ3CM,CAAEnB,KAAM,kBI6CbsB,WAAY,SAAAC,GACbC,IAAeC,KAAKF,GACpBJ,EJ/CM,CAAEnB,KAAM,qBIqDDa,EAnDH,SAAC,GAAiE,IAAhEV,EAA+D,EAA/DA,KAAMY,EAAyD,EAAzDA,WAAYK,EAA6C,EAA7CA,aAAcC,EAA+B,EAA/BA,cACzC2C,GADwE,EAAhB1C,WAC5C,IAGhB,OAAInB,EAAKiC,KACR4B,EAAUvC,KAAK,kBAACwC,EAAA,EAAD,CAASL,IAAI,UAC5BI,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAM,OAAQC,KAAM,kBAAC,IAAD,SACpDO,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,QAAQC,KAAM,kBAAC,IAAD,SACnDO,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,WAAWC,KAAM,kBAAC,KAAD,SACpC,UAAdtD,EAAK+D,MACRF,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,WAAWC,KAAM,kBAAC,KAAD,SAEvDO,EAAUvC,KAAK,kBAACwC,EAAA,EAAD,CAASL,IAAI,UAG3B,kBAACO,EAAA,EAAD,CACCnD,KAAMD,EACNkC,QAAS,SAAAjC,GAAI,OAAIA,EAAMK,IAAkBD,MAExC,kBAACgD,EAAA,EAAD,KACEJ,KAKE,iC,kDCxCLK,GAAWC,UAAUC,UAAUC,QAAQ,WAAa,EAGpDC,GAAWH,UAAUC,UAAUC,QAAQ,WAAa,EACpDE,GAAUJ,UAAUC,UAAUI,cAAcH,QAAQ,OAAS,EAC7DH,IAAYI,KAAUA,IAAW,GACjCJ,IAAYK,KAASL,IAAW,GAMpC,IACaO,GAcJ,SAACC,EAAOC,GAAR,OAAqB/B,GAAIgC,aAAa,CAAEC,SAAU,QAASH,QAAOC,cAd9DF,GAmBH,kBAAM7B,GAAIkC,UAOdC,GAAa,SAACC,GACnB,IAAMC,EAAI,GA4BV,OATAC,OAAOC,KAAKH,GAAMI,SAAQ,SAAA3B,GACzB,IAAM4B,EAAQL,EAAKvB,GACL,QAAV4B,EACHL,EAAKvB,GAAO,EACQ,SAAV4B,IACVL,EAAKvB,IAAQ,GAEdwB,EAzBmB,SAACK,GACpB,OAAQA,GACP,IAAK,OACJ,MAAO,WACR,IAAK,OACJ,MAAO,WACR,IAAK,OACJ,MAAO,OACR,IAAK,cACJ,MAAO,aACR,IAAK,eACJ,MAAO,OACR,IAAK,aACJ,MAAO,YACR,QACC,MAAO,cAUPC,CAAY9B,IAAQuB,EAAKvB,MAErBwB,GAGFO,GAAiB,SAACC,GACvB,IAAIC,EAAI,GAsBR,OArBAR,OAAOC,KAAKM,GAASL,SAAQ,SAAAvF,GAC5B,IAAI8F,EAAI,GACR,GAAa,UAAT9F,EACH8F,EAAC,KAAWF,EAAQ5F,GACpB6F,EAAIR,OAAOU,OAAOF,EAAGC,OACf,CACN,IAAIE,EAAO,GACXX,OAAOC,KAAKM,EAAQ5F,IAAOuF,SAAQ,SAAAE,GACN,SAAxBG,EAAQ5F,GAAMyF,IAAkBO,EAAKvE,KAAKgE,MAE3CO,EAAKC,SACK,QAATjG,GACHgG,EAAOA,EAAKE,KAAI,SAAAC,GAAC,OAAIC,SAASD,EAAEE,MAAM,KAAK,OAC3CP,EAAC,WAAiB,CAAEQ,KAAMN,IAE1BF,EAAE,GAAD,OAAI9F,EAAJ,SAAkB,CAAEsG,KAAMN,GAE5BH,EAAIR,OAAOU,OAAOF,EAAGC,QAIjBD,GAGFU,GAAc,kBAAMxD,GAAIyD,QAAQ,aACzBC,GACN,SAACb,EAASc,EAAMvB,GAA8B,IAAxBwB,EAAuB,uDAAd,GAAIC,EAAU,uCAC5Cf,EAAIF,GAAeC,GACnBiB,EAAU3B,GAAWC,GACvB2B,EAAQzB,OAAOU,OAAOF,EAAG,CAC5BkB,MAAqC,IAA5BL,EAAO,EAAK,EAAI,EAAIA,GAC7BM,OAAQJ,EACRK,MAAOJ,IAGR,OADIF,IAAQG,EAAQzB,OAAOU,OAAOe,EAAO,CAAEI,QAASP,KAC7CJ,KAAcY,KAAK,CAAEL,MAAOA,KAVxBL,GAaJ,SAAAW,GAAI,OAAIb,KAAcc,OAAOD,IAbzBX,GAcL,SAACa,EAAIF,GAAL,OAAcb,KAAcgB,MAAMD,EAAIF,IAdjCX,GAeJ,SAAAa,GAAE,OAAIf,KAAciB,OAAOF,IAfvBb,GAgBN,SAAAK,GAAK,OAAIP,KAAcY,KAAK,CAAEL,MAAOA,KAhB/BL,GAiBD,WACV,OAAO,IAAIgB,SAAQ,SAACC,EAASC,GAAV,OAClBpB,KAAcY,KAAK,CAAEL,MAAO,CAAEE,OAAQ,OACpCY,MAAK,SAAAC,GACL,IAAIC,EAAY,GACZC,EAAY,GACVC,EAAW,aAAIC,MAAM,GAAG3C,QAAQY,KAAI,SAAAJ,GAAC,gBAAOA,EAAI,EAAX,WAC3C+B,EAAOK,KAAK3C,SAAQ,SAAAM,GACnBiC,EAAUrG,KAAKoE,EAAEsC,UACjBtC,EAAEuC,SAAS7C,SAAQ,SAAAH,GAAC,OAAI2C,EAAUtG,KAAK2D,SAExCsC,EAAQ,CACPxJ,KAAK,aAAK,IAAImK,IAAIP,IAClBQ,KAAK,aAAK,IAAID,IAAIN,IAClBQ,IAAKP,WA/BEvB,GAqCD,WACV,OAAO,IAAIgB,SAAQ,SAACC,EAASC,GAC5BpB,KAAcY,KAAK,CAAEL,MAAO,CAC3BG,MAAO,CACNuB,WAAY,GAEbC,YAAY,KACTb,MAAK,SAAAc,GACRhB,EAAQgB,UAkBNC,GAAkB,kBAAM5F,GAAIyD,QAAQ,gBAC7BoC,GACN,SAAA9B,GAAK,OAAI6B,KAAkBxB,KAAK,CAAEL,MAAOA,KADnC8B,GAGJ,SAAAC,GAAO,OAAIF,KAAkBtB,OAAOwB,IAHhCD,GAKJ,SAAAtB,GAAE,OAAIqB,KAAkBnB,OAAOF,ICtFzBzG,gBApCS,SAACC,GACxB,MAAO,CACNX,KAAMW,EAAMX,KACZc,YAAaH,EAAMI,QAAQF,KAC3B8H,SAAUhI,EAAMI,QAAQ6H,WAIC,SAAC5H,GAC3B,MAAO,CACNW,eAAgB,WACfX,ENnCK,CAAEnB,KAAM,wBMqCdsB,WAAY,SAAAC,GACXC,IAAeC,KAAKF,IAErByH,UAAW,WACV,IAAMC,EAAUC,YAAW,WAC1B/H,EAASlB,EAAW,0CAClB,KACH2E,KACEgD,MAAK,WACLuB,aAAaF,GACb9H,EAASlB,EAAW,gBACpBkB,ENxCG,CAAEnB,KAAM,WM0CXwB,IAAeC,KAAK,cAEpB2H,OAAM,SAAApG,GACNmG,aAAaF,GACb9H,EAASlB,EAAW+C,EAAIjD,iBAMdc,EAhEC,SAAC,GAAgE,IAA9DV,EAA6D,EAA7DA,KAAMc,EAAuD,EAAvDA,YAAaa,EAA0C,EAA1CA,eAAgBgH,EAA0B,EAA1BA,SAAUE,EAAgB,EAAhBA,UAE/D,OACC,kBAAC,KAAD,CACCF,SAAUA,EACVO,aAAW,EACXrI,KAAMC,EACNgC,QAASnB,EACTwH,kBAAkB,GAElB,kBAACC,GAAA,EAAD,CAAUC,UAAU,EAAMjH,MAAO,CAAEkH,QAAS,IAC3C,kBAAC3F,GAAA,EAAD,CAAc7F,QAAO,wBAAmBkC,EAAKuJ,QAAU,SAAW,OAEnE,kBAACH,GAAA,EAAD,CAAUC,UAAU,EAAMjH,MAAO,CAAEkH,QAAS,IAC3C,kBAAC3F,GAAA,EAAD,CAAc7F,QAASkC,EAAKsF,KAAMrH,UAAW+B,EAAK0E,SAEnD,kBAACZ,EAAA,EAAD,MACA,kBAACsF,GAAA,EAAD,CAAUjH,QAAS,WAClBR,IACAkH,MAEA,kBAACnF,GAAA,EAAD,KAAc,kBAAC,KAAD,OACd,kBAACC,GAAA,EAAD,CAAc7F,QAAQ,kBC/BL0L,G,iLAGnB,IAAIrJ,EAAQsJ,EAQZ,MAPqC,YAAjCC,KAAKnK,MAAMwC,SAASX,WACvBjB,EACC,6BACC,kBAAC,GAAD,OAEFsJ,EAAc,6BAAK,kBAAC,GAAD,QAGnB,kBAAC,EAAD,KACC,6BACC,kBAACE,EAAA,EAAD,MACA,kBAAC,EAAD,CAAQ5H,SAAU2H,KAAKnK,MAAMwC,WAC5B5B,EACAsJ,EACD,6BACEC,KAAKnK,MAAMxB,KACX2L,KAAKnK,MAAMG,UAEb,kBAAC,EAAD,Y,GAtB4BkK,IAAMC,W,sECYjC5J,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCnB,KAAM,CACLY,UAAW,OACXE,QAAS,OACTqB,OAAQhB,EAAMqK,QAAQ,IAEvBC,UAAW,CACV3K,QAAS,OACTqB,OAAQhB,EAAMqK,QAAQ,GACtBE,aAAcvK,EAAMqK,QAAQ,QAgE9B,IA0DepJ,gBA1DS,SAACC,GACxB,MAAO,MAGmB,SAACK,GAC3B,MAAO,CACNiJ,SAAU,SAACvF,EAAOC,GACjB,GAAqB,IAAjBD,EAAMoB,QAAoC,IAApBnB,EAASmB,OAElC,OADA9E,EAASlB,EAAW,wCACb,CAAEE,KAAM,KAAM9B,MAAOoJ,QAAQC,QAAQ,IAE7C,GAAqB,IAAjB7C,EAAMoB,OAET,OADA9E,EAASlB,EAAW,2BACb,CAAEE,KAAM,KAAM9B,MAAOoJ,QAAQC,QAAQ,IAE7C,IAA4B,IAAxB7C,EAAML,QAAQ,KAEjB,OADArD,EAASlB,EAAW,uCACb,CAAEE,KAAM,KAAM9B,MAAOoJ,QAAQC,QAAQ,IAE7C,GAAwB,IAApB5C,EAASmB,OAEZ,OADA9E,EAASlB,EAAW,6BACb,CAAEE,KAAM,KAAM9B,MAAOoJ,QAAQC,QAAQ,IAE7CvG,EAASlB,EAAW,kBACpB,IAAMgJ,EAAUC,YAAW,WAC1B/H,EAASlB,EAAW,yCAClB,KACH,OAAO2E,GAAaC,EAAOC,GACzB8C,MAAK,SAAAC,GAKL,OAJAsB,aAAaF,GACb9H,EAASlB,EAAW,eACpBkB,EAASjB,EAAS2H,EAAO1H,OACzBqB,IAAeC,KAAK,SACb,CAAEtB,KAAM0H,EAAO1H,KAAM9B,MAAO,SACjC+K,OAAM,SAAApG,GAWR,OAVAmG,aAAaF,GACI,eAAbjG,EAAIyC,KACPtE,EAASlB,EAAW,mCACG,qBAAb+C,EAAIyC,KACdtE,EAASlB,EAAW,mDAEpBkB,EAASrB,EAAS,UAAYkD,EAAIyC,KAAOzC,EAAIjD,UAE9CyB,IAAeC,KAAK,KACpByH,YAAW,kBAAM1H,IAAeC,KAAK,aAAY,IAC1C,CAAEtB,KAAM,KAAM9B,MAAO2E,OAG/BqH,eAAgB,aAIhBC,gBAAiB,gBAMJzJ,EAtHf,SAAgBnB,GACf,IAAMyC,EAAU/B,KADM,EAENmK,qBAATlM,EAFe,uBAGIkM,qBAHJ,oBAGf1F,EAHe,KAGR2F,EAHQ,OAIUD,qBAJV,oBAIfzF,EAJe,KAIL2F,EAJK,KAMdL,EAAa1K,EAAb0K,SAEFM,EAAgB,SAAA/I,GACrBA,EAAMgJ,iBACNP,EAASvF,EAAOC,IAGjB,OACC,yBAAKlC,UAAWT,EAAQ1D,MACvB,kBAACmM,GAAA,EAAD,CAAOvH,UAAW,EAAGd,MAAO,CAAEsI,MAAO,SACpC,kBAACzG,EAAA,EAAD,CAAM0G,UAAW,kBAACC,GAAA,EAAD,iBAChB,0BAAMC,SAAUN,EAAenI,MAAO,CAAElD,UAAW,SAClD,6BACC,kBAAC6K,GAAA,EAAD,CACCtH,UAAWT,EAAQ+H,UACnBe,MAAM,QACNC,WAAW,EACXC,SAAU,SAAAC,GAAC,OAAIZ,EAASY,EAAExJ,OAAO4D,QACjCxF,KAAK,QACL3B,QAASA,EACTgN,WAAsB,IAAVhN,GAAyB,IAAVA,EAAc,qBAAiC,IAAVA,EAAc,qCAAuC,QAGvH,6BACC,kBAAC6L,GAAA,EAAD,CACCtH,UAAWT,EAAQ+H,UACnBe,MAAM,WACNC,WAAW,EACXC,SAAU,SAAAC,GAAC,OAAIX,EAAYW,EAAExJ,OAAO4D,QACpCxF,KAAK,WACL3B,QAASA,EACTgN,WAAsB,IAAVhN,GAAyB,IAAVA,EAAc,uBAAyB,QAGpE,6BACC,kBAACiN,GAAA,EAAD,CACChI,QAAQ,YACRd,MAAM,UACN+I,UAAW,kBAAC,KAAD,MACXjJ,QAASoI,EACT9H,UAAWT,EAAQ+H,WALpB,YAQD,2BAAOlK,KAAK,SAASuC,MAAO,CAAEhD,QAAS,iBCvEvCa,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtC4L,MAAO,CACNnM,UAAW,QACXoM,WAAY,OACZC,YAAa,YAwCA7K,gBAfS,SAACC,GACxB,MAAO,CACNX,KAAMW,EAAMX,SAIa,SAACgB,GAC3B,MAAO,CACNG,WAAY,SAAAC,GACXC,IAAeC,KAAKF,GACpBJ,ETrCK,CAAEnB,KAAM,qBS0CDa,EApCF,SAACnB,GACb,IAAMyC,EAAU/B,KACRD,EAAST,EAATS,KACJ6D,EAAY,GAQhB,OANAA,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,QAAQC,KAAM,kBAAC,IAAD,SACnDO,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,WAAWC,KAAM,kBAAC,KAAD,SACpC,UAAdtD,EAAK+D,MACRF,EAAUvC,KAAK,kBAAC,GAAD,CAASmC,IAAK,EAAGJ,KAAK,WAAWC,KAAM,kBAAC,KAAD,SAItD,6BACC,kBAACW,EAAA,EAAD,CAAMxB,UAAWT,EAAQqJ,OACvBxH,O,uFC/BU,YAACtE,GAAW,IAClBG,EAAqCH,EAArCG,SAAU2F,EAA2B9F,EAA3B8F,MAAOmG,EAAoBjM,EAApBiM,MAAUC,EADV,aACoBlM,EADpB,8BAGzB,OACC,kBAACmM,GAAA,EAAD,eACCC,UAAU,MACV5H,KAAK,WACL6H,OAAQvG,IAAUmG,EAClBrE,GAAE,0BAAqBqE,GACvBK,kBAAA,qBAA+BL,IAC3BC,GAEHpG,IAAUmG,GAAS,kBAACM,GAAA,EAAD,CAAKC,EAAG,GAAIrM,KCR7BO,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCuM,kBAAmB,CAClB/M,SAAU,EACVgN,gBAAiBxM,EAAM5B,QAAQqO,WAAWb,MAC1CjM,QAAS,OACT+M,OAAQ,KAGTC,KAAM,CACLC,YAAY,aAAD,OAAe5M,EAAM5B,QAAQyO,SACxCL,gBAAiBxM,EAAM5B,QAAQC,SAEhCyO,YAAa,CACZxN,WAAY,QACZL,SAAU,QAEX8N,OAAQ,CACPpN,QAAS,OACTkB,SAAU,WACVvB,WAAY,UAEb0N,aAAc,CACbxN,SAAU,EACVP,SAAU,QACV4M,WAAY,QACZpM,UAAW,QACXwN,WAAY,OAEbC,eAAgB,CACfC,SAAU,QACVtB,WAAY,OAEbuB,UAAW,CACVzN,QAAS,OACTN,cAAe,SACfC,WAAY,UAEb+N,SAAU,CACT1N,QAAS,OACTL,WAAY,SACZ0B,OAAQ,QAET4K,MAAO,CACN0B,QAAStN,EAAMqK,QAAQ,GACvBkD,UAAW,SACX3K,MAAO5C,EAAM5B,QAAQ8E,KAAK1E,WAE3BgP,aAAc,CACbvC,MAAO,OACPpI,SAAU,SAEX4K,qBAAsB,CACrBxC,MAAO,OACPpI,SAAU,QACVD,MAAO,WAER8K,OAAQ,CACPzC,MAAO,OACPpI,SAAU,QACVgH,QAAS,GAIV8D,UAAW,CACVR,SAAU,YA2LGlM,gBAVS,SAACC,GACxB,MAAO,MAImB,SAACK,GAC3B,MAAO,KAION,EApKO,SAAC,GAA6B,IAA3B+E,EAA0B,EAA1BA,QAAS4H,EAAiB,EAAjBA,WAC3BrL,EAAU/B,KADkC,EAElBmK,mBAAS,GAFS,oBAE3CkD,EAF2C,KAEjCC,EAFiC,KAI5CC,EAAgB,SAAC9H,GACtB,IAAI+H,EACA/H,KAAKD,EAAQ1H,KAAM0P,EAAWhI,EAAQ1H,KACjC2H,KAAKD,EAAQ0C,KAAMsF,EAAWhI,EAAQ0C,KACtCzC,KAAKD,EAAQ2C,MAAKqF,EAAWhI,EAAQ2C,KAC9C,IAAMsF,EAA2B,QAAhBD,EAAS/H,GAAe,OAAS,MAClD+H,EAAS/H,GAAKgI,EACdL,EAAW5H,IAGNkI,EAAc,SAAC9N,EAAM+N,GAC1B,IAEIH,EAFEI,EAAQ3I,OAAOC,KAAKtF,EAAKA,MAAM,GAGjCgO,KAASpI,EAAQ1H,KAAM0P,EAAWhI,EAAQ1H,KACrC8P,KAASpI,EAAQ0C,KAAMsF,EAAWhI,EAAQ0C,KAC1C0F,KAASpI,EAAQ2C,MAAKqF,EAAWhI,EAAQ2C,KAElDlD,OAAOC,KAAKsI,GAAUrI,SAAQ,SAAAM,GAC7B+H,EAAS/H,GAAKkI,KAEfP,EAAW5H,IAGNqI,EAAa,SAACjO,GAAD,OAClB,kBAAC,IAAMkO,SAAP,KACC,kBAACC,GAAA,EAAD,CAAMC,MAAI,EAACC,GAlCG,GAmCb,kBAAC/C,GAAA,EAAD,CAAQ9I,MAAM,UAAUI,UAAWT,EAAQmL,OAAQhL,QAAS,kBAAMwL,EAAY9N,EAAM,SAApF,YAED,kBAACmO,GAAA,EAAD,CAAMC,MAAI,EAACC,GArCG,GAsCb,kBAAC/C,GAAA,EAAD,CAAQ9I,MAAM,UAAUI,UAAWT,EAAQmL,OAAQhL,QAAS,kBAAMwL,EAAY9N,EAAM,UAApF,cAKGsO,EAAW,SAACC,EAAItD,EAAO3I,GAAZ,OAChB,kBAACgJ,GAAA,EAAD,CACChI,QAASiL,EAAK,YAAc,WAC5B/L,MAAO+L,EAAK,UAAY,UACxBjM,QAAS,kBAAMA,EAAQ2I,IACvBrI,UAAW2L,EAAKpM,EAAQiL,aAAejL,EAAQkL,sBAC9CpC,IAGGuD,EAAgB,SAACxO,GACtB,IAAMyO,EAAMpJ,OAAOC,KAAKtF,GACxB,OACC,yBAAK4C,UAAWT,EAAQyK,cACvB,kBAACuB,GAAA,EAAD,CAAMO,WAAS,EAACzE,QAAS,EAAG0E,SAAS,MAAMC,QAAQ,eAAe1P,WAAW,cAC5E,kBAACiP,GAAA,EAAD,CAAMO,WAAS,EAACN,MAAI,EAACC,GAxDR,GAwDuBpE,QAvDrB,GAwDd,kBAACgE,EAAD,CAAYjO,KAAMA,KAElByO,EAAIvI,KAAI,SAAAL,GACR,IAAMlF,EAAmB,QAAZX,EAAK6F,GAClB,OACC,kBAAC,IAAMqI,SAAP,CAAgBtK,IAAKiC,GACpB,kBAACsI,GAAA,EAAD,CAAMO,WAAS,EAACN,MAAI,EAACC,GA/DX,GA+D0BpE,QA9DxB,GA+DX,kBAACkE,GAAA,EAAD,CAAMC,MAAI,EAACC,GAjEH,GAkENC,EAAS3N,EAAMkF,EAAG8H,IAEpB,kBAACQ,GAAA,EAAD,CAAMC,MAAI,EAACC,GApEH,GAqENC,GAAU3N,EAAMkF,EAAG8H,YAWvBkB,EAAcL,EAAc5I,EAAQ1H,MACpC4Q,EAAcN,EAAc5I,EAAQ0C,MACpCyG,EAAaP,EAAc5I,EAAQ2C,KAEnCyG,EAAc3J,OAAOC,KAAKM,EAAQqJ,OAAO,GACzCC,EAAatJ,EAAQqJ,MAAMD,GAC3BG,EAA6B,QAAhBH,EACbI,EAAkBD,EAAa,OAAS,OAExCE,EAAmB,SAAC7J,GACzBI,EAAQqJ,MAAQE,EAAa,CAAC,IAAOD,GAAc,CAAC,IAAOA,GAC3D1B,EAAW5H,IAGN0J,EACL,yBAAK1M,UAAWT,EAAQ2K,gBACvB,yBAAKlK,UAAWT,EAAQ8K,UACtBqB,EAASa,EAAY,IAAKE,GAC1Bf,GAAUa,EAAY,IAAKE,IAE7B,kBAACE,GAAA,EAAD,CACC/J,MAAO0J,EACPM,aAAc,IACdC,MAAON,EAAa,SAAW,WAC/BO,iBAAkB,SAAAlK,GAAK,gBAAOA,IAC9BmK,kBAAkB,OAClBC,iBAAkB,SAAApK,GAAK,OAzHL,SAACA,GACtB,IAAMqK,EAAQC,KAAKC,MAAMvK,EAAQ,IAC3BwK,EAAOF,KAAKC,MAAOvK,EAAQ,GAAM,GACvC,OAAa,IAATwK,EAAmBH,EACjB,GAAN,OAAUA,EAAV,YAAmBG,GAqHWC,CAAczK,IACzC2F,SAAU,SAACC,EAAG5F,GACTA,IAAU0J,IACbtJ,EAAQqJ,MAAMD,GAAexJ,EAC7BgI,EAAW5H,KAGbsK,KAAM,GACNC,IAAK,EACLC,IAAK,MAGL,yBAAKxN,UAAWT,EAAQ6K,WACvB,6CAAeoC,EAAf,WACA,uCAhIgB,SAAC5J,GACrB,IAAMqK,EAAQC,KAAKC,MAAMvK,EAAQ,IAC3BwK,EAAOF,KAAKC,MAAMvK,EAAQ,IAChC,OAAc,IAAVqK,EAAmB,OAAN,OAAcG,EAAd,QACJ,IAATA,EAAkB,GAAN,OAAUH,EAAV,aACV,GAAN,OAAUA,EAAV,aAAoBG,EAApB,QA2HaK,CAAanB,KACtB,2CAMJ,OACC,yBAAKtM,UAAWT,EAAQgK,mBACvB,kBAACmE,GAAA,EAAD,CACCC,YAAY,WACZ3N,UAAWT,EAAQoK,KACnBiE,eAAe,UACfC,UAAU,UACVjL,MAAOiI,EACPtC,SAAU,SAACC,EAAG5F,GAAJ,OAAckI,EAAYlI,KAEpC,kBAACkL,GAAA,EAAD,CAAKzF,MAAM,OAAOrI,UAAWT,EAAQoL,YACrC,kBAACmD,GAAA,EAAD,CAAKzF,MAAM,OAAOrI,UAAWT,EAAQoL,YACrC,kBAACmD,GAAA,EAAD,CAAKzF,MAAM,QAAQrI,UAAWT,EAAQoL,YACtC,kBAACmD,GAAA,EAAD,CAAKzF,MAAM,MAAMrI,UAAWT,EAAQoL,aAErC,kBAACoD,GAAD,CAAYnL,MAAOiI,EAAU9B,MAAO,GAClCkD,GAEF,kBAAC8B,GAAD,CAAYnL,MAAOiI,EAAU9B,MAAO,GAClCmD,GAEF,kBAAC6B,GAAD,CAAYnL,MAAOiI,EAAU9B,MAAO,GAClC2D,GAEF,kBAACqB,GAAD,CAAYnL,MAAOiI,EAAU9B,MAAO,GAClCoD,O,0CC3OC3O,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCuM,kBAAmB,CAClB/M,SAAU,EACVgN,gBAAiBxM,EAAM5B,QAAQqO,WAAWb,MAC1CjM,QAAS,OACT+M,OAAQ,IACRzB,MAAO,SAER+F,gBAAiB,CAChB/F,MAAO,MACPtL,QAAS,OACTN,cAAe,SACfC,WAAY,SACZH,eAAgB,SAChB6B,OAAQhB,EAAMqK,QAAQ,IAEvB4G,qBAAsB,CACrBvE,OAAQ,MACR9J,MAAO,uBAERsO,0BAA2B,CAC1BvR,QAAS,OACTL,WAAY,YAEb6R,cAAe,CACdxR,QAAS,OACTN,cAAe,SACfC,WAAY,cAIC,eAAwB,IAArBiG,EAAoB,EAApBA,KAAM6L,EAAc,EAAdA,QACjB7O,EAAU/B,KAuCV6Q,EAAa,SAACxL,GACnB,OACC,yBAAK7C,UAAWT,EAAQyO,iBACvB,yBAAKhO,UAAS,UAAKT,EAAQ0O,qBAAb,YAAqC1O,EAAQ2O,4BAhCjC,SAAArL,GAC5B,IAAKN,EAAKM,IAASN,EAAKM,GAAQ,EAAG,OAAO,KAC1C,IAAMhC,EAAO,kBAAC,KAAD,MACPX,EAAgB,gBAAT2C,EAAyB,aAAyB,iBAATA,EAA0B,gBAAkB,eAClG,OACC,yBAAK7C,UAAWT,EAAQ4O,eACtBtN,EACD,kBAACoI,GAAA,EAAD,KACE/I,IAyBAoO,CAAqBzL,IAEvB,kBAAC6F,GAAA,EAAD,CAAQhI,QAAQ,YAAYd,MAAM,UAAUF,QAAS,kBA3CnC,SAACmD,GACrB,IAAMD,EAAQL,EAAKM,GACdD,EACIA,EAAQ,EAAGL,EAAKM,IAAS,SACtBN,EAAKM,GAFLN,EAAKM,GAAQ,EAGzBuL,EAAQ7L,GAsCqDgM,CAAa1L,KACtEA,GAEF,yBAAK7C,UAAWT,EAAQ0O,sBAxBI,SAAApL,GAC9B,IAAKN,EAAKM,IAASN,EAAKM,GAAQ,EAAG,OAAQ,KAC3C,IAAMhC,EAAO,kBAAC,KAAD,MACPX,EAAgB,gBAAT2C,EAAyB,iBAA6B,iBAATA,EAA0B,gBAAkB,eACtG,OACC,yBAAK7C,UAAWT,EAAQ4O,eACvB,kBAAClF,GAAA,EAAD,KACE/I,GAEDW,GAgBC2N,CAAuB3L,MAM5B,OACC,yBAAK7C,UAAWT,EAAQgK,mBACtB8E,EAAW,eACXA,EAAW,gBACXA,EAAW,gBCzFT7Q,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtC2M,KAAM,CACL1B,MAAO,QAER6D,UAAW,CACV9N,OAAQhB,EAAMqK,QAAQ,IAEvBoH,cAAe,CACdnS,WAAY,UACZH,eAAgB,qBAIZuS,GAAU,SAAA1L,GACf,OAAO2L,KAAKC,MAAMD,KAAKE,UAAU7L,KAgFnB/E,gBAbS,SAACC,GACxB,MAAO,CACN4Q,eAAgB5Q,EAAMsG,KAAKxB,QAC3B+L,YAAa7Q,EAAMsG,KAAKuK,gBAIC,SAACxQ,GAC3B,MAAO,KAKON,EA5EC,SAAC,GAAwF,IAAtF+Q,EAAqF,EAArFA,QAASD,EAA4E,EAA5EA,YAAaE,EAA+D,EAA/DA,cAAeH,EAAgD,EAAhDA,eAAgBI,EAAgC,EAAhCA,YAAaC,EAAmB,EAAnBA,aAC9E5P,EAAU/B,KADuF,EAEvEmK,mBAAS,GAF8D,oBAEhGkD,EAFgG,KAEtFC,EAFsF,OAGzEnD,mBAAS+G,GAAQI,IAHwD,oBAGhG9L,EAHgG,KAGvF4H,EAHuF,OAI/EjD,mBAAS+G,GAAQQ,IAJ8D,oBAIhG3M,EAJgG,KAI1F6L,EAJ0F,KAUvG,OAJKpL,EAAQ1H,KAAK8T,MAAQN,EAAexT,KAAK8T,MAC7CxE,EAAW8D,GAAQI,IAInB,6BACC,kBAACO,GAAA,EAAD,CAAQjR,KAAM2Q,EAAa1O,QAAS,WACnCuK,EAAW8D,GAAQI,IACnBV,EAAQM,GAAQQ,IAChBD,MAEA,yBAAKjP,UAAWT,EAAQuM,WACvB,kBAAC4B,GAAA,EAAD,CACChN,QAAQ,YACRV,UAAWT,EAAQoK,KACnBiE,eAAe,UACfC,UAAU,UACVjL,MAAOiI,EACPtC,SAAU,SAACC,EAAG5F,GAAJ,OAAckI,EAAYlI,KAEpC,kBAACkL,GAAA,EAAD,CAAKzF,MAAM,YACX,kBAACyF,GAAA,EAAD,CAAKzF,MAAM,UAEZ,kBAAC0F,GAAD,CAAYnL,MAAOiI,EAAU9B,MAAO,GACnC,kBAAC,GAAD,CACC/F,QAASA,EACT4H,WAAY,SAAA3H,GAAC,OAAI2H,EAAW8D,GAAQzL,QAGtC,kBAAC8K,GAAD,CAAYnL,MAAOiI,EAAU9B,MAAO,GACnC,kBAACuG,GAAD,CACC/M,KAAMA,EACN6L,QAAS,SAAA5L,GAAC,OAAI4L,EAAQM,GAAQlM,SAIjC,kBAAC+M,GAAA,EAAD,CAAevP,UAAWT,EAAQkP,eACjC,kBAAC/F,GAAA,EAAD,CAAQhJ,QAAS,WAChBsD,EAAQ1H,KAAK8T,KAAO,KACpBxE,EAAW5H,GACXoL,EAAQ,IACRe,KACEvP,MAAM,WALT,iBAQA,kBAAC8I,GAAA,EAAD,CAAQhJ,QAAS,WAChBuP,IACAD,EAAQhM,EAAST,IACf3C,MAAM,UAAU4P,WAAS,GAH5B,e,yCC3EQC,GAAa,SAACjL,GAC1B,MAAO,CAAEpH,KAAM,cAAeoH,SAelBkL,GAAc,SAAClL,GAC3B,MAAO,CAAEpH,KAAM,YAAaoH,SAGhBmL,GAAY,SAACC,GACzB,MAAO,CAAExS,KAAM,aAAcwS,WAOjBC,GAAa,SAACC,GAC1B,MAAO,CAAE1S,KAAM,qBAAsB0S,YClBhCtS,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCgB,OAAQ,CACPA,OAAQhB,EAAMqK,QAAQ,GACtBpL,SAAU,SAEX8N,OAAQ,CACPpN,QAAS,OACTkB,SAAU,WACVvB,WAAY,SACZ2L,MAAO,QAER8H,UAAW,CACV9H,MAAO,OAER+H,OAAQ,CACP/H,MAAO,OAERgI,IAAK,CACJzT,SAAU,GAEX8N,QAAS,CACRA,QAAStN,EAAMqK,QAAQ,QA+DzB,IAwBepJ,gBAxBS,SAACC,GACxB,MAAO,CACN4R,QAAS5R,EAAMsG,KAAK0L,kBAIK,SAAC3R,GAC3B,MAAO,CACN4R,aAAc,SAAApM,GACb,IAAKA,EAAOV,OACX,OAAO9E,EAASsR,GAAW,KAE5BhM,GADc,CAAEuM,OAAQrM,IAEtBiB,MAAK,SAAAc,GACLuK,QAAQC,IAAIxK,GACZvH,EAASsR,GAAW/J,EAAIR,UAExBkB,OAAM,SAAApG,GACNiQ,QAAQC,IAAIlQ,UAMFnC,EAlEf,SAAgBnB,GACf,IAAMyC,EAAU/B,KACRuG,EAA0DjH,EAA1DiH,OAAQwM,EAAkDzT,EAAlDyT,aAAwBT,GAA0BhT,EAApCG,SAAoCH,EAA1BgT,SAASK,EAAiBrT,EAAjBqT,aAF3B,EAGgBxI,mBAAS5D,GAHzB,oBAGfyM,EAHe,KAGFC,EAHE,KAUtB,OACC,kBAACpH,GAAA,EAAD,CAAK1M,QAAQ,QAAQR,eAAe,SAAS6D,UAAWT,EAAQ+K,SAC/D,kBAACoG,GAAA,EAAD,CACCZ,QAASA,EACTa,eAAgB,SAAAC,GAAM,OAAIA,EAAO/N,MACjCgO,aAAc,SAAAD,GAAM,OAhCH,SAAC1Q,EAAM6D,GAC3B,IAAK7D,IAAS6D,EAAQ,OAAO7D,EAC7B6D,EAASA,EAAOhC,cAEhB,IAAM0B,GADNvD,EAAOA,EAAK6B,eACO0B,MAAMM,GACnB+M,EAASrN,EAAMH,KAAI,SAACC,EAAGwN,GAC5B,OAAIA,IAAMtN,EAAMJ,OAAS,EAAUE,EAC3B,0BAAMvC,IAAK+P,GAAIxN,EAAE,2BAAIQ,OAE9B,OACC,8BACE+M,EAAOxN,KAAI,SAAAC,GAAC,OAAIA,MAqBQyN,CAAaJ,EAAO/N,KAAM2N,IAClDS,YAAa,SAAAC,GAAW,IACjBC,EAAwBD,EAAxBC,WAAeC,EADC,aACQF,EADR,gBAMtB,OAJAC,EAAWE,eACV,kBAACC,GAAA,EAAD,CAAgBzT,SAAS,SACxB,kBAAC,KAAD,OAGD,kBAACyJ,GAAA,EAAD,iBACK8J,EADL,CAECG,YAAY,YACZ7Q,QAAQ,WACRkC,MAAO4N,EACPlI,WAAS,EACTC,SAAU,SAAAC,GAAC,OAxBC,SAAAzE,GACjB0M,EAAe1M,GACfoM,EAAapM,GAsBOyN,CAAUhJ,EAAExJ,OAAO4D,QAClCuO,WAAYA,MAIf5I,SAAU,SAACC,EAAG5F,GACb2N,EAAa3N,U,2IC1FZ6O,GAAe,SAACC,EAAMC,GAC3B,IAAMzO,EAAIwO,EAAKE,UACTC,EAAIH,EAAKI,WAAa,EAC5B,GAAIH,EAAO,MAAM,GAAN,OAAUzO,EAAV,YAAe2O,GAC1B,IAAME,EAAOL,EAAKM,cAAcC,WAAWC,OAAO,GAClD,MAAM,GAAN,OAAUhP,EAAV,YAAe2O,EAAf,YAAoBE,IAGfI,GAAc,SAACC,EAAOC,GAC3B,IAIIC,EAJEC,EAAUrF,KAAKC,OAAOkF,EAAMD,GAXrB,OAYPI,EAAOD,EAAU,EAAI,MAAQ,OAC7BE,EAAQ,IAAIC,KACZC,EAAOzF,KAAK0F,OAAOH,EAAQJ,GAdpB,OAgBb,GAAIM,EAAO,IACVL,EAAM,uBACA,GAAIK,EAAO,GAAI,CACrB,IAAMd,EAAI3E,KAAK0F,MAAMD,EAAO,IAC5BL,EAAG,UAAMT,EAAN,iBAAgBA,EAAI,EAAI,IAAM,GAA9B,aACG,GAAIc,EAAO,EAAG,CACpB,IAAME,EAAI3F,KAAK0F,MAAMD,EAAO,GAC5BL,EAAG,UAAMO,EAAN,gBAAeA,EAAI,EAAI,IAAM,GAA7B,aACOF,EAAO,EACjBL,EAAG,UAAMK,EAAN,eAAiBA,EAAO,EAAI,IAAM,GAAlC,QACgB,IAATA,EACVL,EAAM,SACc,IAAVK,EACVL,EAAM,WACIK,GAAQ,IAClBL,EAAG,cAAkB,EAATK,EAAT,UAEJ,MAAM,GAAN,OAAUL,EAAV,cAAmBb,GAAaW,GAAO,GAAvC,YAAgDX,GAAaY,GAA7D,aAAsEE,EAAtE,YAAiFC,EAAjF,WAQc,YAACM,GAA2B,IAApBC,EAAmB,uDAAP,GAClC,IAAKD,EAAMzP,OAAQ,MAAO,GAC1ByP,EAAQA,EAAMvQ,MAAK,SAACyQ,EAAGC,GAAJ,OAAUA,EAAID,KACjC,IAAMnH,EAAM,GACRqH,EAAYJ,EAAM,GAClBK,EAAaL,EAAM,GAevB,OAdAA,EAAMnQ,SAAQ,SAAC+O,EAAMX,GACpB,OAAIlF,EAAIxI,QAAU0P,EAAkBlH,EAEhCsH,EAAazB,EAAO,QACvB7F,EAAIhN,KAAKsT,GAAYe,EAAWC,IAChCD,EAAYxB,OACZyB,EAAazB,KAGdwB,EAAYxB,OACRX,IAAM+B,EAAMzP,OAAS,GACxBwI,EAAIhN,KAAKsT,GAAYe,EAAWC,SAG3BtH,GC1CFrO,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCnB,KAAM,CACLuX,YAAapW,EAAMqK,QAAQ,GAC3BE,aAAcvK,EAAMqK,QAAQ,IAE7BgM,UACwB,UAAvBrW,EAAM5B,QAAQgC,KACX,CACDwC,MAAO5C,EAAM5B,QAAQI,UAAUF,KAC/BkO,gBAAiB8J,aAAQtW,EAAM5B,QAAQI,UAAU+X,MAAO,MAEvD,CACD3T,MAAO5C,EAAM5B,QAAQ8E,KAAK7E,QAC1BmO,gBAAiBxM,EAAM5B,QAAQI,UAAUgY,MAE5CC,MAAO,CACNC,KAAM,YAEPC,eAAgB,CACfC,OAAQ,EACRC,KAAM,gBACNnK,OAAQ,EACR1L,QAAS,EACT8V,SAAU,SACVxJ,QAAS,EACTzM,SAAU,WACVC,IAAK,GACLmK,MAAO,GAERlH,OAAQ,CACP+H,YAAa9L,EAAMqK,QAAQ,GAC3BwB,WAAY7L,EAAMqK,QAAQ,GAC1B8C,SAAU,aAKG,YAACrN,GACf,IAAMyC,EAAU/B,KACRuW,EAAyGjX,EAAzGiX,QAASzO,EAAgGxI,EAAhGwI,KAAM/C,EAA0FzF,EAA1FyF,KAAM6L,EAAoFtR,EAApFsR,QAASpK,EAA2ElH,EAA3EkH,MAAOgQ,EAAoElX,EAApEkX,SAAUzD,EAA0DzT,EAA1DyT,aAAc0D,EAA4CnX,EAA5CmX,UAAWnQ,EAAiChH,EAAjCgH,KAAMoQ,EAA2BpX,EAA3BoX,QAASjF,EAAkBnS,EAAlBmS,cAC/F,IAAK3J,EAAM,OACV,8BAGD,IAAMzB,EAAQyB,EAAKA,KACb6O,EAAQ7O,EAAK8O,OAAS,EACtBC,EAAkB,IAAVF,EAAc,EAAIrQ,EAU1BwQ,EACL,kBAACrU,EAAA,EAAD,KACC,kBAACgJ,GAAA,EAAD,CAAYjJ,UAAWT,EAAQkU,MAAO/S,QAAQ,KAAKgE,GAAG,cAAtD,SAGA,kBAAC6P,GAAA,EAAD,CAASd,MAAM,gBACd,kBAAC/K,GAAA,EAAD,CACChI,QAAQ,YACRhB,QAASuU,EACTtL,UAAW,kBAAC,KAAD,MACX/I,MAAM,UACNI,UAAWT,EAAQwB,OACnByT,KAAK,SANN,aAUD,kBAACD,GAAA,EAAD,CAASd,MAAM,eACd,kBAAC/K,GAAA,EAAD,CACChI,QAAQ,YACRd,MAAM,UACN6U,QAAS,kBAAC,KAAD,MACTD,KAAK,QACLxU,UAAWT,EAAQwB,OACnBrB,QAAS,WAAQuP,MANlB,YAaGyF,EAAmB,SAAA7R,GACxB,IAAMD,EAAQL,EAAKM,GACnB,QAAKD,IACDA,EAAQ,EAAU,MACf,SAGF+R,EACL,kBAACC,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,KACEd,EAAQzQ,KAAI,SAACT,EAAMkO,GAAP,OACZ,kBAAC+D,GAAA,EAAD,CAAW9T,IAAK+P,EACf/Q,UAAWT,EAAQ1D,KACnBkZ,MAAO,OACPzK,QAAQ,OACR0K,cAAeN,EAAiB7R,IAEhC,kBAACoS,GAAA,EAAD,CACCC,OAAQ3U,QAAQgC,EAAKM,IACrBsS,UAAWT,EAAiB7R,IAAS,MACrCnD,QAAS,SAAC8I,GACTA,EAAET,iBA3DY,SAAClF,GACrB,IAAMD,EAAQL,EAAKM,GACdD,EACIA,EAAQ,EAAGL,EAAKM,IAAS,SACtBN,EAAKM,GAFLN,EAAKM,GAAQ,EAGzBuL,EAAQ7L,GAuDFgM,CAAa1L,KAGbA,SAQDuS,EACL,kBAACC,GAAA,EAAD,KACExR,EAAMP,KAAI,SAACJ,EAAG6N,GAAJ,OACV,kBAAC8D,GAAA,EAAD,CACC7T,IAAK+P,EACLuE,OAAK,EACL5V,QAAS,SAAC8I,GACTA,EAAET,iBACFwI,EAAarN,KAGd,kBAAC4R,GAAA,EAAD,KACE5R,EAAEqC,UAEJ,kBAACuP,GAAA,EAAD,KACE5R,EAAEsC,SAAS+P,KAAK,OAElB,kBAACT,GAAA,EAAD,KACE5R,EAAEL,MAEJ,kBAACiS,GAAA,EAAD,KACE5R,EAAEsS,YAEJ,kBAACV,GAAA,EAAD,KACE5R,EAAE0C,WAAa1C,EAAE0C,UAAUvC,OAC5BoS,GAAavS,EAAE0C,UAAUtC,KAAI,SAAAC,GAAC,OAAI,IAAImP,KAAKnP,MAAK,GAAG,GAAGE,MAAM,OAAO,GACjE,IAEH,kBAACqR,GAAA,EAAD,KACE5R,EAAEwS,MAEJ,kBAACZ,GAAA,EAAD,KACE5R,EAAEyS,iBAOR,OACC,6BACErB,EACD,kBAACsB,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,CAAOrB,KAAM,UACXG,EACAS,IAGH,kBAACU,GAAA,EAAD,CACC5M,UAAU,MACViL,MAAOA,EACP4B,YAAa/R,EACbgS,oBAAqB,SAAAxN,GAAC,OAAIwL,EAASxL,EAAExJ,OAAO4D,QAC5CqT,mBAAoB,CAAC,GAAG,GAAG,GAAG,IAC9BnS,KAAMuQ,EACN6B,aAAc,SAAC1N,EAAG2N,GACjB3N,EAAET,iBACFmM,EAAQiC,Q,oGC7LP3Y,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtC8O,UAAW,CACV9N,OAAQhB,EAAMqK,QAAQ,QAIT,eAAgE,IAA7DjJ,EAA4D,EAA5DA,KAAMgY,EAAsD,EAAtDA,SAAUC,EAA4C,EAA5CA,KAAM5C,EAAsC,EAAtCA,MAAOvT,EAA+B,EAA/BA,KAAMoW,EAAyB,EAAzBA,WAAYC,EAAa,EAAbA,OAC1DhX,EAAU/B,KAEhB,OACC,6BACC,kBAAC6R,GAAA,EAAD,CAAQjR,KAAMA,EAAMiC,QAASmW,SAAUxW,UAAWT,EAAQuM,WACzD,kBAAC2K,GAAA,EAAD,KACEhD,GAEF,kBAACiD,GAAA,EAAD,KACExW,GAEF,kBAACqP,GAAA,EAAD,KACC,kBAAC7G,GAAA,EAAD,CAAQhJ,QAAS0W,EAAUxW,MAAM,WAC/B0W,GAAc,UAEhB,kBAAC5N,GAAA,EAAD,CAAQhJ,QAAS2W,EAAMzW,MAAM,WAC3B2W,GAAU,aChBX/Y,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtC8O,UAAW,CACV9N,OAAQhB,EAAMqK,QAAQ,IAEvBsP,qBAAsB,CACrB1O,MAAO,QACPqC,QAAStN,EAAMqK,QAAQ,IAExBuP,YAAa,CACZzM,SAAU,QACVlO,SAAU,SAEX4a,UAAW,CACV1M,SAAU,QACVlO,SAAU,QACVuN,gBAAiBxM,EAAM5B,QAAQ0b,OAAOC,MACtCnX,MAAO5C,EAAM5B,QAAQC,QAAQC,MAE9B0b,SAAU,CACTxN,gBAAiBxM,EAAM5B,QAAQ0b,OAAOC,OAEvChN,OAAQ,CACPpN,QAAS,OACTkB,SAAU,WACVvB,WAAY,UAEb2T,IAAK,CACJzT,SAAU,GAEXya,gBAAiB,CAChBta,QAAS,OACTN,cAAe,SACf2B,OAAQ,OACRiK,MAAO,mBAIHiP,GAAe,CACpB,CAAE7O,MAAO,QAASzF,MAAO,GACzB,CAAEyF,MAAO,SAAUzF,MAAO,GAC1B,CAAEyF,MAAO,SAAUzF,MAAO,GAC1B,CAAEyF,MAAO,SAAUzF,MAAO,GAC1B,CAAEyF,MAAO,SAAUzF,MAAO,IAmQZ3E,gBA3DS,SAACC,GACxB,IAAMgF,EAAIhF,EAAMsG,KAAK2S,UACrB,MAAO,CACN5Z,KAAMW,EAAMX,KACZa,KAAMF,EAAMsG,KAAK4S,aACjBC,cAAenU,EAAE5H,MAAQ,GACzBgc,cAAepU,EAAEwC,MAAQ,GACzBkK,OAAQ1R,EAAMsG,KAAKoL,WAIM,SAACrR,GAC3B,MAAO,CACNgZ,cAAe,SAAC/S,GACfjG,EAASmR,GAAYlL,IACrBjG,EAASoR,GAAU,MAEpB6H,aAAc,SAAC9S,GACTA,GACLb,GAAaa,GACXM,MAAK,WACLzG,EAASlB,EAAW,iBACpBkB,EAASmR,GAAY,OACrBnR,EAASkR,GAAW,OACpBlR,EAASoR,GAAU,QAEnBnJ,OAAM,SAAApG,GAAG,OAAI7B,EAASrB,EAASkD,EAAIjD,cAEtCsa,WAAY,SAACjT,GACZ,IAAIoL,EAAS,GAIb,GAHKpL,EAAK3B,MAAM+M,EAAO/Q,KAAK,QACvB2F,EAAKgB,SAASnC,QAAQuM,EAAO/Q,KAAK,QAClC2F,EAAKkR,MAAM9F,EAAO/Q,KAAK,QACxB+Q,EAAOvM,OACV,OAAO9E,EAASoR,GAAUC,IAEtBpL,EAAKhF,IACRqE,GAAYW,EAAKhF,IAAKgF,GACpBQ,MAAK,WACLzG,EAASlB,EAAW,iBAEpBkB,EAASmR,GAAY,OACrBnR,EAASoR,GAAU,QAEnBnJ,OAAM,SAAApG,GAAG,OAAI7B,EAASrB,EAASkD,EAAIjD,aAErC0G,GAAaW,GACXQ,MAAK,WACLzG,EAASlB,EAAW,mBACpBkB,EAASmR,GAAY,OACrBnR,EAASoR,GAAU,QAEnBnJ,OAAM,SAAApG,GAAG,OAAI7B,EAASrB,EAASkD,EAAIjD,iBAO3Bc,EAhQE,SAAC,GAAuH,IAArHV,EAAoH,EAApHA,KAAMma,EAA8G,EAA9GA,SAAUtZ,EAAoG,EAApGA,KAAMmZ,EAA8F,EAA9FA,cAAeF,EAA+E,EAA/EA,cAAeC,EAAgE,EAAhEA,cAAeG,EAAiD,EAAjDA,WAAYD,EAAqC,EAArCA,aAAc5H,EAAuB,EAAvBA,OAAQ+H,EAAe,EAAfA,SAClHpY,EAAU/B,KACZgH,EAAO/B,OAAOU,OAAO,GAAIuU,GAF0G,EAIvG/P,mBAASnD,EAAKe,UAJyF,oBAIhIqS,EAJgI,KAItHC,EAJsH,OAKnGlQ,mBAASnD,EAAKmR,WAAW1D,YAL0E,oBAKhI6F,EALgI,KAKpHC,EALoH,OAMrGpQ,mBAASnD,EAAKgB,UANuF,oBAMhIL,EANgI,KAMrH6S,EANqH,OAO/GrQ,mBAASnD,EAAK3B,MAPiG,oBAOhIA,EAPgI,KAO1HoV,EAP0H,OAQ3GtQ,mBAASnD,EAAK0T,MAR6F,oBAQhIC,EARgI,KAQxHC,EARwH,OAS7GzQ,mBAASnD,EAAKgR,YAT+F,oBAShI6C,EATgI,KASzHC,EATyH,OAUvG3Q,mBAASnD,EAAKkR,MAVyF,oBAUhI6C,EAVgI,KAUtHC,EAVsH,OAWnG7Q,oBAAS,GAX0F,oBAWhI8Q,EAXgI,KAWpHC,EAXoH,KAgCjIC,EAAc,SAAC,GAAuC,IAArCtQ,EAAoC,EAApCA,MAAOzF,EAA6B,EAA7BA,MAAO2F,EAAsB,EAAtBA,SAAUqQ,EAAY,EAAZA,MAC9C,OACC,yBAAK5Y,UAAWT,EAAQoX,sBACvB,kBAACrP,GAAA,EAAD,CACCuR,QAAM,EACNxQ,MAAOA,EACPC,WAAW,EACXtI,UAAWT,EAAQqX,YACnBlW,QAAQ,WACRkC,MAAOA,EACP2F,SAAU,SAAAC,GAAC,OAAID,EAASC,EAAExJ,OAAO4D,SAEhCgW,EAAMtV,KAAI,SAACC,EAAGwN,GAAJ,OACV,kBAACpK,GAAA,EAAD,CAAU3F,IAAK+P,EAAGnO,MAAOW,EAAEX,OAASW,GAClCA,EAAE8E,OAAS9E,SAQZuV,EACL,yBAAK9Y,UAAWT,EAAQoX,sBACvB,kBAACoC,GAAA,EAAD,CAAa/Y,UAAWT,EAAQqX,YAAalW,QAAQ,WACpDjF,MAAOmU,EAAOoJ,SAAS,SAEvB,kBAACC,GAAA,EAAD,CAAYjZ,UAAWT,EAAQyX,UAA/B,cACA,kBAACkC,GAAA,EAAD,CACCC,UAAQ,EACR7Q,WAAW,EACX8Q,WAAW,EACXxW,MAAOuC,EACPoD,SAAU,SAAAC,GAAC,OAAIwP,EAAaxP,EAAExJ,OAAO4D,QACrCyW,MAAO,kBAACC,GAAA,EAAD,MACPC,YAAa,SAAApU,GAAS,OAAIA,EAAUoQ,KAAK,QAExC+B,EAAchU,KAAI,SAAAlG,GAAI,OACtB,kBAACuJ,GAAA,EAAD,CAAU3F,IAAK5D,EAAMwF,MAAOxF,GAC3B,kBAACoc,GAAA,EAAD,CAAUC,QAAStU,EAAU6T,SAAS5b,GAAOwC,MAAM,YACnD,kBAACsB,GAAA,EAAD,CAAc7F,QAAS+B,SAI1B,kBAACsc,GAAA,EAAD,KAAiB9J,EAAOoJ,SAAS,QAAU,mCAAqC,MAK7EW,EACL,yBAAK3Z,UAAWT,EAAQoX,sBACvB,kBAACrP,GAAA,EAAD,CACC5G,QAAQ,WACRV,UAAWT,EAAQqX,YACnBvO,MAAO,OACPzF,MAAOC,EACPuW,WAAW,EACX7Q,SAAU,SAAA3F,GAAK,OAAIqV,EAAQrV,EAAM5D,OAAO4D,QACxCnH,MAAOmU,EAAOoJ,SAAS,QACvBvQ,WAAYmH,EAAOoJ,SAAS,QAAU,sBAAwB,MAK3DY,EACL,yBAAK5Z,UAAWT,EAAQoX,sBACvB,kBAACrP,GAAA,EAAD,CACC5G,QAAQ,WACRV,UAAWT,EAAQqX,YACnBvO,MAAM,eACNzF,MAAO2V,EACPhQ,SAAU,SAAAC,GAAC,OA7EQ5F,EA6ES4F,EAAExJ,OAAO4D,WA5EzB,IAAIiX,OAAO,UACfC,KAAKlX,IACf4V,EAAY5V,IAHQ,IAACA,GA8EnBnH,MAAOmU,EAAOoJ,SAAS,QACvBvQ,WAAYmH,EAAOoJ,SAAS,QAAU,8BAAgC,MAKnEe,EACL,yBAAK/Z,UAAWT,EAAQoX,sBACvB,kBAACrP,GAAA,EAAD,CACC5G,QAAQ,WACRV,UAAWT,EAAQqX,YACnBvO,MAAO,SACPzF,MAAOuV,EACPiB,WAAYjB,EAAOa,SAAS,QAC5BzQ,SAAU,SAAAC,GAAC,OAAI4P,EAAU5P,EAAExJ,OAAO4D,WAK/BoX,EACL,yBAAKha,UAAWT,EAAQoX,sBACvB,kBAACrP,GAAA,EAAD,CACC5G,QAAQ,WACRV,UAAWT,EAAQqX,YACnBvO,MAAM,cACNzF,MAAOyV,EACP9P,SAAU,SAAAC,GAAC,OAAI8P,EAAS9P,EAAExJ,OAAO4D,QACjCgE,SAAwB,UAAdrJ,EAAK+D,QAKZ2Y,EACL,kBAAC,IAAM3O,SAAP,KACEqO,EACD,kBAAChB,EAAD,CAAatQ,MAAO,YAAazF,MAAOgV,EAAUrP,SAAU,SAAC3F,GAAD,OAAWiV,EAAYjV,IAAQgW,MAAOvB,IACjGyB,EACD,kBAACH,EAAD,CAAatQ,MAAO,cAAezF,MAAOkV,EAAYvP,SAAU,SAAC3F,GAAD,OAAWmV,EAAcnV,IAAQgW,MAAO1B,KACvG0C,EACAG,EACAC,GAIGE,GACL,kBAACxR,GAAA,EAAD,CAAQC,UAAW,kBAAC,KAAD,MAAuBjJ,QAAS,kBAAMgZ,GAAc,KAAvE,UAKD,OACC,6BACC,kBAACrJ,GAAA,EAAD,CAAQjR,KAAMA,EAAMiC,QAAS,kBAAMkX,EAAc,OAAOvX,UAAWT,EAAQuM,WAC1E,kBAAC2K,GAAA,EAAD,KACC,yBAAKzW,UAAWT,EAAQwK,QACtBlH,EACD,yBAAK7C,UAAWT,EAAQ0Q,MACvBzL,EAAKhF,IAAM0a,GAAa,OAG3B,kBAACxD,GAAA,EAAD,KACC,0BAAM1W,UAAWT,EAAQ0X,gBAAiBkD,YAAU,GAClDF,IAGH,kBAAC1K,GAAA,EAAD,KACC,kBAAC7G,GAAA,EAAD,CAAQhJ,QAAS,kBAAM6X,EAAc,OAAO3X,MAAM,WAAlD,UAGA,kBAAC8I,GAAA,EAAD,CAAQhJ,QAAS,WAChBiY,IACAF,EAjKG,CACNjY,IAAKgF,EAAKhF,IACVqD,KAAMA,EACNqV,KAAMC,EACN5S,SAAUqS,EACVpS,SAAUL,EACVwQ,WAAYmC,EACZpC,KAAM6C,EACN/C,WAAY6C,KA0JPzY,MAAM,UAAU4P,WAAS,GAC1BhL,EAAKE,GAAK,QAAU,SAIxB,kBAAC0V,GAAD,CACChc,KAAMqa,EACNrC,SAAU,kBAAMsC,GAAc,IAC9BrC,KAAM,WACLqC,GAAc,GACdlB,EAAahT,EAAKhF,KAClBmY,KAEDlE,MAAM,cACNvT,KAAK,gBACLqW,OAAO,e,yHCxOL/Y,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCqd,OAAQrd,EAAMJ,gBACd0d,cAAetd,EAAMN,gBACrBoP,UAAW,CACV9N,OAAQhB,EAAMqK,QAAQ,IAEvBrJ,OAAQ,CACPA,OAAQhB,EAAMqK,QAAQ,IAEvBsP,qBAAsB,CACrBrM,QAAStN,EAAMqK,QAAQ,IAExBuP,YAAa,CACZzM,SAAU,QACVlO,SAAU,SAEXse,oBAAqB,CACpBtS,MAAO,SAERlH,OAAQ,CACPkH,MAAO,QACPyB,OAAQ,YAIV8Q,KAAOC,OAAO,MACdD,KAAOE,aAAa,KAAM,CACzBC,KAAM,CAAEC,IAAK,EAAGC,IAAK,KAItB,IA0Me5c,gBA7BS,SAACC,GACxB,MAAO,CACNX,KAAMW,EAAMX,KACZiH,KAAMtG,EAAMsG,KAAKsW,aACjBC,WAAY7c,EAAMsG,KAAKuW,eAIE,SAACxc,GAC3B,MAAO,CACNgS,aAAc,SAAC/L,GACdjG,EAASkR,GAAWjL,KAErB+S,cAAe,SAAC/S,GACfjG,EAASmR,GAAYlL,KAEtBwW,gBAAiB,SAACxW,GACjBX,GAAYW,EAAKhF,IAAKgF,GACpBQ,MAAK,SAAAc,GACLvH,EAASlB,EAAW,gBAAD,OAAiBmH,EAAK3B,QACzCtE,EAASkR,GAAW,UAEpBjJ,OAAM,SAAApG,GACN7B,EAASrB,EAASkD,EAAIjD,iBAMZc,EAzKM,SAAC,GAAkF,IAAhFuG,EAA+E,EAA/EA,KAAMuW,EAAyE,EAAzEA,WAAYxK,EAA6D,EAA7DA,aAAcgH,EAA+C,EAA/CA,cAAeI,EAAgC,EAAhCA,SAAUqD,EAAsB,EAAtBA,gBAC1Ezb,EAAU/B,KACVyd,EAbmB,SAAAzW,GACzB,IAAI0W,EAAW,IAAIxI,KAAKlO,EAAKoB,UAAUrD,MAAK,SAACyQ,EAAGC,GAAJ,OAAU,IAAIP,KAAKO,GAAK,IAAIP,KAAKM,MAAI,IAC7EkI,EAAW,IAAIxI,OAAQwI,EAAW,IAAIxI,MAC1C,IAAMyI,EAAY,IAAIzI,KAAKwI,EAASE,UAAY,OAC1CC,EAAU,IAAI3I,KAAKyI,EAAUC,UAA8B,GAAlB5W,EAAKmR,WAAkB,GAAK,GAAK,KAChF,MAAO,CACNwF,UAAWA,EACXE,QAASA,GAMaC,CAAkBP,GAF6D,EAGpEpT,mBAASsT,EAAeE,WAH4C,oBAG/FA,EAH+F,KAGpFI,EAHoF,OAIxE5T,mBAASsT,EAAeI,SAJgD,oBAI/FA,EAJ+F,KAItFG,EAJsF,KAMtG,IAAKhX,EAAM,OAAO,KAElB,IAiBMiX,EACL,yBAAKzb,UAAWT,EAAQoX,sBACvB,kBAACd,GAAA,EAAD,CAAOrB,KAAK,SACX,kBAACI,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,kBAGF,kBAACO,GAAA,EAAD,KACE7Q,EAAKoB,UAAY6P,GAAajR,EAAKoB,UAAUtC,KAAI,SAAAC,GAAC,OAAI,IAAImP,KAAKnP,OAAKD,KAAI,SAACL,EAAG8N,GAAJ,OACxE,kBAAC8D,GAAA,EAAD,CAAU7T,IAAK+P,GACd,kBAAC+D,GAAA,EAAD,KACE7R,OAGC,kBAAC4R,GAAA,EAAD,KAAU,kBAACC,GAAA,EAAD,0BAMb4G,EACL,yBAAK1b,UAAWT,EAAQ+a,eACvB,6BACE9V,EAAK0T,KAAKc,SAAS,SAAWxU,EAAK0T,KAAKc,SAAS,OACjD,kBAAC/P,GAAA,EAAD,KACC,kBAAC0S,GAAA,EAAD,CAAMC,KAAMpX,EAAK0T,MAAjB,mBAIC,MAEJ,yBAAKlY,UAAWT,EAAQ8a,QACvB,kBAAC,KAAD,CAAyBwB,MAAOC,MAC/B,kBAACC,GAAA,EAAD,CACC1T,MAAM,OACN2T,OAAO,aACPC,MAAO,CAAC,OAAQ,QAAS,QACzBC,QAAS,IAAIxJ,KAAK,KAAM,EAAG,GAC3ByJ,iBAAiB,EACjBvZ,MAAOuY,EACP5S,SAAU,SAAAmJ,GAAI,OAAI6J,EAAa7J,EAAK0K,KACpCC,sBAAoB,EACpBC,mBAAoB,SAACxf,GAAD,OACnB,kBAACwK,GAAA,EAAD,CACCe,MAAM,aACN3I,QAAS5C,EAAM4C,QACfkD,MAAO9F,EAAM8F,MACbuO,WAAY,CACXE,eAAgB,kBAAC,KAAD,OAEjBmD,KAAK,QACLxU,UAAS,UAAKT,EAAQgb,oBAAb,YAAoChb,EAAQvB,aAIxD,kBAAC+d,GAAA,EAAD,CACC1T,MAAM,OACN2T,OAAO,aACPC,MAAO,CAAC,OAAQ,QAAS,QACzBC,QAAS,IAAIxJ,KAAK,KAAM,EAAG,GAC3ByJ,iBAAiB,EACjBvZ,MAAOyY,EACP9S,SAAU,SAAAmJ,GAAI,OAAI8J,EAAW9J,EAAK0K,KAClCC,sBAAoB,EACpBC,mBAAoB,SAACxf,GAAD,OACnB,kBAACwK,GAAA,EAAD,CACCe,MAAM,WACN3I,QAAS5C,EAAM4C,QACfkD,MAAO9F,EAAM8F,MACbuO,WAAY,CACXE,eAAgB,kBAAC,KAAD,OAEjBmD,KAAK,QACLxU,UAAS,UAAKT,EAAQgb,oBAAb,YAAoChb,EAAQvB,eAM1D,kBAAC0K,GAAA,EAAD,CACCC,UAAW,kBAAC,KAAD,MACXjI,QAAQ,YACRd,MAAM,UACNI,UAAWT,EAAQwB,OACnBrB,QAtGkB,WAGpB,IAFA,IAAI8S,EAAO,CAAC2I,EAAUoB,gBAClBC,EAAUrB,IACD,CACZ,IAAIsB,EAAS,IAAI/J,KAAK8J,EAAQpB,UAAY,OAC1C,GAAIqB,EAASpB,EAAS,MACtB7I,EAAK3T,KAAK4d,EAAOF,gBACjBC,EAAUC,EAENjY,EAAKoB,YAAWpB,EAAKoB,UAAY,IACtCpB,EAAKoB,UAAYpB,EAAKoB,UAAU8W,OAAOlK,GACvChO,EAAKgR,WAAahR,EAAKgR,WAAa,EACpCwF,EAAgBxW,GAChBmT,MAoFC,eAOC8D,GAIH,OACC,6BACC,kBAACpM,GAAA,EAAD,CAAQjR,MAAM,EAAMiC,QAAS,kBAAMkQ,EAAa,OAAOvQ,UAAWT,EAAQuM,WACzE,kBAAC2K,GAAA,EAAD,KACC,yBAAKzW,UAAWT,EAAQ8a,QACtB7V,EAAK3B,KACN,kBAACpD,EAAA,EAAD,CAAYC,QAAS,kBAAM6X,EAAc/S,KACxC,kBAAC,KAAD,SAIH,kBAACkS,GAAA,EAAD,KACEgF,GAEF,kBAACnM,GAAA,EAAD,KACC,kBAAC7G,GAAA,EAAD,CAAQhJ,QAAS,kBAAM6Q,EAAa,OAAO3Q,MAAM,WAAjD,gBCrMCpC,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCnB,KAAMmB,EAAMnB,SAGPkY,GAAU,CAAC,OAAQ,OAAQ,OAAQ,QAAS,YAAa,eAAgB,eAEzE4I,GAAc,CACnB9Z,KAAM,OACN0C,SAAU,OACVC,SAAU,CAAC,SACXmQ,WAAY,EACZuC,KAAM,GACNxC,KAAM,GACNF,WAAY,GAkHEvX,gBAvES,SAACC,GACxB,MAAO,CACNX,KAAMW,EAAMX,KACZsG,MAAO3F,EAAMsG,KAAKX,MAClBtB,KAAMrE,EAAMsG,KAAKjC,KACjBS,QAAS9E,EAAMsG,KAAKxB,QACpBe,OAAQ7F,EAAMsG,KAAKT,OACnBD,KAAM5F,EAAMsG,KAAKV,KACjBE,MAAO9F,EAAMsG,KAAKR,MAClB8W,aAAc5c,EAAMsG,KAAKsW,aACzBpD,SAAUxZ,EAAMsG,KAAKkT,aAMI,SAACnZ,GAC3B,MAAO,CACNgS,aAAc,SAAC/L,GACdjG,EAASkR,GAAWjL,KAErBoY,UAAW,SAAC9Y,EAAMd,EAAST,EAAMwB,EAAQC,GACxCH,GAAWb,EAASc,EAAMvB,EAAMwB,EAAQC,GACtCgB,MAAK,SAAAC,GACL1G,EPtFG,CAAEnB,KAAM,YAAayG,MOsFN,CACjBA,MAAOoB,EACPjC,QAASA,EACTT,KAAMA,EACNuB,KAAMA,EACNE,MAAOA,EACPD,OAAQA,KAETF,KACEmB,MAAK,SAAAc,GACLvH,EP5EC,CAAEnB,KAAM,kBAAmBoH,KO4ELsB,UAGzBU,OAAM,SAAApG,GAAG,OAAI7B,EAASrB,EAASkD,EAAIjD,cAEtC8R,cAAe,WACd1Q,EPlGK,CAAEnB,KAAM,sBOoGdyf,YAAa,WACZ,IAAI7Z,EAAU,CACb1H,KAAM,GACNoK,KAAM,GACN2G,MAAO,CAACyQ,IAAK,KACbnX,IAAK,IAEN9B,KACEmB,MAAK,SAAAc,GACLvH,EP1GoB,SAACuH,GACzB,MAAO,CAAE1I,KAAM,gBAAiB0I,OOyGnBqR,CAAUrR,IACnBA,EAAIxK,KAAKqH,SAAQ,SAAAkP,GAChB7O,EAAQ1H,KAAKuW,GAAK,SAEnB/L,EAAIJ,KAAK/C,SAAQ,SAAAH,GAChBQ,EAAQ0C,KAAKlD,GAAK,SAEnBsD,EAAIH,IAAIhD,SAAQ,SAAAO,GACfF,EAAQ2C,IAAIzC,GAAK,SAElB3E,EPpIqB,SAACyE,GAC1B,MAAO,CAAE5F,KAAM,cAAe4F,WOmIjB4H,CAAW5H,OAEpBwD,OAAM,SAAApG,GAAG,OAAIlD,EAASkD,EAAIjD,aAE7Boa,cAAe,SAAC/S,GACfjG,EAASmR,GAAYlL,QAKTvG,EA/GD,SAAC,GAA+I,IAA7I4F,EAA4I,EAA5IA,MAAOtB,EAAqI,EAArIA,KAAMgO,EAA+H,EAA/HA,aAAcqM,EAAiH,EAAjHA,UAAW5Z,EAAsG,EAAtGA,QAASe,EAA6F,EAA7FA,OAAQkL,EAAqF,EAArFA,cAAenL,EAAsE,EAAtEA,KAAME,EAAgE,EAAhEA,MAAO8W,EAAyD,EAAzDA,aAAcpD,EAA2C,EAA3CA,SAAUmF,EAAiC,EAAjCA,YAAatF,EAAoB,EAApBA,cAClIhY,EAAU/B,KAQhB,OANKqG,EAAMG,QACV6Y,IACAD,EAAU9Y,EAAMd,EAAST,EAAMwB,EAAQC,IAKvC,kBAACgE,GAAA,EAAD,CAAOhI,UAAWT,EAAQ1D,MACzB,kBAAC,GAAD,CAAQkI,OAAQA,EAAQwM,aAAcA,IACtC,kBAAC,GAAD,CACCtB,cAAeA,EACfH,eAAgB9L,EAChBkM,YAAa3M,EACbyM,QAAS,SAAC/L,EAAGT,GAAJ,OAAUoa,EAAU9Y,EAAMb,EAAGT,EAAGuB,EAAQC,IACjDmL,aAAc,kBAAM0N,OAErB,kBAAC,GAAD,CACC9I,QAASA,GACTzO,KAAMzB,EACNtB,KAAMA,EACNyB,MAAOA,EACPoK,QAAS,SAAA7L,GAAI,OAAIqa,EAAU9Y,EAAMd,EAAST,EAAMwB,EAAQC,IACxDgQ,SAAU,SAAAhQ,GAAK,OAAI4Y,EAAU9Y,EAAMd,EAAST,EAAMwB,EAAQC,IAC1DuM,aAAcA,EACd0D,UAAW,kBAAMsD,EAAcoF,KAC/B1N,cAAeA,EACfnL,KAAMA,EACNoQ,QAAS,SAAA5K,GAAC,OAAIsT,EAAUtT,EAAGtG,EAAST,EAAMwB,EAAQC,MAElD8W,EAAe,kBAAC,GAAD,CAAcnD,SAAU,kBAAMiF,EAAU9Y,EAAMd,EAAST,EAAMwB,EAAQC,MAAa,KACjG0T,EAAW,kBAAC,GAAD,CAAUA,SAAUA,EAAUC,SAAU,kBAAMiF,EAAU9Y,EAAMd,EAAST,EAAMwB,EAAQC,MAAa,SCtDlG+Y,OARf,SAAkBjgB,GACjB,OACC,0CCAWkgB,GAAc,SAACtY,GAC3B,MAAO,CAAEtH,KAAM,gBAAiBsH,OCY3BlH,GAAYC,aAAW,SAAAT,GAAK,MAAK,CACtCnB,KAAMmB,EAAMnB,KACZa,gBAAiBM,EAAMN,gBACvBugB,SAAU,CACT3S,QAAStN,EAAMqK,QAAQ,GACvBY,MAAO,QAERsS,oBAAqB,CACpBtS,MAAO,SAERiV,UAAW,CACVjV,MAAO,OAERZ,QAAS,CACRrJ,OAAQhB,EAAMqK,QAAQ,GACtBY,MAAO,aA6JT,IA8CehK,gBA9CS,SAACC,GACxB,MAAO,CACNoH,KAAMpH,EAAM+H,QAAQX,KACpB6X,SAAUjf,EAAM+H,QAAQkX,aAIC,SAAC5e,GAC3B,IAAM6e,EAAU,WACf,IAAM3K,EAAQ,IAAIC,KACZ2K,EAAkB,IAAI3K,KAAKD,EAAMT,cAAeS,EAAMX,WAAY,GAAGwL,UAC3EtX,GAAc,CACb0L,KAAM,CACL6L,IAAKF,GAENhZ,MAAO,CACNqN,MAAO,KAEN1M,MAAK,SAAAc,GAAG,OAAIvH,ED9MT,CAAEnB,KAAM,WAAYkI,KC8MMQ,EAAIR,UACnCkB,OAAM,SAAApG,GAAG,OAAI7B,EAASrB,EAASkD,EAAIjD,cAErC,MAAO,CACNqgB,UAAW,kBAAMJ,KACjBK,aAAc,SAACxX,GACdD,GAAgBC,GACdjB,MAAK,SAAAc,GACLvH,EAASlB,EAAW,kBACpB+f,OAEA5W,OAAM,SAAApG,GAAG,OAAI7B,EAASrB,EAASkD,EAAIjD,cAEtCugB,cAAe,SAAChZ,GACfnG,EAASye,GAAYtY,KAEtBiZ,gBAAiB,SAACjZ,GACjBsB,GAAgBtB,GACdM,MAAK,SAAAc,GACLvH,EAASlB,EAAW,oBACpBkB,EAASye,GAAY,OACrBI,OAEA5W,OAAM,SAAApG,GAAG,OAAI7B,EAASrB,EAASkD,EAAIjD,iBAKzBc,EAhLf,SAAkBnB,GACjB,IAMIsX,EAAOrW,EAAMoW,EANX5U,EAAU/B,KACR8H,EAAmBxI,EAAnBwI,KAAM6X,EAAargB,EAAbqgB,SACNK,EAA4D1gB,EAA5D0gB,UAAWC,EAAiD3gB,EAAjD2gB,aAAcC,EAAmC5gB,EAAnC4gB,cAAeC,EAAoB7gB,EAApB6gB,gBAHxB,EAIAhW,mBAAS,IAAI+K,MAJb,oBAIjBhB,EAJiB,KAIXkM,EAJW,OAKIjW,mBAAS,IALb,oBAKjBkW,EALiB,KAKTC,EALS,KAQnBxY,GAGJvH,EAlCwB,KAiCxBqW,EAAQ9O,EAAKyY,QAAO,SAAC3J,EAAO7Q,GAAR,OAAc6Q,EAAQ7Q,EAAEsa,SAAQ,IAEpD1J,EAAQ7O,EAAKjC,QAJHma,IAOX,IAOMQ,EACL,yBAAKhe,UAAWT,EAAQ7C,iBACvB,yBAAKsD,UAAS,UAAKT,EAAQ8H,QAAb,YAAwB9H,EAAQ7C,kBAC9C,kBAAC,KAAD,CAAyBmf,MAAOC,MAC/B,kBAACC,GAAA,EAAD,CACC1T,MAAM,OACN2T,OAAO,aACPC,MAAO,CAAC,OAAQ,QAAS,QACzBC,QAAS,IAAIxJ,KAAK,KAAM,EAAG,GAC3ByJ,iBAAiB,EACjBvZ,MAAO8O,EACPnJ,SAAU,SAAAmJ,GAAI,OAAIkM,EAAQlM,EAAK0K,KAC/BC,sBAAoB,EACpBC,mBAAoB,SAACxf,GAAD,OACnB,kBAACwK,GAAA,EAAD,CACCe,MAAM,OACN3I,QAAS5C,EAAM4C,QACfkD,MAAO9F,EAAM8F,MACbuO,WAAY,CACXE,eAAgB,kBAAC,KAAD,OAEjBmD,KAAK,QACLxU,UAAWT,EAAQgb,2BAOvB,yBAAKva,UAAWT,EAAQ8H,SACxB,kBAACC,GAAA,EAAD,CACC1E,MAAOib,EACPzgB,KAAK,SACLsD,QAAQ,WACR6H,SAAU,SAAAC,GAAC,OAAIsV,EAAUtV,EAAExJ,OAAO4D,MAAMqb,QAAQ,IAAK,OACrD9M,WAAY,CACX+M,aAAc,kBAAC5M,GAAA,EAAD,CAAgBzT,SAAS,OAAzB,cAIhB,kBAAC6K,GAAA,EAAD,CACC1I,UAAWT,EAAQ8H,QACnB3G,QAAQ,YACRd,MAAM,UACN+I,UAAW,kBAAC,KAAD,MACXjJ,QAAS,WAnDPye,WAAWN,IAAW,IAC1BJ,EAAa,CAAE/L,KAAMA,EAAMmM,OAAQA,IACnCD,EAAQ,IAAIlL,MACZoL,EAAU,OA2CT,gBAYIM,EACL,kBAACxI,GAAA,EAAD,CAAgB1M,UAAWlB,MAC1B,kBAAC6N,GAAA,EAAD,KACC,kBAACjB,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,sBAAsBX,IACtB,kBAACW,GAAA,EAAD,sBAAsBV,EAAtB,YACA,kBAACU,GAAA,EAAD,qBAAqB/W,EAArB,YACA,kBAAC+W,GAAA,EAAD,OAMD,kBAACD,GAAA,EAAD,KACC,kBAACC,GAAA,EAAD,aACA,kBAACA,GAAA,EAAD,eACA,kBAACA,GAAA,EAAD,cACA,kBAACA,GAAA,EAAD,CAAW9U,UAAWT,EAAQ2d,cAGhC,kBAAC7H,GAAA,EAAD,KACE/P,EAAOA,EAAKhC,KAAI,SAAAJ,GAAC,OACjB,kBAAC2R,GAAA,EAAD,CAAU7T,IAAKkC,EAAEwO,MAChB,kBAACoD,GAAA,EAAD,KAvHY,SAAApD,GACE,kBAATA,IAAmBA,EAAO,IAAIgB,KAAKhB,IAC9C,IAAMK,EAAOL,EAAKM,cACZqM,EAAQ3M,EAAKI,WAAa,EAC1BnM,EAAM+L,EAAKE,UACjB,MAAM,GAAN,OAAUjM,EAAV,YAAiB0Y,EAAjB,YAA0BtM,GAkHRuM,CAAWpb,EAAEwO,OACzB,kBAACoD,GAAA,EAAD,KAAY5R,EAAE2a,OAAd,WACA,kBAAC/I,GAAA,EAAD,MAjHayJ,EAiHWrb,EAAEsb,OA/G5BD,EAAKlb,OAAS,GAAWkb,EACvB,GAAN,OAAUA,EAAKrM,OAAO,EAAG,IAAzB,OAFkB,IAiHZ,kBAAC4C,GAAA,EAAD,CAAW9U,UAAWT,EAAQ2d,WAC7B,kBAACzd,EAAA,EAAD,CAAYC,QAAS,kBAAMge,EAAcxa,EAAE1D,OAC1C,kBAAC,KAAD,SApHW,IAAA+e,KAwHV,QAKT,OACC,kBAAC,IAAMjT,SAAP,KACC,kBAACtD,GAAA,EAAD,CAAOhI,UAAWT,EAAQ1D,MACxBmiB,GAEDI,EACD,kBAAChE,GAAD,CACChc,KAAMmC,QAAQ4c,GACd9c,QAAS,kBAAMqd,EAAc,OAC7BjK,MAAM,iBACNvT,KAAK,gBACLqW,OAAQ,SACRF,KAAM,kBAAMsH,EAAgBR,UCvL1BsB,GAAc,CAAErgB,MAAM,GCAtBsgB,GAAmB,CAAEtgB,MAAM,EAAO+H,OAAQ,MCI1CwY,GAAY,CACjB3b,QAAS,CACR1H,KAAM,GACNoK,KAAM,GACN2G,MAAO,CAACyQ,IAAK,KACbnX,IAAK,IAEN5B,OAAQ,GACRmM,cAAe,GACf3N,KAAM,GACNuB,KAAM,EACNE,MAAO,GACP8W,aAAc,KACdpD,SAAU,KACVN,cAAc,EACdvT,MAAO,CACNyB,KAAM,IAEPyJ,aAAa,EACboI,UAAW,GACXvH,OAAQ,GACRmL,WAAY,MCzBP6D,GAAe,CACpBtZ,KAAM,KACN6X,SAAU,MCMI0B,eAAgB,CAC7B1e,ICTa,WAA6C,IAA5CjC,EAA2C,uDAAnC,CAACf,QAAS,GAAIiD,IAAK,IAAK0e,EAAW,uCAC1D,OAAQA,EAAO1hB,MACd,IAAK,cACJ,MAAO,CAACD,QAAS2hB,EAAO3hB,QAASiD,IAAK,IACvC,IAAK,YACJ,MAAO,CAACjD,QAAS,GAAIiD,IAAK0e,EAAO3hB,SAClC,QACC,OAAOe,IDGRX,KEVa,WAAyB,IAAxBW,EAAuB,uDAAf,GAAI4gB,EAAW,uCACtC,OAAQA,EAAO1hB,MACb,IAAK,OACN,OAAO0hB,EAAOvhB,KACb,IAAK,SACN,MAAO,GACN,QACD,OAAOW,IFIPN,OJTa,WAAkC,IAAjCM,EAAgC,uDAAxBugB,GAAaK,EAAW,uCAC9C,OAAQA,EAAO1hB,MACb,IAAK,cACH,MAAO,CAAEgB,MAAM,GACjB,IAAK,eACH,MAAO,CAAEA,MAAM,GACjB,QACE,OAAOF,IIGXI,QHVa,WAAuC,IAAtCJ,EAAqC,uDAA7BwgB,GAAkBI,EAAW,uCACjD,OAAQA,EAAO1hB,MACX,IAAK,oBACD,MAAO,CAAEgB,MAAM,EAAM+H,OAAQ2Y,EAAO9f,QACxC,IAAK,qBACD,MAAO,CAAEZ,MAAM,EAAO+H,OAAQ,MAClC,QACI,OAAOjI,IGIjBsG,KFea,WAAgC,IAA/BtG,EAA8B,uDAAtBygB,GAAWG,EAAW,uCAC7C,OAAQA,EAAO1hB,MACd,IAAK,cACJ,OAAOqF,OAAOU,OAAO,GAAIjF,EAAO,CAAE8E,QAAS8b,EAAO9b,UACnD,IAAK,cACJ,OAAOP,OAAOU,OAAO,GAAIjF,EAAO,CAAE4c,aAAcgE,EAAOta,OACxD,IAAK,YACJ,IAAMua,EAAS7gB,EAAMkZ,aACrB,OAAI2H,EAAetc,OAAOU,OAAO,GAAIjF,EAAO,CAAEwZ,SAAU,KAAMN,cAAc,IACrE3U,OAAOU,OAAO,GAAIjF,EAAO,CAAEwZ,SAAUoH,EAAOta,KAAM4S,cAAc,IACxE,IAAK,YACJ,IAAM4H,EAAWF,EAAOjb,MACxB,OAAOpB,OAAOU,OAAO,GAAIjF,EAAO,CAC/B2F,MAAOmb,EAASnb,MAChBb,QAASgc,EAAShc,QAClBT,KAAMyc,EAASzc,KACfwB,OAAQib,EAASjb,OACjBD,KAAMkb,EAASlb,KACfE,MAAOgb,EAAShb,QAElB,IAAK,mBACJ,IAAM5F,EAAOF,EAAM6Q,YACnB,OAAOtM,OAAOU,OAAO,GAAIjF,EAAO,CAAE6Q,aAAc3Q,IACjD,IAAK,gBACJ,OAAOqE,OAAOU,OAAO,GAAIjF,EAAO,CAAEiZ,UAAW2H,EAAOhZ,MACrD,IAAK,aACJ,OAAOrD,OAAOU,OAAO,GAAIjF,EAAO,CAAE0R,OAAQkP,EAAOlP,SAClD,IAAK,kBACJ,OAAOnN,OAAOU,OAAO,GAAIjF,EAAO,CAAE6c,WAAY+D,EAAOta,OACtD,IAAK,qBACJ,OAAO/B,OAAOU,OAAO,GAAIjF,EAAO,CAAEgS,cAAe4O,EAAOhP,UACzD,QACC,OAAO5R,IE9CR+H,QDTa,WAAmC,IAAlC/H,EAAiC,uDAAzB0gB,GAAcE,EAAW,uCAChD,OAAQA,EAAO1hB,MACd,IAAK,WACJ,OAAOqF,OAAOU,OAAO,GAAIjF,EAAO,CAAEoH,KAAMwZ,EAAOxZ,OAChD,IAAK,gBACJ,OAAO7C,OAAOU,OAAO,GAAIjF,EAAO,CAAEif,SAAU2B,EAAOpa,KACpD,QACC,OAAOxG,MISJ+gB,GAAQC,YAAYC,IAc1B,IAAMhf,GAAMif,MACVC,UAAUjO,IAAKkO,6CAA+BC,WAAWA,MACzDF,UAAUG,IAAe,CAAEC,QAASC,OAAOC,gBAqB7C,SAASC,MAnBT,SAAoBjhB,GACnB,GAAiB,YAAbA,GAAuC,mBAAbA,EAA9B,CAKA,IAAMpB,EAAO0hB,GAAMY,WAAWtiB,KAEzBA,GAASA,EAAKiC,KAClBZ,IAAeC,KAAK,YAYrBihB,CADiBJ,OAAOpgB,SAASX,UAgBlC,SAASohB,KACRC,IAASC,OACR,kBAAC,IAAD,CAAUhB,MAAOA,IAChB,kBAAC,IAAD,CAAQiB,QAASthB,KAChB,kBAAC,IAAD,CAAOgC,KAAK,IAAIsI,UAAWnC,GAAKoZ,QAASP,IACxC,kBAAC,IAAD,CAAOhf,KAAK,QAAQsI,UAAWkX,KAC/B,kBAAC,IAAD,CAAOxf,KAAK,UAAUsI,UAAWmX,KACjC,kBAAC,IAAD,CAAOzf,KAAK,SAASsI,UAAWoX,KAChC,kBAAC,IAAD,CAAO1f,KAAK,YAAYsI,UAAWqX,KACnC,kBAAC,IAAD,CAAO3f,KAAK,YAAYsI,UAAWsX,QAIpCC,SAASC,eAAe,SAxB5BvgB,GAAIwgB,iBACF3b,MAAK,SAAA4b,GAEL3B,GAAM1gB,SAASjB,EAASsjB,EAAErjB,OAC1BwiB,QAEAvZ,OAAM,SAAApG,GACN2f,QAoBa5f,sB","file":"static/js/main.db131c6e.chunk.js","sourcesContent":["import React from 'react'\r\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport { green, red } from '@material-ui/core/colors'\r\n\r\nconst muiTheme = createMuiTheme({\r\n\tpalette: {\r\n\t\t// primary: green,\r\n\t\tprimary: {\r\n\t\t\tmain: green[800]\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#fffffF\"\r\n\t\t},\r\n\t\terror: red\r\n\t},\r\n\toverrides: {\r\n\t\tMuiPaper: {\r\n\t\t\troot: {\r\n\t\t\t\t// flex: 1,\r\n\t\t\t\tflexBasis: \"auto\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiTabs: {\r\n\t\t\tvertical: {\r\n\t\t\t\tmaxWidth: \"80px\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiGrid: {\r\n\t\t\troot: {\r\n\t\t\t\tjustifyContent: \"space-evenly\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiDialogTitle: {\r\n\t\t\troot: {\r\n\t\t\t\tflexDirection: \"row\",\r\n\t\t\t\talignItems: \"center\",\r\n\t\t\t\tjustifyContent: \"space-between\"\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tseparate: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\troot: {\r\n\t\tmarginTop: \"4rem\"\r\n\t},\r\n\tcenterDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspreadDivColumn: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t}\r\n})\r\n\r\n\r\nexport const AppTheme = (props) => {\r\n\r\n\treturn (\r\n\t\t<ThemeProvider theme={muiTheme}>\r\n\t\t\t<div>\r\n\t\t\t\t{props.children}\r\n\t\t\t</div>\r\n\t\t</ThemeProvider>\r\n\t)\r\n}\r\n","export const setError = message => {\r\n\treturn { type: 'SET_ERROR', message }\r\n  }\r\n\r\n  export const setMessage = message => {\r\n\treturn { type: 'SET_MESSAGE', message }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  \r\n  export const openDrawer = () => {\r\n\treturn { type: 'OPEN_DRAWER' }\r\n  }\r\n  \r\n  export const closeDrawer = () => {\r\n\treturn { type: 'CLOSE_DRAWER' }\r\n  }\r\n  \r\n  export const openProfile = (target) => {\r\n\treturn { type: \"OPEN_PROFILE_MENU\", target }\r\n  }\r\n  \r\n  export const closeProfile = () => {\r\n\treturn { type: \"CLOSE_PROFILE_MENU\" }\r\n  }\r\n  \r\n  export const authUser = user => {\r\n\treturn { type: 'AUTH', user }\r\n  }\r\n  \r\n  export const deauthUser = () => {\r\n\treturn { type: 'DEAUTH' }\r\n  }\r\n  \r\n  //////////////////////////////////////////////////////////////////////////////\r\n  ","import React from 'react';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { connect } from 'react-redux';\r\nimport { browserHistory } from 'react-router'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { closeDrawer, openDrawer, openProfile, closeProfile } from './AppActions'\r\n\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tnavBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\tposition: \"fixed\",\r\n\t\ttop: 0,\r\n\t\tleft: 0,\r\n\t\tmargin: 0,\r\n\t\t// backgroundColor: theme.palette.primary.dark\r\n\t},\r\n\tseparate: theme.separate\r\n}))\r\n\r\nconst Header = ({ location, user, drawerOpen, onOpenDrawer, onCloseDrawer, profileOpen, onOpenProfile, onCloseProfile }) => {\r\n\tconst classes = useStyles();\r\n\tlet appbar, mobileNavIcon, profileButton\r\n\r\n\tprofileButton = (\r\n\t\tuser._id != null &&\r\n\t\t<div>\r\n\t\t\t<IconButton onClick={profileOpen ? onCloseProfile : onOpenProfile} style={{ color: 'white' }}>\r\n\t\t\t\t<AccountCircleIcon fontSize=\"large\" />\r\n\t\t\t</IconButton>\r\n\t\t</div>\r\n\t)\r\n\r\n\tif (location.pathname === '/signin') {\r\n\t\t//do nothing\r\n\t}\r\n\telse\r\n\t\tmobileNavIcon =\r\n\t\t\t<IconButton edge=\"start\" style={{ color: 'white' }} onClick={() => {drawerOpen ? onCloseDrawer() : onOpenDrawer()}} >\r\n\t\t\t\t<MenuIcon />\r\n\t\t\t</IconButton>\r\n\r\n\tappbar = (\r\n\t\t<AppBar position=\"static\" className={classes.navBar}>\r\n\t\t\t<Toolbar>\r\n\t\t\t\t{mobileNavIcon}\r\n\t\t\t\t<div className={classes.separate} />\r\n\t\t\t\t{profileButton}\r\n\t\t\t</Toolbar>\r\n\t\t</AppBar>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<header>\r\n\t\t\t{appbar}\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open,\r\n\t\tprofileOpen: state.profile.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonOpenDrawer: () => {\r\n\t\t\tdispatch(openDrawer())\r\n\t\t},\r\n\t\tonCloseDrawer: () => {\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t},\r\n\t\tonOpenProfile: (event) => {\r\n\t\t\tdispatch(openProfile(event.currentTarget))\r\n\t\t},\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header)","import React from 'react'\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setMessage } from './AppActions'\r\n\r\nconst Message = ({ text, err, onClose }) => (\r\n\t<Snackbar\r\n\t\topen={Boolean(err || text)}\r\n\t\tautoHideDuration={3000}\r\n\t\tonClose={onClose}\r\n\t\t// anchorOrigin={{horizontal: \"center\", vertical: \"top\"}}\r\n\t>\r\n\t\t<MuiAlert\r\n\t\t\televation={6}\r\n\t\t\tvariant=\"filled\"\r\n\t\t\tonClose={onClose}\r\n\t\t\tseverity={err ? \"error\" : text ? \"success\" : \"info\"}\r\n\t\t>\r\n\t\t\t{err ? err : text ? text : \"\"}\r\n\t\t</MuiAlert>\r\n\t</Snackbar>\r\n)\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\ttext: state.app.message,\r\n\t\terr: state.app.err\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonClose: () => {\r\n\t\t\tdispatch(setMessage(\"\"))\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Message)\r\n","import React from 'react'\r\n\r\nimport { browserHistory } from 'react-router'\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { capitalCase } from \"capital-case\";\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeDrawer } from '../App/AppActions'\r\n\r\nconst NavItem = (props) => {\r\n\tconst { path, icon, onNavigate } = props;\r\n\r\n\treturn (\r\n\t\t<ListItem button key={path} onClick={() => onNavigate(`/${path}`)}>\r\n\t\t\t<ListItemIcon>{icon}</ListItemIcon>\r\n\t\t\t<ListItemText primary={capitalCase(path)} />\r\n\t\t</ListItem>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NavItem)","import React from 'react';\r\n\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\n\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { closeDrawer, openDrawer } from './AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst Nav = ({user, drawerOpen, onOpenDrawer, onCloseDrawer, onNavigate}) => {\r\n\tlet menuItems = []\r\n\r\n\r\n\tif (user._id) {\r\n\t\tmenuItems.push(<Divider key=\"div1\" />)\r\n\t\tmenuItems.push(<NavItem key={1} path={\"home\"} icon={<HomeIcon/>} />)\r\n\t\tmenuItems.push(<NavItem key={2} path=\"foods\" icon={<FastfoodIcon />} />)\r\n\t\tmenuItems.push(<NavItem key={3} path=\"shoplist\" icon={<ShoppingCartIcon />} />)\r\n\t\tif (user.role === \"admin\") {\r\n\t\t\tmenuItems.push(<NavItem key={4} path=\"payments\" icon={<PaymentIcon />} />)\r\n\t\t}\r\n\t\tmenuItems.push(<Divider key=\"div2\" />)\r\n\r\n\t\treturn (\r\n\t\t\t<Drawer \r\n\t\t\t\topen={drawerOpen}\r\n\t\t\t\tonClose={open => open? onCloseDrawer() : onOpenDrawer()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t{menuItems}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Drawer>\r\n\t\t)\r\n\t}\r\n\treturn (<div/>)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tdrawerOpen: state.drawer.open\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t  onOpenDrawer: () => {\r\n\t\tdispatch(openDrawer())\r\n\t  },\r\n\t  onCloseDrawer: () => {\r\n\t\tdispatch(closeDrawer())\r\n\t  },\r\n\t  onNavigate: pathname => {\r\n\t\tbrowserHistory.push(pathname)\r\n\t\tdispatch(closeDrawer())\r\n\t  }    \r\n\t}\r\n  }\r\n  \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav)","import app from '.'\r\n\r\nlet isChrome = navigator.userAgent.indexOf('Chrome') > -1\r\n// let isExplorer = navigator.userAgent.indexOf('MSIE') > -1\r\n// let isFirefox = navigator.userAgent.indexOf('Firefox') > -1\r\nlet isSafari = navigator.userAgent.indexOf(\"Safari\") > -1\r\nlet isOpera = navigator.userAgent.toLowerCase().indexOf(\"op\") > -1\r\nif (isChrome && isSafari) isSafari = false\r\nif (isChrome && isOpera) isChrome = false\r\n\r\n// const passwordChangeService = () => app.service('v1/password-change')\r\n// const passwordResetRequestService = () => app.service('v1/password-requestreset')\r\n// const passwordResetRequestAdminService = () => app.service('v1/password-requestreset-admin')\r\n// const passwordResetService = () => app.service('v1/password-reset')\r\nconst userService = () => app.service('v1/users')\r\nexport const users = {\r\n\tlist: query => {\r\n\t\treturn userService().find({ query: query });\r\n\t},\r\n\tget: id => {\r\n\t\tif (!id) {\r\n\t\t\treturn app.get('authentication');\r\n\t\t}\r\n\t\treturn userService().get(id)\r\n\t},\r\n\tcreate: user => userService().create(user),\r\n\tpatch: (id, user) => userService().patch(id, user),\r\n\tremove: id => userService().remove(id),\r\n\tauthenticate: () => app.authentication.reAuthenticate(true),\r\n\tsignIn: (email, password) => app.authenticate({ strategy: 'local', email, password }),\r\n\t//   signInGoogle: () => {\r\n\t//     window.location.href = process.env.REACT_APP_OAUTH_URL + '/google';\r\n\t//     return Promise.resolve(null)\r\n\t//   },\r\n\tsignOut: () => app.logout(),\r\n\t//   changePassword: (oldPassword, newPassword) => passwordChangeService().create({ oldPassword, newPassword }),\r\n\t//   resetPassword: (id, token, password) => passwordResetService().create({ id, token, password }),\r\n\t//   requestPasswordReset: email => passwordResetRequestService().create({ email }),\r\n\t//   requestPasswordResetAdmin: email => passwordResetRequestAdminService().create({ email }),\r\n}\r\n\r\nconst getSorting = (sort) => { // desc = -1, asc = 1\r\n\tconst s = {}\r\n\tconst convertName = (name) => {\r\n\t\tswitch (name) {\r\n\t\t\tcase \"main\":\r\n\t\t\t\treturn \"maintype\"\r\n\t\t\tcase \"side\":\r\n\t\t\t\treturn \"sidetype\"\r\n\t\t\tcase \"food\":\r\n\t\t\t\treturn \"name\"\r\n\t\t\tcase \"Food Amount\":\r\n\t\t\t\treturn \"foodamount\"\r\n\t\t\tcase \"Cooking Time\":\r\n\t\t\t\treturn \"time\"\r\n\t\t\tcase \"Last Eaten\":\r\n\t\t\t\treturn \"lasteaten\"\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"timeseaten\"\r\n\t\t}\r\n\t}\r\n\tObject.keys(sort).forEach(key => {\r\n\t\tconst value = sort[key];\r\n\t\tif (value === \"asc\") {\r\n\t\t\tsort[key] = 1\r\n\t\t} else if (value === \"desc\") {\r\n\t\t\tsort[key] = -1\r\n\t\t}\r\n\t\ts[convertName(key)] = sort[key]\r\n\t})\r\n\treturn s\r\n}\r\n\r\nconst convertFilters = (filters) => {\r\n\tvar f = {}\r\n\tObject.keys(filters).forEach(type => {\r\n\t\tvar d = {}\r\n\t\tif (type === \"speed\") {\r\n\t\t\td[\"time\"] = filters[type]\r\n\t\t\tf = Object.assign(f, d)\r\n\t\t} else {\r\n\t\t\tvar nins = []\r\n\t\t\tObject.keys(filters[type]).forEach(name => {\r\n\t\t\t\tif (filters[type][name] === \"$nin\") nins.push(name)\r\n\t\t\t})\r\n\t\t\tif (nins.length) {\r\n\t\t\t\tif (type === \"day\") {\r\n\t\t\t\t\tnins = nins.map(x => parseInt(x.split(\" \")[0]))\r\n\t\t\t\t\td[\"foodamount\"] = { $nin: nins }\r\n\t\t\t\t} else {\r\n\t\t\t\t\td[`${type}type`] = { $nin: nins }\r\n\t\t\t\t}\r\n\t\t\t\tf = Object.assign(f, d)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\treturn f\r\n}\r\n\r\nconst foodService = () => app.service('v1/foods')\r\nexport const foods = {\r\n\tlist: (filters, page, sort, search = \"\", limit) => {\r\n\t\tconst f = convertFilters(filters)\r\n\t\tconst sorting = getSorting(sort)\r\n\t\tvar query = Object.assign(f, {\r\n\t\t\t$skip: ((page - 1) < 0 ? 0 : page) * 10,\r\n\t\t\t$limit: limit,\r\n\t\t\t$sort: sorting,\r\n\t\t})\r\n\t\tif (search) query = Object.assign(query, { $search: search })\r\n\t\treturn foodService().find({ query: query })\r\n\t},\r\n\tget: id => foodService().get(id),\r\n\tcreate: food => foodService().create(food),\r\n\tpatch: (id, food) => foodService().patch(id, food),\r\n\tremove: id => foodService().remove(id),\r\n\tfind: query => foodService().find({ query: query }),\r\n\tdistincts: () => {\r\n\t\treturn new Promise((resolve, reject) =>\r\n\t\t\tfoodService().find({ query: { $limit: 10000 } })\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tlet mainTypes = []\r\n\t\t\t\t\tlet sideTypes = []\r\n\t\t\t\t\tconst dayTypes = [...Array(4).keys()].map(d => `${d + 1} day`)\r\n\t\t\t\t\tresult.data.forEach(f => {\r\n\t\t\t\t\t\tmainTypes.push(f.maintype)\r\n\t\t\t\t\t\tf.sidetype.forEach(s => sideTypes.push(s))\r\n\t\t\t\t\t})\r\n\t\t\t\t\tresolve({\r\n\t\t\t\t\t\tmain: [...new Set(mainTypes)],\r\n\t\t\t\t\t\tside: [...new Set(sideTypes)],\r\n\t\t\t\t\t\tday: dayTypes\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t)\r\n\t},\r\n\tlastEaten: () => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tfoodService().find({ query: {\r\n\t\t\t\t$sort: {\r\n\t\t\t\t\tlasteaten: -1\r\n\t\t\t\t},\r\n\t\t\t\t$lasteaten: true\r\n\t\t\t}}).then(res => {\r\n\t\t\t\tresolve(res)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\n\r\n\r\nconst shopListService = () => app.service('v1/shoplist')\r\nexport const shoplist = {\r\n\tlist: query => {\r\n\t\treturn shopListService().find({ query: query })\r\n\t},\r\n\tget: id => shopListService().get(id),\r\n\tcreate: item => shopListService().create(item),\r\n\tpatch: (id, item) => shopListService().patch(id, item),\r\n\tremove: id => shopListService().remove(id)\r\n}\r\n\r\nconst paymentsService = () => app.service('v1/payments')\r\nexport const payments = {\r\n\tlist: query => paymentsService().find({ query: query }),\r\n\tget: id => paymentsService().get(id),\r\n\tcreate: payment => paymentsService().create(payment),\r\n\tpatch: (id, payment) => paymentsService().patch(id, payment),\r\n\tremove: id => paymentsService().remove(id)\r\n}","import React from 'react'\r\n\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Divider from '@material-ui/core/Divider'\r\n\r\nimport ActionExitToApp from '@material-ui/icons/ExitToApp';\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { closeProfile, setMessage, deauthUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst profile = ({ user, profileOpen, onCloseProfile, anchorEl, onSignOut }) => {\r\n\r\n\treturn (\r\n\t\t<Menu\r\n\t\t\tanchorEl={anchorEl}\r\n\t\t\tkeepMounted\r\n\t\t\topen={profileOpen}\r\n\t\t\tonClose={onCloseProfile}\r\n\t\t\tdisableAutoFocus={true}\r\n\t\t>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={`Signed in as: ${user.isQuest ? \" Quest\" : \"\"}`} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<MenuItem disabled={true} style={{ opacity: 1 }}>\r\n\t\t\t\t<ListItemText primary={user.name} secondary={user.email} />\r\n\t\t\t</MenuItem>\r\n\t\t\t<Divider />\r\n\t\t\t<MenuItem onClick={() => {\r\n\t\t\t\tonCloseProfile()\r\n\t\t\t\tonSignOut()\r\n\t\t\t}}>\r\n\t\t\t\t<ListItemIcon><ActionExitToApp /></ListItemIcon>\r\n\t\t\t\t<ListItemText primary='Sign Out' />\r\n\t\t\t</MenuItem>\r\n\t\t</Menu>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tprofileOpen: state.profile.open,\r\n\t\tanchorEl: state.profile.anchor\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonCloseProfile: () => {\r\n\t\t\tdispatch(closeProfile())\r\n\t\t},\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t},\r\n\t\tonSignOut: () => {\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign out.'))\r\n\t\t\t}, 5000)\r\n\t\t\tusers.signOut()\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed out.'))\r\n\t\t\t\t\tdispatch(deauthUser())\r\n\t\t\t\t\t// eslint-disable-next-line no-restricted-globals\r\n\t\t\t\t\tbrowserHistory.push('/signin');\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage(err.message))\r\n\t\t\t\t})\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(profile)\r\n","import React from 'react'\r\nimport { AppTheme } from '../theme'\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Header from './Header'\r\nimport Message from './Message'\r\n\r\nimport Nav from './Nav'\r\nimport Profile from './profile'\r\n// import MediaQuery from 'react-responsive'\r\n\r\nexport default class App extends React.Component {\r\n\r\n\trender() {\r\n\t\tlet navBar, profileMenu;\r\n\t\tif (this.props.location.pathname !== \"/signin\") {\r\n\t\t\tnavBar =\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Nav />\r\n\t\t\t\t</div>\r\n\t\t\tprofileMenu = <div><Profile /></div>\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<AppTheme>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<CssBaseline />\r\n\t\t\t\t\t<Header location={this.props.location} />\r\n\t\t\t\t\t{navBar}\r\n\t\t\t\t\t{profileMenu}\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{this.props.main}\r\n\t\t\t\t\t\t{this.props.children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Message />\r\n\t\t\t\t</div>\r\n\t\t\t</AppTheme>\r\n\t\t)\r\n\t}\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport List from '@material-ui/core/List'\r\nimport ListSubheader from '@material-ui/core/ListSubheader'\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ActionLock from '@material-ui/icons/Lock'\r\n\r\n// import { CookieDisclaimer } from '../home/CookieDisclaimer'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nimport { connect } from 'react-redux'\r\nimport { browserHistory } from 'react-router'\r\nimport { setMessage, setError, authUser } from '../App/AppActions'\r\nimport { users } from '../api'\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tmarginTop: \"8rem\",\r\n\t\tdisplay: 'flex',\r\n\t\tmargin: theme.spacing(2),\r\n\t},\r\n\tTextField: {\r\n\t\tdisplay: \"flex\",\r\n\t\tmargin: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(4)\r\n\t}\r\n}))\r\n\r\nfunction SignIn(props) {\r\n\tconst classes = useStyles();\r\n\tconst [error] = useState();\r\n\tconst [email, setEmail] = useState();\r\n\tconst [password, setPassword] = useState();\r\n\r\n\tconst { onSignIn } = props;\r\n\r\n\tconst submitHanlder = event => {\r\n\t\tevent.preventDefault()\r\n\t\tonSignIn(email, password)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper elevation={3} style={{ width: \"100%\"}}>\r\n\t\t\t\t<List subheader={<ListSubheader>Sign In</ListSubheader>}>\r\n\t\t\t\t\t<form onSubmit={submitHanlder} style={{ marginTop: '24px' }}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Email\"\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 1 || error === 3 ? \"E-mail is required\" : error === 4 ? 'E-mail does not contain \"@\" symbol' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\terror={!!error}\r\n\t\t\t\t\t\t\t\thelperText={error === 2 || error === 3 ? 'Password is required' : null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tstartIcon={<ActionLock />}\r\n\t\t\t\t\t\t\t\tonClick={submitHanlder}\r\n\t\t\t\t\t\t\t\tclassName={classes.TextField}\r\n\t\t\t\t\t\t\t>Sign In</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<input type=\"submit\" style={{ display: \"none\" }} />\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</List>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\n\r\n//////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSignIn: (email, password) => {\r\n\t\t\tif (email.length === 0 && password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail and password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(3) }\r\n\t\t\t}\r\n\t\t\tif (email.length === 0) {\r\n\t\t\t\tdispatch(setMessage('E-mail cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(1) }\r\n\t\t\t}\r\n\t\t\tif (email.indexOf('@') === -1) {\r\n\t\t\t\tdispatch(setMessage('E-mail does not contain \"@\" symbol'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(4) }\r\n\t\t\t}\r\n\t\t\tif (password.length === 0) {\r\n\t\t\t\tdispatch(setMessage('Password cannot be empty'))\r\n\t\t\t\treturn { user: null, error: Promise.resolve(2) }\r\n\t\t\t}\r\n\t\t\tdispatch(setMessage('Signing in...'))\r\n\t\t\tconst timeout = setTimeout(() => {\r\n\t\t\t\tdispatch(setMessage('Connection timeout during sign in.'))\r\n\t\t\t}, 5000)\r\n\t\t\treturn users.signIn(email, password)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tdispatch(setMessage('Signed in.'));\r\n\t\t\t\t\tdispatch(authUser(result.user));\r\n\t\t\t\t\tbrowserHistory.push('/home')\r\n\t\t\t\t\treturn { user: result.user, error: null }\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tclearTimeout(timeout)\r\n\t\t\t\t\tif (err.name === 'MongoError') {\r\n\t\t\t\t\t\tdispatch(setMessage('Server error. Try again later.'))\r\n\t\t\t\t\t} else if (err.name === 'NotAuthenticated') {\r\n\t\t\t\t\t\tdispatch(setMessage('Unable to sign in. Invalid e-mail or password.'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdispatch(setError('Error: ' + err.name + err.message))\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbrowserHistory.push('/')\r\n\t\t\t\t\tsetTimeout(() => browserHistory.push('/signin'), 10)\r\n\t\t\t\t\treturn { user: null, error: err };\r\n\t\t\t\t})\r\n\t\t},\r\n\t\tonSignInGoogle: () => {\r\n\t\t\t//   dispatch(setMessage('Signing in...'))\r\n\t\t\t//   return users.signInGoogle()\r\n\t\t},\r\n\t\tonResetPassword: () => {\r\n\t\t\t//   browserHistory.push('/passwordreset')\r\n\t\t},\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn)\r\n","import React from 'react'\r\n\r\nimport List from '@material-ui/core/List';\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { browserHistory } from 'react-router'\r\n\r\nimport FastfoodIcon from '@material-ui/icons/Fastfood';\r\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart';\r\nimport PaymentIcon from '@material-ui/icons/Payment';\r\nimport { connect } from 'react-redux';\r\nimport { closeDrawer } from '../App/AppActions'\r\nimport NavItem from '../core/NavItem'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\tmarginTop: \"10rem\",\r\n\t\tmarginLeft: \"1rem\",\r\n\t\tmarginRight: \"1rem\"\r\n\t}\r\n}))\r\n\r\nconst Home = (props) => {\r\n\tconst classes = useStyles()\r\n\tconst { user } = props;\r\n\tlet menuItems = []\r\n\r\n\tmenuItems.push(<NavItem key={0} path=\"foods\" icon={<FastfoodIcon />} />)\r\n\tmenuItems.push(<NavItem key={1} path=\"shoplist\" icon={<ShoppingCartIcon />} />)\r\n\tif (user.role === \"admin\") {\r\n\t\tmenuItems.push(<NavItem key={2} path=\"payments\" icon={<PaymentIcon />} />)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<List className={classes.paper}>\r\n\t\t\t\t{menuItems}\r\n\t\t\t</List>\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonNavigate: pathname => {\r\n\t\t\tbrowserHistory.push(pathname)\r\n\t\t\tdispatch(closeDrawer())\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)","import React from 'react'\r\n\r\nimport { Box, Typography } from '@material-ui/core';\r\n\r\nexport default (props) => {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<Typography\r\n\t\t\tcomponent=\"div\"\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`simple-tabpanel-${index}`}\r\n\t\t\taria-labelledby={`simple-tab-${index}`}\r\n\t\t\t{...other}\r\n\t\t>\r\n\t\t\t{value === index && <Box p={3}>{children}</Box>}\r\n\t\t</Typography>\r\n\t);\r\n}","import React, { useState } from 'react'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { Tabs, Tab, Button, Slider, Grid } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport TabContent from '../core/TabContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfilterSectionRoot: {\r\n\t\tflexGrow: 1,\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tdisplay: 'flex',\r\n\t\theight: 224,\r\n\t\t// marginLeft: \"-20px\"\r\n\t},\r\n\ttabs: {\r\n\t\tborderRight: `1px solid ${theme.palette.divider}`,\r\n\t\tbackgroundColor: theme.palette.primary,\r\n\t},\r\n\tverticalTab: {\r\n\t\talignItems: \"start\",\r\n\t\tmaxWidth: \"10px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\ttabContainer: {\r\n\t\tflexGrow: 1,\r\n\t\tmaxWidth: \"250px\",\r\n\t\tmarginLeft: \"-56px\",\r\n\t\tmarginTop: \"-40px\",\r\n\t\tpaddingTop: \"2px\"\r\n\t},\r\n\tspeedContainer: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmarginLeft: \"5px\"\r\n\t},\r\n\tspeedText: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tspeedBtn: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tmargin: \"10px\"\r\n\t},\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(1),\r\n\t\ttextAlign: 'center',\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t},\r\n\tfilterButton: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\"\r\n\t},\r\n\tfilterButtonDisabled: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\",\r\n\t\tcolor: \"#d3d3d3\"\r\n\t},\r\n\theader: {\r\n\t\twidth: \"80px\",\r\n\t\tfontSize: \"small\",\r\n\t\topacity: 1,\r\n\t\t// border: `1px solid ${theme.palette.primary.main}`,\r\n\t\t// color: theme.palette.primary.main\r\n\t},\r\n\tfilterTab: {\r\n\t\tminWidth: \"80px\"\r\n\t},\r\n}));\r\n\r\nconst getSpeedLabel = (value) => {\r\n\tconst hours = Math.floor(value / 60)\r\n\tconst mins = Math.floor((value % 60) / 6);\r\n\tif (mins === 0) return hours\r\n\treturn `${hours}.${mins}`\r\n}\r\n\r\nconst getSpeedText = (value) => {\r\n\tconst hours = Math.floor(value / 60)\r\n\tconst mins = Math.floor(value % 60);\r\n\tif (hours === 0) return `    ${mins} min`\r\n\tif (mins === 0) return `${hours} h       `\r\n\treturn `${hours}h ${mins} min`\r\n}\r\n\r\nconst inSpread = 2;\r\nconst outSpread = 12;\r\nconst gridSpacing = 3;\r\n\r\nconst FilterSection = ({ filters, setFilters }) => {\r\n\tconst classes = useStyles()\r\n\tconst [tabValue, setTabValue] = useState(0)\r\n\r\n\tconst onFilterClick = (f) => {\r\n\t\tvar selected;\r\n\t\tif (f in filters.main) selected = filters.main\r\n\t\telse if (f in filters.side) selected = filters.side\r\n\t\telse if (f in filters.day) selected = filters.day\r\n\t\tconst newValue = selected[f] === \"$in\" ? \"$nin\" : \"$in\"\r\n\t\tselected[f] = newValue\r\n\t\tsetFilters(filters)\r\n\t}\r\n\t\r\n\tconst forceColumn = (type, filter) => {\r\n\t\tconst first = Object.keys(type.type)[0]\r\n\r\n\t\tvar selected;\r\n\t\tif (first in filters.main) selected = filters.main\r\n\t\telse if (first in filters.side) selected = filters.side\r\n\t\telse if (first in filters.day) selected = filters.day\r\n\r\n\t\tObject.keys(selected).forEach(f => {\r\n\t\t\tselected[f] = filter\r\n\t\t})\r\n\t\tsetFilters(filters)\r\n\t}\r\n\r\n\tconst GridHeader = (type) => (\r\n\t\t<React.Fragment>\r\n\t\t\t<Grid item xs={inSpread}>\r\n\t\t\t\t<Button color=\"primary\" className={classes.header} onClick={() => forceColumn(type, \"$in\")}>Include</Button>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={inSpread}>\r\n\t\t\t\t<Button color=\"primary\" className={classes.header} onClick={() => forceColumn(type, \"$nin\")}>Exclude</Button>\r\n\t\t\t</Grid>\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst onOffBtn = (on, label, onClick) => (\r\n\t\t<Button\r\n\t\t\tvariant={on ? \"contained\" : \"outlined\"}\r\n\t\t\tcolor={on ? \"primary\" : \"default\"}\r\n\t\t\tonClick={() => onClick(label)}\r\n\t\t\tclassName={on ? classes.filterButton : classes.filterButtonDisabled}\r\n\t\t>{label}</Button>\r\n\t)\r\n\r\n\tconst buttonFilters = (type) => {\r\n\t\tconst arr = Object.keys(type)\r\n\t\treturn (\r\n\t\t\t<div className={classes.tabContainer}>\r\n\t\t\t\t<Grid container spacing={1} directon=\"row\" justify=\"space-evenly\" alignItems=\"flex-start\">\r\n\t\t\t\t\t<Grid container item xs={outSpread} spacing={gridSpacing}>\r\n\t\t\t\t\t\t<GridHeader type={type} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{arr.map(f => {\r\n\t\t\t\t\t\tconst left = type[f] === \"$in\"\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<React.Fragment key={f}>\r\n\t\t\t\t\t\t\t\t<Grid container item xs={outSpread} spacing={gridSpacing} >\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={inSpread} >\r\n\t\t\t\t\t\t\t\t\t\t{onOffBtn(left, f, onFilterClick)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t<Grid item xs={inSpread} >\r\n\t\t\t\t\t\t\t\t\t\t{onOffBtn(!left, f, onFilterClick)}\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst mainContent = buttonFilters(filters.main)\r\n\tconst sideContent = buttonFilters(filters.side)\r\n\tconst dayContent = buttonFilters(filters.day)\r\n\r\n\tconst speedFilter = Object.keys(filters.speed)[0]\r\n\tconst speedValue = filters.speed[speedFilter]\r\n\tconst timeIsLess = speedFilter === \"$lt\"\r\n\tconst speedFilterText = timeIsLess ? \"less\" : \"more\";\r\n\r\n\tconst handleSpeedClick = (value) => {\r\n\t\tfilters.speed = timeIsLess ? {\"$gt\": speedValue} : {\"$lt\": speedValue}\r\n\t\tsetFilters(filters)\r\n\t}\r\n\r\n\tconst speedContent = (\r\n\t\t<div className={classes.speedContainer}>\r\n\t\t\t<div className={classes.speedBtn}>\r\n\t\t\t\t{onOffBtn(timeIsLess, \"<\", handleSpeedClick)}\r\n\t\t\t\t{onOffBtn(!timeIsLess, \">\", handleSpeedClick)}\r\n\t\t\t</div>\r\n\t\t\t<Slider\r\n\t\t\t\tvalue={speedValue}\r\n\t\t\t\tdefaultValue={180}\r\n\t\t\t\ttrack={timeIsLess ? \"normal\" : \"inverted\"}\r\n\t\t\t\tgetAriaValueText={value => `${value}`}\r\n\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\tvalueLabelFormat={value => getSpeedLabel(value)}\r\n\t\t\t\tonChange={(e, value) => {\r\n\t\t\t\t\tif (value !== speedValue) {\r\n\t\t\t\t\t\tfilters.speed[speedFilter] = value\r\n\t\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tstep={30}\r\n\t\t\t\tmin={0}\r\n\t\t\t\tmax={180}\r\n\t\t\t/>\r\n\t\t\t{/* <Typography id=\"discrete-slider-restrict\" gutterBottom> */}\r\n\t\t\t\t<div className={classes.speedText}>\r\n\t\t\t\t\t<div>{`Takes ${speedFilterText} than `}</div>\r\n\t\t\t\t\t<div>{`${getSpeedText(speedValue)}`}</div>\r\n\t\t\t\t\t<div>{` to make`}</div>\r\n\t\t\t\t</div>\r\n\t\t\t{/* </Typography> */}\r\n\t\t</div>\r\n\t);\r\n\t\r\n\treturn (\r\n\t\t<div className={classes.filterSectionRoot}>\r\n\t\t\t<Tabs\r\n\t\t\t\torientation=\"vertical\"\r\n\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\tvalue={tabValue}\r\n\t\t\t\tonChange={(e, value) => setTabValue(value)}\r\n\t\t\t>\r\n\t\t\t\t<Tab label=\"Main\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Side\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Speed\" className={classes.filterTab} />\r\n\t\t\t\t<Tab label=\"Day\" className={classes.filterTab} />\r\n\t\t\t</Tabs>\r\n\t\t\t<TabContent value={tabValue} index={0} >\r\n\t\t\t\t{mainContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={1} >\r\n\t\t\t\t{sideContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={2} >\r\n\t\t\t\t{speedContent}\r\n\t\t\t</TabContent>\r\n\t\t\t<TabContent value={tabValue} index={3} >\r\n\t\t\t\t{dayContent}\r\n\t\t\t</TabContent>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FilterSection)","import React from 'react'\r\n\r\nimport { Button, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tfilterSectionRoot: {\r\n\t\tflexGrow: 1,\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tdisplay: 'flex',\r\n\t\theight: 224,\r\n\t\twidth: \"325px\"\r\n\t},\r\n\tbuttonContainer: {\r\n\t\twidth: \"33%\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tdescriptionContainer: {\r\n\t\theight: \"40%\",\r\n\t\tcolor: \"rgba(0, 0, 0, 0.54)\"\r\n\t},\r\n\tupperdescriptionContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"flex-end\"\r\n\t},\r\n\ttextContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\talignItems: \"center\"\r\n\t}\r\n}));\r\n\r\nexport default ({ sort, setSort }) => {\r\n\tconst classes = useStyles()\r\n\r\n\tconst handleChange = (name) => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) sort[name] = 1\r\n\t\telse if (value > 0) sort[name] = -1\r\n\t\telse delete sort[name]\r\n\t\tsetSort(sort)\r\n\t}\r\n\r\n\tconst getSortDescriptionUp = name => {\r\n\t\tif (!sort[name] || sort[name] < 0) return null\r\n\t\tconst icon = <ArrowUpwardIcon />\r\n\t\tconst text = name === \"Food Amount\" ? \"Less first\" : (name === \"Cooking Time\" ? \"Fastest first\" : \"Oldest first\")\r\n\t\treturn (\r\n\t\t\t<div className={classes.textContainer}>\r\n\t\t\t\t{icon}\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</Typography>\r\n\t\t\t</ div>\r\n\t\t)\r\n\t}\r\n\t\r\n\tconst getSortDescriptionDown = name => {\r\n\t\tif (!sort[name] || sort[name] > 0) return  null\r\n\t\tconst icon = <ArrowDownwardIcon />\r\n\t\tconst text = name === \"Food Amount\" ? \"Multiple first\" : (name === \"Cooking Time\" ? \"Slowest first\" : \"Latest first\")\r\n\t\treturn (\r\n\t\t\t<div className={classes.textContainer}>\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t{icon}\r\n\t\t\t</ div>\r\n\t\t)\r\n\t}\r\n\t\r\n\r\n\tconst SortButton = (name) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.buttonContainer}>\r\n\t\t\t\t<div className={`${classes.descriptionContainer} ${classes.upperdescriptionContainer}`}>\r\n\t\t\t\t\t{getSortDescriptionUp(name)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={() => handleChange(name)}>\r\n\t\t\t\t\t{name}\r\n\t\t\t\t</Button>\r\n\t\t\t\t<div className={classes.descriptionContainer}>\r\n\t\t\t\t\t{getSortDescriptionDown(name)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.filterSectionRoot}>\r\n\t\t\t{SortButton(\"Food Amount\")}\r\n\t\t\t{SortButton(\"Cooking Time\")}\r\n\t\t\t{SortButton(\"Last Eaten\")}\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, Tabs, Tab } from '@material-ui/core';\r\n\r\nimport FilterSection from './FilterSection'\r\nimport FilterSorting from './FilterSorting'\r\nimport TabContent from '../core/TabContent'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\ttabs: {\r\n\t\twidth: \"100%\",\r\n\t},\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tactionContent: {\r\n\t\talignItems: \"stretch\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t},\r\n}))\r\n\r\nconst copyObj = filters => {\r\n\treturn JSON.parse(JSON.stringify(filters))\r\n}\r\n\r\n\r\nconst Filters = ({ onApply, filtersOpen, setOpenFilter, currentFilters, currentSort, clearFilters }) => {\r\n\tconst classes = useStyles()\r\n\tconst [tabValue, setTabValue] = useState(0)\r\n\tconst [filters, setFilters] = useState(copyObj(currentFilters))\r\n\tconst [sort, setSort] = useState(copyObj(currentSort))\r\n\r\n\tif (!filters.main.liha && currentFilters.main.liha) {\r\n\t\tsetFilters(copyObj(currentFilters))\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={filtersOpen} onClose={() => {\r\n\t\t\t\tsetFilters(copyObj(currentFilters))\r\n\t\t\t\tsetSort(copyObj(currentSort))\r\n\t\t\t\tsetOpenFilter()\r\n\t\t\t}} >\r\n\t\t\t\t<div className={classes.container}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvariant=\"fullWidth\"\r\n\t\t\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\t\tvalue={tabValue}\r\n\t\t\t\t\t\tonChange={(e, value) => setTabValue(value)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Tab label=\"Filters\" />\r\n\t\t\t\t\t\t<Tab label=\"Sort\" />\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t<TabContent value={tabValue} index={0} >\r\n\t\t\t\t\t\t<FilterSection\r\n\t\t\t\t\t\t\tfilters={filters}\r\n\t\t\t\t\t\t\tsetFilters={f => setFilters(copyObj(f))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabContent>\r\n\t\t\t\t\t<TabContent value={tabValue} index={1} >\r\n\t\t\t\t\t\t<FilterSorting \r\n\t\t\t\t\t\t\tsort={sort}\r\n\t\t\t\t\t\t\tsetSort={s => setSort(copyObj(s))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TabContent>\r\n\t\t\t\t</div>\r\n\t\t\t\t<DialogActions className={classes.actionContent}>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tfilters.main.liha = null;\r\n\t\t\t\t\t\tsetFilters(filters)\r\n\t\t\t\t\t\tsetSort({})\r\n\t\t\t\t\t\tclearFilters()\r\n\t\t\t\t\t}} color=\"primary\" >\r\n\t\t\t\t\t\tClear Filters\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tsetOpenFilter()\r\n\t\t\t\t\t\tonApply(filters, sort)\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\tApply\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tcurrentFilters: state.food.filters,\r\n\t\tfiltersOpen: state.food.filtersOpen\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Filters)","export const setFilters = (filters) => {\r\n\treturn { type: \"SET_FILTERS\", filters }\r\n}\r\n\r\nexport const selectFood = (food) => {\r\n\treturn { type: \"SELECT_FOOD\", food}\r\n}\r\n\r\nexport const setFoods = (foods) => {\r\n\treturn { type: \"SET_FOODS\", foods}\r\n}\r\n\r\nexport const onSetOpenFilters = () => {\r\n\treturn { type: \"SET_OPEN_FILTERS\"}\r\n}\r\n\r\nexport const distincts = (res) => {\r\n\treturn { type: \"SET_DISTINCTS\", res}\r\n}\r\n\r\nexport const setEditFood = (food) => {\r\n\treturn { type: \"EDIT_FOOD\", food}\r\n}\r\n\r\nexport const setErrors = (errors) => {\r\n\treturn { type: \"SET_ERRORS\", errors}\r\n}\r\n\r\nexport const setLatestFood = (food) => {\r\n\treturn { type: \"SET_LATEST_FOOD\", food}\r\n}\r\n\r\nexport const setOptions = (options) => {\r\n\treturn { type: \"SET_SEARCH_OPTIONS\", options }\r\n}","import React, { useState } from 'react'\r\n\r\nimport { fade, makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setOptions } from './foodAction'\r\nimport { foods } from '../api'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tmaxWidth: \"300px\"\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\",\r\n\t\twidth: \"100%\"\r\n\t},\r\n\tsearchDiv: {\r\n\t\twidth: \"60%\"\r\n\t},\r\n\tbtnDiv: {\r\n\t\twidth: \"40%\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tpadding: {\r\n\t\tpadding: theme.spacing(2)\r\n\t}\r\n}))\r\n\r\nconst boldSearched = (text, search) => {\r\n\tif (!text || !search) return text;\r\n\tsearch = search.toLowerCase()\r\n\ttext = text.toLowerCase()\r\n\tconst split = text.split(search);\r\n\tconst bolded = split.map((x, i) => {\r\n\t\tif (i === split.length - 1) return x;\r\n\t\treturn (<span key={i}>{x}<b>{search}</b></span>)\r\n\t})\r\n\treturn (\r\n\t\t<span>\r\n\t\t\t{bolded.map(x => x)}\r\n\t\t</span>\r\n\t)\r\n}\r\n\r\n\r\nfunction Search(props) {\r\n\tconst classes = useStyles()\r\n\tconst { search, onSelectFood, children, options, onSetOptions } = props\r\n\tconst [searchState, setSearchState] = useState(search)\r\n\r\n\tconst setSearch = search => {\r\n\t\tsetSearchState(search)\r\n\t\tonSetOptions(search)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box display=\"block\" justifyContent=\"center\" className={classes.padding}>\r\n\t\t\t<Autocomplete\r\n\t\t\t\toptions={options}\r\n\t\t\t\tgetOptionLabel={option => option.name}\r\n\t\t\t\trenderOption={option => boldSearched(option.name, searchState)}\r\n\t\t\t\trenderInput={params => {\r\n\t\t\t\t\tvar { InputProps, ...rest } = params;\r\n\t\t\t\t\tInputProps.startAdornment = (\r\n\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t<SearchIcon />\r\n\t\t\t\t\t\t</InputAdornment >)\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t{...rest}\r\n\t\t\t\t\t\t\tplaceholder=\"Search...\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tvalue={searchState}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tonChange={e => setSearch(e.target.value)}\r\n\t\t\t\t\t\t\tInputProps={InputProps}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)\r\n\t\t\t\t}}\r\n\t\t\t\tonChange={(e, value) => {\r\n\t\t\t\t\tonSelectFood(value)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t</ Box>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\toptions: state.food.searchOptions\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetOptions: search => {\r\n\t\t\tif (!search.length)\r\n\t\t\t\treturn dispatch(setOptions([]))\r\n\t\t\tconst query = { $regex: search }\r\n\t\t\tfoods.find(query)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tdispatch(setOptions(res.data))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Search)","const dayMs = 24 * 60 * 60 * 1000\r\n\r\nconst getShortTime = (date, short) => {\r\n\tconst d = date.getDate()\r\n\tconst m = date.getMonth() + 1\r\n\tif (short) return `${d}.${m}`\r\n\tconst year = date.getFullYear().toString().substr(2)\r\n\treturn `${d}.${m}.${year}`\r\n}\r\n\r\nconst getDateText = (start, end) => {\r\n\tconst numDays = Math.floor((end - start) / dayMs)\r\n\tconst days = numDays < 2 ? \"day\" : \"days\"\r\n\tconst today = new Date()\r\n\tconst diff = Math.round((today - end) / dayMs)\r\n\tvar ago;\r\n\tif (diff > 356) {\r\n\t\tago = \"Over a Year ago\"\r\n\t} else if (diff > 30) {\r\n\t\tconst m = Math.round(diff / 30)\r\n\t\tago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff > 7) {\r\n\t\tconst w = Math.round(diff / 7)\r\n\t\tago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff > 0) {\r\n\t\tago = `${diff} day${diff > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff === 0) {\r\n\t\tago = \"today\"\r\n\t} else if (diff === -1) {\r\n\t\tago = \"tomorrow\"\r\n\t} else if (diff < -1) {\r\n\t\tago = `in ${diff * (-1)} days`\r\n\t}\r\n\treturn `${ago} - ${getShortTime(start, true)}-${getShortTime(end)} (${numDays} ${days} food)`\r\n}\r\n\r\n/**\r\n * dates = Array of date objects\r\n * return Array of strings\r\n * @param {Array} dates \r\n */\r\nexport default (dates, maxLength = 10) => {\r\n\tif (!dates.length) return []\r\n\tdates = dates.sort((a, b) => b - a)\r\n\tconst arr = []\r\n\tvar firstDate = dates[0]\r\n\tvar latestDate = dates[0]\r\n\tdates.forEach((date, i) => {\r\n\t\tif (arr.length >= maxLength) return arr\r\n\t\t// start of new date clamp\r\n\t\tif (latestDate - date > 2 * dayMs ) {\r\n\t\t\tarr.push(getDateText(firstDate, latestDate))\r\n\t\t\tfirstDate = date;\r\n\t\t\tlatestDate = date;\r\n\t\t\treturn\r\n\t\t}\r\n\t\tfirstDate = date\r\n\t\tif (i === dates.length - 1) {\r\n\t\t\tarr.push(getDateText(firstDate, latestDate))\r\n\t\t}\r\n\t});\r\n\treturn arr\r\n}","import React from 'react';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport combineDates from './combineDates';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t},\r\n\thighlight:\r\n\t\ttheme.palette.type === 'light'\r\n\t\t\t? {\r\n\t\t\t\tcolor: theme.palette.secondary.main,\r\n\t\t\t\tbackgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n\t\t\t}\r\n\t\t\t: {\r\n\t\t\t\tcolor: theme.palette.text.primary,\r\n\t\t\t\tbackgroundColor: theme.palette.secondary.dark,\r\n\t\t\t},\r\n\ttitle: {\r\n\t\tflex: '1 1 100%',\r\n\t},\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1,\r\n\t},\r\n\tbutton: {\r\n\t\tmarginRight: theme.spacing(2),\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tminWidth: \"133px\",\r\n\t}\r\n}));\r\n\r\n\r\nexport default (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { columns, data, sort, setSort, limit, setLimit, onSelectFood, onAddFood, page, setPage, setOpenFilter } = props;\r\n\tif (!data) return (\r\n\t\t<div />\r\n\t)\r\n\r\n\tconst foods = data.data\r\n\tconst count = data.total || 0;\r\n\tconst pager = count === 0 ? 0 : page;\r\n\r\n\tconst handleChange = (name) => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) sort[name] = 1\r\n\t\telse if (value > 0) sort[name] = -1\r\n\t\telse delete sort[name]\r\n\t\tsetSort(sort)\r\n\t}\r\n\r\n\tconst tableToolbar = (\r\n\t\t<Toolbar >\r\n\t\t\t<Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t\tFoods\r\n\t\t  \t\t</Typography>\r\n\t\t\t<Tooltip title=\"Add New Food\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={onAddFood}\r\n\t\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.button}\r\n\t\t\t\t\tsize=\"small\" >\r\n\t\t\t\t\tAdd Food\r\n\t\t\t\t</Button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"Filter list\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tendIcon={<FilterListIcon />}\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tclassName={classes.button}\r\n\t\t\t\t\tonClick={() => { setOpenFilter() }}>\r\n\t\t\t\t\tFilter\r\n\t\t\t\t\t</Button>\r\n\t\t\t</Tooltip>\r\n\t\t</Toolbar>\r\n\t)\r\n\r\n\tconst getSortDirection = name => {\r\n\t\tconst value = sort[name]\r\n\t\tif (!value) return false;\r\n\t\tif (value > 0) return \"asc\"\r\n\t\treturn \"desc\"\r\n\t}\r\n\r\n\tconst tableHeaders = (\r\n\t\t<TableHead>\r\n\t\t\t<TableRow>\r\n\t\t\t\t{columns.map((name, i) => (\r\n\t\t\t\t\t<TableCell key={i}\r\n\t\t\t\t\t\tclassName={classes.root}\r\n\t\t\t\t\t\talign={\"left\"}\r\n\t\t\t\t\t\tpadding=\"none\"\r\n\t\t\t\t\t\tsortDirection={getSortDirection(name)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\tactive={Boolean(sort[name])}\r\n\t\t\t\t\t\t\tdirection={getSortDirection(name) || \"asc\"}\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\thandleChange(name)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t))}\r\n\t\t\t</TableRow>\r\n\t\t</TableHead>\r\n\t)\r\n\r\n\tconst tableBody = (\r\n\t\t<TableBody>\r\n\t\t\t{foods.map((d, i) => (\r\n\t\t\t\t<TableRow\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\thover\r\n\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\tonSelectFood(d)\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.maintype}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.sidetype.join(\", \")}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.name}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.timeseaten}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.lasteaten && d.lasteaten.length ? \r\n\t\t\t\t\t\tcombineDates(d.lasteaten.map(x => new Date(x)), 1)[0].split(\" - \")[0]\r\n\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.time}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t{d.foodamount}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t</TableRow>\r\n\t\t\t))}\r\n\t\t</TableBody>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t{tableToolbar}\r\n\t\t\t<TableContainer>\r\n\t\t\t\t<Table size={'medium'} >\r\n\t\t\t\t\t{tableHeaders}\r\n\t\t\t\t\t{tableBody}\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\t<TablePagination\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={count}\r\n\t\t\t\trowsPerPage={limit}\r\n\t\t\t\tonChangeRowsPerPage={e => setLimit(e.target.value)}\r\n\t\t\t\trowsPerPageOptions={[10,20,40,50]}\r\n\t\t\t\tpage={pager}\r\n\t\t\t\tonChangePage={(e, newPage) => {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\tsetPage(newPage)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t</div>\r\n\t)\r\n}","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, Button, DialogTitle, DialogContent } from '@material-ui/core';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n}))\r\n\r\nexport default ({ open, onCancel, onOk, title, text, cancelText, okText }) => {\r\n\tconst classes = useStyles()\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={oncancel} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{text}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={onCancel} color=\"primary\">\r\n\t\t\t\t\t\t{cancelText || \"Cancel\"}\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={onOk} color=\"primary\">\r\n\t\t\t\t\t\t{okText || \"Apply\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { connect } from 'react-redux'\r\nimport { Dialog, DialogActions, Button, OutlinedInput, DialogTitle, DialogContent, TextField, MenuItem, FormControl, InputLabel, Select, Checkbox, ListItemText, FormHelperText } from '@material-ui/core';\r\n\r\nimport { setEditFood, setErrors, selectFood } from './foodAction'\r\n\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\twidth: \"250px\",\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\taddButton: {\r\n\t\tminWidth: \"100px\",\r\n\t\tmaxWidth: \"150px\",\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t\tcolor: theme.palette.primary.main\r\n\t},\r\n\tsideType: {\r\n\t\tbackgroundColor: theme.palette.common.white,\r\n\t},\r\n\tcenter: {\r\n\t\tdisplay: \"flex\",\r\n\t\tposition: \"relative\",\r\n\t\talignItems: \"center\"\r\n\t},\r\n\tdiv: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tdialogContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tmargin: \"auto\",\r\n\t\twidth: \"fit-content\"\r\n\t}\r\n}))\r\n\r\nconst distDayTypes = [\r\n\t{ label: \"1 day\", value: 1 },\r\n\t{ label: \"2 days\", value: 2 },\r\n\t{ label: \"3 days\", value: 3 },\r\n\t{ label: \"4 days\", value: 4 },\r\n\t{ label: \"5 days\", value: 5 },\r\n]\r\n\r\nconst FoodEdit = ({ user, foodEdit, open, onSetEditFood, distMainTypes, distSideTypes, onSaveFood, onDeleteFood, errors, onUpdate }) => {\r\n\tconst classes = useStyles()\r\n\tvar food = Object.assign({}, foodEdit);\r\n\r\n\tconst [mainType, setMainType] = useState(food.maintype)\r\n\tconst [foodAmount, setFoodAmount] = useState(food.foodamount.toString())\r\n\tconst [sideTypes, setSideTypes] = useState(food.sidetype)\r\n\tconst [name, setName] = useState(food.name)\r\n\tconst [recipe, setRecipe] = useState(food.link)\r\n\tconst [eaten, setEaten] = useState(food.timeseaten)\r\n\tconst [cookTime, setCookTime] = useState(food.time)\r\n\tconst [deleteOpen, setDeleteOpen] = useState(false)\r\n\r\n\tconst constructFood = () => {\r\n\t\treturn {\r\n\t\t\t_id: food._id,\r\n\t\t\tname: name,\r\n\t\t\tlink: recipe,\r\n\t\t\tmaintype: mainType,\r\n\t\t\tsidetype: sideTypes,\r\n\t\t\tfoodamount: foodAmount,\r\n\t\t\ttime: cookTime,\r\n\t\t\ttimeseaten: eaten\r\n\t\t}\r\n\t}\r\n\r\n\tconst validateTime = (value) => {\r\n\t\tconst regex = new RegExp(\"[^0-9]\")\r\n\t\tif (regex.test(value)) return\r\n\t\tsetCookTime(value)\r\n\t}\r\n\r\n\tconst SelectField = ({ label, value, onChange, types }) => {\r\n\t\treturn (\r\n\t\t\t<div className={classes.selectFieldContainer}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tselect\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e => onChange(e.target.value)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{types.map((x, i) => (\r\n\t\t\t\t\t\t<MenuItem key={i} value={x.value || x}>\r\n\t\t\t\t\t\t\t{x.label || x}\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</TextField>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst sideTypeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<FormControl className={classes.selectField} variant=\"outlined\"\r\n\t\t\t\terror={errors.includes(\"side\")}\r\n\t\t\t>\r\n\t\t\t\t<InputLabel className={classes.sideType}>Side Types</InputLabel>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tmultiple\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tmultiline={true}\r\n\t\t\t\t\tvalue={sideTypes}\r\n\t\t\t\t\tonChange={e => setSideTypes(e.target.value)}\r\n\t\t\t\t\tinput={<OutlinedInput />}\r\n\t\t\t\t\trenderValue={sideTypes => sideTypes.join(\", \")}\r\n\t\t\t\t>\r\n\t\t\t\t\t{distSideTypes.map(type => (\r\n\t\t\t\t\t\t<MenuItem key={type} value={type}>\r\n\t\t\t\t\t\t\t<Checkbox checked={sideTypes.includes(type)} color=\"primary\" />\r\n\t\t\t\t\t\t\t<ListItemText primary={type} />\r\n\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Select>\r\n\t\t\t\t<FormHelperText>{errors.includes(\"side\") ? \"Must have at least one side type\" : \"\"}</FormHelperText>\r\n\t\t\t</FormControl>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst nameElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Name\"}\r\n\t\t\t\tvalue={name}\r\n\t\t\t\tmultiline={true}\r\n\t\t\t\tonChange={value => setName(value.target.value)}\r\n\t\t\t\terror={errors.includes(\"name\")}\r\n\t\t\t\thelperText={errors.includes(\"name\") ? \"Name can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst speedElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Cooking Time\"\r\n\t\t\t\tvalue={cookTime}\r\n\t\t\t\tonChange={e => validateTime(e.target.value)}\r\n\t\t\t\terror={errors.includes(\"time\")}\r\n\t\t\t\thelperText={errors.includes(\"time\") ? \"Cooking time can't be empty\" : \"\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst recipeElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel={\"Recipe\"}\r\n\t\t\t\tvalue={recipe}\r\n\t\t\t\tmultiline={!recipe.includes(\"http\")}\r\n\t\t\t\tonChange={e => setRecipe(e.target.value)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst eatenElement = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<TextField\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tclassName={classes.selectField}\r\n\t\t\t\tlabel=\"Times Eaten\"\r\n\t\t\t\tvalue={eaten}\r\n\t\t\t\tonChange={e => setEaten(e.target.value)}\r\n\t\t\t\tdisabled={user.role !== \"admin\"}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst editContent = (\r\n\t\t<React.Fragment>\r\n\t\t\t{nameElement}\r\n\t\t\t<SelectField label={\"Main Type\"} value={mainType} onChange={(value) => setMainType(value)} types={distMainTypes} />\r\n\t\t\t{sideTypeElement}\r\n\t\t\t<SelectField label={\"Food Amount\"} value={foodAmount} onChange={(value) => setFoodAmount(value)} types={distDayTypes} />\r\n\t\t\t{speedElement}\r\n\t\t\t{recipeElement}\r\n\t\t\t{eatenElement}\r\n\t\t</React.Fragment>\r\n\t)\r\n\r\n\tconst deleteFood = (\r\n\t\t<Button startIcon={<DeleteForeverIcon />} onClick={() => setDeleteOpen(true)}>\r\n\t\t\tDelete\r\n\t\t</Button>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={() => onSetEditFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\t<div className={classes.center}>\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t\t<div className={classes.div} />\r\n\t\t\t\t\t\t{food._id ? deleteFood : null}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent >\r\n\t\t\t\t\t<form className={classes.dialogContainer} noValidate>\r\n\t\t\t\t\t\t{editContent}\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSetEditFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={() => {\r\n\t\t\t\t\t\tonUpdate()\r\n\t\t\t\t\t\tonSaveFood(constructFood())\r\n\t\t\t\t\t}} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\t{food.id ? \"Apply\" : \"Add\"}\r\n          \t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<BackDialog\r\n\t\t\t\topen={deleteOpen}\r\n\t\t\t\tonCancel={() => setDeleteOpen(false)}\r\n\t\t\t\tonOk={() => {\r\n\t\t\t\t\tsetDeleteOpen(false)\r\n\t\t\t\t\tonDeleteFood(food._id)\r\n\t\t\t\t\tonUpdate()\r\n\t\t\t\t}}\r\n\t\t\t\ttitle=\"Delete Food\"\r\n\t\t\t\ttext=\"Are you sure?\"\r\n\t\t\t\tokText=\"Delete\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\tconst d = state.food.distincts\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\topen: state.food.foodEditOpen,\r\n\t\tdistMainTypes: d.main || [],\r\n\t\tdistSideTypes: d.side || [],\r\n\t\terrors: state.food.errors\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t\tdispatch(setErrors([]))\r\n\t\t},\r\n\t\tonDeleteFood: (id) => {\r\n\t\t\tif (!id) return\r\n\t\t\tfoods.remove(id)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tdispatch(setMessage(\"Food Deleted\"))\r\n\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tonSaveFood: (food) => {\r\n\t\t\tvar errors = []\r\n\t\t\tif (!food.name) errors.push(\"name\")\r\n\t\t\tif (!food.sidetype.length) errors.push(\"side\")\r\n\t\t\tif (!food.time) errors.push(\"time\")\r\n\t\t\tif (errors.length) {\r\n\t\t\t\treturn dispatch(setErrors(errors))\r\n\t\t\t} else {\r\n\t\t\t\tif (food._id) {\r\n\t\t\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('Food Updated'))\r\n\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfoods.create(food)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tdispatch(setMessage('New Food Added'))\r\n\t\t\t\t\t\t\tdispatch(setEditFood(null))\r\n\t\t\t\t\t\t\tdispatch(setErrors([]))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FoodEdit)","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { Dialog, DialogActions, TextField, Button, DialogTitle, DialogContent, IconButton, Table, TableRow, TableCell, TableBody, Link, TableHead, Typography } from '@material-ui/core';\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport moment from 'moment-timezone'\r\nimport { selectFood, setEditFood } from './foodAction'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { foods } from '../api';\r\nimport { setMessage, setError } from '../App/AppActions';\r\nimport combineDates from '../core/combineDates';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tspread: theme.spreadDivColumn,\r\n\tcenterColumns: theme.centerDivColumn,\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(1)\r\n\t},\r\n\tmargin: {\r\n\t\tmargin: theme.spacing(3)\r\n\t},\r\n\tselectFieldContainer: {\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselectField: {\r\n\t\tminWidth: \"200px\",\r\n\t\tmaxWidth: \"200px\",\r\n\t},\r\n\tdatePickerTextfield: {\r\n\t\twidth: \"110px\"\r\n\t},\r\n\tbutton: {\r\n\t\twidth: \"180px\",\r\n\t\theight: \"60px\"\r\n\t}\r\n}))\r\n\r\nmoment.locale(\"en\")\r\nmoment.updateLocale(\"en\", {\r\n\tweek: { dow: 1, doy: 0 }\r\n})\r\n\r\n\r\nconst toFineTime = (time) => {\r\n\tconst today = new Date()\r\n\tconst diff = Math.round((today - time) / (24 * 60 * 60 * 1000))\r\n\tvar ago;\r\n\tif (diff > 356) {\r\n\t\tago = \"Over a Year ago\"\r\n\t} else if (diff > 30) {\r\n\t\tconst m = Math.round(diff / 30)\r\n\t\tago = `${m} month${m > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff > 7) {\r\n\t\tconst w = Math.round(diff / 7)\r\n\t\tago = `${w} week${w > 1 ? \"s\" : \"\"} ago`\r\n\t} else if (diff === 0) {\r\n\t\tago = \"today\"\r\n\t} else if (diff === -1) {\r\n\t\tago = \"tomorrow\"\r\n\t} else if (diff < -1) {\r\n\t\tago = `in ${diff * (-1)} days`\r\n\t}\r\n\treturn `${time.getDate()}.${time.getMonth() + 1}.${time.getFullYear()} - ${ago}`\r\n}\r\n\r\nconst getLatestFoodInfo = food => {\r\n\tvar lastDate = new Date(food.lasteaten.sort((a, b) => new Date(b) - new Date(a))[0])\r\n\tif (lastDate < new Date()) lastDate = new Date()\r\n\tconst startDate = new Date(lastDate.valueOf() + 24 * 60 * 60 * 1000)\r\n\tconst endDate = new Date(startDate.valueOf() + food.foodamount * 24 * 60 * 60 * 1000)\r\n\treturn {\r\n\t\tstartDate: startDate,\r\n\t\tendDate: endDate\r\n\t}\r\n}\r\n\r\nconst SelectedFood = ({ food, latestFood, onSelectFood, onSetEditFood, onUpdate, onFoodSelection }) => {\r\n\tconst classes = useStyles()\r\n\tconst latestFoodInfo = getLatestFoodInfo(latestFood)\r\n\tconst [startDate, setStartDate] = useState(latestFoodInfo.startDate)\r\n\tconst [endDate, setEndDate] = useState(latestFoodInfo.endDate)\r\n\r\n\tif (!food) return null;\r\n\r\n\tconst handleSelect = () => {\r\n\t\tvar days = [startDate.toDateString()]\r\n\t\tvar currDay = startDate\r\n\t\twhile (true) {\r\n\t\t\tvar newDay = new Date(currDay.valueOf() + 24 * 60 * 60 * 1000)\r\n\t\t\tif (newDay > endDate) break\r\n\t\t\tdays.push(newDay.toDateString())\r\n\t\t\tcurrDay = newDay\r\n\t\t}\r\n\t\tif (!food.lasteaten) food.lasteaten = [];\r\n\t\tfood.lasteaten = food.lasteaten.concat(days)\r\n\t\tfood.timeseaten = food.timeseaten + 1\r\n\t\tonFoodSelection(food)\r\n\t\tonUpdate()\r\n\t}\r\n\r\n\r\n\tconst historyContent = (\r\n\t\t<div className={classes.selectFieldContainer} >\r\n\t\t\t<Table size=\"small\">\r\n\t\t\t\t<TableHead>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>History</TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t\t{food.lasteaten ? combineDates(food.lasteaten.map(x => new Date(x))).map((f, i) => (\r\n\t\t\t\t\t\t<TableRow key={i}>\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t{f}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t)) : <TableRow><TableCell>No recordings</TableCell></TableRow>}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst selectContent = (\r\n\t\t<div className={classes.centerColumns}>\r\n\t\t\t<div>\r\n\t\t\t\t{food.link.includes(\"http\") || food.link.includes(\"www\") ?\r\n\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t<Link href={food.link}>\r\n\t\t\t\t\t\t\tLink To Recipe\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t: null}\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.spread}>\r\n\t\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={startDate}\r\n\t\t\t\t\t\tonChange={date => setStartDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"Start Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\t\tvalue={endDate}\r\n\t\t\t\t\t\tonChange={date => setEndDate(date._d)}\r\n\t\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tlabel=\"End Date\"\r\n\t\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tclassName={`${classes.datePickerTextfield} ${classes.margin}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tstartIcon={<CheckIcon />}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t\tonClick={handleSelect}\r\n\t\t\t>Select Food</Button>\r\n\t\t\t{historyContent}\r\n\t\t</div>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={true} onClose={() => onSelectFood(null)} className={classes.container}>\r\n\t\t\t\t<DialogTitle >\r\n\t\t\t\t\t<div className={classes.spread}>\r\n\t\t\t\t\t\t{food.name}\r\n\t\t\t\t\t\t<IconButton onClick={() => onSetEditFood(food)}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t{selectContent}\r\n\t\t\t\t</DialogContent>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => onSelectFood(null)} color=\"primary\">\r\n\t\t\t\t\t\tCancel\r\n          \t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfood: state.food.selectedFood,\r\n\t\tlatestFood: state.food.latestFood,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t},\r\n\t\tonFoodSelection: (food) => {\r\n\t\t\tfoods.patch(food._id, food)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setMessage(`Going to eat ${food.name}`))\r\n\t\t\t\t\tdispatch(selectFood(null))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tdispatch(setError(err.message))\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectedFood)","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { foods } from '../api'\r\nimport Filters from './Filters'\r\nimport Search from './Search'\r\nimport Table from '../core/Table'\r\nimport FoodEdit from './foodEdit'\r\nimport SelectedFood from './SelectedFood'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { setFilters, selectFood, setFoods, onSetOpenFilters, distincts, setEditFood, setLatestFood } from './foodAction'\r\nimport { setError } from '../App/AppActions';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: theme.root,\r\n}))\r\n\r\nconst columns = [\"Main\", \"Side\", \"Food\", \"Count\", \"LastEaten\", \"Cooking Time\", \"Food Amount\"]\r\n\r\nconst defaultFood = {\r\n\tname: \"Name\",\r\n\tmaintype: \"liha\",\r\n\tsidetype: [\"pasta\"],\r\n\tfoodamount: 1,\r\n\tlink: \"\",\r\n\ttime: 60,\r\n\ttimeseaten: 0\r\n}\r\n\r\nconst Foods = ({ foods, sort, onSelectFood, onRefresh, filters, search, setOpenFilter, page, limit, selectedFood, foodEdit, initFilters, onSetEditFood }) => {\r\n\tconst classes = useStyles()\r\n\r\n\tif (!foods.limit) {  // Init fetching\r\n\t\tinitFilters()\r\n\t\tonRefresh(page, filters, sort, search, limit)\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<Search search={search} onSelectFood={onSelectFood} />\r\n\t\t\t<Filters\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tcurrentFilters={filters}\r\n\t\t\t\tcurrentSort={sort}\r\n\t\t\t\tonApply={(f, s) => onRefresh(page, f, s, search, limit)}\r\n\t\t\t\tclearFilters={() => initFilters()}\r\n\t\t\t/>\r\n\t\t\t<Table\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tdata={foods}\r\n\t\t\t\tsort={sort}\r\n\t\t\t\tlimit={limit}\r\n\t\t\t\tsetSort={sort => onRefresh(page, filters, sort, search, limit)}\r\n\t\t\t\tsetLimit={limit => onRefresh(page, filters, sort, search, limit)}\r\n\t\t\t\tonSelectFood={onSelectFood}\r\n\t\t\t\tonAddFood={() => onSetEditFood(defaultFood)}\r\n\t\t\t\tsetOpenFilter={setOpenFilter}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tsetPage={p => onRefresh(p, filters, sort, search, limit)}\r\n\t\t\t/>\r\n\t\t\t{selectedFood ? <SelectedFood onUpdate={() => onRefresh(page, filters, sort, search, limit)} /> : null}\r\n\t\t\t{foodEdit ? <FoodEdit foodEdit={foodEdit} onUpdate={() => onRefresh(page, filters, sort, search, limit)} /> : null}\r\n\t\t</Paper>\r\n\t)\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t\tfoods: state.food.foods,\r\n\t\tsort: state.food.sort,\r\n\t\tfilters: state.food.filters,\r\n\t\tsearch: state.food.search,\r\n\t\tpage: state.food.page,\r\n\t\tlimit: state.food.limit,\r\n\t\tselectedFood: state.food.selectedFood,\r\n\t\tfoodEdit: state.food.foodEdit,\r\n\t}\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSelectFood: (food) => {\r\n\t\t\tdispatch(selectFood(food))\r\n\t\t},\r\n\t\tonRefresh: (page, filters, sort, search, limit) => {\r\n\t\t\tfoods.list(filters, page, sort, search, limit)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tdispatch(setFoods({\r\n\t\t\t\t\t\tfoods: result,\r\n\t\t\t\t\t\tfilters: filters,\r\n\t\t\t\t\t\tsort: sort,\r\n\t\t\t\t\t\tpage: page,\r\n\t\t\t\t\t\tlimit: limit,\r\n\t\t\t\t\t\tsearch: search\r\n\t\t\t\t\t}))\r\n\t\t\t\t\tfoods.lastEaten()\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tdispatch(setLatestFood(res))\r\n\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tsetOpenFilter: () => {\r\n\t\t\tdispatch(onSetOpenFilters())\r\n\t\t},\r\n\t\tinitFilters: () => {\r\n\t\t\tvar filters = {\r\n\t\t\t\tmain: {},\r\n\t\t\t\tside: {},\r\n\t\t\t\tspeed: {$lt: 180},\r\n\t\t\t\tday: {}\r\n\t\t\t}\r\n\t\t\tfoods.distincts()\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(distincts(res))\r\n\t\t\t\t\tres.main.forEach(m => {\r\n\t\t\t\t\t\tfilters.main[m] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.side.forEach(s => {\r\n\t\t\t\t\t\tfilters.side[s] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tres.day.forEach(d => {\r\n\t\t\t\t\t\tfilters.day[d] = \"$in\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tdispatch(setFilters(filters))\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => setError(err.message))\r\n\t\t},\r\n\t\tonSetEditFood: (food) => {\r\n\t\t\tdispatch(setEditFood(food))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Foods)","import React from 'react'\r\n\r\nfunction shoplist(props) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tshoplist\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default shoplist","export const setData = (data) => {\r\n\treturn { type: \"SET_DATA\", data }\r\n}\r\n\r\nexport const setDeleteId = (id) => {\r\n\treturn { type: \"SET_DELETE_ID\", id}\r\n} ","import React, { useState } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Paper, Button, TextField, Table, TableContainer, TableRow, TableCell, TableBody, TableHead, InputAdornment, IconButton } from '@material-ui/core'\r\nimport { DatePicker, MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport { connect } from 'react-redux'\r\n\r\nimport TodayIcon from '@material-ui/icons/Today';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\n\r\nimport { payments } from '../api'\r\nimport { setError, setMessage } from '../App/AppActions';\r\nimport { setData, setDeleteId } from './paymentAction'\r\nimport BackDialog from '../core/BackDialog'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: theme.root,\r\n\tcenterDivColumn: theme.centerDivColumn,\r\n\tspacings: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\twidth: \"10px\"\r\n\t},\r\n\tdatePickerTextfield: {\r\n\t\twidth: \"110px\"\r\n\t},\r\n\ttableIcon: {\r\n\t\twidth: \"5px\"\r\n\t},\r\n\tspacing: {\r\n\t\tmargin: theme.spacing(2),\r\n\t\twidth: \"200px\"\r\n\t}\r\n}))\r\n\r\nconst MONHTLY_ALLOWANCE = 700\r\n\r\nconst formatDate = date => {\r\n\tif (typeof date === \"string\") date = new Date(date)\r\n\tconst year = date.getFullYear()\r\n\tconst month = date.getMonth() + 1\r\n\tconst day = date.getDate()\r\n\treturn `${day}.${month}.${year}`\r\n}\r\n\r\nconst formatNotes = note => {\r\n\tif (!note) return \"\"\r\n\tif (note.length < 10) return note;\r\n\treturn `${note.substr(0, 10)}...`\r\n}\r\n\r\n/*\r\n\tTODO: Count total sum for the month \r\n\t\t\tCount 'left to spend' fro the month\r\n\t\t\tAdd Edit for payments\r\n\t\t\tAlternative search options ? (for specific month etc.. ?)\r\n*/\r\n\r\nfunction Payments(props) {\r\n\tconst classes = useStyles()\r\n\tconst { data, deleteId } = props;\r\n\tconst { onGetData, onAddPayment, onSetDeleteId, onDeletePayment } = props;\r\n\tconst [date, setDate] = useState(new Date())\r\n\tconst [amount, setAmount] = useState(\"\")\r\n\r\n\tvar total, left, count;\r\n\tif (!data) onGetData()\r\n\telse {\r\n\t\ttotal = data.reduce((total, x) => total + x.amount, 0)\r\n\t\tleft = MONHTLY_ALLOWANCE - total;\r\n\t\tcount = data.length;\r\n\t}\r\n\r\n\tconst handleAddPayment = () => {\r\n\t\tif (parseFloat(amount) <= 0) return\r\n\t\tonAddPayment({ date: date, amount: amount })\r\n\t\tsetDate(new Date())\r\n\t\tsetAmount(\"\")\r\n\t}\r\n\r\n\tconst addPayment = (\r\n\t\t<div className={classes.centerDivColumn}>\r\n\t\t\t<div className={`${classes.spacing} ${classes.centerDivColumn}`}>\r\n\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t<DatePicker\r\n\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\tformat=\"DD.MM.YYYY\"\r\n\t\t\t\t\tviews={[\"year\", \"month\", \"date\"]}\r\n\t\t\t\t\tminDate={new Date(2020, 0, 1)}\r\n\t\t\t\t\tshowTodayButton={true}\r\n\t\t\t\t\tvalue={date}\r\n\t\t\t\t\tonChange={date => setDate(date._d)}\r\n\t\t\t\t\tanimateYearScrolling\r\n\t\t\t\t\tTextFieldComponent={(props) => (\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tlabel=\"Date\"\r\n\t\t\t\t\t\t\tonClick={props.onClick}\r\n\t\t\t\t\t\t\tvalue={props.value}\r\n\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\tstartAdornment: <TodayIcon />\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tclassName={classes.datePickerTextfield}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.spacing}>\r\n\t\t\t<TextField\r\n\t\t\t\tvalue={amount}\r\n\t\t\t\ttype=\"number\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tonChange={e => setAmount(e.target.value.replace(\",\", \".\"))}\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">€</InputAdornment>,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tclassName={classes.spacing}\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\tonClick={() => handleAddPayment()}\r\n\t\t\t>\r\n\t\t\t\tAdd Payment\r\n\t\t\t\t</Button>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst table = (\r\n\t\t<TableContainer component={Paper}>\r\n\t\t\t<Table>\r\n\t\t\t\t<TableHead>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>{`Count: ${count}`}</TableCell>\r\n\t\t\t\t\t\t<TableCell>{`Total: ${total} €`}</TableCell>\r\n\t\t\t\t\t\t<TableCell>{`Left: ${left} €`}</TableCell>\r\n\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t{/* <Button onClick={() => onMonthSelect()}>\r\n\t\t\t\t\t\t\tSelect Month // TODO IMPLEMENT MONTH SELECTING\r\n\t\t\t\t\t\t\t</Button> */}\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell>Date</TableCell>\r\n\t\t\t\t\t\t<TableCell>Amount</TableCell>\r\n\t\t\t\t\t\t<TableCell>Notes</TableCell>\r\n\t\t\t\t\t\t<TableCell className={classes.tableIcon}></TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t</TableHead>\r\n\t\t\t\t<TableBody>\r\n\t\t\t\t\t{data ? data.map(d => (\r\n\t\t\t\t\t\t<TableRow key={d.date}>\r\n\t\t\t\t\t\t\t<TableCell>{formatDate(d.date)}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>{d.amount} €</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>{formatNotes(d.notes)}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell className={classes.tableIcon}>\r\n\t\t\t\t\t\t\t\t<IconButton onClick={() => onSetDeleteId(d._id)}>\r\n\t\t\t\t\t\t\t\t\t<DeleteForeverIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t)) : null}\r\n\t\t\t\t</TableBody>\r\n\t\t\t</Table>\r\n\t\t</TableContainer>\r\n\t)\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t{addPayment}\r\n\t\t\t</Paper>\r\n\t\t\t{table}\r\n\t\t\t<BackDialog\r\n\t\t\t\topen={Boolean(deleteId)}\r\n\t\t\t\tonClose={() => onSetDeleteId(null)}\r\n\t\t\t\ttitle=\"Delete payment\"\r\n\t\t\t\ttext=\"Are you sure?\"\r\n\t\t\t\tokText={\"Delete\"}\r\n\t\t\t\tonOk={() => onDeletePayment(deleteId)}\r\n\t\t\t/>\r\n\t\t</React.Fragment>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tdata: state.payment.data,\r\n\t\tdeleteId: state.payment.deleteId,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\tconst getData = () => {\r\n\t\tconst today = new Date()\r\n\t\tconst startOfTheMonth = new Date(today.getFullYear(), today.getMonth(), 0).getTime()\r\n\t\tpayments.list({\r\n\t\t\tdate: {\r\n\t\t\t\t$gt: startOfTheMonth\r\n\t\t\t},\r\n\t\t\t$sort: {\r\n\t\t\t\tdate: -1\r\n\t\t\t}\r\n\t\t}).then(res => dispatch(setData(res.data)))\r\n\t\t.catch(err => dispatch(setError(err.message)))\r\n\t}\r\n\treturn {\r\n\t\tonGetData: () => getData(),\r\n\t\tonAddPayment: (payment) => {\r\n\t\t\tpayments.create(payment)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setMessage(\"Payment Added\"))\r\n\t\t\t\t\tgetData()\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t},\r\n\t\tonSetDeleteId: (id) => {\r\n\t\t\tdispatch(setDeleteId(id))\r\n\t\t},\r\n\t\tonDeletePayment: (id) => {\r\n\t\t\tpayments.remove(id)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tdispatch(setMessage(\"Payment Deleted\"))\r\n\t\t\t\t\tdispatch(setDeleteId(null))\r\n\t\t\t\t\tgetData()\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => dispatch(setError(err.message)))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Payments)","const drawerState = { open: false }\r\n\r\nexport default (state = drawerState, action) => {\r\n  switch (action.type) {\r\n    case 'OPEN_DRAWER':\r\n      return { open: true }\r\n    case 'CLOSE_DRAWER':\r\n      return { open: false }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","const profileMenuState = { open: false, anchor: null }\r\n\r\nexport default (state = profileMenuState, action) => {\r\n    switch (action.type) {\r\n        case 'OPEN_PROFILE_MENU':\r\n            return { open: true, anchor: action.target}\r\n        case 'CLOSE_PROFILE_MENU':\r\n            return { open: false, anchor: null }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","// import { foodService } from '../api'\r\n\r\n// TODO implement auto filtering on main types based on last eaten\r\n\r\nconst foodState = {\r\n\tfilters: {\r\n\t\tmain: {},\r\n\t\tside: {},\r\n\t\tspeed: {$lt: 180},\r\n\t\tday: {}\r\n\t},\r\n\tsearch: \"\",\r\n\tsearchOptions: [],\r\n\tsort: {},\r\n\tpage: 0,\r\n\tlimit: 10,\r\n\tselectedFood: null,\r\n\tfoodEdit: null,\r\n\tfoodEditOpen: false,\r\n\tfoods: {\r\n\t\tdata: []\r\n\t},\r\n\tfiltersOpen: false,\r\n\tdistincts: {},\r\n\terrors: [],\r\n\tlatestFood: null,\r\n}\r\n\r\nexport default (state = foodState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_FILTERS\":\r\n\t\t\treturn Object.assign({}, state, { filters: action.filters })\r\n\t\tcase \"SELECT_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { selectedFood: action.food })\r\n\t\tcase \"EDIT_FOOD\":\r\n\t\t\tconst isOpen = state.foodEditOpen;\r\n\t\t\tif (isOpen) return Object.assign({}, state, { foodEdit: null, foodEditOpen: false })\r\n\t\t\treturn Object.assign({}, state, { foodEdit: action.food, foodEditOpen: true })\r\n\t\tcase \"SET_FOODS\":\r\n\t\t\tconst newState = action.foods\r\n\t\t\treturn Object.assign({}, state, {\r\n\t\t\t\tfoods: newState.foods,\r\n\t\t\t\tfilters: newState.filters,\r\n\t\t\t\tsort: newState.sort,\r\n\t\t\t\tsearch: newState.search,\r\n\t\t\t\tpage: newState.page,\r\n\t\t\t\tlimit: newState.limit\r\n\t\t\t})\r\n\t\tcase \"SET_OPEN_FILTERS\":\r\n\t\t\tconst open = state.filtersOpen;\r\n\t\t\treturn Object.assign({}, state, { filtersOpen: !open })\r\n\t\tcase \"SET_DISTINCTS\":\r\n\t\t\treturn Object.assign({}, state, { distincts: action.res })\r\n\t\tcase \"SET_ERRORS\":\r\n\t\t\treturn Object.assign({}, state, { errors: action.errors })\r\n\t\tcase \"SET_LATEST_FOOD\":\r\n\t\t\treturn Object.assign({}, state, { latestFood: action.food })\r\n\t\tcase \"SET_SEARCH_OPTIONS\":\r\n\t\t\treturn Object.assign({}, state, { searchOptions: action.options})\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","const paymentState = {\r\n\tdata: null,\r\n\tdeleteId: null,\r\n}\r\n\r\nexport default (state = paymentState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_DATA\":\r\n\t\t\treturn Object.assign({}, state, { data: action.data })\r\n\t\tcase \"SET_DELETE_ID\":\r\n\t\t\treturn Object.assign({}, state, { deleteId: action.id })\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\n","import { combineReducers } from 'redux'\r\nimport app from './App/AppReducer'\r\nimport user from './App/userReducer'\r\nimport drawer from './App/drawerReducer'\r\nimport profile from './App/profileReducer'\r\nimport food from './foods/foodReducers'\r\nimport payment from './payments/paymentReducer'\r\n\r\nexport default combineReducers({\r\n  app,\r\n  user,\r\n  drawer,\r\n  profile,\r\n  food,\r\n  payment\r\n})\r\n","export default (state = {message: \"\", err: \"\"}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase \"SET_MESSAGE\":\r\n\t\t\treturn {message: action.message, err: \"\"}\r\n\t\tcase \"SET_ERROR\":\r\n\t\t\treturn {message: \"\", err: action.message}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}","export default (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t  case 'AUTH':\r\n\t\treturn action.user\r\n\t  case 'DEAUTH':\r\n\t\treturn {}\r\n\t  default:\r\n\t\treturn state\r\n\t}\r\n  }\r\n  ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router, Route, browserHistory } from 'react-router'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\n\nimport feathers from '@feathersjs/client'\nimport rest from '@feathersjs/rest-client'\nimport authentication from '@feathersjs/authentication-client'\nimport superagent from 'superagent'\n\nimport App from './App/App'\nimport SignIn from './signin/SignIn'\nimport Home from './home/home'\nimport Foods from './foods/Foods'\nimport ShopList from './shoplist/shoplist'\nimport Payments from './payments/payments'\n\nimport reducers from './reducers'\nimport { authUser } from './App/AppActions'\n\nconst store = createStore(reducers)\n\nif (process.env.NODE_ENV === \"development\") {\n\tconsole.log('This app is using DEVELOPMENT environment');\n\tconsole.log('REACT_APP_API_URL = ' + process.env.REACT_APP_API_URL);\n\tconsole.log('REACT_APP_OAUTH_URL = ' + process.env.REACT_APP_OAUTH_URL);\n}\nif (process.env.NODE_ENV === \"production\") {\n\tif (!process.env.REACT_APP_API_URL)\n\t\tconsole.error('REACT_APP_API_URL is not set!')\n\tif (!process.env.REACT_APP_OAUTH_URL)\n\t\tconsole.error('REACT_APP_OAUTH_URL is not set!')\n}\n\nconst app = feathers()\n\t.configure(rest(process.env.REACT_APP_API_URL).superagent(superagent))\n\t.configure(authentication({ storage: window.localStorage }))\n\nfunction handlePath(pathname) {\n\tif (pathname === '/signin' || pathname === '/passwordreset') {\n\t\treturn;\n\t}\n\n\t//Get user from Redux state\n\tconst user = store.getState().user;\n\t//If we have no user, none is logged in.\n\tif (!user || !user._id) {\n\t\tbrowserHistory.push('/signin');\n\t\treturn;\n\t}\n\n\t// if (pathname !== \"/home\" || pathname !== \"/signin\" || pathname !== \"/foods\" || pathname !== \"/shoplist\") {\n\t// \tbrowserHistory.push(\"/home\");\n\t// \treturn;\n\t// }\n}\n\nfunction enterHandler() {\n\tconst pathname = window.location.pathname\n\thandlePath(pathname)\n}\n\n\napp.reAuthenticate()\n\t.then(r => {\n\t\t//Populate Redux state with user information if authenticated.\n\t\tstore.dispatch(authUser(r.user))\n\t\tinitRender()\n\t})\n\t.catch(err => {\n\t\tinitRender()\n\t})\n\n\nfunction initRender() {\n\tReactDOM.render((\n\t\t<Provider store={store}>\n\t\t\t<Router history={browserHistory}>\n\t\t\t\t<Route path=\"/\" component={App} onEnter={enterHandler}>\n\t\t\t\t\t<Route path=\"/home\" component={Home} />\n\t\t\t\t\t<Route path=\"/signin\" component={SignIn} />\n\t\t\t\t\t<Route path=\"/foods\" component={Foods} />\n\t\t\t\t\t<Route path=\"/shoplist\" component={ShopList} />\n\t\t\t\t\t<Route path=\"/payments\" component={Payments} />\n\t\t\t\t</Route>\n\t\t\t</Router>\n\t\t</Provider>\n\t), document.getElementById('root'))\n}\n\nexport default app\n"],"sourceRoot":""}